import{$ as Mo,$a as b2,A as mo,Aa as Ft,Ab as Ke,B as Ee,Ba as Fe,Bb as e0,C as fo,Ca as C0,Cb as _9,D as d9,Da as V9,Db as A9,E as f0,Ea as jt,Eb as S9,F as z5,Fa as j,Fb as Ro,G as Z0,Ga as d1,Gb as R9,H as Te,Ha as je,Hb as b9,I as zo,Ia as H9,Ib as N1,J as z0,Ja as Ze,Jb as k9,K as w9,Ka as Ue,Kb as bo,L as Dt,La as qe,Lb as E9,M as x0,Ma as I1,Mb as T9,N as xo,Na as Ho,Nb as qt,O as u9,Oa as L9,Ob as ko,P as p9,Pa as Lo,Pb as Qe,Q as m9,Qa as V5,Qb as I9,R as Ie,Ra as y9,Rb as P9,S as x2,Sa as yo,Sb as w2,T as Pe,Ta as Bo,Tb as D9,U as O1,Ua as d2,Ub as O9,V as H1,Va as i1,Vb as $t,W as f9,Wa as s2,Wb as N9,X as t1,Xa as U0,Xb as F9,Y as t2,Ya as C2,Z as z9,Za as o2,_ as n1,_a as _o,a as k,aa as J,ab as $1,b as u1,ba as D,bb as G1,c as r9,ca as Ot,cb as I,d as Kv,da as De,db as P,e as S,ea as Nt,eb as x1,f as be,fa as I2,fb as L1,g as n9,ga as g1,gb as q,h as l9,ha as e2,hb as G,i as a9,ia as S2,ib as H5,j as i9,ja as M0,jb as q0,k as h9,ka as x9,kb as $0,l as wo,la as x5,lb as Ao,m as uo,ma as R2,mb as B1,n as po,na as M5,nb as t0,o as A2,oa as s1,ob as V2,p as q1,pa as o1,pb as w1,q as m0,qa as Oe,qb as i2,r as X1,ra as C5,rb as $e,s as W,sa as Co,sb as G0,t as Pt,ta as M2,tb as W0,u as ke,ua as T1,ub as Ge,v as v9,va as M9,vb as We,w as g9,wa as Ne,wb as So,x as p1,xa as C9,xb as Zt,y as f5,ya as X2,yb as Ut,z as g2,za as Vo,zb as B9}from"./chunk-FO2WV4TQ.js";var Je=class s{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let o=e.indexOf(":");if(o>0){let c=e.slice(0,o),r=c.toLowerCase(),n=e.slice(o+1).trim();this.maybeSetNormalizedName(c,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,o)=>{this.setHeaderEntries(o,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,o])=>{this.setHeaderEntries(e,o)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new s;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof s?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(t.name,e);let c=(t.op==="a"?this.headers.get(e):void 0)||[];c.push(...o),this.headers.set(e,c);break;case"d":let r=t.value;if(!r)this.headers.delete(e),this.normalizedNames.delete(e);else{let n=this.headers.get(e);if(!n)return;n=n.filter(a=>r.indexOf(a)===-1),n.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,n)}break}}setHeaderEntries(t,e){let o=(Array.isArray(e)?e:[e]).map(r=>r.toString()),c=t.toLowerCase();this.headers.set(c,o),this.maybeSetNormalizedName(t,c)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var K9=function(s){return s[s.Sent=0]="Sent",s[s.UploadProgress=1]="UploadProgress",s[s.ResponseHeader=2]="ResponseHeader",s[s.DownloadProgress=3]="DownloadProgress",s[s.Response=4]="Response",s[s.User=5]="User",s}(K9||{}),Eo=class{constructor(t,e=Q9.Ok,o="OK"){this.headers=t.headers||new Je,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Xe=class s extends Eo{constructor(t={}){super(t),this.type=K9.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new s({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Q9=function(s){return s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Processing=102]="Processing",s[s.EarlyHints=103]="EarlyHints",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultiStatus=207]="MultiStatus",s[s.AlreadyReported=208]="AlreadyReported",s[s.ImUsed=226]="ImUsed",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.Unused=306]="Unused",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.PayloadTooLarge=413]="PayloadTooLarge",s[s.UriTooLong=414]="UriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RangeNotSatisfiable=416]="RangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.MisdirectedRequest=421]="MisdirectedRequest",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.Locked=423]="Locked",s[s.FailedDependency=424]="FailedDependency",s[s.TooEarly=425]="TooEarly",s[s.UpgradeRequired=426]="UpgradeRequired",s[s.PreconditionRequired=428]="PreconditionRequired",s[s.TooManyRequests=429]="TooManyRequests",s[s.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",s[s.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported",s[s.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",s[s.InsufficientStorage=507]="InsufficientStorage",s[s.LoopDetected=508]="LoopDetected",s[s.NotExtended=510]="NotExtended",s[s.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",s}(Q9||{});var Jv=new n1("");var j9="b",Z9="h",U9="s",q9="st",$9="u",G9="rt",Ye=new n1(""),Xv=["GET","HEAD"];function tg(s,t){let u=D(Ye),{isCacheActive:e}=u,o=r9(u,["isCacheActive"]),{transferCache:c,method:r}=s;if(!e||r==="POST"&&!o.includePostRequests&&!c||r!=="POST"&&!Xv.includes(r)||c===!1||o.filter?.(s)===!1)return t(s);let n=D(Fe),a=sg(s),h=n.get(a,null),v=o.includeHeaders;if(typeof c=="object"&&c.includeHeaders&&(v=c.includeHeaders),h){let{[j9]:z,[G9]:y,[Z9]:A,[U9]:R,[q9]:B,[$9]:F}=h,U=z;switch(y){case"arraybuffer":U=new TextEncoder().encode(z).buffer;break;case"blob":U=new Blob([z]);break}let O=new Je(A);return W(new Xe({body:U,headers:O,status:R,statusText:B,url:F}))}let d=$t(D(X2));return t(s).pipe(O1(z=>{z instanceof Xe&&d&&n.set(a,{[j9]:z.body,[Z9]:eg(z.headers,v),[U9]:z.status,[q9]:z.statusText,[$9]:z.url||"",[G9]:s.responseType})}))}function eg(s,t){if(!t)return{};let e={};for(let o of t){let c=s.getAll(o);c!==null&&(e[o]=c)}return e}function W9(s){return[...s.keys()].sort().map(t=>`${t}=${s.getAll(t)}`).join("&")}function sg(s){let{params:t,method:e,responseType:o,url:c}=s,r=W9(t),n=s.serializeBody();n instanceof URLSearchParams?n=W9(n):typeof n!="string"&&(n="");let a=[e,o,c,n,r].join("|"),h=og(a);return h}function og(s){let t=0;for(let e of s)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Y9(s){return[{provide:Ye,useFactory:()=>(qe("NgHttpTransferCache"),k({isCacheActive:!0},s))},{provide:Jv,useValue:tg,multi:!0,deps:[Fe,Ye]},{provide:Zt,multi:!0,useFactory:()=>{let t=D(Ut),e=D(Ye);return()=>{B9(t).then(()=>{e.isCacheActive=!1})}}}]}var Po=class extends b9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Do=class s extends Po{static makeCurrent(){R9(new s)}onAndCancel(t,e,o){return t.addEventListener(e,o),()=>{t.removeEventListener(e,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=rg();return e==null?null:ng(e)}resetBaseElement(){Gt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ko(document.cookie,t)}},Gt=null;function rg(){return Gt=Gt||document.querySelector("base"),Gt?Gt.getAttribute("href"):null}function ng(s){return new URL(s,document.baseURI).pathname}var lg=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})(),Oo=new n1(""),ta=(()=>{let t=class t{constructor(o,c){this._zone=c,this._eventNameToPlugin=new Map,o.forEach(r=>{r.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,c,r){return this._findPluginFor(c).addEventListener(o,c,r)}getZone(){return this._zone}_findPluginFor(o){let c=this._eventNameToPlugin.get(o);if(c)return c;if(c=this._plugins.find(n=>n.supports(o)),!c)throw new H1(5101,!1);return this._eventNameToPlugin.set(o,c),c}};t.\u0275fac=function(c){return new(c||t)(J(Oo),J(I1))},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})(),ts=class{constructor(t){this._doc=t}},To="ng-app-id",ea=(()=>{let t=class t{constructor(o,c,r,n={}){this.doc=o,this.appId=c,this.nonce=r,this.platformId=n,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$t(n),this.resetHostNodes()}addStyles(o){for(let c of o)this.changeUsageCount(c,1)===1&&this.onStyleAdded(c)}removeStyles(o){for(let c of o)this.changeUsageCount(c,-1)<=0&&this.onStyleRemoved(c)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(c=>c.remove()),o.clear());for(let c of this.getAllStyles())this.onStyleRemoved(c);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let c of this.getAllStyles())this.addStyleToHost(o,c)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let c of this.hostNodes)this.addStyleToHost(c,o)}onStyleRemoved(o){let c=this.styleRef;c.get(o)?.elements?.forEach(r=>r.remove()),c.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${To}="${this.appId}"]`);if(o?.length){let c=new Map;return o.forEach(r=>{r.textContent!=null&&c.set(r.textContent,r)}),c}return null}changeUsageCount(o,c){let r=this.styleRef;if(r.has(o)){let n=r.get(o);return n.usage+=c,n.usage}return r.set(o,{usage:c,elements:[]}),c}getStyleElement(o,c){let r=this.styleNodesInDOM,n=r?.get(c);if(n?.parentNode===o)return r.delete(c),n.removeAttribute(To),n;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=c,this.platformIsServer&&a.setAttribute(To,this.appId),o.appendChild(a),a}}addStyleToHost(o,c){let r=this.getStyleElement(o,c),n=this.styleRef,a=n.get(c)?.elements;a?a.push(r):n.set(c,{elements:[r],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};t.\u0275fac=function(c){return new(c||t)(J(N1),J(Ne),J(Ft,8),J(X2))},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})(),Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zo=/%COMP%/g,sa="%COMP%",ag=`_nghost-${sa}`,ig=`_ngcontent-${sa}`,hg=!0,vg=new n1("",{providedIn:"root",factory:()=>hg});function gg(s){return ig.replace(Zo,s)}function dg(s){return ag.replace(Zo,s)}function oa(s,t){return t.map(e=>e.replace(Zo,s))}var es=(()=>{let t=class t{constructor(o,c,r,n,a,h,v,d=null){this.eventManager=o,this.sharedStylesHost=c,this.appId=r,this.removeStylesOnCompDestroy=n,this.doc=a,this.platformId=h,this.ngZone=v,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=$t(h),this.defaultRenderer=new Wt(o,a,v,this.platformIsServer)}createRenderer(o,c){if(!o||!c)return this.defaultRenderer;this.platformIsServer&&c.encapsulation===Nt.ShadowDom&&(c=u1(k({},c),{encapsulation:Nt.Emulated}));let r=this.getOrCreateRenderer(o,c);return r instanceof ss?r.applyToHost(o):r instanceof Kt&&r.applyStyles(),r}getOrCreateRenderer(o,c){let r=this.rendererByCompId,n=r.get(c.id);if(!n){let a=this.doc,h=this.ngZone,v=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,z=this.platformIsServer;switch(c.encapsulation){case Nt.Emulated:n=new ss(v,d,c,this.appId,u,a,h,z);break;case Nt.ShadowDom:return new No(v,d,o,c,a,h,this.nonce,z);default:n=new Kt(v,d,c,u,a,h,z);break}r.set(c.id,n)}return n}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(c){return new(c||t)(J(ta),J(ea),J(Ne),J(vg),J(N1),J(X2),J(I1),J(Ft))},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})(),Wt=class{constructor(t,e,o,c){this.eventManager=t,this.doc=e,this.ngZone=o,this.platformIsServer=c,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Io[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(J9(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(J9(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o=typeof t=="string"?this.doc.querySelector(t):t;if(!o)throw new H1(-5104,!1);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,c){if(c){e=c+":"+e;let r=Io[c];r?t.setAttributeNS(r,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){let c=Io[o];c?t.removeAttributeNS(c,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,c){c&(jt.DashCase|jt.Important)?t.style.setProperty(e,o,c&jt.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&jt.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t!=null&&(t[e]=o)}setValue(t,e){t.nodeValue=e}listen(t,e,o){if(typeof t=="string"&&(t=Ro().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(o))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function J9(s){return s.tagName==="TEMPLATE"&&s.content!==void 0}var No=class extends Wt{constructor(t,e,o,c,r,n,a,h){super(t,r,n,h),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let v=oa(c.id,c.styles);for(let d of v){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kt=class extends Wt{constructor(t,e,o,c,r,n,a,h){super(t,r,n,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=c,this.styles=h?oa(h,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ss=class extends Kt{constructor(t,e,o,c,r,n,a,h){let v=c+"-"+o.id;super(t,e,o,r,n,a,h,v),this.contentAttr=gg(v),this.hostAttr=dg(v)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}},wg=(()=>{let t=class t extends ts{constructor(o){super(o)}supports(o){return!0}addEventListener(o,c,r){return o.addEventListener(c,r,!1),()=>this.removeEventListener(o,c,r)}removeEventListener(o,c,r){return o.removeEventListener(c,r)}};t.\u0275fac=function(c){return new(c||t)(J(N1))},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})(),X9=["alt","control","meta","shift"],ug={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pg={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey},mg=(()=>{let t=class t extends ts{constructor(o){super(o)}supports(o){return t.parseEventName(o)!=null}addEventListener(o,c,r){let n=t.parseEventName(c),a=t.eventCallback(n.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ro().onAndCancel(o,n.domEventName,a))}static parseEventName(o){let c=o.toLowerCase().split("."),r=c.shift();if(c.length===0||!(r==="keydown"||r==="keyup"))return null;let n=t._normalizeKey(c.pop()),a="",h=c.indexOf("code");if(h>-1&&(c.splice(h,1),a="code."),X9.forEach(d=>{let u=c.indexOf(d);u>-1&&(c.splice(u,1),a+=d+".")}),a+=n,c.length!=0||n.length===0)return null;let v={};return v.domEventName=r,v.fullKey=a,v}static matchEventFullKeyCode(o,c){let r=ug[o.key]||o.key,n="";return c.indexOf("code.")>-1&&(r=o.code,n="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),X9.forEach(a=>{if(a!==r){let h=pg[a];h(o)&&(n+=a+".")}}),n+=r,n===c)}static eventCallback(o,c,r){return n=>{t.matchEventFullKeyCode(n,o)&&r.runGuarded(()=>c(n))}}static _normalizeKey(o){return o==="esc"?"escape":o}};t.\u0275fac=function(c){return new(c||t)(J(N1))},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})();function ca(s,t){return _9(k({rootComponent:s},fg(t)))}function fg(s){return{appProviders:[...Vg,...s?.providers??[]],platformProviders:Cg}}function zg(){Do.makeCurrent()}function xg(){return new Co}function Mg(){return M9(document),document}var Cg=[{provide:X2,useValue:D9},{provide:C9,useValue:zg,multi:!0},{provide:N1,useFactory:Mg,deps:[]}];var Vg=[{provide:x9,useValue:"root"},{provide:Co,useFactory:xg,deps:[]},{provide:Oo,useClass:wg,multi:!0,deps:[N1,I1,X2]},{provide:Oo,useClass:mg,multi:!0,deps:[N1]},es,ea,ta,{provide:Ze,useExisting:es},{provide:F9,useClass:lg,deps:[]},[]];var ra=(()=>{let t=class t{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};t.\u0275fac=function(c){return new(c||t)(J(N1))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var Fo=function(s){return s[s.NoHttpTransferCache=0]="NoHttpTransferCache",s[s.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",s}(Fo||{});function na(...s){let t=[],e=new Set,o=e.has(Fo.HttpTransferCacheOptions);for(let{\u0275providers:c,\u0275kind:r}of s)e.add(r),c.length&&t.push(c);return M0([[],A9(),e.has(Fo.NoHttpTransferCache)||o?[]:Y9({}),t])}var e1="primary",v4=Symbol("RouteTitle"),Wo=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function A5(s){return new Wo(s)}function Lg(s,t,e){let o=e.path.split("/");if(o.length>s.length||e.pathMatch==="full"&&(t.hasChildren()||o.length<s.length))return null;let c={};for(let r=0;r<o.length;r++){let n=o[r],a=s[r];if(n.startsWith(":"))c[n.substring(1)]=a;else if(n!==a.path)return null}return{consumed:s.slice(0,o.length),posParams:c}}function yg(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;++e)if(!P2(s[e],t[e]))return!1;return!0}function P2(s,t){let e=s?Ko(s):void 0,o=t?Ko(t):void 0;if(!e||!o||e.length!=o.length)return!1;let c;for(let r=0;r<e.length;r++)if(c=e[r],!ua(s[c],t[c]))return!1;return!0}function Ko(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function ua(s,t){if(Array.isArray(s)&&Array.isArray(t)){if(s.length!==t.length)return!1;let e=[...s].sort(),o=[...t].sort();return e.every((c,r)=>o[r]===c)}else return s===t}function pa(s){return s.length>0?s[s.length-1]:null}function y0(s){return ke(s)?s:We(s)?X1(Promise.resolve(s)):W(s)}var Bg={exact:fa,subset:za},ma={exact:_g,subset:Ag,ignored:()=>!0};function la(s,t,e){return Bg[e.paths](s.root,t.root,e.matrixParams)&&ma[e.queryParams](s.queryParams,t.queryParams)&&!(e.fragment==="exact"&&s.fragment!==t.fragment)}function _g(s,t){return P2(s,t)}function fa(s,t,e){if(!Q0(s.segments,t.segments)||!rs(s.segments,t.segments,e)||s.numberOfChildren!==t.numberOfChildren)return!1;for(let o in t.children)if(!s.children[o]||!fa(s.children[o],t.children[o],e))return!1;return!0}function Ag(s,t){return Object.keys(t).length<=Object.keys(s).length&&Object.keys(t).every(e=>ua(s[e],t[e]))}function za(s,t,e){return xa(s,t,t.segments,e)}function xa(s,t,e,o){if(s.segments.length>e.length){let c=s.segments.slice(0,e.length);return!(!Q0(c,e)||t.hasChildren()||!rs(c,e,o))}else if(s.segments.length===e.length){if(!Q0(s.segments,e)||!rs(s.segments,e,o))return!1;for(let c in t.children)if(!s.children[c]||!za(s.children[c],t.children[c],o))return!1;return!0}else{let c=e.slice(0,s.segments.length),r=e.slice(s.segments.length);return!Q0(s.segments,c)||!rs(s.segments,c,o)||!s.children[e1]?!1:xa(s.children[e1],t,r,o)}}function rs(s,t,e){return t.every((o,c)=>ma[e](s[c].parameters,o.parameters))}var V0=class{constructor(t=new f1([],{}),e={},o=null){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap??=A5(this.queryParams),this._queryParamMap}toString(){return bg.serialize(this)}},f1=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ns(this)}},K0=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=A5(this.parameters),this._parameterMap}toString(){return Ca(this)}};function Sg(s,t){return Q0(s,t)&&s.every((e,o)=>P2(e.parameters,t[o].parameters))}function Q0(s,t){return s.length!==t.length?!1:s.every((e,o)=>e.path===t[o].path)}function Rg(s,t){let e=[];return Object.entries(s.children).forEach(([o,c])=>{o===e1&&(e=e.concat(t(c,o)))}),Object.entries(s.children).forEach(([o,c])=>{o!==e1&&(e=e.concat(t(c,o)))}),e}var g4=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:()=>new s4,providedIn:"root"});let s=t;return s})(),s4=class{parse(t){let e=new Yo(t);return new V0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Qt(t.root,!0)}`,o=Tg(t.queryParams),c=typeof t.fragment=="string"?`#${kg(t.fragment)}`:"";return`${e}${o}${c}`}},bg=new s4;function ns(s){return s.segments.map(t=>Ca(t)).join("/")}function Qt(s,t){if(!s.hasChildren())return ns(s);if(t){let e=s.children[e1]?Qt(s.children[e1],!1):"",o=[];return Object.entries(s.children).forEach(([c,r])=>{c!==e1&&o.push(`${c}:${Qt(r,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}else{let e=Rg(s,(o,c)=>c===e1?[Qt(s.children[e1],!1)]:[`${c}:${Qt(o,!1)}`]);return Object.keys(s.children).length===1&&s.children[e1]!=null?`${ns(s)}/${e[0]}`:`${ns(s)}/(${e.join("//")})`}}function Ma(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function os(s){return Ma(s).replace(/%3B/gi,";")}function kg(s){return encodeURI(s)}function Qo(s){return Ma(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ls(s){return decodeURIComponent(s)}function aa(s){return ls(s.replace(/\+/g,"%20"))}function Ca(s){return`${Qo(s.path)}${Eg(s.parameters)}`}function Eg(s){return Object.entries(s).map(([t,e])=>`;${Qo(t)}=${Qo(e)}`).join("")}function Tg(s){let t=Object.entries(s).map(([e,o])=>Array.isArray(o)?o.map(c=>`${os(e)}=${os(c)}`).join("&"):`${os(e)}=${os(o)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Ig=/^[^\/()?;#]+/;function Uo(s){let t=s.match(Ig);return t?t[0]:""}var Pg=/^[^\/()?;=#]+/;function Dg(s){let t=s.match(Pg);return t?t[0]:""}var Og=/^[^=?&#]+/;function Ng(s){let t=s.match(Og);return t?t[0]:""}var Fg=/^[^&#]+/;function jg(s){let t=s.match(Fg);return t?t[0]:""}var Yo=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new f1([],{}):new f1([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[e1]=new f1(t,e)),o}parseSegment(){let t=Uo(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new H1(4009,!1);return this.capture(t),new K0(ls(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Dg(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let c=Uo(this.remaining);c&&(o=c,this.capture(o))}t[ls(e)]=ls(o)}parseQueryParam(t){let e=Ng(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let n=jg(this.remaining);n&&(o=n,this.capture(o))}let c=aa(e),r=aa(o);if(t.hasOwnProperty(c)){let n=t[c];Array.isArray(n)||(n=[n],t[c]=n),n.push(r)}else t[c]=r}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Uo(this.remaining),c=this.remaining[o.length];if(c!=="/"&&c!==")"&&c!==";")throw new H1(4010,!1);let r;o.indexOf(":")>-1?(r=o.slice(0,o.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=e1);let n=this.parseChildren();e[r]=Object.keys(n).length===1?n[e1]:new f1([],n),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new H1(4011,!1)}};function Va(s){return s.segments.length>0?new f1([],{[e1]:s}):s}function Ha(s){let t={};for(let[o,c]of Object.entries(s.children)){let r=Ha(c);if(o===e1&&r.segments.length===0&&r.hasChildren())for(let[n,a]of Object.entries(r.children))t[n]=a;else(r.segments.length>0||r.hasChildren())&&(t[o]=r)}let e=new f1(s.segments,t);return Zg(e)}function Zg(s){if(s.numberOfChildren===1&&s.children[e1]){let t=s.children[e1];return new f1(s.segments.concat(t.segments),t.children)}return s}function S5(s){return s instanceof V0}function Ug(s,t,e=null,o=null){let c=La(s);return ya(c,t,e,o)}function La(s){let t;function e(r){let n={};for(let h of r.children){let v=e(h);n[h.outlet]=v}let a=new f1(r.url,n);return r===s&&(t=a),a}let o=e(s.root),c=Va(o);return t??c}function ya(s,t,e,o){let c=s;for(;c.parent;)c=c.parent;if(t.length===0)return qo(c,c,c,e,o);let r=qg(t);if(r.toRoot())return qo(c,c,new f1([],{}),e,o);let n=$g(r,c,s),a=n.processChildren?Xt(n.segmentGroup,n.index,r.commands):_a(n.segmentGroup,n.index,r.commands);return qo(c,n.segmentGroup,a,e,o)}function as(s){return typeof s=="object"&&s!=null&&!s.outlets&&!s.segmentPath}function o4(s){return typeof s=="object"&&s!=null&&s.outlets}function qo(s,t,e,o,c){let r={};o&&Object.entries(o).forEach(([h,v])=>{r[h]=Array.isArray(v)?v.map(d=>`${d}`):`${v}`});let n;s===t?n=e:n=Ba(s,t,e);let a=Va(Ha(n));return new V0(a,r,c)}function Ba(s,t,e){let o={};return Object.entries(s.children).forEach(([c,r])=>{r===t?o[c]=e:o[c]=Ba(r,t,e)}),new f1(s.segments,o)}var is=class{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&as(o[0]))throw new H1(4003,!1);let c=o.find(o4);if(c&&c!==pa(o))throw new H1(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qg(s){if(typeof s[0]=="string"&&s.length===1&&s[0]==="/")return new is(!0,0,s);let t=0,e=!1,o=s.reduce((c,r,n)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([h,v])=>{a[h]=typeof v=="string"?v.split("/"):v}),[...c,{outlets:a}]}if(r.segmentPath)return[...c,r.segmentPath]}return typeof r!="string"?[...c,r]:n===0?(r.split("/").forEach((a,h)=>{h==0&&a==="."||(h==0&&a===""?e=!0:a===".."?t++:a!=""&&c.push(a))}),c):[...c,r]},[]);return new is(e,t,o)}var B5=class{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}};function $g(s,t,e){if(s.isAbsolute)return new B5(t,!0,0);if(!e)return new B5(t,!1,NaN);if(e.parent===null)return new B5(e,!0,0);let o=as(s.commands[0])?0:1,c=e.segments.length-1+o;return Gg(e,c,s.numberOfDoubleDots)}function Gg(s,t,e){let o=s,c=t,r=e;for(;r>c;){if(r-=c,o=o.parent,!o)throw new H1(4005,!1);c=o.segments.length}return new B5(o,!1,c-r)}function Wg(s){return o4(s[0])?s[0].outlets:{[e1]:s}}function _a(s,t,e){if(s??=new f1([],{}),s.segments.length===0&&s.hasChildren())return Xt(s,t,e);let o=Kg(s,t,e),c=e.slice(o.commandIndex);if(o.match&&o.pathIndex<s.segments.length){let r=new f1(s.segments.slice(0,o.pathIndex),{});return r.children[e1]=new f1(s.segments.slice(o.pathIndex),s.children),Xt(r,0,c)}else return o.match&&c.length===0?new f1(s.segments,{}):o.match&&!s.hasChildren()?Jo(s,t,e):o.match?Xt(s,0,c):Jo(s,t,e)}function Xt(s,t,e){if(e.length===0)return new f1(s.segments,{});{let o=Wg(e),c={};if(Object.keys(o).some(r=>r!==e1)&&s.children[e1]&&s.numberOfChildren===1&&s.children[e1].segments.length===0){let r=Xt(s.children[e1],t,e);return new f1(s.segments,r.children)}return Object.entries(o).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(c[r]=_a(s.children[r],t,n))}),Object.entries(s.children).forEach(([r,n])=>{o[r]===void 0&&(c[r]=n)}),new f1(s.segments,c)}}function Kg(s,t,e){let o=0,c=t,r={match:!1,pathIndex:0,commandIndex:0};for(;c<s.segments.length;){if(o>=e.length)return r;let n=s.segments[c],a=e[o];if(o4(a))break;let h=`${a}`,v=o<e.length-1?e[o+1]:null;if(c>0&&h===void 0)break;if(h&&v&&typeof v=="object"&&v.outlets===void 0){if(!ha(h,v,n))return r;o+=2}else{if(!ha(h,{},n))return r;o++}c++}return{match:!0,pathIndex:c,commandIndex:o}}function Jo(s,t,e){let o=s.segments.slice(0,t),c=0;for(;c<e.length;){let r=e[c];if(o4(r)){let h=Qg(r.outlets);return new f1(o,h)}if(c===0&&as(e[0])){let h=s.segments[t];o.push(new K0(h.path,ia(e[0]))),c++;continue}let n=o4(r)?r.outlets[e1]:`${r}`,a=c<e.length-1?e[c+1]:null;n&&a&&as(a)?(o.push(new K0(n,ia(a))),c+=2):(o.push(new K0(n,{})),c++)}return new f1(o,{})}function Qg(s){let t={};return Object.entries(s).forEach(([e,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(t[e]=Jo(new f1([],{}),0,o))}),t}function ia(s){let t={};return Object.entries(s).forEach(([e,o])=>t[e]=`${o}`),t}function ha(s,t,e){return s==e.path&&P2(t,e.parameters)}var t4="imperative",F1=function(s){return s[s.NavigationStart=0]="NavigationStart",s[s.NavigationEnd=1]="NavigationEnd",s[s.NavigationCancel=2]="NavigationCancel",s[s.NavigationError=3]="NavigationError",s[s.RoutesRecognized=4]="RoutesRecognized",s[s.ResolveStart=5]="ResolveStart",s[s.ResolveEnd=6]="ResolveEnd",s[s.GuardsCheckStart=7]="GuardsCheckStart",s[s.GuardsCheckEnd=8]="GuardsCheckEnd",s[s.RouteConfigLoadStart=9]="RouteConfigLoadStart",s[s.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",s[s.ChildActivationStart=11]="ChildActivationStart",s[s.ChildActivationEnd=12]="ChildActivationEnd",s[s.ActivationStart=13]="ActivationStart",s[s.ActivationEnd=14]="ActivationEnd",s[s.Scroll=15]="Scroll",s[s.NavigationSkipped=16]="NavigationSkipped",s}(F1||{}),H2=class{constructor(t,e){this.id=t,this.url=e}},R5=class extends H2{constructor(t,e,o="imperative",c=null){super(t,e),this.type=F1.NavigationStart,this.navigationTrigger=o,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},s0=class extends H2{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o,this.type=F1.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},p2=function(s){return s[s.Redirect=0]="Redirect",s[s.SupersededByNewNavigation=1]="SupersededByNewNavigation",s[s.NoDataFromResolver=2]="NoDataFromResolver",s[s.GuardRejected=3]="GuardRejected",s}(p2||{}),hs=function(s){return s[s.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",s[s.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",s}(hs||{}),H0=class extends H2{constructor(t,e,o,c){super(t,e),this.reason=o,this.code=c,this.type=F1.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},L0=class extends H2{constructor(t,e,o,c){super(t,e),this.reason=o,this.code=c,this.type=F1.NavigationSkipped}},c4=class extends H2{constructor(t,e,o,c){super(t,e),this.error=o,this.target=c,this.type=F1.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vs=class extends H2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xo=class extends H2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tc=class extends H2{constructor(t,e,o,c,r){super(t,e),this.urlAfterRedirects=o,this.state=c,this.shouldActivate=r,this.type=F1.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ec=class extends H2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sc=class extends H2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oc=class{constructor(t){this.route=t,this.type=F1.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cc=class{constructor(t){this.route=t,this.type=F1.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rc=class{constructor(t){this.snapshot=t,this.type=F1.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nc=class{constructor(t){this.snapshot=t,this.type=F1.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lc=class{constructor(t){this.snapshot=t,this.type=F1.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ac=class{constructor(t){this.snapshot=t,this.type=F1.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gs=class{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o,this.type=F1.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},r4=class{},n4=class{constructor(t){this.url=t}};var ic=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new d4,this.attachRef=null}},d4=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(o,c){let r=this.getOrCreateContext(o);r.outlet=c,this.contexts.set(o,r)}onChildOutletDestroyed(o){let c=this.getContext(o);c&&(c.outlet=null,c.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let c=this.getContext(o);return c||(c=new ic,this.contexts.set(o,c)),c}getContext(o){return this.contexts.get(o)||null}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),ds=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=hc(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){let e=hc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=vc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(c=>c.value).filter(c=>c!==t)}pathFromRoot(t){return vc(t,this._root).map(e=>e.value)}};function hc(s,t){if(s===t.value)return t;for(let e of t.children){let o=hc(s,e);if(o)return o}return null}function vc(s,t){if(s===t.value)return[t];for(let e of t.children){let o=vc(s,e);if(o.length)return o.unshift(t),o}return[]}var u2=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function y5(s){let t={};return s&&s.children.forEach(e=>t[e.value.outlet]=e),t}var ws=class extends ds{constructor(t,e){super(t),this.snapshot=e,Mc(this,t)}toString(){return this.snapshot.toString()}};function Aa(s){let t=Yg(s),e=new q1([new K0("",{})]),o=new q1({}),c=new q1({}),r=new q1({}),n=new q1(""),a=new o0(e,o,r,n,c,e1,s,t.root);return a.snapshot=t.root,new ws(new u2(a,[]),t)}function Yg(s){let t={},e={},o={},c="",r=new l4([],t,o,c,e,e1,s,null,{});return new us("",new u2(r,[]))}var o0=class{constructor(t,e,o,c,r,n,a,h){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=o,this.fragmentSubject=c,this.dataSubject=r,this.outlet=n,this.component=a,this._futureSnapshot=h,this.title=this.dataSubject?.pipe(p1(v=>v[v4]))??W(void 0),this.url=t,this.params=e,this.queryParams=o,this.fragment=c,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(p1(t=>A5(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(p1(t=>A5(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xc(s,t,e="emptyOnly"){let o,{routeConfig:c}=s;return t!==null&&(e==="always"||c?.path===""||!t.component&&!t.routeConfig?.loadComponent)?o={params:k(k({},t.params),s.params),data:k(k({},t.data),s.data),resolve:k(k(k(k({},s.data),t.data),c?.data),s._resolvedData)}:o={params:k({},s.params),data:k({},s.data),resolve:k(k({},s.data),s._resolvedData??{})},c&&Ra(c)&&(o.resolve[v4]=c.title),o}var l4=class{get title(){return this.data?.[v4]}constructor(t,e,o,c,r,n,a,h,v){this.url=t,this.params=e,this.queryParams=o,this.fragment=c,this.data=r,this.outlet=n,this.component=a,this.routeConfig=h,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=A5(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=A5(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(o=>o.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},us=class extends ds{constructor(t,e){super(e),this.url=t,Mc(this,e)}toString(){return Sa(this._root)}};function Mc(s,t){t.value._routerState=s,t.children.forEach(e=>Mc(s,e))}function Sa(s){let t=s.children.length>0?` { ${s.children.map(Sa).join(", ")} } `:"";return`${s.value}${t}`}function $o(s){if(s.snapshot){let t=s.snapshot,e=s._futureSnapshot;s.snapshot=e,P2(t.queryParams,e.queryParams)||s.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&s.fragmentSubject.next(e.fragment),P2(t.params,e.params)||s.paramsSubject.next(e.params),yg(t.url,e.url)||s.urlSubject.next(e.url),P2(t.data,e.data)||s.dataSubject.next(e.data)}else s.snapshot=s._futureSnapshot,s.dataSubject.next(s._futureSnapshot.data)}function gc(s,t){let e=P2(s.params,t.params)&&Sg(s.url,t.url),o=!s.parent!=!t.parent;return e&&!o&&(!s.parent||gc(s.parent,t.parent))}function Ra(s){return typeof s.title=="string"||s.title===null}var w4=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=e1,this.activateEvents=new T1,this.deactivateEvents=new T1,this.attachEvents=new T1,this.detachEvents=new T1,this.parentContexts=D(d4),this.location=D(L9),this.changeDetector=D(e0),this.environmentInjector=D(x5),this.inputBinder=D(Ms,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:c,previousValue:r}=o.name;if(c)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H1(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H1(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H1(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,c){this.activated=o,this._activatedRoute=c,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,c){if(this.isActivated)throw new H1(4013,!1);this._activatedRoute=o;let r=this.location,a=o.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,v=new dc(o,h,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:v,environmentInjector:c??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=S2({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[M5]});let s=t;return s})(),dc=class s{__ngOutletInjector(t){return new s(this.route,this.childContexts,t)}constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===o0?this.route:t===d4?this.childContexts:this.parent.get(t,e)}},Ms=new n1(""),va=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){let{activatedRoute:c}=o,r=f5([c.queryParams,c.params,c.data]).pipe(x2(([n,a,h],v)=>(h=k(k(k({},n),a),h),v===0?W(h):Promise.resolve(h)))).subscribe(n=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==c||c.component===null){this.unsubscribeFromRouteData(o);return}let a=S9(c.component);if(!a){this.unsubscribeFromRouteData(o);return}for(let{templateName:h}of a.inputs)o.activatedComponentRef.setInput(h,n[h])});this.outletDataSubscriptions.set(o,r)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})();function Jg(s,t,e){let o=a4(s,t._root,e?e._root:void 0);return new ws(o,t)}function a4(s,t,e){if(e&&s.shouldReuseRoute(t.value,e.value.snapshot)){let o=e.value;o._futureSnapshot=t.value;let c=Xg(s,t,e);return new u2(o,c)}else{if(s.shouldAttach(t.value)){let r=s.retrieve(t.value);if(r!==null){let n=r.route;return n.value._futureSnapshot=t.value,n.children=t.children.map(a=>a4(s,a)),n}}let o=td(t.value),c=t.children.map(r=>a4(s,r));return new u2(o,c)}}function Xg(s,t,e){return t.children.map(o=>{for(let c of e.children)if(s.shouldReuseRoute(o.value,c.value.snapshot))return a4(s,o,c);return a4(s,o)})}function td(s){return new o0(new q1(s.url),new q1(s.params),new q1(s.queryParams),new q1(s.fragment),new q1(s.data),s.outlet,s.component,s)}var ba="ngNavigationCancelingError";function ka(s,t){let{redirectTo:e,navigationBehaviorOptions:o}=S5(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,c=Ea(!1,p2.Redirect);return c.url=e,c.navigationBehaviorOptions=o,c}function Ea(s,t){let e=new Error(`NavigationCancelingError: ${s||""}`);return e[ba]=!0,e.cancellationCode=t,e}function ed(s){return Ta(s)&&S5(s.url)}function Ta(s){return!!s&&s[ba]}var sd=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=g1({type:t,selectors:[["ng-component"]],standalone:!0,features:[w1],decls:1,vars:0,template:function(c,r){c&1&&x1(0,"router-outlet")},dependencies:[w4],encapsulation:2});let s=t;return s})();function od(s,t){return s.providers&&!s._injector&&(s._injector=yo(s.providers,t,`Route: ${s.path}`)),s._injector??t}function Cc(s){let t=s.children&&s.children.map(Cc),e=t?u1(k({},s),{children:t}):k({},s);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==e1&&(e.component=sd),e}function D2(s){return s.outlet||e1}function cd(s,t){let e=s.filter(o=>D2(o)===t);return e.push(...s.filter(o=>D2(o)!==t)),e}function u4(s){if(!s)return null;if(s.routeConfig?._injector)return s.routeConfig._injector;for(let t=s.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var rd=(s,t,e,o)=>p1(c=>(new wc(t,c.targetRouterState,c.currentRouterState,e,o).activate(s),c)),wc=class{constructor(t,e,o,c,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=c,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),$o(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){let c=y5(e);t.children.forEach(r=>{let n=r.value.outlet;this.deactivateRoutes(r,c[n],o),delete c[n]}),Object.values(c).forEach(r=>{this.deactivateRouteAndItsChildren(r,o)})}deactivateRoutes(t,e,o){let c=t.value,r=e?e.value:null;if(c===r)if(c.component){let n=o.getContext(c.outlet);n&&this.deactivateChildRoutes(t,e,n.children)}else this.deactivateChildRoutes(t,e,o);else r&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let o=e.getContext(t.value.outlet),c=o&&t.value.component?o.children:e,r=y5(t);for(let n of Object.values(r))this.deactivateRouteAndItsChildren(n,c);if(o&&o.outlet){let n=o.outlet.detach(),a=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:n,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let o=e.getContext(t.value.outlet),c=o&&t.value.component?o.children:e,r=y5(t);for(let n of Object.values(r))this.deactivateRouteAndItsChildren(n,c);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(t,e,o){let c=y5(e);t.children.forEach(r=>{this.activateRoutes(r,c[r.value.outlet],o),this.forwardEvent(new ac(r.value.snapshot))}),t.children.length&&this.forwardEvent(new nc(t.value.snapshot))}activateRoutes(t,e,o){let c=t.value,r=e?e.value:null;if($o(c),c===r)if(c.component){let n=o.getOrCreateContext(c.outlet);this.activateChildRoutes(t,e,n.children)}else this.activateChildRoutes(t,e,o);else if(c.component){let n=o.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){let a=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),n.children.onOutletReAttached(a.contexts),n.attachRef=a.componentRef,n.route=a.route.value,n.outlet&&n.outlet.attach(a.componentRef,a.route.value),$o(a.route.value),this.activateChildRoutes(t,null,n.children)}else{let a=u4(c.snapshot);n.attachRef=null,n.route=c,n.injector=a,n.outlet&&n.outlet.activateWith(c,n.injector),this.activateChildRoutes(t,null,n.children)}}else this.activateChildRoutes(t,null,o)}},ps=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},_5=class{constructor(t,e){this.component=t,this.route=e}};function nd(s,t,e){let o=s._root,c=t?t._root:null;return Yt(o,c,e,[o.value])}function ld(s){let t=s.routeConfig?s.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:s,guards:t}}function k5(s,t){let e=Symbol(),o=t.get(s,e);return o===e?typeof s=="function"&&!z9(s)?s:t.get(s):o}function Yt(s,t,e,o,c={canDeactivateChecks:[],canActivateChecks:[]}){let r=y5(t);return s.children.forEach(n=>{ad(n,r[n.value.outlet],e,o.concat([n.value]),c),delete r[n.value.outlet]}),Object.entries(r).forEach(([n,a])=>e4(a,e.getContext(n),c)),c}function ad(s,t,e,o,c={canDeactivateChecks:[],canActivateChecks:[]}){let r=s.value,n=t?t.value:null,a=e?e.getContext(s.value.outlet):null;if(n&&r.routeConfig===n.routeConfig){let h=id(n,r,r.routeConfig.runGuardsAndResolvers);h?c.canActivateChecks.push(new ps(o)):(r.data=n.data,r._resolvedData=n._resolvedData),r.component?Yt(s,t,a?a.children:null,o,c):Yt(s,t,e,o,c),h&&a&&a.outlet&&a.outlet.isActivated&&c.canDeactivateChecks.push(new _5(a.outlet.component,n))}else n&&e4(t,a,c),c.canActivateChecks.push(new ps(o)),r.component?Yt(s,null,a?a.children:null,o,c):Yt(s,null,e,o,c);return c}function id(s,t,e){if(typeof e=="function")return e(s,t);switch(e){case"pathParamsChange":return!Q0(s.url,t.url);case"pathParamsOrQueryParamsChange":return!Q0(s.url,t.url)||!P2(s.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gc(s,t)||!P2(s.queryParams,t.queryParams);case"paramsChange":default:return!gc(s,t)}}function e4(s,t,e){let o=y5(s),c=s.value;Object.entries(o).forEach(([r,n])=>{c.component?t?e4(n,t.children.getContext(r),e):e4(n,null,e):e4(n,t,e)}),c.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new _5(t.outlet.component,c)):e.canDeactivateChecks.push(new _5(null,c)):e.canDeactivateChecks.push(new _5(null,c))}function p4(s){return typeof s=="function"}function hd(s){return typeof s=="boolean"}function vd(s){return s&&p4(s.canLoad)}function gd(s){return s&&p4(s.canActivate)}function dd(s){return s&&p4(s.canActivateChild)}function wd(s){return s&&p4(s.canDeactivate)}function ud(s){return s&&p4(s.canMatch)}function Ia(s){return s instanceof v9||s?.name==="EmptyError"}var cs=Symbol("INITIAL_VALUE");function b5(){return x2(s=>f5(s.map(t=>t.pipe(z0(1),Ie(cs)))).pipe(p1(t=>{for(let e of t)if(e!==!0){if(e===cs)return cs;if(e===!1||e instanceof V0)return e}return!0}),f0(t=>t!==cs),z0(1)))}function pd(s,t){return g2(e=>{let{targetSnapshot:o,currentSnapshot:c,guards:{canActivateChecks:r,canDeactivateChecks:n}}=e;return n.length===0&&r.length===0?W(u1(k({},e),{guardsResult:!0})):md(n,o,c,s).pipe(g2(a=>a&&hd(a)?fd(o,r,s,t):W(a)),p1(a=>u1(k({},e),{guardsResult:a})))})}function md(s,t,e,o){return X1(s).pipe(g2(c=>Vd(c.component,c.route,e,t,o)),x0(c=>c!==!0,!0))}function fd(s,t,e,o){return X1(t).pipe(Z0(c=>Ee(xd(c.route.parent,o),zd(c.route,o),Cd(s,c.path,e),Md(s,c.route,e))),x0(c=>c!==!0,!0))}function zd(s,t){return s!==null&&t&&t(new lc(s)),W(!0)}function xd(s,t){return s!==null&&t&&t(new rc(s)),W(!0)}function Md(s,t,e){let o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||o.length===0)return W(!0);let c=o.map(r=>fo(()=>{let n=u4(t)??e,a=k5(r,n),h=gd(a)?a.canActivate(t,s):R2(n,()=>a(t,s));return y0(h).pipe(x0())}));return W(c).pipe(b5())}function Cd(s,t,e){let o=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(n=>ld(n)).filter(n=>n!==null).map(n=>fo(()=>{let a=n.guards.map(h=>{let v=u4(n.node)??e,d=k5(h,v),u=dd(d)?d.canActivateChild(o,s):R2(v,()=>d(o,s));return y0(u).pipe(x0())});return W(a).pipe(b5())}));return W(r).pipe(b5())}function Vd(s,t,e,o,c){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return W(!0);let n=r.map(a=>{let h=u4(t)??c,v=k5(a,h),d=wd(v)?v.canDeactivate(s,t,e,o):R2(h,()=>v(s,t,e,o));return y0(d).pipe(x0())});return W(n).pipe(b5())}function Hd(s,t,e,o){let c=t.canLoad;if(c===void 0||c.length===0)return W(!0);let r=c.map(n=>{let a=k5(n,s),h=vd(a)?a.canLoad(t,e):R2(s,()=>a(t,e));return y0(h)});return W(r).pipe(b5(),Pa(o))}function Pa(s){return h9(O1(t=>{if(S5(t))throw ka(s,t)}),p1(t=>t===!0))}function Ld(s,t,e,o){let c=t.canMatch;if(!c||c.length===0)return W(!0);let r=c.map(n=>{let a=k5(n,s),h=ud(a)?a.canMatch(t,e):R2(s,()=>a(t,e));return y0(h)});return W(r).pipe(b5(),Pa(o))}var i4=class{constructor(t){this.segmentGroup=t||null}},ms=class extends Error{constructor(t){super(),this.urlTree=t}};function L5(s){return Pt(new i4(s))}function yd(s){return Pt(new H1(4e3,!1))}function Bd(s){return Pt(Ea(!1,p2.GuardRejected))}var uc=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let o=[],c=e.root;for(;;){if(o=o.concat(c.segments),c.numberOfChildren===0)return W(o);if(c.numberOfChildren>1||!c.children[e1])return yd(t.redirectTo);c=c.children[e1]}}applyRedirectCommands(t,e,o){let c=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,o);if(e.startsWith("/"))throw new ms(c);return c}applyRedirectCreateUrlTree(t,e,o,c){let r=this.createSegmentGroup(t,e.root,o,c);return new V0(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let o={};return Object.entries(t).forEach(([c,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);o[c]=e[a]}else o[c]=r}),o}createSegmentGroup(t,e,o,c){let r=this.createSegments(t,e.segments,o,c),n={};return Object.entries(e.children).forEach(([a,h])=>{n[a]=this.createSegmentGroup(t,h,o,c)}),new f1(r,n)}createSegments(t,e,o,c){return e.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,c):this.findOrReturn(r,o))}findPosParam(t,e,o){let c=o[e.path.substring(1)];if(!c)throw new H1(4001,!1);return c}findOrReturn(t,e){let o=0;for(let c of e){if(c.path===t.path)return e.splice(o),c;o++}return t}},pc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _d(s,t,e,o,c){let r=Vc(s,t,e);return r.matched?(o=od(t,o),Ld(o,t,e,c).pipe(p1(n=>n===!0?r:k({},pc)))):W(r)}function Vc(s,t,e){if(t.path==="**")return Ad(e);if(t.path==="")return t.pathMatch==="full"&&(s.hasChildren()||e.length>0)?k({},pc):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let c=(t.matcher||Lg)(e,s,t);if(!c)return k({},pc);let r={};Object.entries(c.posParams??{}).forEach(([a,h])=>{r[a]=h.path});let n=c.consumed.length>0?k(k({},r),c.consumed[c.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:c.consumed,remainingSegments:e.slice(c.consumed.length),parameters:n,positionalParamSegments:c.posParams??{}}}function Ad(s){return{matched:!0,parameters:s.length>0?pa(s).parameters:{},consumedSegments:s,remainingSegments:[],positionalParamSegments:{}}}function ga(s,t,e,o){return e.length>0&&bd(s,e,o)?{segmentGroup:new f1(t,Rd(o,new f1(e,s.children))),slicedSegments:[]}:e.length===0&&kd(s,e,o)?{segmentGroup:new f1(s.segments,Sd(s,e,o,s.children)),slicedSegments:e}:{segmentGroup:new f1(s.segments,s.children),slicedSegments:e}}function Sd(s,t,e,o){let c={};for(let r of e)if(Cs(s,t,r)&&!o[D2(r)]){let n=new f1([],{});c[D2(r)]=n}return k(k({},o),c)}function Rd(s,t){let e={};e[e1]=t;for(let o of s)if(o.path===""&&D2(o)!==e1){let c=new f1([],{});e[D2(o)]=c}return e}function bd(s,t,e){return e.some(o=>Cs(s,t,o)&&D2(o)!==e1)}function kd(s,t,e){return e.some(o=>Cs(s,t,o))}function Cs(s,t,e){return(s.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Ed(s,t,e,o){return D2(s)!==o&&(o===e1||!Cs(t,e,s))?!1:Vc(t,s,e).matched}function Td(s,t,e){return t.length===0&&!s.children[e]}var mc=class{};function Id(s,t,e,o,c,r,n="emptyOnly"){return new fc(s,t,e,o,c,n,r).recognize()}var Pd=31,fc=class{constructor(t,e,o,c,r,n,a){this.injector=t,this.configLoader=e,this.rootComponentType=o,this.config=c,this.urlTree=r,this.paramsInheritanceStrategy=n,this.urlSerializer=a,this.applyRedirects=new uc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new H1(4002,`'${t.segmentGroup}'`)}recognize(){let t=ga(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(p1(e=>{let o=new l4([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,{},e1,this.rootComponentType,null,{}),c=new u2(o,e),r=new us("",c),n=Ug(o,[],this.urlTree.queryParams,this.urlTree.fragment);return n.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(n),this.inheritParamsAndData(r._root,null),{state:r,tree:n}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,e1).pipe(z5(o=>{if(o instanceof ms)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof i4?this.noMatchError(o):o}))}inheritParamsAndData(t,e){let o=t.value,c=xc(o,e,this.paramsInheritanceStrategy);o.params=Object.freeze(c.params),o.data=Object.freeze(c.data),t.children.forEach(r=>this.inheritParamsAndData(r,o))}processSegmentGroup(t,e,o,c){return o.segments.length===0&&o.hasChildren()?this.processChildren(t,e,o):this.processSegment(t,e,o,o.segments,c,!0).pipe(p1(r=>r instanceof u2?[r]:[]))}processChildren(t,e,o){let c=[];for(let r of Object.keys(o.children))r==="primary"?c.unshift(r):c.push(r);return X1(c).pipe(Z0(r=>{let n=o.children[r],a=cd(e,r);return this.processSegmentGroup(t,a,n,r)}),p9((r,n)=>(r.push(...n),r)),zo(null),u9(),g2(r=>{if(r===null)return L5(o);let n=Da(r);return Dd(n),W(n)}))}processSegment(t,e,o,c,r,n){return X1(e).pipe(Z0(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,o,c,r,n).pipe(z5(h=>{if(h instanceof i4)return W(null);throw h}))),x0(a=>!!a),z5(a=>{if(Ia(a))return Td(o,c,r)?W(new mc):L5(o);throw a}))}processSegmentAgainstRoute(t,e,o,c,r,n,a){return Ed(o,c,r,n)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(t,c,o,r,n):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,c,e,o,r,n):L5(c):L5(c)}expandSegmentAgainstRouteUsingRedirect(t,e,o,c,r,n){let{matched:a,consumedSegments:h,positionalParamSegments:v,remainingSegments:d}=Vc(e,c,r);if(!a)return L5(e);c.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pd&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(h,c.redirectTo,v);return this.applyRedirects.lineralizeSegments(c,u).pipe(g2(z=>this.processSegment(t,o,e,z.concat(d),n,!1)))}matchSegmentAgainstRoute(t,e,o,c,r){let n=_d(e,o,c,t,this.urlSerializer);return o.path==="**"&&(e.children={}),n.pipe(x2(a=>a.matched?(t=o._injector??t,this.getChildConfig(t,o,c).pipe(x2(({routes:h})=>{let v=o._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:z}=a,y=new l4(d,z,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Nd(o),D2(o),o.component??o._loadedComponent??null,o,Fd(o)),{segmentGroup:A,slicedSegments:R}=ga(e,d,u,h);if(R.length===0&&A.hasChildren())return this.processChildren(v,h,A).pipe(p1(F=>F===null?null:new u2(y,F)));if(h.length===0&&R.length===0)return W(new u2(y,[]));let B=D2(o)===r;return this.processSegment(v,h,A,R,B?e1:r,!0).pipe(p1(F=>new u2(y,F instanceof u2?[F]:[])))}))):L5(e)))}getChildConfig(t,e,o){return e.children?W({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?W({routes:e._loadedRoutes,injector:e._loadedInjector}):Hd(t,e,o,this.urlSerializer).pipe(g2(c=>c?this.configLoader.loadChildren(t,e).pipe(O1(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):Bd(e))):W({routes:[],injector:t})}};function Dd(s){s.sort((t,e)=>t.value.outlet===e1?-1:e.value.outlet===e1?1:t.value.outlet.localeCompare(e.value.outlet))}function Od(s){let t=s.value.routeConfig;return t&&t.path===""}function Da(s){let t=[],e=new Set;for(let o of s){if(!Od(o)){t.push(o);continue}let c=t.find(r=>o.value.routeConfig===r.value.routeConfig);c!==void 0?(c.children.push(...o.children),e.add(c)):t.push(o)}for(let o of e){let c=Da(o.children);t.push(new u2(o.value,c))}return t.filter(o=>!e.has(o))}function Nd(s){return s.data||{}}function Fd(s){return s.resolve||{}}function jd(s,t,e,o,c,r){return g2(n=>Id(s,t,e,o,n.extractedUrl,c,r).pipe(p1(({state:a,tree:h})=>u1(k({},n),{targetSnapshot:a,urlAfterRedirects:h}))))}function Zd(s,t){return g2(e=>{let{targetSnapshot:o,guards:{canActivateChecks:c}}=e;if(!c.length)return W(e);let r=new Set(c.map(h=>h.route)),n=new Set;for(let h of r)if(!n.has(h))for(let v of Oa(h))n.add(v);let a=0;return X1(n).pipe(Z0(h=>r.has(h)?Ud(h,o,s,t):(h.data=xc(h,h.parent,s).resolve,W(void 0))),O1(()=>a++),xo(1),g2(h=>a===n.size?W(e):m0))})}function Oa(s){let t=s.children.map(e=>Oa(e)).flat();return[s,...t]}function Ud(s,t,e,o){let c=s.routeConfig,r=s._resolve;return c?.title!==void 0&&!Ra(c)&&(r[v4]=c.title),qd(r,s,t,o).pipe(p1(n=>(s._resolvedData=n,s.data=xc(s,s.parent,e).resolve,null)))}function qd(s,t,e,o){let c=Ko(s);if(c.length===0)return W({});let r={};return X1(c).pipe(g2(n=>$d(s[n],t,e,o).pipe(x0(),O1(a=>{r[n]=a}))),xo(1),w9(r),z5(n=>Ia(n)?m0:Pt(n)))}function $d(s,t,e,o){let c=u4(t)??o,r=k5(s,c),n=r.resolve?r.resolve(t,e):R2(c,()=>r(t,e));return y0(n)}function Go(s){return x2(t=>{let e=s(t);return e?X1(e).pipe(p1(()=>t)):W(t)})}var Na=(()=>{let t=class t{buildTitle(o){let c,r=o.root;for(;r!==void 0;)c=this.getResolvedTitleForRoute(r)??c,r=r.children.find(n=>n.outlet===e1);return c}getResolvedTitleForRoute(o){return o.data[v4]}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:()=>D(Gd),providedIn:"root"});let s=t;return s})(),Gd=(()=>{let t=class t extends Na{constructor(o){super(),this.title=o}updateTitle(o){let c=this.buildTitle(o);c!==void 0&&this.title.setTitle(c)}};t.\u0275fac=function(c){return new(c||t)(J(ra))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),m4=new n1("",{providedIn:"root",factory:()=>({})}),h4=new n1(""),Hc=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(Ke)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return W(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let c=y0(o.loadComponent()).pipe(p1(Fa),O1(n=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=n}),Dt(()=>{this.componentLoaders.delete(o)})),r=new po(c,()=>new A2).pipe(uo());return this.componentLoaders.set(o,r),r}loadChildren(o,c){if(this.childrenLoaders.get(c))return this.childrenLoaders.get(c);if(c._loadedRoutes)return W({routes:c._loadedRoutes,injector:c._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(c);let n=Wd(c,this.compiler,o,this.onLoadEndListener).pipe(Dt(()=>{this.childrenLoaders.delete(c)})),a=new po(n,()=>new A2).pipe(uo());return this.childrenLoaders.set(c,a),a}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Wd(s,t,e,o){return y0(s.loadChildren()).pipe(p1(Fa),g2(c=>c instanceof y9||Array.isArray(c)?W(c):X1(t.compileModuleAsync(c))),p1(c=>{o&&o(s);let r,n,a=!1;return Array.isArray(c)?(n=c,a=!0):(r=c.create(e).injector,n=r.get(h4,[],{optional:!0,self:!0}).flat()),{routes:n.map(Cc),injector:r}}))}function Kd(s){return s&&typeof s=="object"&&"default"in s}function Fa(s){return Kd(s)?s.default:s}var Lc=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:()=>D(Qd),providedIn:"root"});let s=t;return s})(),Qd=(()=>{let t=class t{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,c){return o}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),ja=new n1(""),Za=new n1("");function Yd(s,t,e){let o=s.get(Za),c=s.get(N1);return s.get(I1).runOutsideAngular(()=>{if(!c.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(v=>setTimeout(v));let r,n=new Promise(v=>{r=v}),a=c.startViewTransition(()=>(r(),Jd(s))),{onViewTransitionCreated:h}=o;return h&&R2(s,()=>h({transition:a,from:t,to:e})),n})}function Jd(s){return new Promise(t=>{Ho(t,{injector:s})})}var yc=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new A2,this.transitionAbortSubject=new A2,this.configLoader=D(Hc),this.environmentInjector=D(x5),this.urlSerializer=D(g4),this.rootContexts=D(d4),this.location=D(qt),this.inputBindingEnabled=D(Ms,{optional:!0})!==null,this.titleStrategy=D(Na),this.options=D(m4,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(Lc),this.createViewTransition=D(ja,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let o=r=>this.events.next(new oc(r)),c=r=>this.events.next(new cc(r));this.configLoader.onLoadEndListener=c,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let c=++this.navigationId;this.transitions?.next(u1(k(k({},this.transitions.value),o),{id:c}))}setupNavigations(o,c,r){return this.transitions=new q1({id:0,currentUrlTree:c,currentRawUrl:c,extractedUrl:this.urlHandlingStrategy.extract(c),urlAfterRedirects:this.urlHandlingStrategy.extract(c),rawUrl:c,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:t4,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(f0(n=>n.id!==0),p1(n=>u1(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),x2(n=>{let a=!1,h=!1;return W(n).pipe(x2(v=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",p2.SupersededByNewNavigation),m0;this.currentTransition=n,this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?u1(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=v.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!d&&u!=="reload"){let z="";return this.events.next(new L0(v.id,this.urlSerializer.serialize(v.rawUrl),z,hs.IgnoredSameUrlNavigation)),v.resolve(null),m0}if(this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return W(v).pipe(x2(z=>{let y=this.transitions?.getValue();return this.events.next(new R5(z.id,this.urlSerializer.serialize(z.extractedUrl),z.source,z.restoredState)),y!==this.transitions?.getValue()?m0:Promise.resolve(z)}),jd(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),O1(z=>{n.targetSnapshot=z.targetSnapshot,n.urlAfterRedirects=z.urlAfterRedirects,this.currentNavigation=u1(k({},this.currentNavigation),{finalUrl:z.urlAfterRedirects});let y=new vs(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){let{id:z,extractedUrl:y,source:A,restoredState:R,extras:B}=v,F=new R5(z,this.urlSerializer.serialize(y),A,R);this.events.next(F);let U=Aa(this.rootComponentType).snapshot;return this.currentTransition=n=u1(k({},v),{targetSnapshot:U,urlAfterRedirects:y,extras:u1(k({},B),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,W(n)}else{let z="";return this.events.next(new L0(v.id,this.urlSerializer.serialize(v.extractedUrl),z,hs.IgnoredByUrlHandlingStrategy)),v.resolve(null),m0}}),O1(v=>{let d=new Xo(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(d)}),p1(v=>(this.currentTransition=n=u1(k({},v),{guards:nd(v.targetSnapshot,v.currentSnapshot,this.rootContexts)}),n)),pd(this.environmentInjector,v=>this.events.next(v)),O1(v=>{if(n.guardsResult=v.guardsResult,S5(v.guardsResult))throw ka(this.urlSerializer,v.guardsResult);let d=new tc(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(d)}),f0(v=>v.guardsResult?!0:(this.cancelNavigationTransition(v,"",p2.GuardRejected),!1)),Go(v=>{if(v.guards.canActivateChecks.length)return W(v).pipe(O1(d=>{let u=new ec(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),x2(d=>{let u=!1;return W(d).pipe(Zd(this.paramsInheritanceStrategy,this.environmentInjector),O1({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",p2.NoDataFromResolver)}}))}),O1(d=>{let u=new sc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),Go(v=>{let d=u=>{let z=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&z.push(this.configLoader.loadComponent(u.routeConfig).pipe(O1(y=>{u.component=y}),p1(()=>{})));for(let y of u.children)z.push(...d(y));return z};return f5(d(v.targetSnapshot.root)).pipe(zo(null),z0(1))}),Go(()=>this.afterPreactivation()),x2(()=>{let{currentSnapshot:v,targetSnapshot:d}=n,u=this.createViewTransition?.(this.environmentInjector,v.root,d.root);return u?X1(u).pipe(p1(()=>n)):W(n)}),p1(v=>{let d=Jg(o.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=n=u1(k({},v),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,n}),O1(()=>{this.events.next(new r4)}),rd(this.rootContexts,o.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),z0(1),O1({next:v=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new s0(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),this.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{a=!0}}),Pe(this.transitionAbortSubject.pipe(O1(v=>{throw v}))),Dt(()=>{!a&&!h&&this.cancelNavigationTransition(n,"",p2.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),z5(v=>{if(h=!0,Ta(v))this.events.next(new H0(n.id,this.urlSerializer.serialize(n.extractedUrl),v.message,v.cancellationCode)),ed(v)?this.events.next(new n4(v.url)):n.resolve(!1);else{this.events.next(new c4(n.id,this.urlSerializer.serialize(n.extractedUrl),v,n.targetSnapshot??void 0));try{n.resolve(o.errorHandler(v))}catch(d){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(d)}}return m0}))}))}cancelNavigationTransition(o,c,r){let n=new H0(o.id,this.urlSerializer.serialize(o.extractedUrl),c,r);this.events.next(n),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Xd(s){return s!==t4}var tw=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:()=>D(ew),providedIn:"root"});let s=t;return s})(),zc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},ew=(()=>{let t=class t extends zc{};t.\u0275fac=(()=>{let o;return function(r){return(o||(o=Oe(t)))(r||t)}})(),t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Ua=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:()=>D(sw),providedIn:"root"});let s=t;return s})(),sw=(()=>{let t=class t extends Ua{constructor(){super(...arguments),this.location=D(qt),this.urlSerializer=D(g4),this.options=D(m4,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(Lc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new V0,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Aa(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(c=>{c.type==="popstate"&&o(c.url,c.state)})}handleRouterEvent(o,c){if(o instanceof R5)this.stateMemento=this.createStateMemento();else if(o instanceof L0)this.rawUrlTree=c.initialUrl;else if(o instanceof vs){if(this.urlUpdateStrategy==="eager"&&!c.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(c.finalUrl,c.initialUrl);this.setBrowserUrl(r,c)}}else o instanceof r4?(this.currentUrlTree=c.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(c.finalUrl,c.initialUrl),this.routerState=c.targetRouterState,this.urlUpdateStrategy==="deferred"&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c))):o instanceof H0&&(o.code===p2.GuardRejected||o.code===p2.NoDataFromResolver)?this.restoreHistory(c):o instanceof c4?this.restoreHistory(c,!0):o instanceof s0&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,c){let r=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(r)||c.extras.replaceUrl){let n=this.browserPageId,a=k(k({},c.extras.state),this.generateNgRouterState(c.id,n));this.location.replaceState(r,"",a)}else{let n=k(k({},c.extras.state),this.generateNgRouterState(c.id,this.browserPageId+1));this.location.go(r,"",n)}}restoreHistory(o,c=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,n=this.currentPageId-r;n!==0?this.location.historyGo(n):this.currentUrlTree===o.finalUrl&&n===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(c&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,c){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:c}:{navigationId:o}}};t.\u0275fac=(()=>{let o;return function(r){return(o||(o=Oe(t)))(r||t)}})(),t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Jt=function(s){return s[s.COMPLETE=0]="COMPLETE",s[s.FAILED=1]="FAILED",s[s.REDIRECTING=2]="REDIRECTING",s}(Jt||{});function qa(s,t){s.events.pipe(f0(e=>e instanceof s0||e instanceof H0||e instanceof c4||e instanceof L0),p1(e=>e instanceof s0||e instanceof L0?Jt.COMPLETE:(e instanceof H0?e.code===p2.Redirect||e.code===p2.SupersededByNewNavigation:!1)?Jt.REDIRECTING:Jt.FAILED),f0(e=>e!==Jt.REDIRECTING),z0(1)).subscribe(()=>{t()})}function ow(s){throw s}var cw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},h2=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(Ge),this.stateManager=D(Ua),this.options=D(m4,{optional:!0})||{},this.pendingTasks=D(Bo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(yc),this.urlSerializer=D(g4),this.location=D(qt),this.urlHandlingStrategy=D(Lc),this._events=new A2,this.errorHandler=this.options.errorHandler||ow,this.navigated=!1,this.routeReuseStrategy=D(tw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(h4,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Ms,{optional:!0}),this.eventsSubscription=new i9,this.isNgZoneEnabled=D(I1)instanceof I1&&I1.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(c=>{try{let r=this.navigationTransitions.currentTransition,n=this.navigationTransitions.currentNavigation;if(r!==null&&n!==null){if(this.stateManager.handleRouterEvent(c,n),c instanceof H0&&c.code!==p2.Redirect&&c.code!==p2.SupersededByNewNavigation)this.navigated=!0;else if(c instanceof s0)this.navigated=!0;else if(c instanceof n4){let a=this.urlHandlingStrategy.merge(c.url,r.currentRawUrl),h={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Xd(r.source)};this.scheduleNavigation(a,t4,null,h,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}lw(c)&&this._events.next(c)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),t4,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,c)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",c)},0)})}navigateToSyncWithBrowser(o,c,r){let n={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let v=k({},r);delete v.navigationId,delete v.\u0275routerPageId,Object.keys(v).length!==0&&(n.state=v)}let h=this.parseUrl(o);this.scheduleNavigation(h,c,a,n)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(Cc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,c={}){let{relativeTo:r,queryParams:n,fragment:a,queryParamsHandling:h,preserveFragment:v}=c,d=v?this.currentUrlTree.fragment:a,u=null;switch(h){case"merge":u=k(k({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}u!==null&&(u=this.removeEmptyProps(u));let z;try{let y=r?r.snapshot:this.routerState.snapshot.root;z=La(y)}catch{(typeof o[0]!="string"||!o[0].startsWith("/"))&&(o=[]),z=this.currentUrlTree.root}return ya(z,o,u,d??null)}navigateByUrl(o,c={skipLocationChange:!1}){let r=S5(o)?o:this.parseUrl(o),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,t4,null,c)}navigate(o,c={skipLocationChange:!1}){return nw(o),this.navigateByUrl(this.createUrlTree(o,c),c)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,c){let r;if(c===!0?r=k({},cw):c===!1?r=k({},rw):r=c,S5(o))return la(this.currentUrlTree,o,r);let n=this.parseUrl(o);return la(this.currentUrlTree,n,r)}removeEmptyProps(o){return Object.entries(o).reduce((c,[r,n])=>(n!=null&&(c[r]=n),c),{})}scheduleNavigation(o,c,r,n,a){if(this.disposed)return Promise.resolve(!1);let h,v,d;a?(h=a.resolve,v=a.reject,d=a.promise):d=new Promise((z,y)=>{h=z,v=y});let u=this.pendingTasks.add();return qa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:c,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:n,resolve:h,reject:v,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(z=>Promise.reject(z))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function nw(s){for(let t=0;t<s.length;t++)if(s[t]==null)throw new H1(4008,!1)}function lw(s){return!(s instanceof r4)&&!(s instanceof n4)}var fs=class{};var aw=(()=>{let t=class t{constructor(o,c,r,n,a){this.router=o,this.injector=r,this.preloadingStrategy=n,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(f0(o=>o instanceof s0),Z0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,c){let r=[];for(let n of c){n.providers&&!n._injector&&(n._injector=yo(n.providers,o,`Route: ${n.path}`));let a=n._injector??o,h=n._loadedInjector??a;(n.loadChildren&&!n._loadedRoutes&&n.canLoad===void 0||n.loadComponent&&!n._loadedComponent)&&r.push(this.preloadConfig(a,n)),(n.children||n._loadedRoutes)&&r.push(this.processRoutes(h,n.children??n._loadedRoutes))}return X1(r).pipe(mo())}preloadConfig(o,c){return this.preloadingStrategy.preload(c,()=>{let r;c.loadChildren&&c.canLoad===void 0?r=this.loader.loadChildren(o,c):r=W(null);let n=r.pipe(g2(a=>a===null?W(void 0):(c._loadedRoutes=a.routes,c._loadedInjector=a.injector,this.processRoutes(a.injector??o,a.routes))));if(c.loadComponent&&!c._loadedComponent){let a=this.loader.loadComponent(c);return X1([n,a]).pipe(mo())}else return n})}};t.\u0275fac=function(c){return new(c||t)(J(h2),J(Ke),J(x5),J(fs),J(Hc))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),$a=new n1(""),iw=(()=>{let t=class t{constructor(o,c,r,n,a={}){this.urlSerializer=o,this.transitions=c,this.viewportScroller=r,this.zone=n,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=D(x5),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof R5?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof s0?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof L0&&o.code===hs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof gs&&(o.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(o.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,c){this.zone.runOutsideAngular(()=>S(this,null,function*(){yield new Promise(r=>{setTimeout(()=>{r()}),Ho(()=>{r()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new gs(o,this.lastSource==="popstate"?this.store[this.restoredId]:null,c))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(c){je()},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})();function Ga(s,...t){return M0([{provide:h4,multi:!0,useValue:s},[],{provide:o0,useFactory:Wa,deps:[h2]},{provide:Zt,multi:!0,useFactory:Ka},t.map(e=>e.\u0275providers)])}function Wa(s){return s.routerState.root}function f4(s,t){return{\u0275kind:s,\u0275providers:t}}function Ka(){let s=D(C5);return t=>{let e=s.get(Ut);if(t!==e.components[0])return;let o=s.get(h2),c=s.get(Qa);s.get(Bc)===1&&o.initialNavigation(),s.get(Ya,null,Mo.Optional)?.setUpPreloading(),s.get($a,null,Mo.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),c.closed||(c.next(),c.complete(),c.unsubscribe())}}var Qa=new n1("",{factory:()=>new A2}),Bc=new n1("",{providedIn:"root",factory:()=>1});function hw(){return f4(2,[{provide:Bc,useValue:0},{provide:So,multi:!0,deps:[C5],useFactory:t=>{let e=t.get(k9,Promise.resolve());return()=>e.then(()=>new Promise(o=>{let c=t.get(h2),r=t.get(Qa);qa(c,()=>{o(!0)}),t.get(yc).afterPreactivation=()=>(o(!0),r.closed?W(void 0):r),c.initialNavigation()}))}}])}function vw(){return f4(3,[{provide:So,multi:!0,useFactory:()=>{let t=D(h2);return()=>{t.setUpLocationChangeListener()}}},{provide:Bc,useValue:2}])}var Ya=new n1("");function gw(s){return f4(0,[{provide:Ya,useExisting:aw},{provide:fs,useExisting:s}])}function dw(){return f4(8,[va,{provide:Ms,useExisting:va}])}function ww(s){let t=[{provide:ja,useValue:Yd},{provide:Za,useValue:k({skipNextTransition:!!s?.skipInitialTransition},s)}];return f4(9,t)}var da=new n1("ROUTER_FORROOT_GUARD"),uw=[qt,{provide:g4,useClass:s4},h2,d4,{provide:o0,useFactory:Wa,deps:[h2]},Hc,[]],E5=(()=>{let t=class t{constructor(o){}static forRoot(o,c){return{ngModule:t,providers:[uw,[],{provide:h4,multi:!0,useValue:o},{provide:da,useFactory:zw,deps:[[h2,new Ot,new De]]},{provide:m4,useValue:c||{}},c?.useHash?mw():fw(),pw(),c?.preloadingStrategy?gw(c.preloadingStrategy).\u0275providers:[],c?.initialNavigation?xw(c):[],c?.bindToComponentInputs?dw().\u0275providers:[],c?.enableViewTransitions?ww().\u0275providers:[],Mw()]}}static forChild(o){return{ngModule:t,providers:[{provide:h4,multi:!0,useValue:o}]}}};t.\u0275fac=function(c){return new(c||t)(J(da,8))},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({});let s=t;return s})();function pw(){return{provide:$a,useFactory:()=>{let s=D(N9),t=D(I1),e=D(m4),o=D(yc),c=D(g4);return e.scrollOffset&&s.setOffset(e.scrollOffset),new iw(c,o,s,t,e)}}}function mw(){return{provide:bo,useClass:T9}}function fw(){return{provide:bo,useClass:E9}}function zw(s){return"guarded"}function xw(s){return[s.initialNavigation==="disabled"?vw().\u0275providers:[],s.initialNavigation==="enabledBlocking"?hw().\u0275providers:[]]}var wa=new n1("");function Mw(){return[{provide:wa,useFactory:Ka},{provide:Zt,multi:!0,useExisting:wa}]}var eC=new n1("Ng Glyph Config");var sC=new n1("NgGlyphsToken");function Hw(s){return s==null?"":/^\d+$/.test(s)?`${s}px`:s}var Lw=new n1("Ng Icon Pre Processor"),yw=new n1("Ng Icon Post Processor");function Bw(){return D(Lw,{optional:!0})??(s=>s)}function _w(){return D(yw,{optional:!0})??(()=>{})}var Aw=new n1("Ng Icon Config"),Sw={size:"1em"};function Rw(){return D(Aw,{optional:!0})??Sw}var bw=new n1("Ng Icon Loader Token");var kw=new n1("Ng Icon Cache Token");function Ew(){return D(bw,{optional:!0})}function Tw(){return D(kw,{optional:!0})}function B0(s){return[{provide:_c,useFactory:t=>k(k({},t?.reduce((e,o)=>k(k({},e),o),{})),s),deps:[[_c,new Ot,new De]],multi:!0}]}var _c=new n1("Icons Token");function Iw(){return D(_c,{optional:!0})??[]}function Pw(s){return typeof s=="string"?Promise.resolve(s):ke(s)?g9(s):s}function Dw(s){return s.replace(/([^a-zA-Z0-9])+(.)?/g,(t,e,o)=>o?o.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,t=>t.toLowerCase())}var Ow=new n1("Ng Icon Logger"),Ac=class{log(t){console.log(t)}warn(t){console.warn(t)}error(t){console.error(t)}};function Nw(){return D(Ow,{optional:!0})??new Ac}var _0=(()=>{let t=class t{constructor(){this.config=Rw(),this.icons=Iw(),this.loader=Ew(),this.cache=Tw(),this.preProcessor=Bw(),this.postProcessor=_w(),this.injector=D(C5),this.elementRef=D(M2),this.logger=Nw(),this.size=this.config.size,this.color=this.config.color}set name(o){this.setIcon(o)}set svg(o){this.setSvg(o)}ngOnChanges(o){o.size&&this.setIconSize(),o.color&&this.setIconColor(),o.strokeWidth&&this.setIconStrokeWidth()}ngOnInit(){this.setIconStyles()}setIconColor(){this.elementRef.nativeElement.style.removeProperty("color"),this.color!==void 0&&this.elementRef.nativeElement.style.setProperty("color",this.color)}setIconSize(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__size"),this.size!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__size",this.size.toString())}setIconStrokeWidth(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__stroke-width"),this.strokeWidth!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__stroke-width",this.strokeWidth.toString())}setIconStyles(){this.setIconColor(),this.setIconSize(),this.setIconStrokeWidth()}setSvg(o){this.elementRef.nativeElement.innerHTML=this.preProcessor(o),this.postProcessor(this.elementRef.nativeElement)}setIcon(o){return S(this,null,function*(){let c=Dw(o);for(let r of[...this.icons].reverse())if(r[c]){this.setSvg(r[c]);return}if(this.loader){let r=yield this.requestIconFromLoader(o);if(r!==null){this.setSvg(r);return}}this.logger.warn(`No icon named ${o} was found. You may need to import it using the withIcons function.`)})}requestIconFromLoader(o){return new Promise(c=>{R2(this.injector,()=>S(this,null,function*(){if(this.cache){let a=this.cache.get(o);if(typeof a=="string"){c(a);return}if(a instanceof Promise){let h=yield a;c(h);return}}let r=Pw(this.loader(o));this.cache?.set(o,r);let n=yield r;this.cache?.set(o,n),c(n)}))})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=g1({type:t,selectors:[["ng-icon"]],inputs:{name:"name",svg:"svg",size:[I2.HasDecoratorInputTransform,"size","size",Hw],strokeWidth:"strokeWidth",color:"color"},standalone:!0,features:[V5,M5,w1],decls:0,vars:0,template:function(c,r){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}"],changeDetection:0});let s=t;return s})();var Ja='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>';var Xa='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 14c-1.66 0-3 1.34-3 3c0 1.31-1.16 2-2 2c.92 1.22 2.49 2 4 2c2.21 0 4-1.79 4-4c0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34a.996.996 0 0 0-1.41 0L9 12.25L11.75 15l8.96-8.96a.996.996 0 0 0 0-1.41z"></path></svg>';var ti='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"></path></svg>';var Hs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3a9 9 0 0 0 0 18c.83 0 1.5-.67 1.5-1.5c0-.39-.15-.74-.39-1.01c-.23-.26-.38-.61-.38-.99c0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5c0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9S8 9.67 8 10.5S7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"></path></svg>';var ei='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>';var si='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></svg>';var oi='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg>';var ci='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.41 8.41l-4.83-4.83c-.37-.37-.88-.58-1.41-.58H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.42zM7 7h7v2H7V7zm10 10H7v-2h10v2zm0-4H7v-2h10v2z"></path></svg>';var ri='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"></path></svg>';var ni='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 20H5V7c0-.55-.45-1-1-1s-1 .45-1 1v13c0 1.1.9 2 2 2h10c.55 0 1-.45 1-1s-.45-1-1-1zm5-4V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2zm-2 0H9V4h9v12z"></path></svg>';var Ls="remove",ys="update",Bs="copy",T5="color",Sc="color";var li="img",Rc="canvas",c0="",z4="txt",ai="txt",ii="todo";function Fw(s,t){if(s&1){let e=L1();I(0,"ng-icon",1),q("click",function(c){let r=s1(e).$implicit,n=G();return o1(n.handleNoteAction(c,r.type))}),P()}if(s&2){let e=t.$implicit;i1("name",e.svg)("title",e.type)}}var hi=(()=>{class s{noteId=null;noteAction=new T1;icons=[{type:Ls,svg:"matDeleteForever"},{type:Bs,svg:"matContentCopyRound"},{type:T5,svg:"matColorLens"}];handleNoteAction(e,o){e.preventDefault(),e.stopPropagation(),this.noteId&&this.noteAction.emit({noteId:this.noteId,type:o})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["note-bottom-actions"]],inputs:{noteId:"noteId"},outputs:{noteAction:"noteAction"},standalone:!0,features:[V2([],[B0({matDeleteForever:si,matContentCopy:ei,matColorLens:Hs,matContentCopyRound:ni})]),w1],decls:2,vars:0,consts:[[1,"note-icon",3,"name","title"],[1,"note-icon",3,"click","name","title"]],template:function(o,c){o&1&&$1(0,Fw,1,2,"ng-icon",0,b2),o&2&&G1(c.icons)},dependencies:[_0],styles:[".note-icon[_ngcontent-%COMP%]{font-size:23px;transition:scale .2s;bottom:0}.note-icon[_ngcontent-%COMP%]:hover{opacity:.5}"]})}return s})();var gi=function(s){let t=[],e=0;for(let o=0;o<s.length;o++){let c=s.charCodeAt(o);c<128?t[e++]=c:c<2048?(t[e++]=c>>6|192,t[e++]=c&63|128):(c&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(c=65536+((c&1023)<<10)+(s.charCodeAt(++o)&1023),t[e++]=c>>18|240,t[e++]=c>>12&63|128,t[e++]=c>>6&63|128,t[e++]=c&63|128):(t[e++]=c>>12|224,t[e++]=c>>6&63|128,t[e++]=c&63|128)}return t},jw=function(s){let t=[],e=0,o=0;for(;e<s.length;){let c=s[e++];if(c<128)t[o++]=String.fromCharCode(c);else if(c>191&&c<224){let r=s[e++];t[o++]=String.fromCharCode((c&31)<<6|r&63)}else if(c>239&&c<365){let r=s[e++],n=s[e++],a=s[e++],h=((c&7)<<18|(r&63)<<12|(n&63)<<6|a&63)-65536;t[o++]=String.fromCharCode(55296+(h>>10)),t[o++]=String.fromCharCode(56320+(h&1023))}else{let r=s[e++],n=s[e++];t[o++]=String.fromCharCode((c&15)<<12|(r&63)<<6|n&63)}}return t.join("")},di={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let c=0;c<s.length;c+=3){let r=s[c],n=c+1<s.length,a=n?s[c+1]:0,h=c+2<s.length,v=h?s[c+2]:0,d=r>>2,u=(r&3)<<4|a>>4,z=(a&15)<<2|v>>6,y=v&63;h||(y=64,n||(z=64)),o.push(e[d],e[u],e[z],e[y])}return o.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(gi(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):jw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let c=0;c<s.length;){let r=e[s.charAt(c++)],a=c<s.length?e[s.charAt(c)]:0;++c;let v=c<s.length?e[s.charAt(c)]:64;++c;let u=c<s.length?e[s.charAt(c)]:64;if(++c,r==null||a==null||v==null||u==null)throw new bc;let z=r<<2|a>>4;if(o.push(z),v!==64){let y=a<<4&240|v>>2;if(o.push(y),u!==64){let A=v<<6&192|u;o.push(A)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}},bc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Zw=function(s){let t=gi(s);return di.encodeByteArray(t,!0)},x4=function(s){return Zw(s).replace(/\./g,"")},Uw=function(s){try{return di.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $w=()=>qw().__FIREBASE_DEFAULTS__,Gw=()=>{if(typeof process>"u"||typeof process.env>"u")return;let s=process.env.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Ww=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=s&&Uw(s[1]);return t&&JSON.parse(t)},kc=()=>{try{return $w()||Gw()||Ww()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Kw=s=>{var t,e;return(e=(t=kc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},wi=s=>{let t=Kw(s);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let o=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),o]:[t.substring(0,e),o]},Ec=()=>{var s;return(s=kc())===null||s===void 0?void 0:s.config};var _s=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,o)=>{e?this.reject(e):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,o))}}};function ui(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},o=t||"demo-project",c=s.iat||0,r=s.sub||s.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let n=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:c,exp:c+3600,auth_time:c,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},s);return[x4(JSON.stringify(e)),x4(JSON.stringify(n)),""].join(".")}function pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qw(){var s;let t=(s=kc())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mi(){return!Qw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tc(){try{return typeof indexedDB=="object"}catch{return!1}}function fi(){return new Promise((s,t)=>{try{let e=!0,o="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(o);c.onsuccess=()=>{c.result.close(),e||self.indexedDB.deleteDatabase(o),s(!0)},c.onupgradeneeded=()=>{e=!1},c.onerror=()=>{var r;t(((r=c.error)===null||r===void 0?void 0:r.message)||"")}}catch(e){t(e)}})}var Yw="FirebaseError",r0=class s extends Error{constructor(t,e,o){super(e),this.code=t,this.customData=o,this.name=Yw,Object.setPrototypeOf(this,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M4.prototype.create)}},M4=class{constructor(t,e,o){this.service=t,this.serviceName=e,this.errors=o}create(t,...e){let o=e[0]||{},c=`${this.service}/${t}`,r=this.errors[t],n=r?Jw(r,o):"Error",a=`${this.serviceName}: ${n} (${c}).`;return new r0(c,a,o)}};function Jw(s,t){return s.replace(Xw,(e,o)=>{let c=t[o];return c!=null?String(c):`<${o}?>`})}var Xw=/\{\$([^}]+)}/g;function C4(s,t){if(s===t)return!0;let e=Object.keys(s),o=Object.keys(t);for(let c of e){if(!o.includes(c))return!1;let r=s[c],n=t[c];if(vi(r)&&vi(n)){if(!C4(r,n))return!1}else if(r!==n)return!1}for(let c of o)if(!e.includes(c))return!1;return!0}function vi(s){return s!==null&&typeof s=="object"}var mC=4*60*60*1e3;function n0(s){return s&&s._delegate?s._delegate:s}var l0=class{constructor(t,e,o){this.name=t,this.instanceFactory=e,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Y0="[DEFAULT]";var Ic=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let o=new _s;if(this.instancesDeferred.set(e,o),this.isInitialized(e)||this.shouldAutoInitialize())try{let c=this.getOrInitializeService({instanceIdentifier:e});c&&o.resolve(c)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let o=this.normalizeInstanceIdentifier(t?.identifier),c=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(r){if(c)return null;throw r}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(eu(t))try{this.getOrInitializeService({instanceIdentifier:Y0})}catch{}for(let[e,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(e);try{let r=this.getOrInitializeService({instanceIdentifier:c});o.resolve(r)}catch{}}}}clearInstance(t=Y0){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return S(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Y0){return this.instances.has(t)}getOptions(t=Y0){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let c=this.getOrInitializeService({instanceIdentifier:o,options:e});for(let[r,n]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(r);o===a&&n.resolve(c)}return c}onInit(t,e){var o;let c=this.normalizeInstanceIdentifier(e),r=(o=this.onInitCallbacks.get(c))!==null&&o!==void 0?o:new Set;r.add(t),this.onInitCallbacks.set(c,r);let n=this.instances.get(c);return n&&t(n,c),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){let o=this.onInitCallbacks.get(e);if(o)for(let c of o)try{c(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:tu(t),options:e}),this.instances.set(t,o),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=Y0){return this.component?this.component.multipleInstances?t:Y0:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tu(s){return s===Y0?void 0:s}function eu(s){return s.instantiationMode==="EAGER"}var As=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Ic(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var su=[],h1=function(s){return s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT",s}(h1||{}),ou={debug:h1.DEBUG,verbose:h1.VERBOSE,info:h1.INFO,warn:h1.WARN,error:h1.ERROR,silent:h1.SILENT},cu=h1.INFO,ru={[h1.DEBUG]:"log",[h1.VERBOSE]:"log",[h1.INFO]:"info",[h1.WARN]:"warn",[h1.ERROR]:"error"},nu=(s,t,...e)=>{if(t<s.logLevel)return;let o=new Date().toISOString(),c=ru[t];if(c)console[c](`[${o}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},I5=class{constructor(t){this.name=t,this._logLevel=cu,this._logHandler=nu,this._userLogHandler=null,su.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in h1))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ou[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,h1.DEBUG,...t),this._logHandler(this,h1.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,h1.VERBOSE,...t),this._logHandler(this,h1.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,h1.INFO,...t),this._logHandler(this,h1.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,h1.WARN,...t),this._logHandler(this,h1.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,h1.ERROR,...t),this._logHandler(this,h1.ERROR,...t)}};var lu=(s,t)=>t.some(e=>s instanceof e),zi,xi;function au(){return zi||(zi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iu(){return xi||(xi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Mi=new WeakMap,Dc=new WeakMap,Ci=new WeakMap,Pc=new WeakMap,Nc=new WeakMap;function hu(s){let t=new Promise((e,o)=>{let c=()=>{s.removeEventListener("success",r),s.removeEventListener("error",n)},r=()=>{e(O2(s.result)),c()},n=()=>{o(s.error),c()};s.addEventListener("success",r),s.addEventListener("error",n)});return t.then(e=>{e instanceof IDBCursor&&Mi.set(e,s)}).catch(()=>{}),Nc.set(t,s),t}function vu(s){if(Dc.has(s))return;let t=new Promise((e,o)=>{let c=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",n),s.removeEventListener("abort",n)},r=()=>{e(),c()},n=()=>{o(s.error||new DOMException("AbortError","AbortError")),c()};s.addEventListener("complete",r),s.addEventListener("error",n),s.addEventListener("abort",n)});Dc.set(s,t)}var Oc={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Dc.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Ci.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return O2(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Vi(s){Oc=s(Oc)}function gu(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let o=s.call(Ss(this),t,...e);return Ci.set(o,t.sort?t.sort():[t]),O2(o)}:iu().includes(s)?function(...t){return s.apply(Ss(this),t),O2(Mi.get(this))}:function(...t){return O2(s.apply(Ss(this),t))}}function du(s){return typeof s=="function"?gu(s):(s instanceof IDBTransaction&&vu(s),lu(s,au())?new Proxy(s,Oc):s)}function O2(s){if(s instanceof IDBRequest)return hu(s);if(Pc.has(s))return Pc.get(s);let t=du(s);return t!==s&&(Pc.set(s,t),Nc.set(t,s)),t}var Ss=s=>Nc.get(s);function Li(s,t,{blocked:e,upgrade:o,blocking:c,terminated:r}={}){let n=indexedDB.open(s,t),a=O2(n);return o&&n.addEventListener("upgradeneeded",h=>{o(O2(n.result),h.oldVersion,h.newVersion,O2(n.transaction),h)}),e&&n.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),a.then(h=>{r&&h.addEventListener("close",()=>r()),c&&h.addEventListener("versionchange",v=>c(v.oldVersion,v.newVersion,v))}).catch(()=>{}),a}var wu=["get","getKey","getAll","getAllKeys","count"],uu=["put","add","delete","clear"],Fc=new Map;function Hi(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Fc.get(t))return Fc.get(t);let e=t.replace(/FromIndex$/,""),o=t!==e,c=uu.includes(e);if(!(e in(o?IDBIndex:IDBObjectStore).prototype)||!(c||wu.includes(e)))return;let r=function(n,...a){return S(this,null,function*(){let h=this.transaction(n,c?"readwrite":"readonly"),v=h.store;return o&&(v=v.index(a.shift())),(yield Promise.all([v[e](...a),c&&h.done]))[0]})};return Fc.set(t,r),r}Vi(s=>u1(k({},s),{get:(t,e,o)=>Hi(t,e)||s.get(t,e,o),has:(t,e)=>!!Hi(t,e)||s.has(t,e)}));var Zc=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(pu(e)){let o=e.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(e=>e).join(" ")}};function pu(s){let t=s.getComponent();return t?.type==="VERSION"}var Uc="@firebase/app",yi="0.10.8";var J0=new I5("@firebase/app"),mu="@firebase/app-compat",fu="@firebase/analytics-compat",zu="@firebase/analytics",xu="@firebase/app-check-compat",Mu="@firebase/app-check",Cu="@firebase/auth",Vu="@firebase/auth-compat",Hu="@firebase/database",Lu="@firebase/database-compat",yu="@firebase/functions",Bu="@firebase/functions-compat",_u="@firebase/installations",Au="@firebase/installations-compat",Su="@firebase/messaging",Ru="@firebase/messaging-compat",bu="@firebase/performance",ku="@firebase/performance-compat",Eu="@firebase/remote-config",Tu="@firebase/remote-config-compat",Iu="@firebase/storage",Pu="@firebase/storage-compat",Du="@firebase/firestore",Ou="@firebase/vertexai-preview",Nu="@firebase/firestore-compat",Fu="firebase",ju="10.12.5";var qc="[DEFAULT]",Zu={[Uc]:"fire-core",[mu]:"fire-core-compat",[zu]:"fire-analytics",[fu]:"fire-analytics-compat",[Mu]:"fire-app-check",[xu]:"fire-app-check-compat",[Cu]:"fire-auth",[Vu]:"fire-auth-compat",[Hu]:"fire-rtdb",[Lu]:"fire-rtdb-compat",[yu]:"fire-fn",[Bu]:"fire-fn-compat",[_u]:"fire-iid",[Au]:"fire-iid-compat",[Su]:"fire-fcm",[Ru]:"fire-fcm-compat",[bu]:"fire-perf",[ku]:"fire-perf-compat",[Eu]:"fire-rc",[Tu]:"fire-rc-compat",[Iu]:"fire-gcs",[Pu]:"fire-gcs-compat",[Du]:"fire-fst",[Nu]:"fire-fst-compat",[Ou]:"fire-vertex","fire-js":"fire-js",[Fu]:"fire-js-all"};var Rs=new Map,Uu=new Map,$c=new Map;function Bi(s,t){try{s.container.addComponent(t)}catch(e){J0.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function V4(s){let t=s.name;if($c.has(t))return J0.debug(`There were multiple attempts to register component ${t}.`),!1;$c.set(t,s);for(let e of Rs.values())Bi(e,s);for(let e of Uu.values())Bi(e,s);return!0}function Ri(s,t){let e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}var qu={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},A0=new M4("app","Firebase",qu);var Gc=class{constructor(t,e,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new l0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw A0.create("app-deleted",{appName:this._name})}};var bi=ju;function Qc(s,t={}){let e=s;typeof t!="object"&&(t={name:t});let o=Object.assign({name:qc,automaticDataCollectionEnabled:!1},t),c=o.name;if(typeof c!="string"||!c)throw A0.create("bad-app-name",{appName:String(c)});if(e||(e=Ec()),!e)throw A0.create("no-options");let r=Rs.get(c);if(r){if(C4(e,r.options)&&C4(o,r.config))return r;throw A0.create("duplicate-app",{appName:c})}let n=new As(c);for(let h of $c.values())n.addComponent(h);let a=new Gc(e,o,n);return Rs.set(c,a),a}function ki(s=qc){let t=Rs.get(s);if(!t&&s===qc&&Ec())return Qc();if(!t)throw A0.create("no-app",{appName:s});return t}function S0(s,t,e){var o;let c=(o=Zu[s])!==null&&o!==void 0?o:s;e&&(c+=`-${e}`);let r=c.match(/\s|\//),n=t.match(/\s|\//);if(r||n){let a=[`Unable to register library "${c}" with version "${t}":`];r&&a.push(`library name "${c}" contains illegal characters (whitespace or "/")`),r&&n&&a.push("and"),n&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),J0.warn(a.join(" "));return}V4(new l0(`${c}-version`,()=>({library:c,version:t}),"VERSION"))}var $u="firebase-heartbeat-database",Gu=1,H4="firebase-heartbeat-store",jc=null;function Ei(){return jc||(jc=Li($u,Gu,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(H4)}catch(e){console.warn(e)}}}}).catch(s=>{throw A0.create("idb-open",{originalErrorMessage:s.message})})),jc}function Wu(s){return S(this,null,function*(){try{let e=(yield Ei()).transaction(H4),o=yield e.objectStore(H4).get(Ti(s));return yield e.done,o}catch(t){if(t instanceof r0)J0.warn(t.message);else{let e=A0.create("idb-get",{originalErrorMessage:t?.message});J0.warn(e.message)}}})}function _i(s,t){return S(this,null,function*(){try{let o=(yield Ei()).transaction(H4,"readwrite");yield o.objectStore(H4).put(t,Ti(s)),yield o.done}catch(e){if(e instanceof r0)J0.warn(e.message);else{let o=A0.create("idb-set",{originalErrorMessage:e?.message});J0.warn(o.message)}}})}function Ti(s){return`${s.name}!${s.options.appId}`}var Ku=1024,Qu=30*24*60*60*1e3,Wc=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Kc(e),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}triggerHeartbeat(){return S(this,null,function*(){var t,e;let c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ai();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(n=>n.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(n=>{let a=new Date(n.date).valueOf();return Date.now()-a<=Qu}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return S(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Ai(),{heartbeatsToSend:o,unsentEntries:c}=Yu(this._heartbeatsCache.heartbeats),r=x4(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=e,c.length>0?(this._heartbeatsCache.heartbeats=c,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r})}};function Ai(){return new Date().toISOString().substring(0,10)}function Yu(s,t=Ku){let e=[],o=s.slice();for(let c of s){let r=e.find(n=>n.agent===c.agent);if(r){if(r.dates.push(c.date),Si(e)>t){r.dates.pop();break}}else if(e.push({agent:c.agent,dates:[c.date]}),Si(e)>t){e.pop();break}o=o.slice(1)}return{heartbeatsToSend:e,unsentEntries:o}}var Kc=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Tc()?fi().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield Wu(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let c=yield this.read();return _i(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:c.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let c=yield this.read();return _i(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...t.heartbeats]})}else return})}};function Si(s){return x4(JSON.stringify({version:2,heartbeats:s})).length}function Ju(s){V4(new l0("platform-logger",t=>new Zc(t),"PRIVATE")),V4(new l0("heartbeat",t=>new Wc(t),"PRIVATE")),S0(Uc,yi,s),S0(Uc,yi,"esm2017"),S0("fire-js","")}Ju("");var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pi={};var R0,Yc;(function(){var s;function t(M,p){function m(){}m.prototype=p.prototype,M.D=p.prototype,M.prototype=new m,M.prototype.constructor=M,M.C=function(x,C,H){for(var f=Array(arguments.length-2),Q2=2;Q2<arguments.length;Q2++)f[Q2-2]=arguments[Q2];return p.prototype[C].apply(x,f)}}function e(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,e),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(M,p,m){m||(m=0);var x=Array(16);if(typeof p=="string")for(var C=0;16>C;++C)x[C]=p.charCodeAt(m++)|p.charCodeAt(m++)<<8|p.charCodeAt(m++)<<16|p.charCodeAt(m++)<<24;else for(C=0;16>C;++C)x[C]=p[m++]|p[m++]<<8|p[m++]<<16|p[m++]<<24;p=M.g[0],m=M.g[1],C=M.g[2];var H=M.g[3],f=p+(H^m&(C^H))+x[0]+3614090360&4294967295;p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[1]+3905402710&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[2]+606105819&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[3]+3250441966&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[4]+4118548399&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[5]+1200080426&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[6]+2821735955&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[7]+4249261313&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[8]+1770035416&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[9]+2336552879&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[10]+4294925233&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[11]+2304563134&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[12]+1804603682&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[13]+4254626195&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[14]+2792965006&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[15]+1236535329&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(C^H&(m^C))+x[1]+4129170786&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[6]+3225465664&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[11]+643717713&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[0]+3921069994&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[5]+3593408605&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[10]+38016083&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[15]+3634488961&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[4]+3889429448&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[9]+568446438&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[14]+3275163606&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[3]+4107603335&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[8]+1163531501&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[13]+2850285829&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[2]+4243563512&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[7]+1735328473&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[12]+2368359562&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(m^C^H)+x[5]+4294588738&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[8]+2272392833&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[11]+1839030562&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[14]+4259657740&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[1]+2763975236&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[4]+1272893353&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[7]+4139469664&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[10]+3200236656&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[13]+681279174&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[0]+3936430074&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[3]+3572445317&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[6]+76029189&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[9]+3654602809&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[12]+3873151461&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[15]+530742520&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[2]+3299628645&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(C^(m|~H))+x[0]+4096336452&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[7]+1126891415&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[14]+2878612391&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[5]+4237533241&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[12]+1700485571&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[3]+2399980690&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[10]+4293915773&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[1]+2240044497&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[8]+1873313359&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[15]+4264355552&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[6]+2734768916&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[13]+1309151649&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[4]+4149444226&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[11]+3174756917&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[2]+718787259&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[9]+3951481745&4294967295,M.g[0]=M.g[0]+p&4294967295,M.g[1]=M.g[1]+(C+(f<<21&4294967295|f>>>11))&4294967295,M.g[2]=M.g[2]+C&4294967295,M.g[3]=M.g[3]+H&4294967295}o.prototype.u=function(M,p){p===void 0&&(p=M.length);for(var m=p-this.blockSize,x=this.B,C=this.h,H=0;H<p;){if(C==0)for(;H<=m;)c(this,M,H),H+=this.blockSize;if(typeof M=="string"){for(;H<p;)if(x[C++]=M.charCodeAt(H++),C==this.blockSize){c(this,x),C=0;break}}else for(;H<p;)if(x[C++]=M[H++],C==this.blockSize){c(this,x),C=0;break}}this.h=C,this.o+=p},o.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var p=1;p<M.length-8;++p)M[p]=0;var m=8*this.o;for(p=M.length-8;p<M.length;++p)M[p]=m&255,m/=256;for(this.u(M),M=Array(16),p=m=0;4>p;++p)for(var x=0;32>x;x+=8)M[m++]=this.g[p]>>>x&255;return M};function r(M,p){var m=a;return Object.prototype.hasOwnProperty.call(m,M)?m[M]:m[M]=p(M)}function n(M,p){this.h=p;for(var m=[],x=!0,C=M.length-1;0<=C;C--){var H=M[C]|0;x&&H==p||(m[C]=H,x=!1)}this.g=m}var a={};function h(M){return-128<=M&&128>M?r(M,function(p){return new n([p|0],0>p?-1:0)}):new n([M|0],0>M?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return u;if(0>M)return B(v(-M));for(var p=[],m=1,x=0;M>=m;x++)p[x]=M/m|0,m*=4294967296;return new n(p,0)}function d(M,p){if(M.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(M.charAt(0)=="-")return B(d(M.substring(1),p));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=v(Math.pow(p,8)),x=u,C=0;C<M.length;C+=8){var H=Math.min(8,M.length-C),f=parseInt(M.substring(C,C+H),p);8>H?(H=v(Math.pow(p,H)),x=x.j(H).add(v(f))):(x=x.j(m),x=x.add(v(f)))}return x}var u=h(0),z=h(1),y=h(16777216);s=n.prototype,s.m=function(){if(R(this))return-B(this).m();for(var M=0,p=1,m=0;m<this.g.length;m++){var x=this.i(m);M+=(0<=x?x:4294967296+x)*p,p*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(A(this))return"0";if(R(this))return"-"+B(this).toString(M);for(var p=v(Math.pow(M,6)),m=this,x="";;){var C=l1(m,p).g;m=F(m,C.j(p));var H=((0<m.g.length?m.g[0]:m.h)>>>0).toString(M);if(m=C,A(m))return H+x;for(;6>H.length;)H="0"+H;x=H+x}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function A(M){if(M.h!=0)return!1;for(var p=0;p<M.g.length;p++)if(M.g[p]!=0)return!1;return!0}function R(M){return M.h==-1}s.l=function(M){return M=F(this,M),R(M)?-1:A(M)?0:1};function B(M){for(var p=M.g.length,m=[],x=0;x<p;x++)m[x]=~M.g[x];return new n(m,~M.h).add(z)}s.abs=function(){return R(this)?B(this):this},s.add=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0,C=0;C<=p;C++){var H=x+(this.i(C)&65535)+(M.i(C)&65535),f=(H>>>16)+(this.i(C)>>>16)+(M.i(C)>>>16);x=f>>>16,H&=65535,f&=65535,m[C]=f<<16|H}return new n(m,m[m.length-1]&-2147483648?-1:0)};function F(M,p){return M.add(B(p))}s.j=function(M){if(A(this)||A(M))return u;if(R(this))return R(M)?B(this).j(B(M)):B(B(this).j(M));if(R(M))return B(this.j(B(M)));if(0>this.l(y)&&0>M.l(y))return v(this.m()*M.m());for(var p=this.g.length+M.g.length,m=[],x=0;x<2*p;x++)m[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<M.g.length;C++){var H=this.i(x)>>>16,f=this.i(x)&65535,Q2=M.i(C)>>>16,ft=M.i(C)&65535;m[2*x+2*C]+=f*ft,U(m,2*x+2*C),m[2*x+2*C+1]+=H*ft,U(m,2*x+2*C+1),m[2*x+2*C+1]+=f*Q2,U(m,2*x+2*C+1),m[2*x+2*C+2]+=H*Q2,U(m,2*x+2*C+2)}for(x=0;x<p;x++)m[x]=m[2*x+1]<<16|m[2*x];for(x=p;x<2*p;x++)m[x]=0;return new n(m,0)};function U(M,p){for(;(M[p]&65535)!=M[p];)M[p+1]+=M[p]>>>16,M[p]&=65535,p++}function O(M,p){this.g=M,this.h=p}function l1(M,p){if(A(p))throw Error("division by zero");if(A(M))return new O(u,u);if(R(M))return p=l1(B(M),p),new O(B(p.g),B(p.h));if(R(p))return p=l1(M,B(p)),new O(B(p.g),p.h);if(30<M.g.length){if(R(M)||R(p))throw Error("slowDivide_ only works with positive integers.");for(var m=z,x=p;0>=x.l(M);)m=R1(m),x=R1(x);var C=c1(m,1),H=c1(x,1);for(x=c1(x,2),m=c1(m,2);!A(x);){var f=H.add(x);0>=f.l(M)&&(C=C.add(m),H=f),x=c1(x,1),m=c1(m,1)}return p=F(M,C.j(p)),new O(C,p)}for(C=u;0<=M.l(p);){for(m=Math.max(1,Math.floor(M.m()/p.m())),x=Math.ceil(Math.log(m)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),H=v(m),f=H.j(p);R(f)||0<f.l(M);)m-=x,H=v(m),f=H.j(p);A(H)&&(H=z),C=C.add(H),M=F(M,f)}return new O(C,M)}s.A=function(M){return l1(this,M).h},s.and=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)&M.i(x);return new n(m,this.h&M.h)},s.or=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)|M.i(x);return new n(m,this.h|M.h)},s.xor=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)^M.i(x);return new n(m,this.h^M.h)};function R1(M){for(var p=M.g.length+1,m=[],x=0;x<p;x++)m[x]=M.i(x)<<1|M.i(x-1)>>>31;return new n(m,M.h)}function c1(M,p){var m=p>>5;p%=32;for(var x=M.g.length-m,C=[],H=0;H<x;H++)C[H]=0<p?M.i(H+m)>>>p|M.i(H+m+1)<<32-p:M.i(H+m);return new n(C,M.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Yc=Pi.Md5=o,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=v,n.fromString=d,R0=Pi.Integer=n}).apply(typeof Ii<"u"?Ii:typeof self<"u"?self:typeof window<"u"?window:{});var bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a0={};var Jc,Xc,P5,tr,L4,ks,er,sr,or;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,i,g){return l==Array.prototype||l==Object.prototype||(l[i]=g.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof bs=="object"&&bs];for(var i=0;i<l.length;++i){var g=l[i];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var o=e(this);function c(l,i){if(i)t:{var g=o;l=l.split(".");for(var w=0;w<l.length-1;w++){var V=l[w];if(!(V in g))break t;g=g[V]}l=l[l.length-1],w=g[l],i=i(w),i!=w&&i!=null&&t(g,l,{configurable:!0,writable:!0,value:i})}}function r(l,i){l instanceof String&&(l+="");var g=0,w=!1,V={next:function(){if(!w&&g<l.length){var _=g++;return{value:i(_,l[_]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}c("Array.prototype.values",function(l){return l||function(){return r(this,function(i,g){return g})}});var n=n||{},a=this||self;function h(l){var i=typeof l;return i=i!="object"?i:l?Array.isArray(l)?"array":i:"null",i=="array"||i=="object"&&typeof l.length=="number"}function v(l){var i=typeof l;return i=="object"&&l!=null||i=="function"}function d(l,i,g){return l.call.apply(l.bind,arguments)}function u(l,i,g){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),l.apply(i,V)}}return function(){return l.apply(i,arguments)}}function z(l,i,g){return z=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:u,z.apply(null,arguments)}function y(l,i){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function A(l,i){function g(){}g.prototype=i.prototype,l.aa=i.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(w,V,_){for(var T=Array(arguments.length-2),z1=2;z1<arguments.length;z1++)T[z1-2]=arguments[z1];return i.prototype[V].apply(w,T)}}function R(l){let i=l.length;if(0<i){let g=Array(i);for(let w=0;w<i;w++)g[w]=l[w];return g}return[]}function B(l,i){for(let g=1;g<arguments.length;g++){let w=arguments[g];if(h(w)){let V=l.length||0,_=w.length||0;l.length=V+_;for(let T=0;T<_;T++)l[V+T]=w[T]}else l.push(w)}}class F{constructor(i,g){this.i=i,this.j=g,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}function U(l){return/^[\s\xa0]*$/.test(l)}function O(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function l1(l){return l1[" "](l),l}l1[" "]=function(){};var R1=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function c1(l,i,g){for(let w in l)i.call(g,l[w],w,l)}function M(l,i){for(let g in l)i.call(void 0,l[g],g,l)}function p(l){let i={};for(let g in l)i[g]=l[g];return i}let m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,i){let g,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(g in w)l[g]=w[g];for(let _=0;_<m.length;_++)g=m[_],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function C(l){var i=1;l=l.split(":");let g=[];for(;0<i&&l.length;)g.push(l.shift()),i--;return l.length&&g.push(l.join(":")),g}function H(l){a.setTimeout(()=>{throw l},0)}function f(){var l=j3;let i=null;return l.g&&(i=l.g,l.g=l.g.next,l.g||(l.h=null),i.next=null),i}class Q2{constructor(){this.h=this.g=null}add(i,g){let w=ft.get();w.set(i,g),this.h?this.h.next=w:this.g=w,this.h=w}}var ft=new F(()=>new uv,l=>l.reset());class uv{constructor(){this.next=this.g=this.h=null}set(i,g){this.h=i,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,xt=!1,j3=new Q2,c7=()=>{let l=a.Promise.resolve(void 0);zt=()=>{l.then(pv)}};var pv=()=>{for(var l;l=f();){try{l.h.call(l.g)}catch(g){H(g)}var i=ft;i.j(l),100>i.h&&(i.h++,l.next=i.g,i.g=l)}xt=!1};function d0(){this.s=this.s,this.C=this.C}d0.prototype.s=!1,d0.prototype.ma=function(){this.s||(this.s=!0,this.N())},d0.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K1(l,i){this.type=l,this.g=this.target=i,this.defaultPrevented=!1}K1.prototype.h=function(){this.defaultPrevented=!0};var mv=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,i=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,i),a.removeEventListener("test",g,i)}catch{}return l}();function Mt(l,i){if(K1.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=i,i=l.relatedTarget){if(R1){t:{try{l1(i.nodeName);var V=!0;break t}catch{}V=!1}V||(i=null)}}else g=="mouseover"?i=l.fromElement:g=="mouseout"&&(i=l.toElement);this.relatedTarget=i,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:fv[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mt.aa.h.call(this)}}A(Mt,K1);var fv={2:"touch",3:"pen",4:"mouse"};Mt.prototype.h=function(){Mt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),zv=0;function xv(l,i,g,w,V){this.listener=l,this.proxy=null,this.src=i,this.type=g,this.capture=!!w,this.ha=V,this.key=++zv,this.da=this.fa=!1}function ue(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function pe(l){this.src=l,this.g={},this.h=0}pe.prototype.add=function(l,i,g,w,V){var _=l.toString();l=this.g[_],l||(l=this.g[_]=[],this.h++);var T=U3(l,i,w,V);return-1<T?(i=l[T],g||(i.fa=!1)):(i=new xv(i,this.src,_,!!w,V),i.fa=g,l.push(i)),i};function Z3(l,i){var g=i.type;if(g in l.g){var w=l.g[g],V=Array.prototype.indexOf.call(w,i,void 0),_;(_=0<=V)&&Array.prototype.splice.call(w,V,1),_&&(ue(i),l.g[g].length==0&&(delete l.g[g],l.h--))}}function U3(l,i,g,w){for(var V=0;V<l.length;++V){var _=l[V];if(!_.da&&_.listener==i&&_.capture==!!g&&_.ha==w)return V}return-1}var q3="closure_lm_"+(1e6*Math.random()|0),$3={};function r7(l,i,g,w,V){if(w&&w.once)return l7(l,i,g,w,V);if(Array.isArray(i)){for(var _=0;_<i.length;_++)r7(l,i[_],g,w,V);return null}return g=Q3(g),l&&l[Ct]?l.K(i,g,v(w)?!!w.capture:!!w,V):n7(l,i,g,!1,w,V)}function n7(l,i,g,w,V,_){if(!i)throw Error("Invalid event type");var T=v(V)?!!V.capture:!!V,z1=W3(l);if(z1||(l[q3]=z1=new pe(l)),g=z1.add(i,g,w,T,_),g.proxy)return g;if(w=Mv(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)mv||(V=T),V===void 0&&(V=!1),l.addEventListener(i.toString(),w,V);else if(l.attachEvent)l.attachEvent(i7(i.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Mv(){function l(g){return i.call(l.src,l.listener,g)}let i=Cv;return l}function l7(l,i,g,w,V){if(Array.isArray(i)){for(var _=0;_<i.length;_++)l7(l,i[_],g,w,V);return null}return g=Q3(g),l&&l[Ct]?l.L(i,g,v(w)?!!w.capture:!!w,V):n7(l,i,g,!0,w,V)}function a7(l,i,g,w,V){if(Array.isArray(i))for(var _=0;_<i.length;_++)a7(l,i[_],g,w,V);else w=v(w)?!!w.capture:!!w,g=Q3(g),l&&l[Ct]?(l=l.i,i=String(i).toString(),i in l.g&&(_=l.g[i],g=U3(_,g,w,V),-1<g&&(ue(_[g]),Array.prototype.splice.call(_,g,1),_.length==0&&(delete l.g[i],l.h--)))):l&&(l=W3(l))&&(i=l.g[i.toString()],l=-1,i&&(l=U3(i,g,w,V)),(g=-1<l?i[l]:null)&&G3(g))}function G3(l){if(typeof l!="number"&&l&&!l.da){var i=l.src;if(i&&i[Ct])Z3(i.i,l);else{var g=l.type,w=l.proxy;i.removeEventListener?i.removeEventListener(g,w,l.capture):i.detachEvent?i.detachEvent(i7(g),w):i.addListener&&i.removeListener&&i.removeListener(w),(g=W3(i))?(Z3(g,l),g.h==0&&(g.src=null,i[q3]=null)):ue(l)}}}function i7(l){return l in $3?$3[l]:$3[l]="on"+l}function Cv(l,i){if(l.da)l=!0;else{i=new Mt(i,this);var g=l.listener,w=l.ha||l.src;l.fa&&G3(l),l=g.call(w,i)}return l}function W3(l){return l=l[q3],l instanceof pe?l:null}var K3="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q3(l){return typeof l=="function"?l:(l[K3]||(l[K3]=function(i){return l.handleEvent(i)}),l[K3])}function Q1(){d0.call(this),this.i=new pe(this),this.M=this,this.F=null}A(Q1,d0),Q1.prototype[Ct]=!0,Q1.prototype.removeEventListener=function(l,i,g,w){a7(this,l,i,g,w)};function l2(l,i){var g,w=l.F;if(w)for(g=[];w;w=w.F)g.push(w);if(l=l.M,w=i.type||i,typeof i=="string")i=new K1(i,l);else if(i instanceof K1)i.target=i.target||l;else{var V=i;i=new K1(w,l),x(i,V)}if(V=!0,g)for(var _=g.length-1;0<=_;_--){var T=i.g=g[_];V=me(T,w,!0,i)&&V}if(T=i.g=l,V=me(T,w,!0,i)&&V,V=me(T,w,!1,i)&&V,g)for(_=0;_<g.length;_++)T=i.g=g[_],V=me(T,w,!1,i)&&V}Q1.prototype.N=function(){if(Q1.aa.N.call(this),this.i){var l=this.i,i;for(i in l.g){for(var g=l.g[i],w=0;w<g.length;w++)ue(g[w]);delete l.g[i],l.h--}}this.F=null},Q1.prototype.K=function(l,i,g,w){return this.i.add(String(l),i,!1,g,w)},Q1.prototype.L=function(l,i,g,w){return this.i.add(String(l),i,!0,g,w)};function me(l,i,g,w){if(i=l.i.g[String(i)],!i)return!0;i=i.concat();for(var V=!0,_=0;_<i.length;++_){var T=i[_];if(T&&!T.da&&T.capture==g){var z1=T.listener,U1=T.ha||T.src;T.fa&&Z3(l.i,T),V=z1.call(U1,w)!==!1&&V}}return V&&!w.defaultPrevented}function h7(l,i,g){if(typeof l=="function")g&&(l=z(l,g));else if(l&&typeof l.handleEvent=="function")l=z(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:a.setTimeout(l,i||0)}function v7(l){l.g=h7(()=>{l.g=null,l.i&&(l.i=!1,v7(l))},l.l);let i=l.h;l.h=null,l.m.apply(null,i)}class Vv extends d0{constructor(i,g){super(),this.m=i,this.l=g,this.h=null,this.i=!1,this.g=null}j(i){this.h=arguments,this.g?this.i=!0:v7(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(l){d0.call(this),this.h=l,this.g={}}A(Vt,d0);var g7=[];function d7(l){c1(l.g,function(i,g){this.g.hasOwnProperty(g)&&G3(i)},l),l.g={}}Vt.prototype.N=function(){Vt.aa.N.call(this),d7(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Y3=a.JSON.stringify,Hv=a.JSON.parse,Lv=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function J3(){}J3.prototype.h=null;function w7(l){return l.h||(l.h=l.i())}function u7(){}var Ht={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function X3(){K1.call(this,"d")}A(X3,K1);function to(){K1.call(this,"c")}A(to,K1);var O0={},p7=null;function fe(){return p7=p7||new Q1}O0.La="serverreachability";function m7(l){K1.call(this,O0.La,l)}A(m7,K1);function Lt(l){let i=fe();l2(i,new m7(i))}O0.STAT_EVENT="statevent";function f7(l,i){K1.call(this,O0.STAT_EVENT,l),this.stat=i}A(f7,K1);function a2(l){let i=fe();l2(i,new f7(i,l))}O0.Ma="timingevent";function z7(l,i){K1.call(this,O0.Ma,l),this.size=i}A(z7,K1);function yt(l,i){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},i)}function Bt(){this.g=!0}Bt.prototype.xa=function(){this.g=!1};function yv(l,i,g,w,V,_){l.info(function(){if(l.g)if(_)for(var T="",z1=_.split("&"),U1=0;U1<z1.length;U1++){var v1=z1[U1].split("=");if(1<v1.length){var Y1=v1[0];v1=v1[1];var J1=Y1.split("_");T=2<=J1.length&&J1[1]=="type"?T+(Y1+"="+v1+"&"):T+(Y1+"=redacted&")}}else T=null;else T=_;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+i+`
`+g+`
`+T})}function Bv(l,i,g,w,V,_,T){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+i+`
`+g+`
`+_+" "+T})}function w5(l,i,g,w){l.info(function(){return"XMLHTTP TEXT ("+i+"): "+Av(l,g)+(w?" "+w:"")})}function _v(l,i){l.info(function(){return"TIMEOUT: "+i})}Bt.prototype.info=function(){};function Av(l,i){if(!l.g)return i;if(!i)return null;try{var g=JSON.parse(i);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var w=g[l];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var _=V[0];if(_!="noop"&&_!="stop"&&_!="close")for(var T=1;T<V.length;T++)V[T]=""}}}}return Y3(g)}catch{return i}}var ze={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},x7={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eo;function xe(){}A(xe,J3),xe.prototype.g=function(){return new XMLHttpRequest},xe.prototype.i=function(){return{}},eo=new xe;function w0(l,i,g,w){this.j=l,this.i=i,this.l=g,this.R=w||1,this.U=new Vt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new M7}function M7(){this.i=null,this.g="",this.h=!1}var C7={},so={};function oo(l,i,g){l.L=1,l.v=He(Y2(i)),l.m=g,l.P=!0,V7(l,null)}function V7(l,i){l.F=Date.now(),Me(l),l.A=Y2(l.v);var g=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),P7(g.i,"t",w),l.C=0,g=l.j.J,l.h=new M7,l.g=e9(l.j,g?i:null,!l.m),0<l.O&&(l.M=new Vv(z(l.Y,l,l.g),l.O)),i=l.U,g=l.g,w=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(g7[0]=V.toString()),V=g7);for(var _=0;_<V.length;_++){var T=r7(g,V[_],w||i.handleEvent,!1,i.h||i);if(!T)break;i.g[T.key]=T}i=l.H?p(l.H):{},l.m?(l.u||(l.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,i)):(l.u="GET",l.g.ea(l.A,l.u,null,i)),Lt(),yv(l.i,l.u,l.A,l.l,l.R,l.m)}w0.prototype.ca=function(l){l=l.target;let i=this.M;i&&J2(l)==3?i.j():this.Y(l)},w0.prototype.Y=function(l){try{if(l==this.g)t:{let J1=J2(this.g);var i=this.g.Ba();let m5=this.g.Z();if(!(3>J1)&&(J1!=3||this.g&&(this.h.h||this.g.oa()||U7(this.g)))){this.J||J1!=4||i==7||(i==8||0>=m5?Lt(3):Lt(2)),co(this);var g=this.g.Z();this.X=g;e:if(H7(this)){var w=U7(this.g);l="";var V=w.length,_=J2(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){N0(this),_t(this);var T="";break e}this.h.i=new a.TextDecoder}for(i=0;i<V;i++)this.h.h=!0,l+=this.h.i.decode(w[i],{stream:!(_&&i==V-1)});w.length=0,this.h.g+=l,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=g==200,Bv(this.i,this.u,this.A,this.l,this.R,J1,g),this.o){if(this.T&&!this.K){e:{if(this.g){var z1,U1=this.g;if((z1=U1.g?U1.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(z1)){var v1=z1;break e}}v1=null}if(g=v1)w5(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ro(this,g);else{this.o=!1,this.s=3,a2(12),N0(this),_t(this);break t}}if(this.P){g=!0;let _2;for(;!this.J&&this.C<T.length;)if(_2=Sv(this,T),_2==so){J1==4&&(this.s=4,a2(14),g=!1),w5(this.i,this.l,null,"[Incomplete Response]");break}else if(_2==C7){this.s=4,a2(15),w5(this.i,this.l,T,"[Invalid Chunk]"),g=!1;break}else w5(this.i,this.l,_2,null),ro(this,_2);if(H7(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),J1!=4||T.length!=0||this.h.h||(this.s=1,a2(16),g=!1),this.o=this.o&&g,!g)w5(this.i,this.l,T,"[Invalid Chunked Response]"),N0(this),_t(this);else if(0<T.length&&!this.W){this.W=!0;var Y1=this.j;Y1.g==this&&Y1.ba&&!Y1.M&&(Y1.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),vo(Y1),Y1.M=!0,a2(11))}}else w5(this.i,this.l,T,null),ro(this,T);J1==4&&N0(this),this.o&&!this.J&&(J1==4?Y7(this.j,this):(this.o=!1,Me(this)))}else Gv(this.g),g==400&&0<T.indexOf("Unknown SID")?(this.s=3,a2(12)):(this.s=0,a2(13)),N0(this),_t(this)}}}catch{}finally{}};function H7(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Sv(l,i){var g=l.C,w=i.indexOf(`
`,g);return w==-1?so:(g=Number(i.substring(g,w)),isNaN(g)?C7:(w+=1,w+g>i.length?so:(i=i.slice(w,w+g),l.C=w+g,i)))}w0.prototype.cancel=function(){this.J=!0,N0(this)};function Me(l){l.S=Date.now()+l.I,L7(l,l.I)}function L7(l,i){if(l.B!=null)throw Error("WatchDog timer not null");l.B=yt(z(l.ba,l),i)}function co(l){l.B&&(a.clearTimeout(l.B),l.B=null)}w0.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(_v(this.i,this.A),this.L!=2&&(Lt(),a2(17)),N0(this),this.s=2,_t(this)):L7(this,this.S-l)};function _t(l){l.j.G==0||l.J||Y7(l.j,l)}function N0(l){co(l);var i=l.M;i&&typeof i.ma=="function"&&i.ma(),l.M=null,d7(l.U),l.g&&(i=l.g,l.g=null,i.abort(),i.ma())}function ro(l,i){try{var g=l.j;if(g.G!=0&&(g.g==l||no(g.h,l))){if(!l.K&&no(g.h,l)&&g.G==3){try{var w=g.Da.g.parse(i)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){t:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Ae(g),Be(g);else break t;ho(g),a2(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=yt(z(g.Za,g),6e3));if(1>=_7(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else j0(g,11)}else if((l.K||g.g==l)&&Ae(g),!U(i))for(V=g.Da.g.parse(i),i=0;i<V.length;i++){let v1=V[i];if(g.T=v1[0],v1=v1[1],g.G==2)if(v1[0]=="c"){g.K=v1[1],g.ia=v1[2];let Y1=v1[3];Y1!=null&&(g.la=Y1,g.j.info("VER="+g.la));let J1=v1[4];J1!=null&&(g.Aa=J1,g.j.info("SVER="+g.Aa));let m5=v1[5];m5!=null&&typeof m5=="number"&&0<m5&&(w=1.5*m5,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;let _2=l.g;if(_2){let Re=_2.g?_2.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Re){var _=w.h;_.g||Re.indexOf("spdy")==-1&&Re.indexOf("quic")==-1&&Re.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(lo(_,_.h),_.h=null))}if(w.D){let go=_2.g?_2.g.getResponseHeader("X-HTTP-Session-Id"):null;go&&(w.ya=go,V1(w.I,w.D,go))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var T=l;if(w.qa=t9(w,w.J?w.ia:null,w.W),T.K){A7(w.h,T);var z1=T,U1=w.L;U1&&(z1.I=U1),z1.B&&(co(z1),Me(z1)),w.g=T}else K7(w);0<g.i.length&&_e(g)}else v1[0]!="stop"&&v1[0]!="close"||j0(g,7);else g.G==3&&(v1[0]=="stop"||v1[0]=="close"?v1[0]=="stop"?j0(g,7):io(g):v1[0]!="noop"&&g.l&&g.l.ta(v1),g.v=0)}}Lt(4)}catch{}}var Rv=class{constructor(l,i){this.g=l,this.map=i}};function y7(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function B7(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _7(l){return l.h?1:l.g?l.g.size:0}function no(l,i){return l.h?l.h==i:l.g?l.g.has(i):!1}function lo(l,i){l.g?l.g.add(i):l.h=i}function A7(l,i){l.h&&l.h==i?l.h=null:l.g&&l.g.has(i)&&l.g.delete(i)}y7.prototype.cancel=function(){if(this.i=S7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function S7(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let i=l.i;for(let g of l.g.values())i=i.concat(g.D);return i}return R(l.i)}function bv(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(h(l)){for(var i=[],g=l.length,w=0;w<g;w++)i.push(l[w]);return i}i=[],g=0;for(w in l)i[g++]=l[w];return i}function kv(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(h(l)||typeof l=="string"){var i=[];l=l.length;for(var g=0;g<l;g++)i.push(g);return i}i=[],g=0;for(let w in l)i[g++]=w;return i}}}function R7(l,i){if(l.forEach&&typeof l.forEach=="function")l.forEach(i,void 0);else if(h(l)||typeof l=="string")Array.prototype.forEach.call(l,i,void 0);else for(var g=kv(l),w=bv(l),V=w.length,_=0;_<V;_++)i.call(void 0,w[_],g&&g[_],l)}var b7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ev(l,i){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var w=l[g].indexOf("="),V=null;if(0<=w){var _=l[g].substring(0,w);V=l[g].substring(w+1)}else _=l[g];i(_,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function F0(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof F0){this.h=l.h,Ce(this,l.j),this.o=l.o,this.g=l.g,Ve(this,l.s),this.l=l.l;var i=l.i,g=new Rt;g.i=i.i,i.g&&(g.g=new Map(i.g),g.h=i.h),k7(this,g),this.m=l.m}else l&&(i=String(l).match(b7))?(this.h=!1,Ce(this,i[1]||"",!0),this.o=At(i[2]||""),this.g=At(i[3]||"",!0),Ve(this,i[4]),this.l=At(i[5]||"",!0),k7(this,i[6]||"",!0),this.m=At(i[7]||"")):(this.h=!1,this.i=new Rt(null,this.h))}F0.prototype.toString=function(){var l=[],i=this.j;i&&l.push(St(i,E7,!0),":");var g=this.g;return(g||i=="file")&&(l.push("//"),(i=this.o)&&l.push(St(i,E7,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(St(g,g.charAt(0)=="/"?Pv:Iv,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",St(g,Ov)),l.join("")};function Y2(l){return new F0(l)}function Ce(l,i,g){l.j=g?At(i,!0):i,l.j&&(l.j=l.j.replace(/:$/,""))}function Ve(l,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);l.s=i}else l.s=null}function k7(l,i,g){i instanceof Rt?(l.i=i,Nv(l.i,l.h)):(g||(i=St(i,Dv)),l.i=new Rt(i,l.h))}function V1(l,i,g){l.i.set(i,g)}function He(l){return V1(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function At(l,i){return l?i?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function St(l,i,g){return typeof l=="string"?(l=encodeURI(l).replace(i,Tv),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Tv(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var E7=/[#\/\?@]/g,Iv=/[#\?:]/g,Pv=/[#\?]/g,Dv=/[#\?@]/g,Ov=/#/g;function Rt(l,i){this.h=this.g=null,this.i=l||null,this.j=!!i}function u0(l){l.g||(l.g=new Map,l.h=0,l.i&&Ev(l.i,function(i,g){l.add(decodeURIComponent(i.replace(/\+/g," ")),g)}))}s=Rt.prototype,s.add=function(l,i){u0(this),this.i=null,l=u5(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(i),this.h+=1,this};function T7(l,i){u0(l),i=u5(l,i),l.g.has(i)&&(l.i=null,l.h-=l.g.get(i).length,l.g.delete(i))}function I7(l,i){return u0(l),i=u5(l,i),l.g.has(i)}s.forEach=function(l,i){u0(this),this.g.forEach(function(g,w){g.forEach(function(V){l.call(i,V,w,this)},this)},this)},s.na=function(){u0(this);let l=Array.from(this.g.values()),i=Array.from(this.g.keys()),g=[];for(let w=0;w<i.length;w++){let V=l[w];for(let _=0;_<V.length;_++)g.push(i[w])}return g},s.V=function(l){u0(this);let i=[];if(typeof l=="string")I7(this,l)&&(i=i.concat(this.g.get(u5(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)i=i.concat(l[g])}return i},s.set=function(l,i){return u0(this),this.i=null,l=u5(this,l),I7(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[i]),this.h+=1,this},s.get=function(l,i){return l?(l=this.V(l),0<l.length?String(l[0]):i):i};function P7(l,i,g){T7(l,i),0<g.length&&(l.i=null,l.g.set(u5(l,i),R(g)),l.h+=g.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],i=Array.from(this.g.keys());for(var g=0;g<i.length;g++){var w=i[g];let _=encodeURIComponent(String(w)),T=this.V(w);for(w=0;w<T.length;w++){var V=_;T[w]!==""&&(V+="="+encodeURIComponent(String(T[w]))),l.push(V)}}return this.i=l.join("&")};function u5(l,i){return i=String(i),l.j&&(i=i.toLowerCase()),i}function Nv(l,i){i&&!l.j&&(u0(l),l.i=null,l.g.forEach(function(g,w){var V=w.toLowerCase();w!=V&&(T7(this,w),P7(this,V,g))},l)),l.j=i}function Fv(l,i){let g=new Bt;if(a.Image){let w=new Image;w.onload=y(p0,g,"TestLoadImage: loaded",!0,i,w),w.onerror=y(p0,g,"TestLoadImage: error",!1,i,w),w.onabort=y(p0,g,"TestLoadImage: abort",!1,i,w),w.ontimeout=y(p0,g,"TestLoadImage: timeout",!1,i,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else i(!1)}function jv(l,i){let g=new Bt,w=new AbortController,V=setTimeout(()=>{w.abort(),p0(g,"TestPingServer: timeout",!1,i)},1e4);fetch(l,{signal:w.signal}).then(_=>{clearTimeout(V),_.ok?p0(g,"TestPingServer: ok",!0,i):p0(g,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(V),p0(g,"TestPingServer: error",!1,i)})}function p0(l,i,g,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(g)}catch{}}function Zv(){this.g=new Lv}function Uv(l,i,g){let w=g||"";try{R7(l,function(V,_){let T=V;v(V)&&(T=Y3(V)),i.push(w+_+"="+encodeURIComponent(T))})}catch(V){throw i.push(w+"type="+encodeURIComponent("_badmap")),V}}function bt(l){this.l=l.Ub||null,this.j=l.eb||!1}A(bt,J3),bt.prototype.g=function(){return new Le(this.l,this.j)},bt.prototype.i=function(l){return function(){return l}}({});function Le(l,i){Q1.call(this),this.D=l,this.o=i,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Le,Q1),s=Le.prototype,s.open=function(l,i){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=i,this.readyState=1,Et(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let i={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(i.body=l),(this.D||a).fetch(new Request(this.A,i)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kt(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Et(this)),this.g&&(this.readyState=3,Et(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;D7(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function D7(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var i=l.value?l.value:new Uint8Array(0);(i=this.v.decode(i,{stream:!l.done}))&&(this.response=this.responseText+=i)}l.done?kt(this):Et(this),this.readyState==3&&D7(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,kt(this))},s.Qa=function(l){this.g&&(this.response=l,kt(this))},s.ga=function(){this.g&&kt(this)};function kt(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Et(l)}s.setRequestHeader=function(l,i){this.u.append(l,i)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],i=this.h.entries();for(var g=i.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=i.next();return l.join(`\r
`)};function Et(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Le.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function O7(l){let i="";return c1(l,function(g,w){i+=w,i+=":",i+=g,i+=`\r
`}),i}function ao(l,i,g){t:{for(w in g){var w=!1;break t}w=!0}w||(g=O7(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):V1(l,i,g))}function y1(l){Q1.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(y1,Q1);var qv=/^https?$/i,$v=["POST","PUT"];s=y1.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,i,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);i=i?i.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eo.g(),this.v=this.o?w7(this.o):w7(eo),this.g.onreadystatechange=z(this.Ea,this);try{this.B=!0,this.g.open(i,String(l),!0),this.B=!1}catch(_){N7(this,_);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)g.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let _ of w.keys())g.set(_,w.get(_));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(_=>_.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call($v,i,void 0))||w||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[_,T]of g)this.g.setRequestHeader(_,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Z7(this),this.u=!0,this.g.send(l),this.u=!1}catch(_){N7(this,_)}};function N7(l,i){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=i,l.m=5,F7(l),ye(l)}function F7(l){l.A||(l.A=!0,l2(l,"complete"),l2(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,l2(this,"complete"),l2(this,"abort"),ye(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ye(this,!0)),y1.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?j7(this):this.bb())},s.bb=function(){j7(this)};function j7(l){if(l.h&&typeof n<"u"&&(!l.v[1]||J2(l)!=4||l.Z()!=2)){if(l.u&&J2(l)==4)h7(l.Ea,0,l);else if(l2(l,"readystatechange"),J2(l)==4){l.h=!1;try{let T=l.Z();t:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}var g;if(!(g=i)){var w;if(w=T===0){var V=String(l.D).match(b7)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),w=!qv.test(V?V.toLowerCase():"")}g=w}if(g)l2(l,"complete"),l2(l,"success");else{l.m=6;try{var _=2<J2(l)?l.g.statusText:""}catch{_=""}l.l=_+" ["+l.Z()+"]",F7(l)}}finally{ye(l)}}}}function ye(l,i){if(l.g){Z7(l);let g=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,i||l2(l,"ready");try{g.onreadystatechange=w}catch{}}}function Z7(l){l.I&&(a.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function J2(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<J2(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var i=this.g.responseText;return l&&i.indexOf(l)==0&&(i=i.substring(l.length)),Hv(i)}};function U7(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Gv(l){let i={};l=(l.g&&2<=J2(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(U(l[w]))continue;var g=C(l[w]);let V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let _=i[V]||[];i[V]=_,_.push(g)}M(i,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tt(l,i,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||i}function q7(l){this.Aa=0,this.i=[],this.j=new Bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tt("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tt("baseRetryDelayMs",5e3,l),this.cb=Tt("retryDelaySeedMs",1e4,l),this.Wa=Tt("forwardChannelMaxRetries",2,l),this.wa=Tt("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new y7(l&&l.concurrentRequestLimit),this.Da=new Zv,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=q7.prototype,s.la=8,s.G=1,s.connect=function(l,i,g,w){a2(0),this.W=l,this.H=i||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=t9(this,null,this.W),_e(this)};function io(l){if($7(l),l.G==3){var i=l.U++,g=Y2(l.I);if(V1(g,"SID",l.K),V1(g,"RID",i),V1(g,"TYPE","terminate"),It(l,g),i=new w0(l,l.j,i),i.L=2,i.v=He(Y2(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(i.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=i.v,g=!0),g||(i.g=e9(i.j,null),i.g.ea(i.v)),i.F=Date.now(),Me(i)}X7(l)}function Be(l){l.g&&(vo(l),l.g.cancel(),l.g=null)}function $7(l){Be(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ae(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function _e(l){if(!B7(l.h)&&!l.s){l.s=!0;var i=l.Ga;zt||c7(),xt||(zt(),xt=!0),j3.add(i,l),l.B=0}}function Wv(l,i){return _7(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=i.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=yt(z(l.Ga,l,i),J7(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new w0(this,this.j,l),_=this.o;if(this.S&&(_?(_=p(_),x(_,this.S)):_=this.S),this.m!==null||this.O||(V.H=_,_=null),this.P)t:{for(var i=0,g=0;g<this.i.length;g++){e:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(i+=w,4096<i){i=g;break t}if(i===4096||g===this.i.length-1){i=g+1;break t}}i=1e3}else i=1e3;i=W7(this,V,i),g=Y2(this.I),V1(g,"RID",l),V1(g,"CVER",22),this.D&&V1(g,"X-HTTP-Session-Id",this.D),It(this,g),_&&(this.O?i="headers="+encodeURIComponent(String(O7(_)))+"&"+i:this.m&&ao(g,this.m,_)),lo(this.h,V),this.Ua&&V1(g,"TYPE","init"),this.P?(V1(g,"$req",i),V1(g,"SID","null"),V.T=!0,oo(V,g,null)):oo(V,g,i),this.G=2}}else this.G==3&&(l?G7(this,l):this.i.length==0||B7(this.h)||G7(this))};function G7(l,i){var g;i?g=i.l:g=l.U++;let w=Y2(l.I);V1(w,"SID",l.K),V1(w,"RID",g),V1(w,"AID",l.T),It(l,w),l.m&&l.o&&ao(w,l.m,l.o),g=new w0(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),i&&(l.i=i.D.concat(l.i)),i=W7(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),lo(l.h,g),oo(g,w,i)}function It(l,i){l.H&&c1(l.H,function(g,w){V1(i,w,g)}),l.l&&R7({},function(g,w){V1(i,w,g)})}function W7(l,i,g){g=Math.min(l.i.length,g);var w=l.l?z(l.l.Na,l.l,l):null;t:{var V=l.i;let _=-1;for(;;){let T=["count="+g];_==-1?0<g?(_=V[0].g,T.push("ofs="+_)):_=0:T.push("ofs="+_);let z1=!0;for(let U1=0;U1<g;U1++){let v1=V[U1].g,Y1=V[U1].map;if(v1-=_,0>v1)_=Math.max(0,V[U1].g-100),z1=!1;else try{Uv(Y1,T,"req"+v1+"_")}catch{w&&w(Y1)}}if(z1){w=T.join("&");break t}}}return l=l.i.splice(0,g),i.D=l,w}function K7(l){if(!l.g&&!l.u){l.Y=1;var i=l.Fa;zt||c7(),xt||(zt(),xt=!0),j3.add(i,l),l.v=0}}function ho(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=yt(z(l.Fa,l),J7(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,Q7(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=yt(z(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,a2(10),Be(this),Q7(this))};function vo(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Q7(l){l.g=new w0(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var i=Y2(l.qa);V1(i,"RID","rpc"),V1(i,"SID",l.K),V1(i,"AID",l.T),V1(i,"CI",l.F?"0":"1"),!l.F&&l.ja&&V1(i,"TO",l.ja),V1(i,"TYPE","xmlhttp"),It(l,i),l.m&&l.o&&ao(i,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=He(Y2(i)),g.m=null,g.P=!0,V7(g,l)}s.Za=function(){this.C!=null&&(this.C=null,Be(this),ho(this),a2(19))};function Ae(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Y7(l,i){var g=null;if(l.g==i){Ae(l),vo(l),l.g=null;var w=2}else if(no(l.h,i))g=i.D,A7(l.h,i),w=1;else return;if(l.G!=0){if(i.o)if(w==1){g=i.m?i.m.length:0,i=Date.now()-i.F;var V=l.B;w=fe(),l2(w,new z7(w,g)),_e(l)}else K7(l);else if(V=i.s,V==3||V==0&&0<i.X||!(w==1&&Wv(l,i)||w==2&&ho(l)))switch(g&&0<g.length&&(i=l.h,i.i=i.i.concat(g)),V){case 1:j0(l,5);break;case 4:j0(l,10);break;case 3:j0(l,6);break;default:j0(l,2)}}}function J7(l,i){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*i}function j0(l,i){if(l.j.info("Error code "+i),i==2){var g=z(l.fb,l),w=l.Xa;let V=!w;w=new F0(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ce(w,"https"),He(w),V?Fv(w.toString(),g):jv(w.toString(),g)}else a2(2);l.G=0,l.l&&l.l.sa(i),X7(l),$7(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),a2(2)):(this.j.info("Failed to ping google.com"),a2(1))};function X7(l){if(l.G=0,l.ka=[],l.l){let i=S7(l.h);(i.length!=0||l.i.length!=0)&&(B(l.ka,i),B(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function t9(l,i,g){var w=g instanceof F0?Y2(g):new F0(g);if(w.g!="")i&&(w.g=i+"."+w.g),Ve(w,w.s);else{var V=a.location;w=V.protocol,i=i?i+"."+V.hostname:V.hostname,V=+V.port;var _=new F0(null);w&&Ce(_,w),i&&(_.g=i),V&&Ve(_,V),g&&(_.l=g),w=_}return g=l.D,i=l.ya,g&&i&&V1(w,g,i),V1(w,"VER",l.la),It(l,w),w}function e9(l,i,g){if(i&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return i=l.Ca&&!l.pa?new y1(new bt({eb:g})):new y1(l.pa),i.Ha(l.J),i}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function s9(){}s=s9.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Se(){}Se.prototype.g=function(l,i){return new v2(l,i)};function v2(l,i){Q1.call(this),this.g=new q7(i),this.l=l,this.h=i&&i.messageUrlParams||null,l=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(l?l["X-WebChannel-Content-Type"]=i.messageContentType:l={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.va&&(l?l["X-WebChannel-Client-Profile"]=i.va:l={"X-WebChannel-Client-Profile":i.va}),this.g.S=l,(l=i&&i.Sb)&&!U(l)&&(this.g.m=l),this.v=i&&i.supportsCrossDomainXhr||!1,this.u=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!U(i)&&(this.g.D=i,l=this.h,l!==null&&i in l&&(l=this.h,i in l&&delete l[i])),this.j=new p5(this)}A(v2,Q1),v2.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},v2.prototype.close=function(){io(this.g)},v2.prototype.o=function(l){var i=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Y3(l),l=g);i.i.push(new Rv(i.Ya++,l)),i.G==3&&_e(i)},v2.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,v2.aa.N.call(this)};function o9(l){X3.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var i=l.__sm__;if(i){t:{for(let g in i){l=g;break t}l=void 0}(this.i=l)&&(l=this.i,i=i!==null&&l in i?i[l]:void 0),this.data=i}else this.data=l}A(o9,X3);function c9(){to.call(this),this.status=1}A(c9,to);function p5(l){this.g=l}A(p5,s9),p5.prototype.ua=function(){l2(this.g,"a")},p5.prototype.ta=function(l){l2(this.g,new o9(l))},p5.prototype.sa=function(l){l2(this.g,new c9)},p5.prototype.ra=function(){l2(this.g,"b")},Se.prototype.createWebChannel=Se.prototype.g,v2.prototype.send=v2.prototype.o,v2.prototype.open=v2.prototype.m,v2.prototype.close=v2.prototype.close,or=a0.createWebChannelTransport=function(){return new Se},sr=a0.getStatEventTarget=function(){return fe()},er=a0.Event=O0,ks=a0.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ze.NO_ERROR=0,ze.TIMEOUT=8,ze.HTTP_ERROR=6,L4=a0.ErrorCode=ze,x7.COMPLETE="complete",tr=a0.EventType=x7,u7.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",Q1.prototype.listen=Q1.prototype.K,P5=a0.WebChannel=u7,Xc=a0.FetchXmlHttpFactory=bt,y1.prototype.listenOnce=y1.prototype.L,y1.prototype.getLastError=y1.prototype.Ka,y1.prototype.getLastErrorCode=y1.prototype.Ba,y1.prototype.getStatus=y1.prototype.Z,y1.prototype.getResponseJson=y1.prototype.Oa,y1.prototype.getResponseText=y1.prototype.oa,y1.prototype.send=y1.prototype.ea,y1.prototype.setWithCredentials=y1.prototype.Ha,Jc=a0.XhrIo=y1}).apply(typeof bs<"u"?bs:typeof self<"u"?self:typeof window<"u"?window:{});var Di="@firebase/firestore";var j1=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};j1.UNAUTHENTICATED=new j1(null),j1.GOOGLE_CREDENTIALS=new j1("google-credentials-uid"),j1.FIRST_PARTY=new j1("first-party-uid"),j1.MOCK_USER=new j1("mock-user");var rt="10.12.5";var e5=new I5("@firebase/firestore");function y4(){return e5.logLevel}function N(s,...t){if(e5.logLevel<=h1.DEBUG){let e=t.map(Un);e5.debug(`Firestore (${rt}): ${s}`,...e)}}function h0(s,...t){if(e5.logLevel<=h1.ERROR){let e=t.map(Un);e5.error(`Firestore (${rt}): ${s}`,...e)}}function q5(s,...t){if(e5.logLevel<=h1.WARN){let e=t.map(Un);e5.warn(`Firestore (${rt}): ${s}`,...e)}}function Un(s){if(typeof s=="string")return s;try{return function(e){return JSON.stringify(e)}(s)}catch{return s}}function K(s="Unexpected state"){let t=`FIRESTORE (${rt}) INTERNAL ASSERTION FAILED: `+s;throw h0(t),new Error(t)}function M1(s,t){s||K()}function Y(s,t){return s}var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Z=class extends r0{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var F2=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Ds=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},ar=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(j1.UNAUTHENTICATED))}shutdown(){}},ir=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},hr=class{constructor(t){this.t=t,this.currentUser=j1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let o=this.i,c=h=>this.i!==o?(o=this.i,e(h)):Promise.resolve(),r=new F2;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new F2,t.enqueueRetryable(()=>c(this.currentUser))};let n=()=>{let h=r;t.enqueueRetryable(()=>S(this,null,function*(){yield h.promise,yield c(this.currentUser)}))},a=h=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),n()};this.t.onInit(h=>a(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?a(h):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new F2)}},0),n()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(o=>this.i!==t?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(M1(typeof o.accessToken=="string"),new Ds(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return M1(t===null||typeof t=="string"),new j1(t)}},vr=class{constructor(t,e,o){this.l=t,this.h=e,this.P=o,this.type="FirstParty",this.user=j1.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gr=class{constructor(t,e,o){this.l=t,this.h=e,this.P=o}getToken(){return Promise.resolve(new vr(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(j1.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dr=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wr=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let o=r=>{r.error!=null&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let n=r.token!==this.R;return this.R=r.token,N("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>o(r))};let c=r=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>c(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?c(r):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(M1(typeof e.token=="string"),this.R=e.token,new dr(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Xu(s){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let o=0;o<s;o++)e[o]=Math.floor(256*Math.random());return e}var Os=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,o="";for(;o.length<20;){let c=Xu(40);for(let r=0;r<c.length;++r)o.length<20&&c[r]<e&&(o+=t.charAt(c[r]%t.length))}return o}};function m1(s,t){return s<t?-1:s>t?1:0}function $5(s,t,e){return s.length===t.length&&s.every((o,c)=>e(o,t[c]))}var W1=class s{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Z(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Z(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Z(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return s.fromMillis(Date.now())}static fromDate(t){return s.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*e));return new s(e,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?m1(this.nanoseconds,t.nanoseconds):m1(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class s{constructor(t){this.timestamp=t}static fromTimestamp(t){return new s(t)}static min(){return new s(new W1(0,0))}static max(){return new s(new W1(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ns=class s{constructor(t,e,o){e===void 0?e=0:e>t.length&&K(),o===void 0?o=t.length-e:o>t.length-e&&K(),this.segments=t,this.offset=e,this.len=o}get length(){return this.len}isEqual(t){return s.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof s?t.forEach(o=>{e.push(o)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let o=Math.min(t.length,e.length);for(let c=0;c<o;c++){let r=t.get(c),n=e.get(c);if(r<n)return-1;if(r>n)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},A1=class s extends Ns{construct(t,e,o){return new s(t,e,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let o of t){if(o.indexOf("//")>=0)throw new Z(b.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);e.push(...o.split("/").filter(c=>c.length>0))}return new s(e)}static emptyPath(){return new s([])}},tp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,f2=class s extends Ns{construct(t,e,o){return new s(t,e,o)}static isValidIdentifier(t){return tp.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),s.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new s(["__name__"])}static fromServerFormat(t){let e=[],o="",c=0,r=()=>{if(o.length===0)throw new Z(b.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(o),o=""},n=!1;for(;c<t.length;){let a=t[c];if(a==="\\"){if(c+1===t.length)throw new Z(b.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let h=t[c+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Z(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=h,c+=2}else a==="`"?(n=!n,c++):a!=="."||n?(o+=a,c++):(r(),c++)}if(r(),n)throw new Z(b.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new s(e)}static emptyPath(){return new s([])}};var $=class s{constructor(t){this.path=t}static fromPath(t){return new s(A1.fromString(t))}static fromName(t){return new s(A1.fromString(t).popFirst(5))}static empty(){return new s(A1.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&A1.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return A1.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new s(new A1(t.slice()))}};var ur=class{constructor(t,e,o,c){this.indexId=t,this.collectionGroup=e,this.fields=o,this.indexState=c}};ur.UNKNOWN_ID=-1;function ep(s,t){let e=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,c=X.fromTimestamp(o===1e9?new W1(e+1,0):new W1(e,o));return new s5(c,$.empty(),t)}function sp(s){return new s5(s.readTime,s.key,-1)}var s5=class s{constructor(t,e,o){this.readTime=t,this.documentKey=e,this.largestBatchId=o}static min(){return new s(X.min(),$.empty(),-1)}static max(){return new s(X.max(),$.empty(),-1)}};function op(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=$.comparator(s.documentKey,t.documentKey),e!==0?e:m1(s.largestBatchId,t.largestBatchId))}var cp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pr=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Z4(s){return S(this,null,function*(){if(s.code!==b.FAILED_PRECONDITION||s.message!==cp)throw s;N("LocalStore","Unexpectedly lost primary lease")})}var E=class s{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new s((o,c)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(o,c)},this.catchCallback=r=>{this.wrapFailure(e,r).next(o,c)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof s?e:s.resolve(e)}catch(e){return s.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):s.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):s.reject(e)}static resolve(t){return new s((e,o)=>{e(t)})}static reject(t){return new s((e,o)=>{o(t)})}static waitFor(t){return new s((e,o)=>{let c=0,r=0,n=!1;t.forEach(a=>{++c,a.next(()=>{++r,n&&r===c&&e()},h=>o(h))}),n=!0,r===c&&e()})}static or(t){let e=s.resolve(!1);for(let o of t)e=e.next(c=>c?s.resolve(c):o());return e}static forEach(t,e){let o=[];return t.forEach((c,r)=>{o.push(e.call(this,c,r))}),this.waitFor(o)}static mapArray(t,e){return new s((o,c)=>{let r=t.length,n=new Array(r),a=0;for(let h=0;h<r;h++){let v=h;e(t[v]).next(d=>{n[v]=d,++a,a===r&&o(n)},d=>c(d))}})}static doWhile(t,e){return new s((o,c)=>{let r=()=>{t()===!0?e().next(()=>{r()},c):o()};r()})}};function rp(s){let t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function U4(s){return s.name==="IndexedDbTransactionError"}var dh=(()=>{class s{constructor(e,o){this.previousValue=e,o&&(o.sequenceNumberHandler=c=>this.ie(c),this.se=c=>o.writeSequenceNumber(c))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return s.oe=-1,s})();function d3(s){return s==null}function b4(s){return s===0&&1/s==-1/0}function np(s){return typeof s=="number"&&Number.isInteger(s)&&!b4(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}var lp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YC=[...lp,"documentOverlays"],ap=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ip=ap,hp=[...ip,"indexConfiguration","indexState","indexEntries"];var JC=[...hp,"globals"];function Oi(s){let t=0;for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function i5(s,t){for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function wh(s){for(let t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}var S1=class s{constructor(t,e){this.comparator=t,this.root=e||j2.EMPTY}insert(t,e){return new s(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,j2.BLACK,null,null))}remove(t){return new s(this.comparator,this.root.remove(t,this.comparator).copy(null,null,j2.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let o=this.comparator(t,e.key);if(o===0)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null}indexOf(t){let e=0,o=this.root;for(;!o.isEmpty();){let c=this.comparator(t,o.key);if(c===0)return e+o.left.size;c<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,o)=>(t(e,o),!1))}toString(){let t=[];return this.inorderTraversal((e,o)=>(t.push(`${e}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new F5(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new F5(this.root,t,this.comparator,!1)}getReverseIterator(){return new F5(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new F5(this.root,t,this.comparator,!0)}},F5=class{constructor(t,e,o,c){this.isReverse=c,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?o(t.key,e):1,e&&c&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},j2=class s{constructor(t,e,o,c,r){this.key=t,this.value=e,this.color=o??s.RED,this.left=c??s.EMPTY,this.right=r??s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,o,c,r){return new s(t??this.key,e??this.value,o??this.color,c??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,o){let c=this,r=o(t,c.key);return c=r<0?c.copy(null,null,null,c.left.insert(t,e,o),null):r===0?c.copy(null,e,null,null,null):c.copy(null,null,null,null,c.right.insert(t,e,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let o,c=this;if(e(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,e),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),e(t,c.key)===0){if(c.right.isEmpty())return s.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,e))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let t=this.left.check();if(t!==this.right.check())throw K();return t+(this.isRed()?0:1)}};j2.EMPTY=null,j2.RED=!0,j2.BLACK=!1;j2.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(t,e,o,c,r){return this}insert(t,e,o){return new j2(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var r2=class s{constructor(t){this.comparator=t,this.data=new S1(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,o)=>(t(e),!1))}forEachInRange(t,e){let o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){let c=o.getNext();if(this.comparator(c.key,t[1])>=0)return;e(c.key)}}forEachWhile(t,e){let o;for(o=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Fs(this.data.getIterator())}getIteratorFrom(t){return new Fs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(o=>{e=e.add(o)}),e}isEqual(t){if(!(t instanceof s)||this.size!==t.size)return!1;let e=this.data.getIterator(),o=t.data.getIterator();for(;e.hasNext();){let c=e.getNext().key,r=o.getNext().key;if(this.comparator(c,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new s(this.comparator);return e.data=t,e}},Fs=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var L2=class s{constructor(t){this.fields=t,t.sort(f2.comparator)}static empty(){return new s([])}unionWith(t){let e=new r2(f2.comparator);for(let o of this.fields)e=e.add(o);for(let o of t)e=e.add(o);return new s(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return $5(this.fields,t.fields,(e,o)=>e.isEqual(o))}};var js=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var n2=class s{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(c){try{return atob(c)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new js("Invalid base64 string: "+r):r}}(t);return new s(e)}static fromUint8Array(t){let e=function(c){let r="";for(let n=0;n<c.length;++n)r+=String.fromCharCode(c[n]);return r}(t);return new s(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let o=new Uint8Array(e.length);for(let c=0;c<e.length;c++)o[c]=e.charCodeAt(c);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return m1(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};n2.EMPTY_BYTE_STRING=new n2("");var vp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function v0(s){if(M1(!!s),typeof s=="string"){let t=0,e=vp.exec(s);if(M1(!!e),e[1]){let c=e[1];c=(c+"000000000").substr(0,9),t=Number(c)}let o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:_1(s.seconds),nanos:_1(s.nanos)}}function _1(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function k0(s){return typeof s=="string"?n2.fromBase64String(s):n2.fromUint8Array(s)}function qn(s){var t,e;return((e=(((t=s?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function $n(s){let t=s.mapValue.fields.__previous_value__;return qn(t)?$n(t):t}function k4(s){let t=v0(s.mapValue.fields.__local_write_time__.timestampValue);return new W1(t.seconds,t.nanos)}var mr=class{constructor(t,e,o,c,r,n,a,h,v){this.databaseId=t,this.appId=e,this.persistenceKey=o,this.host=c,this.ssl=r,this.forceLongPolling=n,this.autoDetectLongPolling=a,this.longPollingOptions=h,this.useFetchStreams=v}},Zs=class s{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof s&&t.projectId===this.projectId&&t.database===this.database}};var Es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function o5(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?qn(s)?4:uh(s)?9007199254740991:10:K()}function q2(s,t){if(s===t)return!0;let e=o5(s);if(e!==o5(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return k4(s).isEqual(k4(t));case 3:return function(c,r){if(typeof c.timestampValue=="string"&&typeof r.timestampValue=="string"&&c.timestampValue.length===r.timestampValue.length)return c.timestampValue===r.timestampValue;let n=v0(c.timestampValue),a=v0(r.timestampValue);return n.seconds===a.seconds&&n.nanos===a.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(c,r){return k0(c.bytesValue).isEqual(k0(r.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(c,r){return _1(c.geoPointValue.latitude)===_1(r.geoPointValue.latitude)&&_1(c.geoPointValue.longitude)===_1(r.geoPointValue.longitude)}(s,t);case 2:return function(c,r){if("integerValue"in c&&"integerValue"in r)return _1(c.integerValue)===_1(r.integerValue);if("doubleValue"in c&&"doubleValue"in r){let n=_1(c.doubleValue),a=_1(r.doubleValue);return n===a?b4(n)===b4(a):isNaN(n)&&isNaN(a)}return!1}(s,t);case 9:return $5(s.arrayValue.values||[],t.arrayValue.values||[],q2);case 10:return function(c,r){let n=c.mapValue.fields||{},a=r.mapValue.fields||{};if(Oi(n)!==Oi(a))return!1;for(let h in n)if(n.hasOwnProperty(h)&&(a[h]===void 0||!q2(n[h],a[h])))return!1;return!0}(s,t);default:return K()}}function E4(s,t){return(s.values||[]).find(e=>q2(e,t))!==void 0}function G5(s,t){if(s===t)return 0;let e=o5(s),o=o5(t);if(e!==o)return m1(e,o);switch(e){case 0:case 9007199254740991:return 0;case 1:return m1(s.booleanValue,t.booleanValue);case 2:return function(r,n){let a=_1(r.integerValue||r.doubleValue),h=_1(n.integerValue||n.doubleValue);return a<h?-1:a>h?1:a===h?0:isNaN(a)?isNaN(h)?0:-1:1}(s,t);case 3:return Ni(s.timestampValue,t.timestampValue);case 4:return Ni(k4(s),k4(t));case 5:return m1(s.stringValue,t.stringValue);case 6:return function(r,n){let a=k0(r),h=k0(n);return a.compareTo(h)}(s.bytesValue,t.bytesValue);case 7:return function(r,n){let a=r.split("/"),h=n.split("/");for(let v=0;v<a.length&&v<h.length;v++){let d=m1(a[v],h[v]);if(d!==0)return d}return m1(a.length,h.length)}(s.referenceValue,t.referenceValue);case 8:return function(r,n){let a=m1(_1(r.latitude),_1(n.latitude));return a!==0?a:m1(_1(r.longitude),_1(n.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return function(r,n){let a=r.values||[],h=n.values||[];for(let v=0;v<a.length&&v<h.length;++v){let d=G5(a[v],h[v]);if(d)return d}return m1(a.length,h.length)}(s.arrayValue,t.arrayValue);case 10:return function(r,n){if(r===Es.mapValue&&n===Es.mapValue)return 0;if(r===Es.mapValue)return 1;if(n===Es.mapValue)return-1;let a=r.fields||{},h=Object.keys(a),v=n.fields||{},d=Object.keys(v);h.sort(),d.sort();for(let u=0;u<h.length&&u<d.length;++u){let z=m1(h[u],d[u]);if(z!==0)return z;let y=G5(a[h[u]],v[d[u]]);if(y!==0)return y}return m1(h.length,d.length)}(s.mapValue,t.mapValue);default:throw K()}}function Ni(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return m1(s,t);let e=v0(s),o=v0(t),c=m1(e.seconds,o.seconds);return c!==0?c:m1(e.nanos,o.nanos)}function W5(s){return fr(s)}function fr(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){let o=v0(e);return`time(${o.seconds},${o.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return k0(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return $.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let o="[",c=!0;for(let r of e.values||[])c?c=!1:o+=",",o+=fr(r);return o+"]"}(s.arrayValue):"mapValue"in s?function(e){let o=Object.keys(e.fields||{}).sort(),c="{",r=!0;for(let n of o)r?r=!1:c+=",",c+=`${n}:${fr(e.fields[n])}`;return c+"}"}(s.mapValue):K()}function zr(s){return!!s&&"integerValue"in s}function Gn(s){return!!s&&"arrayValue"in s}function Fi(s){return!!s&&"nullValue"in s}function ji(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Is(s){return!!s&&"mapValue"in s}function _4(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){let t={mapValue:{fields:{}}};return i5(s.mapValue.fields,(e,o)=>t.mapValue.fields[e]=_4(o)),t}if(s.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=_4(s.arrayValue.values[e]);return t}return Object.assign({},s)}function uh(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var m2=class s{constructor(t){this.value=t}static empty(){return new s({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let o=0;o<t.length-1;++o)if(e=(e.mapValue.fields||{})[t.get(o)],!Is(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_4(e)}setAll(t){let e=f2.emptyPath(),o={},c=[];t.forEach((n,a)=>{if(!e.isImmediateParentOf(a)){let h=this.getFieldsMap(e);this.applyChanges(h,o,c),o={},c=[],e=a.popLast()}n?o[a.lastSegment()]=_4(n):c.push(a.lastSegment())});let r=this.getFieldsMap(e);this.applyChanges(r,o,c)}delete(t){let e=this.field(t.popLast());Is(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return q2(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let o=0;o<t.length;++o){let c=e.mapValue.fields[t.get(o)];Is(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=c),e=c}return e.mapValue.fields}applyChanges(t,e,o){i5(e,(c,r)=>t[c]=r);for(let c of o)delete t[c]}clone(){return new s(_4(this.value))}};function ph(s){let t=[];return i5(s.fields,(e,o)=>{let c=new f2([e]);if(Is(o)){let r=ph(o.mapValue).fields;if(r.length===0)t.push(c);else for(let n of r)t.push(c.child(n))}else t.push(c)}),new L2(t)}var k2=class s{constructor(t,e,o,c,r,n,a){this.key=t,this.documentType=e,this.version=o,this.readTime=c,this.createTime=r,this.data=n,this.documentState=a}static newInvalidDocument(t){return new s(t,0,X.min(),X.min(),X.min(),m2.empty(),0)}static newFoundDocument(t,e,o,c){return new s(t,1,e,X.min(),o,c,0)}static newNoDocument(t,e){return new s(t,2,e,X.min(),X.min(),m2.empty(),0)}static newUnknownDocument(t,e){return new s(t,3,e,X.min(),X.min(),m2.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=m2.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=m2.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof s&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var K5=class{constructor(t,e){this.position=t,this.inclusive=e}};function Zi(s,t,e){let o=0;for(let c=0;c<s.position.length;c++){let r=t[c],n=s.position[c];if(r.field.isKeyField()?o=$.comparator($.fromName(n.referenceValue),e.key):o=G5(n,e.data.field(r.field)),r.dir==="desc"&&(o*=-1),o!==0)break}return o}function Ui(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!q2(s.position[e],t.position[e]))return!1;return!0}var Q5=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function gp(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}var Us=class{},P1=class s extends Us{constructor(t,e,o){super(),this.field=t,this.op=e,this.value=o}static create(t,e,o){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,o):new Mr(t,e,o):e==="array-contains"?new Hr(t,o):e==="in"?new Lr(t,o):e==="not-in"?new yr(t,o):e==="array-contains-any"?new Br(t,o):new s(t,e,o)}static createKeyFieldInFilter(t,e,o){return e==="in"?new Cr(t,o):new Vr(t,o)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(G5(e,this.value)):e!==null&&o5(this.value)===o5(e)&&this.matchesComparison(G5(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$2=class s extends Us{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new s(t,e)}matches(t){return mh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function mh(s){return s.op==="and"}function fh(s){return dp(s)&&mh(s)}function dp(s){for(let t of s.filters)if(t instanceof $2)return!1;return!0}function xr(s){if(s instanceof P1)return s.field.canonicalString()+s.op.toString()+W5(s.value);if(fh(s))return s.filters.map(t=>xr(t)).join(",");{let t=s.filters.map(e=>xr(e)).join(",");return`${s.op}(${t})`}}function zh(s,t){return s instanceof P1?function(o,c){return c instanceof P1&&o.op===c.op&&o.field.isEqual(c.field)&&q2(o.value,c.value)}(s,t):s instanceof $2?function(o,c){return c instanceof $2&&o.op===c.op&&o.filters.length===c.filters.length?o.filters.reduce((r,n,a)=>r&&zh(n,c.filters[a]),!0):!1}(s,t):void K()}function xh(s){return s instanceof P1?function(e){return`${e.field.canonicalString()} ${e.op} ${W5(e.value)}`}(s):s instanceof $2?function(e){return e.op.toString()+" {"+e.getFilters().map(xh).join(" ,")+"}"}(s):"Filter"}var Mr=class extends P1{constructor(t,e,o){super(t,e,o),this.key=$.fromName(o.referenceValue)}matches(t){let e=$.comparator(t.key,this.key);return this.matchesComparison(e)}},Cr=class extends P1{constructor(t,e){super(t,"in",e),this.keys=Mh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Vr=class extends P1{constructor(t,e){super(t,"not-in",e),this.keys=Mh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function Mh(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(o=>$.fromName(o.referenceValue))}var Hr=class extends P1{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Gn(e)&&E4(e.arrayValue,this.value)}},Lr=class extends P1{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&E4(this.value.arrayValue,e)}},yr=class extends P1{constructor(t,e){super(t,"not-in",e)}matches(t){if(E4(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!E4(this.value.arrayValue,e)}},Br=class extends P1{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Gn(e)||!e.arrayValue.values)&&e.arrayValue.values.some(o=>E4(this.value.arrayValue,o))}};var _r=class{constructor(t,e=null,o=[],c=[],r=null,n=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=o,this.filters=c,this.limit=r,this.startAt=n,this.endAt=a,this.ue=null}};function qi(s,t=null,e=[],o=[],c=null,r=null,n=null){return new _r(s,t,e,o,c,r,n)}function Wn(s){let t=Y(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(o=>xr(o)).join(","),e+="|ob:",e+=t.orderBy.map(o=>function(r){return r.field.canonicalString()+r.dir}(o)).join(","),d3(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(o=>W5(o)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(o=>W5(o)).join(",")),t.ue=e}return t.ue}function Kn(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!gp(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!zh(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Ui(s.startAt,t.startAt)&&Ui(s.endAt,t.endAt)}function Ar(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}var Y5=class{constructor(t,e=null,o=[],c=[],r=null,n="F",a=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=o,this.filters=c,this.limit=r,this.limitType=n,this.startAt=a,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function wp(s,t,e,o,c,r,n,a){return new Y5(s,t,e,o,c,r,n,a)}function Ch(s){return new Y5(s)}function $i(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function up(s){return s.collectionGroup!==null}function A4(s){let t=Y(s);if(t.ce===null){t.ce=[];let e=new Set;for(let r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());let o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(n){let a=new r2(f2.comparator);return n.filters.forEach(h=>{h.getFlattenedFilters().forEach(v=>{v.isInequality()&&(a=a.add(v.field))})}),a})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Q5(r,o))}),e.has(f2.keyField().canonicalString())||t.ce.push(new Q5(f2.keyField(),o))}return t.ce}function Z2(s){let t=Y(s);return t.le||(t.le=pp(t,A4(s))),t.le}function pp(s,t){if(s.limitType==="F")return qi(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(c=>{let r=c.dir==="desc"?"asc":"desc";return new Q5(c.field,r)});let e=s.endAt?new K5(s.endAt.position,s.endAt.inclusive):null,o=s.startAt?new K5(s.startAt.position,s.startAt.inclusive):null;return qi(s.path,s.collectionGroup,t,s.filters,s.limit,e,o)}}function Sr(s,t,e){return new Y5(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function w3(s,t){return Kn(Z2(s),Z2(t))&&s.limitType===t.limitType}function Vh(s){return`${Wn(Z2(s))}|lt:${s.limitType}`}function D5(s){return`Query(target=${function(e){let o=e.path.canonicalString();return e.collectionGroup!==null&&(o+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(o+=`, filters: [${e.filters.map(c=>xh(c)).join(", ")}]`),d3(e.limit)||(o+=", limit: "+e.limit),e.orderBy.length>0&&(o+=`, orderBy: [${e.orderBy.map(c=>function(n){return`${n.field.canonicalString()} (${n.dir})`}(c)).join(", ")}]`),e.startAt&&(o+=", startAt: ",o+=e.startAt.inclusive?"b:":"a:",o+=e.startAt.position.map(c=>W5(c)).join(",")),e.endAt&&(o+=", endAt: ",o+=e.endAt.inclusive?"a:":"b:",o+=e.endAt.position.map(c=>W5(c)).join(",")),`Target(${o})`}(Z2(s))}; limitType=${s.limitType})`}function u3(s,t){return t.isFoundDocument()&&function(o,c){let r=c.key.path;return o.collectionGroup!==null?c.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(r):$.isDocumentKey(o.path)?o.path.isEqual(r):o.path.isImmediateParentOf(r)}(s,t)&&function(o,c){for(let r of A4(o))if(!r.field.isKeyField()&&c.data.field(r.field)===null)return!1;return!0}(s,t)&&function(o,c){for(let r of o.filters)if(!r.matches(c))return!1;return!0}(s,t)&&function(o,c){return!(o.startAt&&!function(n,a,h){let v=Zi(n,a,h);return n.inclusive?v<=0:v<0}(o.startAt,A4(o),c)||o.endAt&&!function(n,a,h){let v=Zi(n,a,h);return n.inclusive?v>=0:v>0}(o.endAt,A4(o),c))}(s,t)}function mp(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Hh(s){return(t,e)=>{let o=!1;for(let c of A4(s)){let r=fp(c,t,e);if(r!==0)return r;o=o||c.field.isKeyField()}return 0}}function fp(s,t,e){let o=s.field.isKeyField()?$.comparator(t.key,e.key):function(r,n,a){let h=n.data.field(r),v=a.data.field(r);return h!==null&&v!==null?G5(h,v):K()}(s.field,t,e);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return K()}}var E0=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),o=this.inner[e];if(o!==void 0){for(let[c,r]of o)if(this.equalsFn(c,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){let o=this.mapKeyFn(t),c=this.inner[o];if(c===void 0)return this.inner[o]=[[t,e]],void this.innerSize++;for(let r=0;r<c.length;r++)if(this.equalsFn(c[r][0],t))return void(c[r]=[t,e]);c.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),o=this.inner[e];if(o===void 0)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return o.length===1?delete this.inner[e]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(t){i5(this.inner,(e,o)=>{for(let[c,r]of o)t(c,r)})}isEmpty(){return wh(this.inner)}size(){return this.innerSize}};var zp=new S1($.comparator);function g0(){return zp}var Lh=new S1($.comparator);function B4(...s){let t=Lh;for(let e of s)t=t.insert(e.key,e);return t}function yh(s){let t=Lh;return s.forEach((e,o)=>t=t.insert(e,o.overlayedDocument)),t}function X0(){return S4()}function Bh(){return S4()}function S4(){return new E0(s=>s.toString(),(s,t)=>s.isEqual(t))}var xp=new S1($.comparator),Mp=new r2($.comparator);function r1(...s){let t=Mp;for(let e of s)t=t.add(e);return t}var Cp=new r2(m1);function Vp(){return Cp}function _h(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b4(t)?"-0":t}}function Ah(s){return{integerValue:""+s}}function Hp(s,t){return np(t)?Ah(t):_h(s,t)}var J5=class{constructor(){this._=void 0}};function Lp(s,t,e){return s instanceof X5?function(c,r){let n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return r&&qn(r)&&(r=$n(r)),r&&(n.fields.__previous_value__=r),{mapValue:n}}(e,t):s instanceof c5?Rh(s,t):s instanceof r5?bh(s,t):function(c,r){let n=Sh(c,r),a=Gi(n)+Gi(c.Pe);return zr(n)&&zr(c.Pe)?Ah(a):_h(c.serializer,a)}(s,t)}function yp(s,t,e){return s instanceof c5?Rh(s,t):s instanceof r5?bh(s,t):e}function Sh(s,t){return s instanceof tt?function(o){return zr(o)||function(r){return!!r&&"doubleValue"in r}(o)}(t)?t:{integerValue:0}:null}var X5=class extends J5{},c5=class extends J5{constructor(t){super(),this.elements=t}};function Rh(s,t){let e=kh(t);for(let o of s.elements)e.some(c=>q2(c,o))||e.push(o);return{arrayValue:{values:e}}}var r5=class extends J5{constructor(t){super(),this.elements=t}};function bh(s,t){let e=kh(t);for(let o of s.elements)e=e.filter(c=>!q2(c,o));return{arrayValue:{values:e}}}var tt=class extends J5{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function Gi(s){return _1(s.integerValue||s.doubleValue)}function kh(s){return Gn(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Bp(s,t){return s.field.isEqual(t.field)&&function(o,c){return o instanceof c5&&c instanceof c5||o instanceof r5&&c instanceof r5?$5(o.elements,c.elements,q2):o instanceof tt&&c instanceof tt?q2(o.Pe,c.Pe):o instanceof X5&&c instanceof X5}(s.transform,t.transform)}var Rr=class{constructor(t,e){this.version=t,this.transformResults=e}},i0=class s{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new s}static exists(t){return new s(void 0,t)}static updateTime(t){return new s(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Ps(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}var et=class{};function Eh(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new T4(s.key,i0.none()):new n5(s.key,s.data,i0.none());{let e=s.data,o=m2.empty(),c=new r2(f2.comparator);for(let r of t.fields)if(!c.has(r)){let n=e.field(r);n===null&&r.length>1&&(r=r.popLast(),n=e.field(r)),n===null?o.delete(r):o.set(r,n),c=c.add(r)}return new G2(s.key,o,new L2(c.toArray()),i0.none())}}function _p(s,t,e){s instanceof n5?function(c,r,n){let a=c.value.clone(),h=Ki(c.fieldTransforms,r,n.transformResults);a.setAll(h),r.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(s,t,e):s instanceof G2?function(c,r,n){if(!Ps(c.precondition,r))return void r.convertToUnknownDocument(n.version);let a=Ki(c.fieldTransforms,r,n.transformResults),h=r.data;h.setAll(Th(c)),h.setAll(a),r.convertToFoundDocument(n.version,h).setHasCommittedMutations()}(s,t,e):function(c,r,n){r.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,e)}function R4(s,t,e,o){return s instanceof n5?function(r,n,a,h){if(!Ps(r.precondition,n))return a;let v=r.value.clone(),d=Qi(r.fieldTransforms,h,n);return v.setAll(d),n.convertToFoundDocument(n.version,v).setHasLocalMutations(),null}(s,t,e,o):s instanceof G2?function(r,n,a,h){if(!Ps(r.precondition,n))return a;let v=Qi(r.fieldTransforms,h,n),d=n.data;return d.setAll(Th(r)),d.setAll(v),n.convertToFoundDocument(n.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(s,t,e,o):function(r,n,a){return Ps(r.precondition,n)?(n.convertToNoDocument(n.version).setHasLocalMutations(),null):a}(s,t,e)}function Ap(s,t){let e=null;for(let o of s.fieldTransforms){let c=t.data.field(o.field),r=Sh(o.transform,c||null);r!=null&&(e===null&&(e=m2.empty()),e.set(o.field,r))}return e||null}function Wi(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(o,c){return o===void 0&&c===void 0||!(!o||!c)&&$5(o,c,(r,n)=>Bp(r,n))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}var n5=class extends et{constructor(t,e,o,c=[]){super(),this.key=t,this.value=e,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}},G2=class extends et{constructor(t,e,o,c,r=[]){super(),this.key=t,this.data=e,this.fieldMask=o,this.precondition=c,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function Th(s){let t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let o=s.data.field(e);t.set(e,o)}}),t}function Ki(s,t,e){let o=new Map;M1(s.length===e.length);for(let c=0;c<e.length;c++){let r=s[c],n=r.transform,a=t.data.field(r.field);o.set(r.field,yp(n,a,e[c]))}return o}function Qi(s,t,e){let o=new Map;for(let c of s){let r=c.transform,n=e.data.field(c.field);o.set(c.field,Lp(r,n,t))}return o}var T4=class extends et{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},br=class extends et{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var kr=class{constructor(t,e,o,c){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(t,e){let o=e.mutationResults;for(let c=0;c<this.mutations.length;c++){let r=this.mutations[c];r.key.isEqual(t.key)&&_p(r,t,o[c])}}applyToLocalView(t,e){for(let o of this.baseMutations)o.key.isEqual(t.key)&&(e=R4(o,t,e,this.localWriteTime));for(let o of this.mutations)o.key.isEqual(t.key)&&(e=R4(o,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let o=Bh();return this.mutations.forEach(c=>{let r=t.get(c.key),n=r.overlayedDocument,a=this.applyToLocalView(n,r.mutatedFields);a=e.has(c.key)?null:a;let h=Eh(n,a);h!==null&&o.set(c.key,h),n.isValidDocument()||n.convertToNoDocument(X.min())}),o}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),r1())}isEqual(t){return this.batchId===t.batchId&&$5(this.mutations,t.mutations,(e,o)=>Wi(e,o))&&$5(this.baseMutations,t.baseMutations,(e,o)=>Wi(e,o))}},Er=class s{constructor(t,e,o,c){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=c}static from(t,e,o){M1(t.mutations.length===o.length);let c=function(){return xp}(),r=t.mutations;for(let n=0;n<r.length;n++)c=c.insert(r[n].key,o[n].version);return new s(t,e,o,c)}};var Tr=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ir=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var b1,a1;function Sp(s){switch(s){default:return K();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function Ih(s){if(s===void 0)return h0("GRPC error has no .code"),b.UNKNOWN;switch(s){case b1.OK:return b.OK;case b1.CANCELLED:return b.CANCELLED;case b1.UNKNOWN:return b.UNKNOWN;case b1.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case b1.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case b1.INTERNAL:return b.INTERNAL;case b1.UNAVAILABLE:return b.UNAVAILABLE;case b1.UNAUTHENTICATED:return b.UNAUTHENTICATED;case b1.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case b1.NOT_FOUND:return b.NOT_FOUND;case b1.ALREADY_EXISTS:return b.ALREADY_EXISTS;case b1.PERMISSION_DENIED:return b.PERMISSION_DENIED;case b1.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case b1.ABORTED:return b.ABORTED;case b1.OUT_OF_RANGE:return b.OUT_OF_RANGE;case b1.UNIMPLEMENTED:return b.UNIMPLEMENTED;case b1.DATA_LOSS:return b.DATA_LOSS;default:return K()}}(a1=b1||(b1={}))[a1.OK=0]="OK",a1[a1.CANCELLED=1]="CANCELLED",a1[a1.UNKNOWN=2]="UNKNOWN",a1[a1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",a1[a1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",a1[a1.NOT_FOUND=5]="NOT_FOUND",a1[a1.ALREADY_EXISTS=6]="ALREADY_EXISTS",a1[a1.PERMISSION_DENIED=7]="PERMISSION_DENIED",a1[a1.UNAUTHENTICATED=16]="UNAUTHENTICATED",a1[a1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",a1[a1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",a1[a1.ABORTED=10]="ABORTED",a1[a1.OUT_OF_RANGE=11]="OUT_OF_RANGE",a1[a1.UNIMPLEMENTED=12]="UNIMPLEMENTED",a1[a1.INTERNAL=13]="INTERNAL",a1[a1.UNAVAILABLE=14]="UNAVAILABLE",a1[a1.DATA_LOSS=15]="DATA_LOSS";var Yi=null;function Rp(){return new TextEncoder}var bp=new R0([4294967295,4294967295],0);function Ji(s){let t=Rp().encode(s),e=new Yc;return e.update(t),new Uint8Array(e.digest())}function Xi(s){let t=new DataView(s.buffer),e=t.getUint32(0,!0),o=t.getUint32(4,!0),c=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new R0([e,o],0),new R0([c,r],0)]}var Pr=class s{constructor(t,e,o){if(this.bitmap=t,this.padding=e,this.hashCount=o,e<0||e>=8)throw new t5(`Invalid padding: ${e}`);if(o<0)throw new t5(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new t5(`Invalid hash count: ${o}`);if(t.length===0&&e!==0)throw new t5(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=R0.fromNumber(this.Ie)}Ee(t,e,o){let c=t.add(e.multiply(R0.fromNumber(o)));return c.compare(bp)===1&&(c=new R0([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=Ji(t),[o,c]=Xi(e);for(let r=0;r<this.hashCount;r++){let n=this.Ee(o,c,r);if(!this.de(n))return!1}return!0}static create(t,e,o){let c=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),n=new s(r,c,e);return o.forEach(a=>n.insert(a)),n}insert(t){if(this.Ie===0)return;let e=Ji(t),[o,c]=Xi(e);for(let r=0;r<this.hashCount;r++){let n=this.Ee(o,c,r);this.Ae(n)}}Ae(t){let e=Math.floor(t/8),o=t%8;this.bitmap[e]|=1<<o}},t5=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qs=class s{constructor(t,e,o,c,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,o){let c=new Map;return c.set(t,I4.createSynthesizedTargetChangeForCurrentChange(t,e,o)),new s(X.min(),c,new S1(m1),g0(),r1())}},I4=class s{constructor(t,e,o,c,r){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,o){return new s(o,e,r1(),r1(),r1())}};var Z5=class{constructor(t,e,o,c){this.Re=t,this.removedTargetIds=e,this.key=o,this.Ve=c}},$s=class{constructor(t,e){this.targetId=t,this.me=e}},Gs=class{constructor(t,e,o=n2.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=e,this.resumeToken=o,this.cause=c}},Ws=class{constructor(){this.fe=0,this.ge=eh(),this.pe=n2.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=r1(),e=r1(),o=r1();return this.ge.forEach((c,r)=>{switch(r){case 0:t=t.add(c);break;case 2:e=e.add(c);break;case 1:o=o.add(c);break;default:K()}}),new I4(this.pe,this.ye,t,e,o)}ve(){this.we=!1,this.ge=eh()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,M1(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Dr=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=g0(),this.qe=th(),this.Qe=new S1(m1)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let o=this.Ge(e);switch(t.state){case 0:this.ze(e)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.ve(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),o.De(t.resumeToken));break;default:K()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((o,c)=>{this.ze(c)&&e(c)})}He(t){let e=t.targetId,o=t.me.count,c=this.Je(e);if(c){let r=c.target;if(Ar(r))if(o===0){let n=new $(r.path);this.Ue(e,n,k2.newNoDocument(n,X.min()))}else M1(o===1);else{let n=this.Ye(e);if(n!==o){let a=this.Ze(t),h=a?this.Xe(a,t,n):1;if(h!==0){this.je(e);let v=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,v)}Yi?.et(function(d,u,z,y,A){var R,B,F,U,O,l1;let R1={localCacheCount:d,existenceFilterCount:u.count,databaseId:z.database,projectId:z.projectId},c1=u.unchangedNames;return c1&&(R1.bloomFilter={applied:A===0,hashCount:(R=c1?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(U=(F=(B=c1?.bits)===null||B===void 0?void 0:B.bitmap)===null||F===void 0?void 0:F.length)!==null&&U!==void 0?U:0,padding:(l1=(O=c1?.bits)===null||O===void 0?void 0:O.padding)!==null&&l1!==void 0?l1:0,mightContain:M=>{var p;return(p=y?.mightContain(M))!==null&&p!==void 0&&p}}),R1}(n,t.me,this.Le.tt(),a,h))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:o="",padding:c=0},hashCount:r=0}=e,n,a;try{n=k0(o).toUint8Array()}catch(h){if(h instanceof js)return q5("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{a=new Pr(n,c,r)}catch(h){return q5(h instanceof t5?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return a.Ie===0?null:a}Xe(t,e,o){return e.me.count===o-this.nt(t,e.targetId)?0:2}nt(t,e){let o=this.Le.getRemoteKeysForTarget(e),c=0;return o.forEach(r=>{let n=this.Le.tt(),a=`projects/${n.projectId}/databases/${n.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,r,null),c++)}),c}rt(t){let e=new Map;this.Be.forEach((r,n)=>{let a=this.Je(n);if(a){if(r.current&&Ar(a.target)){let h=new $(a.target.path);this.ke.get(h)!==null||this.it(n,h)||this.Ue(n,h,k2.newNoDocument(h,t))}r.be&&(e.set(n,r.Ce()),r.ve())}});let o=r1();this.qe.forEach((r,n)=>{let a=!0;n.forEachWhile(h=>{let v=this.Je(h);return!v||v.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(o=o.add(r))}),this.ke.forEach((r,n)=>n.setReadTime(t));let c=new qs(t,e,this.Qe,this.ke,o);return this.ke=g0(),this.qe=th(),this.Qe=new S1(m1),c}$e(t,e){if(!this.ze(t))return;let o=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,o),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,o){if(!this.ze(t))return;let c=this.Ge(t);this.it(t,e)?c.Fe(e,1):c.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),o&&(this.ke=this.ke.insert(e,o))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Ws,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new r2(m1),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||N("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ws),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function th(){return new S1($.comparator)}function eh(){return new S1($.comparator)}var kp={asc:"ASCENDING",desc:"DESCENDING"},Ep={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tp={and:"AND",or:"OR"},Or=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Nr(s,t){return s.useProto3Json||d3(t)?t:{value:t}}function Ks(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ph(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Ip(s,t){return Ks(s,t.toTimestamp())}function U2(s){return M1(!!s),X.fromTimestamp(function(e){let o=v0(e);return new W1(o.seconds,o.nanos)}(s))}function Qn(s,t){return Fr(s,t).canonicalString()}function Fr(s,t){let e=function(c){return new A1(["projects",c.projectId,"databases",c.database])}(s).child("documents");return t===void 0?e:e.child(t)}function Dh(s){let t=A1.fromString(s);return M1(Zh(t)),t}function jr(s,t){return Qn(s.databaseId,t.path)}function cr(s,t){let e=Dh(t);if(e.get(1)!==s.databaseId.projectId)throw new Z(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new Z(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new $(Nh(e))}function Oh(s,t){return Qn(s.databaseId,t)}function Pp(s){let t=Dh(s);return t.length===4?A1.emptyPath():Nh(t)}function Zr(s){return new A1(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Nh(s){return M1(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function sh(s,t,e){return{name:jr(s,t),fields:e.value.mapValue.fields}}function Dp(s,t){let e;if("targetChange"in t){t.targetChange;let o=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:K()}(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],r=function(v,d){return v.useProto3Json?(M1(d===void 0||typeof d=="string"),n2.fromBase64String(d||"")):(M1(d===void 0||d instanceof Buffer||d instanceof Uint8Array),n2.fromUint8Array(d||new Uint8Array))}(s,t.targetChange.resumeToken),n=t.targetChange.cause,a=n&&function(v){let d=v.code===void 0?b.UNKNOWN:Ih(v.code);return new Z(d,v.message||"")}(n);e=new Gs(o,c,r,a||null)}else if("documentChange"in t){t.documentChange;let o=t.documentChange;o.document,o.document.name,o.document.updateTime;let c=cr(s,o.document.name),r=U2(o.document.updateTime),n=o.document.createTime?U2(o.document.createTime):X.min(),a=new m2({mapValue:{fields:o.document.fields}}),h=k2.newFoundDocument(c,r,n,a),v=o.targetIds||[],d=o.removedTargetIds||[];e=new Z5(v,d,h.key,h)}else if("documentDelete"in t){t.documentDelete;let o=t.documentDelete;o.document;let c=cr(s,o.document),r=o.readTime?U2(o.readTime):X.min(),n=k2.newNoDocument(c,r),a=o.removedTargetIds||[];e=new Z5([],a,n.key,n)}else if("documentRemove"in t){t.documentRemove;let o=t.documentRemove;o.document;let c=cr(s,o.document),r=o.removedTargetIds||[];e=new Z5([],r,c,null)}else{if(!("filter"in t))return K();{t.filter;let o=t.filter;o.targetId;let{count:c=0,unchangedNames:r}=o,n=new Ir(c,r),a=o.targetId;e=new $s(a,n)}}return e}function Op(s,t){let e;if(t instanceof n5)e={update:sh(s,t.key,t.value)};else if(t instanceof T4)e={delete:jr(s,t.key)};else if(t instanceof G2)e={update:sh(s,t.key,t.data),updateMask:Wp(t.fieldMask)};else{if(!(t instanceof br))return K();e={verify:jr(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(o=>function(r,n){let a=n.transform;if(a instanceof X5)return{fieldPath:n.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof c5)return{fieldPath:n.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof r5)return{fieldPath:n.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof tt)return{fieldPath:n.field.canonicalString(),increment:a.Pe};throw K()}(0,o))),t.precondition.isNone||(e.currentDocument=function(c,r){return r.updateTime!==void 0?{updateTime:Ip(c,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:K()}(s,t.precondition)),e}function Np(s,t){return s&&s.length>0?(M1(t!==void 0),s.map(e=>function(c,r){let n=c.updateTime?U2(c.updateTime):U2(r);return n.isEqual(X.min())&&(n=U2(r)),new Rr(n,c.transformResults||[])}(e,t))):[]}function Fp(s,t){return{documents:[Oh(s,t.path)]}}function jp(s,t){let e={structuredQuery:{}},o=t.path,c;t.collectionGroup!==null?(c=o,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=o.popLast(),e.structuredQuery.from=[{collectionId:o.lastSegment()}]),e.parent=Oh(s,c);let r=function(v){if(v.length!==0)return jh($2.create(v,"and"))}(t.filters);r&&(e.structuredQuery.where=r);let n=function(v){if(v.length!==0)return v.map(d=>function(z){return{field:O5(z.field),direction:qp(z.dir)}}(d))}(t.orderBy);n&&(e.structuredQuery.orderBy=n);let a=Nr(s,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{_t:e,parent:c}}function Zp(s){let t=Pp(s.parent),e=s.structuredQuery,o=e.from?e.from.length:0,c=null;if(o>0){M1(o===1);let d=e.from[0];d.allDescendants?c=d.collectionId:t=t.child(d.collectionId)}let r=[];e.where&&(r=function(u){let z=Fh(u);return z instanceof $2&&fh(z)?z.getFilters():[z]}(e.where));let n=[];e.orderBy&&(n=function(u){return u.map(z=>function(A){return new Q5(N5(A.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(z))}(e.orderBy));let a=null;e.limit&&(a=function(u){let z;return z=typeof u=="object"?u.value:u,d3(z)?null:z}(e.limit));let h=null;e.startAt&&(h=function(u){let z=!!u.before,y=u.values||[];return new K5(y,z)}(e.startAt));let v=null;return e.endAt&&(v=function(u){let z=!u.before,y=u.values||[];return new K5(y,z)}(e.endAt)),wp(t,c,n,r,a,"F",h,v)}function Up(s,t){let e=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Fh(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let o=N5(e.unaryFilter.field);return P1.create(o,"==",{doubleValue:NaN});case"IS_NULL":let c=N5(e.unaryFilter.field);return P1.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=N5(e.unaryFilter.field);return P1.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=N5(e.unaryFilter.field);return P1.create(n,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(s):s.fieldFilter!==void 0?function(e){return P1.create(N5(e.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return $2.create(e.compositeFilter.filters.map(o=>Fh(o)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return K()}}(e.compositeFilter.op))}(s):K()}function qp(s){return kp[s]}function $p(s){return Ep[s]}function Gp(s){return Tp[s]}function O5(s){return{fieldPath:s.canonicalString()}}function N5(s){return f2.fromServerFormat(s.fieldPath)}function jh(s){return s instanceof P1?function(e){if(e.op==="=="){if(ji(e.value))return{unaryFilter:{field:O5(e.field),op:"IS_NAN"}};if(Fi(e.value))return{unaryFilter:{field:O5(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ji(e.value))return{unaryFilter:{field:O5(e.field),op:"IS_NOT_NAN"}};if(Fi(e.value))return{unaryFilter:{field:O5(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O5(e.field),op:$p(e.op),value:e.value}}}(s):s instanceof $2?function(e){let o=e.getFilters().map(c=>jh(c));return o.length===1?o[0]:{compositeFilter:{op:Gp(e.op),filters:o}}}(s):K()}function Wp(s){let t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zh(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}var P4=class s{constructor(t,e,o,c,r=X.min(),n=X.min(),a=n2.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=n,this.resumeToken=a,this.expectedCount=h}withSequenceNumber(t){return new s(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Ur=class{constructor(t){this.ct=t}};function Kp(s){let t=Zp({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Sr(t,t.limit,"L"):t}var Qs=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(_1(t.integerValue));else if("doubleValue"in t){let o=_1(t.doubleValue);isNaN(o)?this.dt(e,13):(this.dt(e,15),b4(o)?e.At(0):e.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(e,20),typeof o=="string"&&(o=v0(o)),e.Rt(`${o.seconds||""}`),e.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(k0(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let o=t.geoPointValue;this.dt(e,45),e.At(o.latitude||0),e.At(o.longitude||0)}else"mapValue"in t?uh(t)?this.dt(e,Number.MAX_SAFE_INTEGER):(this.wt(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.St(t.arrayValue,e),this.ft(e)):K()}Vt(t,e){this.dt(e,25),this.bt(t,e)}bt(t,e){e.Rt(t)}wt(t,e){let o=t.fields||{};this.dt(e,55);for(let c of Object.keys(o))this.Vt(c,e),this.Tt(o[c],e)}St(t,e){let o=t.values||[];this.dt(e,50);for(let c of o)this.Tt(c,e)}yt(t,e){this.dt(e,37),$.fromName(t).path.forEach(o=>{this.dt(e,60),this.bt(o,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};Qs.Dt=new Qs;var qr=class{constructor(){this.an=new $r}addToCollectionParentIndex(t,e){return this.an.add(e),E.resolve()}getCollectionParents(t,e){return E.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return E.resolve()}deleteFieldIndex(t,e){return E.resolve()}deleteAllFieldIndexes(t){return E.resolve()}createTargetIndexes(t,e){return E.resolve()}getDocumentsMatchingTarget(t,e){return E.resolve(null)}getIndexType(t,e){return E.resolve(0)}getFieldIndexes(t,e){return E.resolve([])}getNextCollectionGroupToUpdate(t){return E.resolve(null)}getMinOffset(t,e){return E.resolve(s5.min())}getMinOffsetFromCollectionGroup(t,e){return E.resolve(s5.min())}updateCollectionGroup(t,e,o){return E.resolve()}updateIndexEntries(t,e){return E.resolve()}},$r=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),o=t.popLast(),c=this.index[e]||new r2(A1.comparator),r=!c.has(o);return this.index[e]=c.add(o),r}has(t){let e=t.lastSegment(),o=t.popLast(),c=this.index[e];return c&&c.has(o)}getEntries(t){return(this.index[t]||new r2(A1.comparator)).toArray()}};var tV=new Uint8Array(0);var N2=class s{constructor(t,e,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new s(t,s.DEFAULT_COLLECTION_PERCENTILE,s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};N2.DEFAULT_COLLECTION_PERCENTILE=10,N2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,N2.DEFAULT=new N2(41943040,N2.DEFAULT_COLLECTION_PERCENTILE,N2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),N2.DISABLED=new N2(-1,0,0);var D4=class s{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new s(0)}static Bn(){return new s(-1)}};var Gr=class{constructor(){this.changes=new E0(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,k2.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let o=this.changes.get(e);return o!==void 0?E.resolve(o):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Wr=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Kr=class{constructor(t,e,o,c){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=o,this.indexManager=c}getDocument(t,e){let o=null;return this.documentOverlayCache.getOverlay(t,e).next(c=>(o=c,this.remoteDocumentCache.getEntry(t,e))).next(c=>(o!==null&&R4(o.mutation,c,L2.empty(),W1.now()),c))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.getLocalViewOfDocuments(t,o,r1()).next(()=>o))}getLocalViewOfDocuments(t,e,o=r1()){let c=X0();return this.populateOverlays(t,c,e).next(()=>this.computeViews(t,e,c,o).next(r=>{let n=B4();return r.forEach((a,h)=>{n=n.insert(a,h.overlayedDocument)}),n}))}getOverlayedDocuments(t,e){let o=X0();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,r1()))}populateOverlays(t,e,o){let c=[];return o.forEach(r=>{e.has(r)||c.push(r)}),this.documentOverlayCache.getOverlays(t,c).next(r=>{r.forEach((n,a)=>{e.set(n,a)})})}computeViews(t,e,o,c){let r=g0(),n=S4(),a=function(){return S4()}();return e.forEach((h,v)=>{let d=o.get(v.key);c.has(v.key)&&(d===void 0||d.mutation instanceof G2)?r=r.insert(v.key,v):d!==void 0?(n.set(v.key,d.mutation.getFieldMask()),R4(d.mutation,v,d.mutation.getFieldMask(),W1.now())):n.set(v.key,L2.empty())}),this.recalculateAndSaveOverlays(t,r).next(h=>(h.forEach((v,d)=>n.set(v,d)),e.forEach((v,d)=>{var u;return a.set(v,new Wr(d,(u=n.get(v))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(t,e){let o=S4(),c=new S1((n,a)=>n-a),r=r1();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(n=>{for(let a of n)a.keys().forEach(h=>{let v=e.get(h);if(v===null)return;let d=o.get(h)||L2.empty();d=a.applyToLocalView(v,d),o.set(h,d);let u=(c.get(a.batchId)||r1()).add(h);c=c.insert(a.batchId,u)})}).next(()=>{let n=[],a=c.getReverseIterator();for(;a.hasNext();){let h=a.getNext(),v=h.key,d=h.value,u=Bh();d.forEach(z=>{if(!r.has(z)){let y=Eh(e.get(z),o.get(z));y!==null&&u.set(z,y),r=r.add(z)}}),n.push(this.documentOverlayCache.saveOverlays(t,v,u))}return E.waitFor(n)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,e,o,c){return function(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):up(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,o,c):this.getDocumentsMatchingCollectionQuery(t,e,o,c)}getNextDocuments(t,e,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,o,c).next(r=>{let n=c-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,o.largestBatchId,c-r.size):E.resolve(X0()),a=-1,h=r;return n.next(v=>E.forEach(v,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),r.get(d)?E.resolve():this.remoteDocumentCache.getEntry(t,d).next(z=>{h=h.insert(d,z)}))).next(()=>this.populateOverlays(t,v,r)).next(()=>this.computeViews(t,h,v,r1())).next(d=>({batchId:a,changes:yh(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new $(e)).next(o=>{let c=B4();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(t,e,o,c){let r=e.collectionGroup,n=B4();return this.indexManager.getCollectionParents(t,r).next(a=>E.forEach(a,h=>{let v=function(u,z){return new Y5(z,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e,h.child(r));return this.getDocumentsMatchingCollectionQuery(t,v,o,c).next(d=>{d.forEach((u,z)=>{n=n.insert(u,z)})})}).next(()=>n))}getDocumentsMatchingCollectionQuery(t,e,o,c){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,o.largestBatchId).next(n=>(r=n,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,o,r,c))).next(n=>{r.forEach((h,v)=>{let d=v.getKey();n.get(d)===null&&(n=n.insert(d,k2.newInvalidDocument(d)))});let a=B4();return n.forEach((h,v)=>{let d=r.get(h);d!==void 0&&R4(d.mutation,v,L2.empty(),W1.now()),u3(e,v)&&(a=a.insert(h,v))}),a})}};var Qr=class{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return E.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(c){return{id:c.id,version:c.version,createTime:U2(c.createTime)}}(e)),E.resolve()}getNamedQuery(t,e){return E.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(c){return{name:c.name,query:Kp(c.bundledQuery),readTime:U2(c.readTime)}}(e)),E.resolve()}};var Yr=class{constructor(){this.overlays=new S1($.comparator),this.Pr=new Map}getOverlay(t,e){return E.resolve(this.overlays.get(e))}getOverlays(t,e){let o=X0();return E.forEach(e,c=>this.getOverlay(t,c).next(r=>{r!==null&&o.set(c,r)})).next(()=>o)}saveOverlays(t,e,o){return o.forEach((c,r)=>{this.ht(t,e,r)}),E.resolve()}removeOverlaysForBatchId(t,e,o){let c=this.Pr.get(o);return c!==void 0&&(c.forEach(r=>this.overlays=this.overlays.remove(r)),this.Pr.delete(o)),E.resolve()}getOverlaysForCollection(t,e,o){let c=X0(),r=e.length+1,n=new $(e.child("")),a=this.overlays.getIteratorFrom(n);for(;a.hasNext();){let h=a.getNext().value,v=h.getKey();if(!e.isPrefixOf(v.path))break;v.path.length===r&&h.largestBatchId>o&&c.set(h.getKey(),h)}return E.resolve(c)}getOverlaysForCollectionGroup(t,e,o,c){let r=new S1((v,d)=>v-d),n=this.overlays.getIterator();for(;n.hasNext();){let v=n.getNext().value;if(v.getKey().getCollectionGroup()===e&&v.largestBatchId>o){let d=r.get(v.largestBatchId);d===null&&(d=X0(),r=r.insert(v.largestBatchId,d)),d.set(v.getKey(),v)}}let a=X0(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((v,d)=>a.set(v,d)),!(a.size()>=c)););return E.resolve(a)}ht(t,e,o){let c=this.overlays.get(o.key);if(c!==null){let n=this.Pr.get(c.largestBatchId).delete(o.key);this.Pr.set(c.largestBatchId,n)}this.overlays=this.overlays.insert(o.key,new Tr(e,o));let r=this.Pr.get(e);r===void 0&&(r=r1(),this.Pr.set(e,r)),this.Pr.set(e,r.add(o.key))}};var Jr=class{constructor(){this.sessionToken=n2.EMPTY_BYTE_STRING}getSessionToken(t){return E.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,E.resolve()}};var O4=class{constructor(){this.Ir=new r2(k1.Tr),this.Er=new r2(k1.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){let o=new k1(t,e);this.Ir=this.Ir.add(o),this.Er=this.Er.add(o)}Ar(t,e){t.forEach(o=>this.addReference(o,e))}removeReference(t,e){this.Rr(new k1(t,e))}Vr(t,e){t.forEach(o=>this.removeReference(o,e))}mr(t){let e=new $(new A1([])),o=new k1(e,t),c=new k1(e,t+1),r=[];return this.Er.forEachInRange([o,c],n=>{this.Rr(n),r.push(n.key)}),r}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){let e=new $(new A1([])),o=new k1(e,t),c=new k1(e,t+1),r=r1();return this.Er.forEachInRange([o,c],n=>{r=r.add(n.key)}),r}containsKey(t){let e=new k1(t,0),o=this.Ir.firstAfterOrEqual(e);return o!==null&&t.isEqual(o.key)}},k1=class{constructor(t,e){this.key=t,this.yr=e}static Tr(t,e){return $.comparator(t.key,e.key)||m1(t.yr,e.yr)}static dr(t,e){return m1(t.yr,e.yr)||$.comparator(t.key,e.key)}};var Xr=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new r2(k1.Tr)}checkEmpty(t){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,o,c){let r=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let n=new kr(r,e,o,c);this.mutationQueue.push(n);for(let a of c)this.Sr=this.Sr.add(new k1(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return E.resolve(n)}lookupMutationBatch(t,e){return E.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){let o=e+1,c=this.Dr(o),r=c<0?0:c;return E.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let o=new k1(e,0),c=new k1(e,Number.POSITIVE_INFINITY),r=[];return this.Sr.forEachInRange([o,c],n=>{let a=this.br(n.yr);r.push(a)}),E.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new r2(m1);return e.forEach(c=>{let r=new k1(c,0),n=new k1(c,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([r,n],a=>{o=o.add(a.yr)})}),E.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,e){let o=e.path,c=o.length+1,r=o;$.isDocumentKey(r)||(r=r.child(""));let n=new k1(new $(r),0),a=new r2(m1);return this.Sr.forEachWhile(h=>{let v=h.key.path;return!!o.isPrefixOf(v)&&(v.length===c&&(a=a.add(h.yr)),!0)},n),E.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(o=>{let c=this.br(o);c!==null&&e.push(c)}),e}removeMutationBatch(t,e){M1(this.vr(e.batchId,"removed")===0),this.mutationQueue.shift();let o=this.Sr;return E.forEach(e.mutations,c=>{let r=new k1(c.key,e.batchId);return o=o.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)}).next(()=>{this.Sr=o})}xn(t){}containsKey(t,e){let o=new k1(e,0),c=this.Sr.firstAfterOrEqual(o);return E.resolve(e.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,E.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){let e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var tn=class{constructor(t){this.Fr=t,this.docs=function(){return new S1($.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let o=e.key,c=this.docs.get(o),r=c?c.size:0,n=this.Fr(e);return this.docs=this.docs.insert(o,{document:e.mutableCopy(),size:n}),this.size+=n-r,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let o=this.docs.get(e);return E.resolve(o?o.document.mutableCopy():k2.newInvalidDocument(e))}getEntries(t,e){let o=g0();return e.forEach(c=>{let r=this.docs.get(c);o=o.insert(c,r?r.document.mutableCopy():k2.newInvalidDocument(c))}),E.resolve(o)}getDocumentsMatchingQuery(t,e,o,c){let r=g0(),n=e.path,a=new $(n.child("")),h=this.docs.getIteratorFrom(a);for(;h.hasNext();){let{key:v,value:{document:d}}=h.getNext();if(!n.isPrefixOf(v.path))break;v.path.length>n.length+1||op(sp(d),o)<=0||(c.has(d.key)||u3(e,d))&&(r=r.insert(d.key,d.mutableCopy()))}return E.resolve(r)}getAllFromCollectionGroup(t,e,o,c){K()}Mr(t,e){return E.forEach(this.docs,o=>e(o))}newChangeBuffer(t){return new en(this)}getSize(t){return E.resolve(this.size)}},en=class extends Gr{constructor(t){super(),this.ur=t}applyChanges(t){let e=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?e.push(this.ur.addEntry(t,c)):this.ur.removeEntry(o)}),E.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}};var sn=class{constructor(t){this.persistence=t,this.Or=new E0(e=>Wn(e),Kn),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new O4,this.targetCount=0,this.Br=D4.Ln()}forEachTarget(t,e){return this.Or.forEach((o,c)=>e(c)),E.resolve()}getLastRemoteSnapshotVersion(t){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return E.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.Nr&&(this.Nr=e),E.resolve()}Qn(t){this.Or.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Br=new D4(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,E.resolve()}updateTargetData(t,e){return this.Qn(e),E.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Lr.mr(e.targetId),this.targetCount-=1,E.resolve()}removeTargets(t,e,o){let c=0,r=[];return this.Or.forEach((n,a)=>{a.sequenceNumber<=e&&o.get(a.targetId)===null&&(this.Or.delete(n),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),c++)}),E.waitFor(r).next(()=>c)}getTargetCount(t){return E.resolve(this.targetCount)}getTargetData(t,e){let o=this.Or.get(e)||null;return E.resolve(o)}addMatchingKeys(t,e,o){return this.Lr.Ar(e,o),E.resolve()}removeMatchingKeys(t,e,o){this.Lr.Vr(e,o);let c=this.persistence.referenceDelegate,r=[];return c&&e.forEach(n=>{r.push(c.markPotentiallyOrphaned(t,n))}),E.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Lr.mr(e),E.resolve()}getMatchingKeysForTargetId(t,e){let o=this.Lr.pr(e);return E.resolve(o)}containsKey(t,e){return E.resolve(this.Lr.containsKey(e))}};var on=class{constructor(t,e){this.kr={},this.overlays={},this.qr=new dh(0),this.Qr=!1,this.Qr=!0,this.Kr=new Jr,this.referenceDelegate=t(this),this.$r=new sn(this),this.indexManager=new qr,this.remoteDocumentCache=function(c){return new tn(c)}(o=>this.referenceDelegate.Ur(o)),this.serializer=new Ur(e),this.Wr=new Qr(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Yr,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let o=this.kr[t.toKey()];return o||(o=new Xr(e,this.referenceDelegate),this.kr[t.toKey()]=o),o}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,e,o){N("MemoryPersistence","Starting transaction:",t);let c=new cn(this.qr.next());return this.referenceDelegate.Gr(),o(c).next(r=>this.referenceDelegate.zr(c).next(()=>r)).toPromise().then(r=>(c.raiseOnCommittedEvent(),r))}jr(t,e){return E.or(Object.values(this.kr).map(o=>()=>o.containsKey(t,e)))}},cn=class extends pr{constructor(t){super(),this.currentSequenceNumber=t}},rn=class s{constructor(t){this.persistence=t,this.Hr=new O4,this.Jr=null}static Yr(t){return new s(t)}get Zr(){if(this.Jr)return this.Jr;throw K()}addReference(t,e,o){return this.Hr.addReference(o,e),this.Zr.delete(o.toString()),E.resolve()}removeReference(t,e,o){return this.Hr.removeReference(o,e),this.Zr.add(o.toString()),E.resolve()}markPotentiallyOrphaned(t,e){return this.Zr.add(e.toString()),E.resolve()}removeTarget(t,e){this.Hr.mr(e.targetId).forEach(c=>this.Zr.add(c.toString()));let o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next(c=>{c.forEach(r=>this.Zr.add(r.toString()))}).next(()=>o.removeTargetData(t,e))}Gr(){this.Jr=new Set}zr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Zr,o=>{let c=$.fromPath(o);return this.Xr(t,c).next(r=>{r||e.removeEntry(c,X.min())})}).next(()=>(this.Jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Xr(t,e).next(o=>{o?this.Zr.delete(e.toString()):this.Zr.add(e.toString())})}Ur(t){return 0}Xr(t,e){return E.or([()=>E.resolve(this.Hr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.jr(t,e)])}};var nn=class s{constructor(t,e,o,c){this.targetId=t,this.fromCache=e,this.Ki=o,this.$i=c}static Ui(t,e){let o=r1(),c=r1();for(let r of e.docChanges)switch(r.type){case 0:o=o.add(r.doc.key);break;case 1:c=c.add(r.doc.key)}return new s(t,e.fromCache,o,c)}};var ln=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var an=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return mi()?8:rp(pi())>0?6:4}()}initialize(t,e){this.Hi=t,this.indexManager=e,this.Wi=!0}getDocumentsMatchingQuery(t,e,o,c){let r={result:null};return this.Ji(t,e).next(n=>{r.result=n}).next(()=>{if(!r.result)return this.Yi(t,e,c,o).next(n=>{r.result=n})}).next(()=>{if(r.result)return;let n=new ln;return this.Zi(t,e,n).next(a=>{if(r.result=a,this.Gi)return this.Xi(t,e,n,a.size)})}).next(()=>r.result)}Xi(t,e,o,c){return o.documentReadCount<this.zi?(y4()<=h1.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",D5(e),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),E.resolve()):(y4()<=h1.DEBUG&&N("QueryEngine","Query:",D5(e),"scans",o.documentReadCount,"local documents and returns",c,"documents as results."),o.documentReadCount>this.ji*c?(y4()<=h1.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",D5(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Z2(e))):E.resolve())}Ji(t,e){if($i(e))return E.resolve(null);let o=Z2(e);return this.indexManager.getIndexType(t,o).next(c=>c===0?null:(e.limit!==null&&c===1&&(e=Sr(e,null,"F"),o=Z2(e)),this.indexManager.getDocumentsMatchingTarget(t,o).next(r=>{let n=r1(...r);return this.Hi.getDocuments(t,n).next(a=>this.indexManager.getMinOffset(t,o).next(h=>{let v=this.es(e,a);return this.ts(e,v,n,h.readTime)?this.Ji(t,Sr(e,null,"F")):this.ns(t,v,e,h)}))})))}Yi(t,e,o,c){return $i(e)||c.isEqual(X.min())?E.resolve(null):this.Hi.getDocuments(t,o).next(r=>{let n=this.es(e,r);return this.ts(e,n,o,c)?E.resolve(null):(y4()<=h1.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),D5(e)),this.ns(t,n,e,ep(c,-1)).next(a=>a))})}es(t,e){let o=new r2(Hh(t));return e.forEach((c,r)=>{u3(t,r)&&(o=o.add(r))}),o}ts(t,e,o,c){if(t.limit===null)return!1;if(o.size!==e.size)return!0;let r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(c)>0)}Zi(t,e,o){return y4()<=h1.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",D5(e)),this.Hi.getDocumentsMatchingQuery(t,e,s5.min(),o)}ns(t,e,o,c){return this.Hi.getDocumentsMatchingQuery(t,o,c).next(r=>(e.forEach(n=>{r=r.insert(n.key,n)}),r))}};var hn=class{constructor(t,e,o,c){this.persistence=t,this.rs=e,this.serializer=c,this.ss=new S1(m1),this.os=new E0(r=>Wn(r),Kn),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(o)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Kr(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ss))}};function Qp(s,t,e,o){return new hn(s,t,e,o)}function Uh(s,t){return S(this,null,function*(){let e=Y(s);return yield e.persistence.runTransaction("Handle user change","readonly",o=>{let c;return e.mutationQueue.getAllMutationBatches(o).next(r=>(c=r,e.cs(t),e.mutationQueue.getAllMutationBatches(o))).next(r=>{let n=[],a=[],h=r1();for(let v of c){n.push(v.batchId);for(let d of v.mutations)h=h.add(d.key)}for(let v of r){a.push(v.batchId);for(let d of v.mutations)h=h.add(d.key)}return e.localDocuments.getDocuments(o,h).next(v=>({ls:v,removedBatchIds:n,addedBatchIds:a}))})})})}function Yp(s,t){let e=Y(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{let c=t.batch.keys(),r=e.us.newChangeBuffer({trackRemovals:!0});return function(a,h,v,d){let u=v.batch,z=u.keys(),y=E.resolve();return z.forEach(A=>{y=y.next(()=>d.getEntry(h,A)).next(R=>{let B=v.docVersions.get(A);M1(B!==null),R.version.compareTo(B)<0&&(u.applyToRemoteDocument(R,v),R.isValidDocument()&&(R.setReadTime(v.commitVersion),d.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(h,u))}(e,o,t,r).next(()=>r.apply(o)).next(()=>e.mutationQueue.performConsistencyCheck(o)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(o,c,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(a){let h=r1();for(let v=0;v<a.mutationResults.length;++v)a.mutationResults[v].transformResults.length>0&&(h=h.add(a.batch.mutations[v].key));return h}(t))).next(()=>e.localDocuments.getDocuments(o,c))})}function qh(s){let t=Y(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.$r.getLastRemoteSnapshotVersion(e))}function Jp(s,t){let e=Y(s),o=t.snapshotVersion,c=e.ss;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let n=e.us.newChangeBuffer({trackRemovals:!0});c=e.ss;let a=[];t.targetChanges.forEach((d,u)=>{let z=c.get(u);if(!z)return;a.push(e.$r.removeMatchingKeys(r,d.removedDocuments,u).next(()=>e.$r.addMatchingKeys(r,d.addedDocuments,u)));let y=z.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(u)!==null?y=y.withResumeToken(n2.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,o)),c=c.insert(u,y),function(R,B,F){return R.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(z,y,d)&&a.push(e.$r.updateTargetData(r,y))});let h=g0(),v=r1();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,d))}),a.push(Xp(r,n,t.documentUpdates).next(d=>{h=d.hs,v=d.Ps})),!o.isEqual(X.min())){let d=e.$r.getLastRemoteSnapshotVersion(r).next(u=>e.$r.setTargetsMetadata(r,r.currentSequenceNumber,o));a.push(d)}return E.waitFor(a).next(()=>n.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,h,v)).next(()=>h)}).then(r=>(e.ss=c,r))}function Xp(s,t,e){let o=r1(),c=r1();return e.forEach(r=>o=o.add(r)),t.getEntries(s,o).next(r=>{let n=g0();return e.forEach((a,h)=>{let v=r.get(a);h.isFoundDocument()!==v.isFoundDocument()&&(c=c.add(a)),h.isNoDocument()&&h.version.isEqual(X.min())?(t.removeEntry(a,h.readTime),n=n.insert(a,h)):!v.isValidDocument()||h.version.compareTo(v.version)>0||h.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(h),n=n.insert(a,h)):N("LocalStore","Ignoring outdated watch update for ",a,". Current version:",v.version," Watch version:",h.version)}),{hs:n,Ps:c}})}function tm(s,t){let e=Y(s);return e.persistence.runTransaction("Get next mutation batch","readonly",o=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function em(s,t){let e=Y(s);return e.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return e.$r.getTargetData(o,t).next(r=>r?(c=r,E.resolve(c)):e.$r.allocateTargetId(o).next(n=>(c=new P4(t,n,"TargetPurposeListen",o.currentSequenceNumber),e.$r.addTargetData(o,c).next(()=>c))))}).then(o=>{let c=e.ss.get(o.targetId);return(c===null||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(e.ss=e.ss.insert(o.targetId,o),e.os.set(t,o.targetId)),o})}function vn(s,t,e){return S(this,null,function*(){let o=Y(s),c=o.ss.get(t),r=e?"readwrite":"readwrite-primary";try{e||(yield o.persistence.runTransaction("Release target",r,n=>o.persistence.referenceDelegate.removeTarget(n,c)))}catch(n){if(!U4(n))throw n;N("LocalStore",`Failed to update sequence numbers for target ${t}: ${n}`)}o.ss=o.ss.remove(t),o.os.delete(c.target)})}function oh(s,t,e){let o=Y(s),c=X.min(),r=r1();return o.persistence.runTransaction("Execute query","readwrite",n=>function(h,v,d){let u=Y(h),z=u.os.get(d);return z!==void 0?E.resolve(u.ss.get(z)):u.$r.getTargetData(v,d)}(o,n,Z2(t)).next(a=>{if(a)return c=a.lastLimboFreeSnapshotVersion,o.$r.getMatchingKeysForTargetId(n,a.targetId).next(h=>{r=h})}).next(()=>o.rs.getDocumentsMatchingQuery(n,t,e?c:X.min(),e?r:r1())).next(a=>(sm(o,mp(t),a),{documents:a,Is:r})))}function sm(s,t,e){let o=s._s.get(t)||X.min();e.forEach((c,r)=>{r.readTime.compareTo(o)>0&&(o=r.readTime)}),s._s.set(t,o)}var Ys=class{constructor(){this.activeTargetIds=Vp()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var gn=class{constructor(){this.io=new Ys,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,o){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,e,o){this.so[t]=e}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new Ys,Promise.resolve()}handleUserChange(t,e,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var dn=class{oo(t){}shutdown(){}};var Js=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.lo)t(0)}co(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.lo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ts=null;function rr(){return Ts===null?Ts=function(){return 268435456+Math.round(2147483648*Math.random())}():Ts++,"0x"+Ts.toString(16)}var om={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wn=class{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}};var c2="WebChannelConnection",un=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let o=e.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=o+"://"+e.host,this.Do=`projects/${c}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${c}`:`project_id=${c}&database_id=${r}`}get vo(){return!1}Fo(e,o,c,r,n){let a=rr(),h=this.Mo(e,o.toUriEncodedString());N("RestConnection",`Sending RPC '${e}' ${a}:`,h,c);let v={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(v,r,n),this.Oo(e,h,v,c).then(d=>(N("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw q5("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",h,"request:",c),d})}No(e,o,c,r,n,a){return this.Fo(e,o,c,r,n)}xo(e,o,c){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rt}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((r,n)=>e[n]=r),c&&c.headers.forEach((r,n)=>e[n]=r)}Mo(e,o){let c=om[e];return`${this.bo}/v1/${o}:${c}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,e,o,c){let r=rr();return new Promise((n,a)=>{let h=new Jc;h.setWithCredentials(!0),h.listenOnce(tr.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case L4.NO_ERROR:let d=h.getResponseJson();N(c2,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(d)),n(d);break;case L4.TIMEOUT:N(c2,`RPC '${t}' ${r} timed out`),a(new Z(b.DEADLINE_EXCEEDED,"Request time out"));break;case L4.HTTP_ERROR:let u=h.getStatus();if(N(c2,`RPC '${t}' ${r} failed with status:`,u,"response text:",h.getResponseText()),u>0){let z=h.getResponseJson();Array.isArray(z)&&(z=z[0]);let y=z?.error;if(y&&y.status&&y.message){let A=function(B){let F=B.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(F)>=0?F:b.UNKNOWN}(y.status);a(new Z(A,y.message))}else a(new Z(b.UNKNOWN,"Server responded with status "+h.getStatus()))}else a(new Z(b.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{N(c2,`RPC '${t}' ${r} completed.`)}});let v=JSON.stringify(c);N(c2,`RPC '${t}' ${r} sending request:`,c),h.send(e,"POST",v,o,15)})}Lo(t,e,o){let c=rr(),r=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=or(),a=sr(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(h.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(h.xmlHttpFactory=new Xc({})),this.xo(h.initMessageHeaders,e,o),h.encodeInitMessageHeaders=!0;let d=r.join("");N(c2,`Creating RPC '${t}' stream ${c}: ${d}`,h);let u=n.createWebChannel(d,h),z=!1,y=!1,A=new wn({Po:B=>{y?N(c2,`Not sending because RPC '${t}' stream ${c} is closed:`,B):(z||(N(c2,`Opening RPC '${t}' stream ${c} transport.`),u.open(),z=!0),N(c2,`RPC '${t}' stream ${c} sending:`,B),u.send(B))},Io:()=>u.close()}),R=(B,F,U)=>{B.listen(F,O=>{try{U(O)}catch(l1){setTimeout(()=>{throw l1},0)}})};return R(u,P5.EventType.OPEN,()=>{y||(N(c2,`RPC '${t}' stream ${c} transport opened.`),A.po())}),R(u,P5.EventType.CLOSE,()=>{y||(y=!0,N(c2,`RPC '${t}' stream ${c} transport closed`),A.wo())}),R(u,P5.EventType.ERROR,B=>{y||(y=!0,q5(c2,`RPC '${t}' stream ${c} transport errored:`,B),A.wo(new Z(b.UNAVAILABLE,"The operation could not be completed")))}),R(u,P5.EventType.MESSAGE,B=>{var F;if(!y){let U=B.data[0];M1(!!U);let O=U,l1=O.error||((F=O[0])===null||F===void 0?void 0:F.error);if(l1){N(c2,`RPC '${t}' stream ${c} received error:`,l1);let R1=l1.status,c1=function(m){let x=b1[m];if(x!==void 0)return Ih(x)}(R1),M=l1.message;c1===void 0&&(c1=b.INTERNAL,M="Unknown error status: "+R1+" with message "+l1.message),y=!0,A.wo(new Z(c1,M)),u.close()}else N(c2,`RPC '${t}' stream ${c} received:`,U),A.So(U)}}),R(a,er.STAT_EVENT,B=>{B.stat===ks.PROXY?N(c2,`RPC '${t}' stream ${c} detected buffering proxy`):B.stat===ks.NOPROXY&&N(c2,`RPC '${t}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{A.yo()},0),A}};function nr(){return typeof document<"u"?document:null}function p3(s){return new Or(s,!0)}var Xs=class{constructor(t,e,o=1e3,c=1.5,r=6e4){this.ai=t,this.timerId=e,this.Bo=o,this.ko=c,this.qo=r,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();let e=Math.floor(this.Qo+this.Go()),o=Math.max(0,Date.now()-this.$o),c=Math.max(0,e-o);c>0&&N("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Qo} ms, delay with jitter: ${e} ms, last attempt: ${o} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,c,()=>(this.$o=Date.now(),t())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var t3=class{constructor(t,e,o,c,r,n,a,h){this.ai=t,this.jo=o,this.Ho=c,this.connection=r,this.authCredentialsProvider=n,this.appCheckCredentialsProvider=a,this.listener=h,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Xs(t,e)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return S(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(t){this.a_(),this.stream.send(t)}o_(){return S(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(t,e){return S(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,t!==4?this.e_.reset():e&&e.code===b.RESOURCE_EXHAUSTED?(h0(e.toString()),h0("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):e&&e.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Vo(e)})}c_(){}auth(){this.state=1;let t=this.l_(this.Jo),e=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Jo===e&&this.h_(o,c)},o=>{t(()=>{let c=new Z(b.UNKNOWN,"Fetching auth token failed: "+o.message);return this.P_(c)})})}h_(t,e){let o=this.l_(this.Jo);this.stream=this.I_(t,e),this.stream.To(()=>{o(()=>this.listener.To())}),this.stream.Ao(()=>{o(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(c=>{o(()=>this.P_(c))}),this.stream.onMessage(c=>{o(()=>++this.Xo==1?this.T_(c):this.onNext(c))})}r_(){this.state=5,this.e_.Wo(()=>S(this,null,function*(){this.state=0,this.start()}))}P_(t){return N("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return e=>{this.ai.enqueueAndForget(()=>this.Jo===t?e():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pn=class extends t3{constructor(t,e,o,c,r,n){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,o,c,n),this.serializer=r}I_(t,e){return this.connection.Lo("Listen",t,e)}T_(t){return this.onNext(t)}onNext(t){this.e_.reset();let e=Dp(this.serializer,t),o=function(r){if(!("targetChange"in r))return X.min();let n=r.targetChange;return n.targetIds&&n.targetIds.length?X.min():n.readTime?U2(n.readTime):X.min()}(t);return this.listener.E_(e,o)}d_(t){let e={};e.database=Zr(this.serializer),e.addTarget=function(r,n){let a,h=n.target;if(a=Ar(h)?{documents:Fp(r,h)}:{query:jp(r,h)._t},a.targetId=n.targetId,n.resumeToken.approximateByteSize()>0){a.resumeToken=Ph(r,n.resumeToken);let v=Nr(r,n.expectedCount);v!==null&&(a.expectedCount=v)}else if(n.snapshotVersion.compareTo(X.min())>0){a.readTime=Ks(r,n.snapshotVersion.toTimestamp());let v=Nr(r,n.expectedCount);v!==null&&(a.expectedCount=v)}return a}(this.serializer,t);let o=Up(this.serializer,t);o&&(e.labels=o),this.__(e)}A_(t){let e={};e.database=Zr(this.serializer),e.removeTarget=t,this.__(e)}},mn=class extends t3{constructor(t,e,o,c,r,n){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,o,c,n),this.serializer=r}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(t,e){return this.connection.Lo("Write",t,e)}T_(t){return M1(!!t.streamToken),this.lastStreamToken=t.streamToken,M1(!t.writeResults||t.writeResults.length===0),this.listener.m_()}onNext(t){M1(!!t.streamToken),this.lastStreamToken=t.streamToken,this.e_.reset();let e=Np(t.writeResults,t.commitTime),o=U2(t.commitTime);return this.listener.f_(o,e)}g_(){let t={};t.database=Zr(this.serializer),this.__(t)}V_(t){let e={streamToken:this.lastStreamToken,writes:t.map(o=>Op(this.serializer,o))};this.__(e)}};var fn=class extends class{}{constructor(t,e,o,c){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=o,this.serializer=c,this.p_=!1}y_(){if(this.p_)throw new Z(b.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,e,o,c){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,n])=>this.connection.Fo(t,Fr(e,o),c,r,n)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Z(b.UNKNOWN,r.toString())})}No(t,e,o,c,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,a])=>this.connection.No(t,Fr(e,o),c,n,a,r)).catch(n=>{throw n.name==="FirebaseError"?(n.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new Z(b.UNKNOWN,n.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},zn=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(t){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,t==="Online"&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(h0(e),this.b_=!1):N("OnlineStateTracker",e)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var xn=class{constructor(t,e,o,c,r){this.localStore=t,this.datastore=e,this.asyncQueue=o,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=r,this.B_.oo(n=>{o.enqueueAndForget(()=>S(this,null,function*(){h5(this)&&(N("RemoteStore","Restarting streams for network reachability change."),yield function(h){return S(this,null,function*(){let v=Y(h);v.N_.add(4),yield q4(v),v.k_.set("Unknown"),v.N_.delete(4),yield m3(v)})}(this))}))}),this.k_=new zn(o,c)}};function m3(s){return S(this,null,function*(){if(h5(s))for(let t of s.L_)yield t(!0)})}function q4(s){return S(this,null,function*(){for(let t of s.L_)yield t(!1)})}function $h(s,t){let e=Y(s);e.O_.has(t.targetId)||(e.O_.set(t.targetId,t),tl(e)?Xn(e):nt(e).n_()&&Jn(e,t))}function Yn(s,t){let e=Y(s),o=nt(e);e.O_.delete(t),o.n_()&&Gh(e,t),e.O_.size===0&&(o.n_()?o.s_():h5(e)&&e.k_.set("Unknown"))}function Jn(s,t){if(s.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){let e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}nt(s).d_(t)}function Gh(s,t){s.q_.xe(t),nt(s).A_(t)}function Xn(s){s.q_=new Dr({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.O_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),nt(s).start(),s.k_.D_()}function tl(s){return h5(s)&&!nt(s).t_()&&s.O_.size>0}function h5(s){return Y(s).N_.size===0}function Wh(s){s.q_=void 0}function cm(s){return S(this,null,function*(){s.k_.set("Online")})}function rm(s){return S(this,null,function*(){s.O_.forEach((t,e)=>{Jn(s,t)})})}function nm(s,t){return S(this,null,function*(){Wh(s),tl(s)?(s.k_.F_(t),Xn(s)):s.k_.set("Unknown")})}function lm(s,t,e){return S(this,null,function*(){if(s.k_.set("Online"),t instanceof Gs&&t.state===2&&t.cause)try{yield function(c,r){return S(this,null,function*(){let n=r.cause;for(let a of r.targetIds)c.O_.has(a)&&(yield c.remoteSyncer.rejectListen(a,n),c.O_.delete(a),c.q_.removeTarget(a))})}(s,t)}catch(o){N("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield e3(s,o)}else if(t instanceof Z5?s.q_.Ke(t):t instanceof $s?s.q_.He(t):s.q_.We(t),!e.isEqual(X.min()))try{let o=yield qh(s.localStore);e.compareTo(o)>=0&&(yield function(r,n){let a=r.q_.rt(n);return a.targetChanges.forEach((h,v)=>{if(h.resumeToken.approximateByteSize()>0){let d=r.O_.get(v);d&&r.O_.set(v,d.withResumeToken(h.resumeToken,n))}}),a.targetMismatches.forEach((h,v)=>{let d=r.O_.get(h);if(!d)return;r.O_.set(h,d.withResumeToken(n2.EMPTY_BYTE_STRING,d.snapshotVersion)),Gh(r,h);let u=new P4(d.target,h,v,d.sequenceNumber);Jn(r,u)}),r.remoteSyncer.applyRemoteEvent(a)}(s,e))}catch(o){N("RemoteStore","Failed to raise snapshot:",o),yield e3(s,o)}})}function e3(s,t,e){return S(this,null,function*(){if(!U4(t))throw t;s.N_.add(1),yield q4(s),s.k_.set("Offline"),e||(e=()=>qh(s.localStore)),s.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){N("RemoteStore","Retrying IndexedDB access"),yield e(),s.N_.delete(1),yield m3(s)}))})}function Kh(s,t){return t().catch(e=>e3(s,e,t))}function f3(s){return S(this,null,function*(){let t=Y(s),e=T0(t),o=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;am(t);)try{let c=yield tm(t.localStore,o);if(c===null){t.x_.length===0&&e.s_();break}o=c.batchId,im(t,c)}catch(c){yield e3(t,c)}Qh(t)&&Yh(t)})}function am(s){return h5(s)&&s.x_.length<10}function im(s,t){s.x_.push(t);let e=T0(s);e.n_()&&e.R_&&e.V_(t.mutations)}function Qh(s){return h5(s)&&!T0(s).t_()&&s.x_.length>0}function Yh(s){T0(s).start()}function hm(s){return S(this,null,function*(){T0(s).g_()})}function vm(s){return S(this,null,function*(){let t=T0(s);for(let e of s.x_)t.V_(e.mutations)})}function gm(s,t,e){return S(this,null,function*(){let o=s.x_.shift(),c=Er.from(o,t,e);yield Kh(s,()=>s.remoteSyncer.applySuccessfulWrite(c)),yield f3(s)})}function dm(s,t){return S(this,null,function*(){t&&T0(s).R_&&(yield function(o,c){return S(this,null,function*(){if(function(n){return Sp(n)&&n!==b.ABORTED}(c.code)){let r=o.x_.shift();T0(o).i_(),yield Kh(o,()=>o.remoteSyncer.rejectFailedWrite(r.batchId,c)),yield f3(o)}})}(s,t)),Qh(s)&&Yh(s)})}function ch(s,t){return S(this,null,function*(){let e=Y(s);e.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");let o=h5(e);e.N_.add(3),yield q4(e),o&&e.k_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.N_.delete(3),yield m3(e)})}function wm(s,t){return S(this,null,function*(){let e=Y(s);t?(e.N_.delete(2),yield m3(e)):t||(e.N_.add(2),yield q4(e),e.k_.set("Unknown"))})}function nt(s){return s.Q_||(s.Q_=function(e,o,c){let r=Y(e);return r.y_(),new pn(o,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,c)}(s.datastore,s.asyncQueue,{To:cm.bind(null,s),Ao:rm.bind(null,s),Vo:nm.bind(null,s),E_:lm.bind(null,s)}),s.L_.push(t=>S(this,null,function*(){t?(s.Q_.i_(),tl(s)?Xn(s):s.k_.set("Unknown")):(yield s.Q_.stop(),Wh(s))}))),s.Q_}function T0(s){return s.K_||(s.K_=function(e,o,c){let r=Y(e);return r.y_(),new mn(o,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,c)}(s.datastore,s.asyncQueue,{To:()=>Promise.resolve(),Ao:hm.bind(null,s),Vo:dm.bind(null,s),m_:vm.bind(null,s),f_:gm.bind(null,s)}),s.L_.push(t=>S(this,null,function*(){t?(s.K_.i_(),yield f3(s)):(yield s.K_.stop(),s.x_.length>0&&(N("RemoteStore",`Stopping write stream with ${s.x_.length} pending writes`),s.x_=[]))}))),s.K_}var Mn=class s{constructor(t,e,o,c,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=c,this.removalCallback=r,this.deferred=new F2,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(n=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,o,c,r){let n=Date.now()+o,a=new s(t,e,n,c,r);return a.start(o),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(b.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function el(s,t){if(h0("AsyncQueue",`${t}: ${s}`),U4(s))return new Z(b.UNAVAILABLE,`${t}: ${s}`);throw s}var s3=class s{constructor(t){this.comparator=t?(e,o)=>t(e,o)||$.comparator(e.key,o.key):(e,o)=>$.comparator(e.key,o.key),this.keyedMap=B4(),this.sortedSet=new S1(this.comparator)}static emptySet(t){return new s(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,o)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof s)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;e.hasNext();){let c=e.getNext().key,r=o.getNext().key;if(!c.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let o=new s;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o}};var o3=class{constructor(){this.U_=new S1($.comparator)}track(t){let e=t.doc.key,o=this.U_.get(e);o?t.type!==0&&o.type===3?this.U_=this.U_.insert(e,t):t.type===3&&o.type!==1?this.U_=this.U_.insert(e,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.U_=this.U_.insert(e,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.U_=this.U_.remove(e):t.type===1&&o.type===2?this.U_=this.U_.insert(e,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):K():this.U_=this.U_.insert(e,t)}W_(){let t=[];return this.U_.inorderTraversal((e,o)=>{t.push(o)}),t}},st=class s{constructor(t,e,o,c,r,n,a,h,v){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=r,this.fromCache=n,this.syncStateChanged=a,this.excludesMetadataChanges=h,this.hasCachedResults=v}static fromInitialDocuments(t,e,o,c,r){let n=[];return e.forEach(a=>{n.push({type:0,doc:a})}),new s(t,e,s3.emptySet(e),n,o,c,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&w3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(let c=0;c<e.length;c++)if(e[c].type!==o[c].type||!e[c].doc.isEqual(o[c].doc))return!1;return!0}};var Cn=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(t=>t.H_())}},Vn=class{constructor(){this.queries=rh(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(e,o){let c=Y(e),r=c.queries;c.queries=rh(),r.forEach((n,a)=>{for(let h of a.z_)h.onError(o)})})(this,new Z(b.ABORTED,"Firestore shutting down"))}};function rh(){return new E0(s=>Vh(s),w3)}function um(s,t){return S(this,null,function*(){let e=Y(s),o=3,c=t.query,r=e.queries.get(c);r?!r.j_()&&t.H_()&&(o=2):(r=new Cn,o=t.H_()?0:1);try{switch(o){case 0:r.G_=yield e.onListen(c,!0);break;case 1:r.G_=yield e.onListen(c,!1);break;case 2:yield e.onFirstRemoteStoreListen(c)}}catch(n){let a=el(n,`Initialization of query '${D5(t.query)}' failed`);return void t.onError(a)}e.queries.set(c,r),r.z_.push(t),t.Y_(e.onlineState),r.G_&&t.Z_(r.G_)&&sl(e)})}function pm(s,t){return S(this,null,function*(){let e=Y(s),o=t.query,c=3,r=e.queries.get(o);if(r){let n=r.z_.indexOf(t);n>=0&&(r.z_.splice(n,1),r.z_.length===0?c=t.H_()?0:1:!r.j_()&&t.H_()&&(c=2))}switch(c){case 0:return e.queries.delete(o),e.onUnlisten(o,!0);case 1:return e.queries.delete(o),e.onUnlisten(o,!1);case 2:return e.onLastRemoteStoreUnlisten(o);default:return}})}function mm(s,t){let e=Y(s),o=!1;for(let c of t){let r=c.query,n=e.queries.get(r);if(n){for(let a of n.z_)a.Z_(c)&&(o=!0);n.G_=c}}o&&sl(e)}function fm(s,t,e){let o=Y(s),c=o.queries.get(t);if(c)for(let r of c.z_)r.onError(e);o.queries.delete(t)}function sl(s){s.J_.forEach(t=>{t.next()})}var Hn,nh;(nh=Hn||(Hn={})).X_="default",nh.Cache="cache";var Ln=class{constructor(t,e,o){this.query=t,this.ea=e,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=o||{}}Z_(t){if(!this.options.includeMetadataChanges){let o=[];for(let c of t.docChanges)c.type!==3&&o.push(c);t=new st(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ta?this.ra(t)&&(this.ea.next(t),e=!0):this.ia(t,this.onlineState)&&(this.sa(t),e=!0),this.na=t,e}onError(t){this.ea.error(t)}Y_(t){this.onlineState=t;let e=!1;return this.na&&!this.ta&&this.ia(this.na,t)&&(this.sa(this.na),e=!0),e}ia(t,e){if(!t.fromCache||!this.H_())return!0;let o=e!=="Offline";return(!this.options.oa||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ra(t){if(t.docChanges.length>0)return!0;let e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}sa(t){t=st.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ta=!0,this.ea.next(t)}H_(){return this.options.source!==Hn.Cache}};var c3=class{constructor(t){this.key=t}},r3=class{constructor(t){this.key=t}},yn=class{constructor(t,e){this.query=t,this.Ia=e,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=r1(),this.mutatedKeys=r1(),this.da=Hh(t),this.Aa=new s3(this.da)}get Ra(){return this.Ia}Va(t,e){let o=e?e.ma:new o3,c=e?e.Aa:this.Aa,r=e?e.mutatedKeys:this.mutatedKeys,n=c,a=!1,h=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,v=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal((d,u)=>{let z=c.get(d),y=u3(this.query,u)?u:null,A=!!z&&this.mutatedKeys.has(z.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),B=!1;z&&y?z.data.isEqual(y.data)?A!==R&&(o.track({type:3,doc:y}),B=!0):this.fa(z,y)||(o.track({type:2,doc:y}),B=!0,(h&&this.da(y,h)>0||v&&this.da(y,v)<0)&&(a=!0)):!z&&y?(o.track({type:0,doc:y}),B=!0):z&&!y&&(o.track({type:1,doc:z}),B=!0,(h||v)&&(a=!0)),B&&(y?(n=n.add(y),r=R?r.add(d):r.delete(d)):(n=n.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;n.size>this.query.limit;){let d=this.query.limitType==="F"?n.last():n.first();n=n.delete(d.key),r=r.delete(d.key),o.track({type:1,doc:d})}return{Aa:n,ma:o,ts:a,mutatedKeys:r}}fa(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,o,c){let r=this.Aa;this.Aa=t.Aa,this.mutatedKeys=t.mutatedKeys;let n=t.ma.W_();n.sort((d,u)=>function(y,A){let R=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return R(y)-R(A)}(d.type,u.type)||this.da(d.doc,u.doc)),this.ga(o),c=c!=null&&c;let a=e&&!c?this.pa():[],h=this.Ea.size===0&&this.current&&!c?1:0,v=h!==this.Ta;return this.Ta=h,n.length!==0||v?{snapshot:new st(this.query,t.Aa,r,n,t.mutatedKeys,h===0,v,!1,!!o&&o.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new o3,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(t){return!this.Ia.has(t)&&!!this.Aa.has(t)&&!this.Aa.get(t).hasLocalMutations}ga(t){t&&(t.addedDocuments.forEach(e=>this.Ia=this.Ia.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ia=this.Ia.delete(e)),this.current=t.current)}pa(){if(!this.current)return[];let t=this.Ea;this.Ea=r1(),this.Aa.forEach(o=>{this.wa(o.key)&&(this.Ea=this.Ea.add(o.key))});let e=[];return t.forEach(o=>{this.Ea.has(o)||e.push(new r3(o))}),this.Ea.forEach(o=>{t.has(o)||e.push(new c3(o))}),e}Sa(t){this.Ia=t.Is,this.Ea=r1();let e=this.Va(t.documents);return this.applyChanges(e,!0)}ba(){return st.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},Bn=class{constructor(t,e,o){this.query=t,this.targetId=e,this.view=o}},_n=class{constructor(t){this.key=t,this.Da=!1}},An=class{constructor(t,e,o,c,r,n){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=c,this.currentUser=r,this.maxConcurrentLimboResolutions=n,this.Ca={},this.va=new E0(a=>Vh(a),w3),this.Fa=new Map,this.Ma=new Set,this.xa=new S1($.comparator),this.Oa=new Map,this.Na=new O4,this.La={},this.Ba=new Map,this.ka=D4.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function zm(s,t,e=!0){return S(this,null,function*(){let o=o6(s),c,r=o.va.get(t);return r?(o.sharedClientState.addLocalQueryTarget(r.targetId),c=r.view.ba()):c=yield Jh(o,t,e,!0),c})}function xm(s,t){return S(this,null,function*(){let e=o6(s);yield Jh(e,t,!0,!1)})}function Jh(s,t,e,o){return S(this,null,function*(){let c=yield em(s.localStore,Z2(t)),r=c.targetId,n=e?s.sharedClientState.addLocalQueryTarget(r):"not-current",a;return o&&(a=yield Mm(s,t,r,n==="current",c.resumeToken)),s.isPrimaryClient&&e&&$h(s.remoteStore,c),a})}function Mm(s,t,e,o,c){return S(this,null,function*(){s.Qa=(u,z,y)=>function(R,B,F,U){return S(this,null,function*(){let O=B.view.Va(F);O.ts&&(O=yield oh(R.localStore,B.query,!1).then(({documents:M})=>B.view.Va(M,O)));let l1=U&&U.targetChanges.get(B.targetId),R1=U&&U.targetMismatches.get(B.targetId)!=null,c1=B.view.applyChanges(O,R.isPrimaryClient,l1,R1);return ah(R,B.targetId,c1.ya),c1.snapshot})}(s,u,z,y);let r=yield oh(s.localStore,t,!0),n=new yn(t,r.Is),a=n.Va(r.documents),h=I4.createSynthesizedTargetChangeForCurrentChange(e,o&&s.onlineState!=="Offline",c),v=n.applyChanges(a,s.isPrimaryClient,h);ah(s,e,v.ya);let d=new Bn(t,e,n);return s.va.set(t,d),s.Fa.has(e)?s.Fa.get(e).push(t):s.Fa.set(e,[t]),v.snapshot})}function Cm(s,t,e){return S(this,null,function*(){let o=Y(s),c=o.va.get(t),r=o.Fa.get(c.targetId);if(r.length>1)return o.Fa.set(c.targetId,r.filter(n=>!w3(n,t))),void o.va.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(c.targetId),o.sharedClientState.isActiveQueryTarget(c.targetId)||(yield vn(o.localStore,c.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(c.targetId),e&&Yn(o.remoteStore,c.targetId),Sn(o,c.targetId)}).catch(Z4))):(Sn(o,c.targetId),yield vn(o.localStore,c.targetId,!0))})}function Vm(s,t){return S(this,null,function*(){let e=Y(s),o=e.va.get(t),c=e.Fa.get(o.targetId);e.isPrimaryClient&&c.length===1&&(e.sharedClientState.removeLocalQueryTarget(o.targetId),Yn(e.remoteStore,o.targetId))})}function Hm(s,t,e){return S(this,null,function*(){let o=Rm(s);try{let c=yield function(n,a){let h=Y(n),v=W1.now(),d=a.reduce((y,A)=>y.add(A.key),r1()),u,z;return h.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=g0(),R=r1();return h.us.getEntries(y,d).next(B=>{A=B,A.forEach((F,U)=>{U.isValidDocument()||(R=R.add(F))})}).next(()=>h.localDocuments.getOverlayedDocuments(y,A)).next(B=>{u=B;let F=[];for(let U of a){let O=Ap(U,u.get(U.key).overlayedDocument);O!=null&&F.push(new G2(U.key,O,ph(O.value.mapValue),i0.exists(!0)))}return h.mutationQueue.addMutationBatch(y,v,F,a)}).next(B=>{z=B;let F=B.applyToLocalDocumentSet(u,R);return h.documentOverlayCache.saveOverlays(y,B.batchId,F)})}).then(()=>({batchId:z.batchId,changes:yh(u)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(c.batchId),function(n,a,h){let v=n.La[n.currentUser.toKey()];v||(v=new S1(m1)),v=v.insert(a,h),n.La[n.currentUser.toKey()]=v}(o,c.batchId,e),yield $4(o,c.changes),yield f3(o.remoteStore)}catch(c){let r=el(c,"Failed to persist write");e.reject(r)}})}function Xh(s,t){return S(this,null,function*(){let e=Y(s);try{let o=yield Jp(e.localStore,t);t.targetChanges.forEach((c,r)=>{let n=e.Oa.get(r);n&&(M1(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?n.Da=!0:c.modifiedDocuments.size>0?M1(n.Da):c.removedDocuments.size>0&&(M1(n.Da),n.Da=!1))}),yield $4(e,o,t)}catch(o){yield Z4(o)}})}function lh(s,t,e){let o=Y(s);if(o.isPrimaryClient&&e===0||!o.isPrimaryClient&&e===1){let c=[];o.va.forEach((r,n)=>{let a=n.view.Y_(t);a.snapshot&&c.push(a.snapshot)}),function(n,a){let h=Y(n);h.onlineState=a;let v=!1;h.queries.forEach((d,u)=>{for(let z of u.z_)z.Y_(a)&&(v=!0)}),v&&sl(h)}(o.eventManager,t),c.length&&o.Ca.E_(c),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function Lm(s,t,e){return S(this,null,function*(){let o=Y(s);o.sharedClientState.updateQueryState(t,"rejected",e);let c=o.Oa.get(t),r=c&&c.key;if(r){let n=new S1($.comparator);n=n.insert(r,k2.newNoDocument(r,X.min()));let a=r1().add(r),h=new qs(X.min(),new Map,new S1(m1),n,a);yield Xh(o,h),o.xa=o.xa.remove(r),o.Oa.delete(t),ol(o)}else yield vn(o.localStore,t,!1).then(()=>Sn(o,t,e)).catch(Z4)})}function ym(s,t){return S(this,null,function*(){let e=Y(s),o=t.batch.batchId;try{let c=yield Yp(e.localStore,t);e6(e,o,null),t6(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),yield $4(e,c)}catch(c){yield Z4(c)}})}function Bm(s,t,e){return S(this,null,function*(){let o=Y(s);try{let c=yield function(n,a){let h=Y(n);return h.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let d;return h.mutationQueue.lookupMutationBatch(v,a).next(u=>(M1(u!==null),d=u.keys(),h.mutationQueue.removeMutationBatch(v,u))).next(()=>h.mutationQueue.performConsistencyCheck(v)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(v,d,a)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,d)).next(()=>h.localDocuments.getDocuments(v,d))})}(o.localStore,t);e6(o,t,e),t6(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),yield $4(o,c)}catch(c){yield Z4(c)}})}function t6(s,t){(s.Ba.get(t)||[]).forEach(e=>{e.resolve()}),s.Ba.delete(t)}function e6(s,t,e){let o=Y(s),c=o.La[o.currentUser.toKey()];if(c){let r=c.get(t);r&&(e?r.reject(e):r.resolve(),c=c.remove(t)),o.La[o.currentUser.toKey()]=c}}function Sn(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(let o of s.Fa.get(t))s.va.delete(o),e&&s.Ca.Ka(o,e);s.Fa.delete(t),s.isPrimaryClient&&s.Na.mr(t).forEach(o=>{s.Na.containsKey(o)||s6(s,o)})}function s6(s,t){s.Ma.delete(t.path.canonicalString());let e=s.xa.get(t);e!==null&&(Yn(s.remoteStore,e),s.xa=s.xa.remove(t),s.Oa.delete(e),ol(s))}function ah(s,t,e){for(let o of e)o instanceof c3?(s.Na.addReference(o.key,t),_m(s,o)):o instanceof r3?(N("SyncEngine","Document no longer in limbo: "+o.key),s.Na.removeReference(o.key,t),s.Na.containsKey(o.key)||s6(s,o.key)):K()}function _m(s,t){let e=t.key,o=e.path.canonicalString();s.xa.get(e)||s.Ma.has(o)||(N("SyncEngine","New document in limbo: "+e),s.Ma.add(o),ol(s))}function ol(s){for(;s.Ma.size>0&&s.xa.size<s.maxConcurrentLimboResolutions;){let t=s.Ma.values().next().value;s.Ma.delete(t);let e=new $(A1.fromString(t)),o=s.ka.next();s.Oa.set(o,new _n(e)),s.xa=s.xa.insert(e,o),$h(s.remoteStore,new P4(Z2(Ch(e.path)),o,"TargetPurposeLimboResolution",dh.oe))}}function $4(s,t,e){return S(this,null,function*(){let o=Y(s),c=[],r=[],n=[];o.va.isEmpty()||(o.va.forEach((a,h)=>{n.push(o.Qa(h,t,e).then(v=>{var d;if((v||e)&&o.isPrimaryClient){let u=v?!v.fromCache:(d=e?.targetChanges.get(h.targetId))===null||d===void 0?void 0:d.current;o.sharedClientState.updateQueryState(h.targetId,u?"current":"not-current")}if(v){c.push(v);let u=nn.Ui(h.targetId,v);r.push(u)}}))}),yield Promise.all(n),o.Ca.E_(c),yield function(h,v){return S(this,null,function*(){let d=Y(h);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>E.forEach(v,z=>E.forEach(z.Ki,y=>d.persistence.referenceDelegate.addReference(u,z.targetId,y)).next(()=>E.forEach(z.$i,y=>d.persistence.referenceDelegate.removeReference(u,z.targetId,y)))))}catch(u){if(!U4(u))throw u;N("LocalStore","Failed to update sequence numbers: "+u)}for(let u of v){let z=u.targetId;if(!u.fromCache){let y=d.ss.get(z),A=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(A);d.ss=d.ss.insert(z,R)}}})}(o.localStore,r))})}function Am(s,t){return S(this,null,function*(){let e=Y(s);if(!e.currentUser.isEqual(t)){N("SyncEngine","User change. New user:",t.toKey());let o=yield Uh(e.localStore,t);e.currentUser=t,function(r,n){r.Ba.forEach(a=>{a.forEach(h=>{h.reject(new Z(b.CANCELLED,n))})}),r.Ba.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield $4(e,o.ls)}})}function Sm(s,t){let e=Y(s),o=e.Oa.get(t);if(o&&o.Da)return r1().add(o.key);{let c=r1(),r=e.Fa.get(t);if(!r)return c;for(let n of r){let a=e.va.get(n);c=c.unionWith(a.view.Ra)}return c}}function o6(s){let t=Y(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lm.bind(null,t),t.Ca.E_=mm.bind(null,t.eventManager),t.Ca.Ka=fm.bind(null,t.eventManager),t}function Rm(s){let t=Y(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ym.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bm.bind(null,t),t}var n3=class{constructor(){this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=p3(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Qp(this.persistence,new an,t.initialUser,this.serializer)}createPersistence(t){return new on(rn.Yr,this.serializer)}createSharedClientState(t){return new gn}terminate(){return S(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Rn=class{initialize(t,e){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>lh(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Am.bind(null,this.syncEngine),yield wm(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Vn}()}createDatastore(t){let e=p3(t.databaseInfo.databaseId),o=function(r){return new un(r)}(t.databaseInfo);return function(r,n,a,h){return new fn(r,n,a,h)}(t.authCredentials,t.appCheckCredentials,o,e)}createRemoteStore(t){return function(o,c,r,n,a){return new xn(o,c,r,n,a)}(this.localStore,this.datastore,t.asyncQueue,e=>lh(this.syncEngine,e,0),function(){return Js.D()?new Js:new dn}())}createSyncEngine(t,e){return function(c,r,n,a,h,v,d){let u=new An(c,r,n,a,h,v);return d&&(u.qa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return S(this,null,function*(){var t,e;yield function(c){return S(this,null,function*(){let r=Y(c);N("RemoteStore","RemoteStore shutting down."),r.N_.add(5),yield q4(r),r.B_.shutdown(),r.k_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};var bn=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Wa(this.observer.next,t)}error(t){this.observer.error?this.Wa(this.observer.error,t):h0("Uncaught Error in snapshot listener:",t.toString())}Ga(){this.muted=!0}Wa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var kn=class{constructor(t,e,o,c){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=o,this.databaseInfo=c,this.user=j1.UNAUTHENTICATED,this.clientId=Os.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,r=>S(this,null,function*(){N("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(o,r=>(N("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new F2;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let o=el(e,"Failed to shutdown persistence");t.reject(o)}})),t.promise}};function lr(s,t){return S(this,null,function*(){s.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");let e=s.configuration;yield t.initialize(e);let o=e.initialUser;s.setCredentialChangeListener(c=>S(this,null,function*(){o.isEqual(c)||(yield Uh(t.localStore,c),o=c)})),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t})}function ih(s,t){return S(this,null,function*(){s.asyncQueue.verifyOperationInProgress();let e=yield km(s);N("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,s.configuration),s.setCredentialChangeListener(o=>ch(t.remoteStore,o)),s.setAppCheckTokenChangeListener((o,c)=>ch(t.remoteStore,c)),s._onlineComponents=t})}function bm(s){return s.name==="FirebaseError"?s.code===b.FAILED_PRECONDITION||s.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}function km(s){return S(this,null,function*(){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){N("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lr(s,s._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!bm(e))throw e;q5("Error using user provided cache. Falling back to memory cache: "+e),yield lr(s,new n3)}}else N("FirestoreClient","Using default OfflineComponentProvider"),yield lr(s,new n3);return s._offlineComponents})}function c6(s){return S(this,null,function*(){return s._onlineComponents||(s._uninitializedComponentsProvider?(N("FirestoreClient","Using user provided OnlineComponentProvider"),yield ih(s,s._uninitializedComponentsProvider._online)):(N("FirestoreClient","Using default OnlineComponentProvider"),yield ih(s,new Rn))),s._onlineComponents})}function Em(s){return c6(s).then(t=>t.syncEngine)}function Tm(s){return S(this,null,function*(){let t=yield c6(s),e=t.eventManager;return e.onListen=zm.bind(null,t.syncEngine),e.onUnlisten=Cm.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=xm.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Vm.bind(null,t.syncEngine),e})}function Im(s,t,e={}){let o=new F2;return s.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(r,n,a,h,v){let d=new bn({next:z=>{n.enqueueAndForget(()=>pm(r,u)),z.fromCache&&h.source==="server"?v.reject(new Z(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(z)},error:z=>v.reject(z)}),u=new Ln(a,d,{includeMetadataChanges:!0,oa:!0});return um(r,u)}(yield Tm(s),s.asyncQueue,t,e,o)})),o.promise}function r6(s){let t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}var hh=new Map;function n6(s,t,e){if(!e)throw new Z(b.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Pm(s,t,e,o){if(t===!0&&o===!0)throw new Z(b.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function vh(s){if(!$.isDocumentKey(s))throw new Z(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function gh(s){if($.isDocumentKey(s))throw new Z(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function cl(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{let t=function(o){return o.constructor?o.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":K()}function l5(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Z(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=cl(s);throw new Z(b.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}var l3=class{constructor(t){var e,o;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Z(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Pm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r6((o=t.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(o,c){return o.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},ot=class{constructor(t,e,o,c){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Z(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l3(t),t.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new ar;switch(o.type){case"firstParty":return new gr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Z(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let o=hh.get(e);o&&(N("ComponentProvider","Removing Datastore"),hh.delete(e),o.terminate())}(this),Promise.resolve()}};function Dm(s,t,e,o={}){var c;let r=(s=l5(s,ot))._getSettings(),n=`${t}:${e}`;if(r.host!=="firestore.googleapis.com"&&r.host!==n&&q5("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},r),{host:n,ssl:!1})),o.mockUserToken){let a,h;if(typeof o.mockUserToken=="string")a=o.mockUserToken,h=j1.MOCK_USER;else{a=ui(o.mockUserToken,(c=s._app)===null||c===void 0?void 0:c.options.projectId);let v=o.mockUserToken.sub||o.mockUserToken.user_id;if(!v)throw new Z(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new j1(v)}s._authCredentials=new ir(new Ds(a,h))}}var a3=class s{constructor(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new s(this.firestore,t,this._query)}},y2=class s{constructor(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new b0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new s(this.firestore,t,this._key)}},b0=class s extends a3{constructor(t,e,o){super(t,e,Ch(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new y2(this.firestore,null,new $(t))}withConverter(t){return new s(this.firestore,t,this._path)}};function rl(s,t,...e){if(s=n0(s),n6("collection","path",t),s instanceof ot){let o=A1.fromString(t,...e);return gh(o),new b0(s,null,o)}{if(!(s instanceof y2||s instanceof b0))throw new Z(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=s._path.child(A1.fromString(t,...e));return gh(o),new b0(s.firestore,null,o)}}function G4(s,t,...e){if(s=n0(s),arguments.length===1&&(t=Os.newId()),n6("doc","path",t),s instanceof ot){let o=A1.fromString(t,...e);return vh(o),new y2(s,null,new $(o))}{if(!(s instanceof y2||s instanceof b0))throw new Z(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=s._path.child(A1.fromString(t,...e));return vh(o),new y2(s.firestore,s instanceof b0?s.converter:null,new $(o))}}var En=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Xs(this,"async_queue_retry"),this.Tu=()=>{let e=nr();e&&N("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};let t=nr();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;let e=nr();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise(()=>{});let e=new F2;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.au.push(t),this.Au()))}Au(){return S(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!U4(t))throw t;N("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(t){let e=this._u.then(()=>(this.hu=!0,t().catch(o=>{this.lu=o,this.hu=!1;let c=function(n){let a=n.message||"";return n.stack&&(a=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),a}(o);throw h0("INTERNAL UNHANDLED ERROR: ",c),o}).then(o=>(this.hu=!1,o))));return this._u=e,e}enqueueAfterDelay(t,e,o){this.Eu(),this.Iu.indexOf(t)>-1&&(e=0);let c=Mn.createAndSchedule(this,t,e,o,r=>this.Ru(r));return this.cu.push(c),c}Eu(){this.lu&&K()}verifyOperationInProgress(){}Vu(){return S(this,null,function*(){let t;do t=this._u,yield t;while(t!==this._u)})}mu(t){for(let e of this.cu)if(e.timerId===t)return!0;return!1}fu(t){return this.Vu().then(()=>{this.cu.sort((e,o)=>e.targetTimeMs-o.targetTimeMs);for(let e of this.cu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Vu()})}gu(t){this.Iu.push(t)}Ru(t){let e=this.cu.indexOf(t);this.cu.splice(e,1)}};var a5=class extends ot{constructor(t,e,o,c){super(t,e,o,c),this.type="firestore",this._queue=function(){return new En}(),this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||i6(this),this._firestoreClient.terminate()}};function l6(s,t){let e=typeof s=="object"?s:ki(),o=typeof s=="string"?s:t||"(default)",c=Ri(e,"firestore").getImmediate({identifier:o});if(!c._initialized){let r=wi("firestore");r&&Dm(c,...r)}return c}function a6(s){return s._firestoreClient||i6(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function i6(s){var t,e,o;let c=s._freezeSettings(),r=function(a,h,v,d){return new mr(a,h,v,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,r6(d.experimentalLongPollingOptions),d.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,c);s._firestoreClient=new kn(s._authCredentials,s._appCheckCredentials,s._queue,r),!((e=c.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((o=c.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}var N4=class s{constructor(t){this._byteString=t}static fromBase64String(t){try{return new s(n2.fromBase64String(t))}catch(e){throw new Z(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new s(n2.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var ct=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Z(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new f2(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var F4=class{constructor(t){this._methodName=t}};var j4=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Z(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Z(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return m1(this._lat,t._lat)||m1(this._long,t._long)}};var Om=/^__.*__$/,Tn=class{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return this.fieldMask!==null?new G2(t,this.data,this.fieldMask,e,this.fieldTransforms):new n5(t,this.data,e,this.fieldTransforms)}},i3=class{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return new G2(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function h6(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var In=class s{constructor(t,e,o,c,r,n){this.settings=t,this.databaseId=e,this.serializer=o,this.ignoreUndefinedProperties=c,r===void 0&&this.pu(),this.fieldTransforms=r||[],this.fieldMask=n||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(t){return new s(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(t){var e;let o=(e=this.path)===null||e===void 0?void 0:e.child(t),c=this.wu({path:o,bu:!1});return c.Du(t),c}Cu(t){var e;let o=(e=this.path)===null||e===void 0?void 0:e.child(t),c=this.wu({path:o,bu:!1});return c.pu(),c}vu(t){return this.wu({path:void 0,bu:!0})}Fu(t){return v3(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Du(this.path.get(t))}Du(t){if(t.length===0)throw this.Fu("Document fields must not be empty");if(h6(this.yu)&&Om.test(t))throw this.Fu('Document fields cannot begin and end with "__"')}},Pn=class{constructor(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=o||p3(t)}Ou(t,e,o,c=!1){return new In({yu:t,methodName:e,xu:o,path:f2.emptyPath(),bu:!1,Mu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function v6(s){let t=s._freezeSettings(),e=p3(s._databaseId);return new Pn(s._databaseId,!!t.ignoreUndefinedProperties,e)}function Nm(s,t,e,o,c,r={}){let n=s.Ou(r.merge||r.mergeFields?2:0,t,e,c);nl("Data must be an object, but it was:",n,o);let a=g6(o,n),h,v;if(r.merge)h=new L2(n.fieldMask),v=n.fieldTransforms;else if(r.mergeFields){let d=[];for(let u of r.mergeFields){let z=Dn(t,u,e);if(!n.contains(z))throw new Z(b.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);w6(d,z)||d.push(z)}h=new L2(d),v=n.fieldTransforms.filter(u=>h.covers(u.field))}else h=null,v=n.fieldTransforms;return new Tn(new m2(a),h,v)}var h3=class s extends F4{_toFieldTransform(t){if(t.yu!==2)throw t.yu===1?t.Fu(`${this._methodName}() can only appear at the top level of your update data`):t.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof s}};function Fm(s,t,e,o){let c=s.Ou(1,t,e);nl("Data must be an object, but it was:",c,o);let r=[],n=m2.empty();i5(o,(h,v)=>{let d=ll(t,h,e);v=n0(v);let u=c.Cu(d);if(v instanceof h3)r.push(d);else{let z=z3(v,u);z!=null&&(r.push(d),n.set(d,z))}});let a=new L2(r);return new i3(n,a,c.fieldTransforms)}function jm(s,t,e,o,c,r){let n=s.Ou(1,t,e),a=[Dn(t,o,e)],h=[c];if(r.length%2!=0)throw new Z(b.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<r.length;z+=2)a.push(Dn(t,r[z])),h.push(r[z+1]);let v=[],d=m2.empty();for(let z=a.length-1;z>=0;--z)if(!w6(v,a[z])){let y=a[z],A=h[z];A=n0(A);let R=n.Cu(y);if(A instanceof h3)v.push(y);else{let B=z3(A,R);B!=null&&(v.push(y),d.set(y,B))}}let u=new L2(v);return new i3(d,u,n.fieldTransforms)}function z3(s,t){if(d6(s=n0(s)))return nl("Unsupported field value:",t,s),g6(s,t);if(s instanceof F4)return function(o,c){if(!h6(c.yu))throw c.Fu(`${o._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Fu(`${o._methodName}() is not currently supported inside arrays`);let r=o._toFieldTransform(c);r&&c.fieldTransforms.push(r)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.bu&&t.yu!==4)throw t.Fu("Nested arrays are not supported");return function(o,c){let r=[],n=0;for(let a of o){let h=z3(a,c.vu(n));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),n++}return{arrayValue:{values:r}}}(s,t)}return function(o,c){if((o=n0(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Hp(c.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){let r=W1.fromDate(o);return{timestampValue:Ks(c.serializer,r)}}if(o instanceof W1){let r=new W1(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ks(c.serializer,r)}}if(o instanceof j4)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof N4)return{bytesValue:Ph(c.serializer,o._byteString)};if(o instanceof y2){let r=c.databaseId,n=o.firestore._databaseId;if(!n.isEqual(r))throw c.Fu(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Qn(o.firestore._databaseId||c.databaseId,o._key.path)}}throw c.Fu(`Unsupported field value: ${cl(o)}`)}(s,t)}function g6(s,t){let e={};return wh(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):i5(s,(o,c)=>{let r=z3(c,t.Su(o));r!=null&&(e[o]=r)}),{mapValue:{fields:e}}}function d6(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof W1||s instanceof j4||s instanceof N4||s instanceof y2||s instanceof F4)}function nl(s,t,e){if(!d6(e)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(e)){let o=cl(e);throw o==="an object"?t.Fu(s+" a custom object"):t.Fu(s+" "+o)}}function Dn(s,t,e){if((t=n0(t))instanceof ct)return t._internalPath;if(typeof t=="string")return ll(s,t);throw v3("Field path arguments must be of type string or ",s,!1,void 0,e)}var Zm=new RegExp("[~\\*/\\[\\]]");function ll(s,t,e){if(t.search(Zm)>=0)throw v3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ct(...t.split("."))._internalPath}catch{throw v3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function v3(s,t,e,o,c){let r=o&&!o.isEmpty(),n=c!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let h="";return(r||n)&&(h+=" (found",r&&(h+=` in field ${o}`),n&&(h+=` in document ${c}`),h+=")"),new Z(b.INVALID_ARGUMENT,a+s+h)}function w6(s,t){return s.some(e=>e.isEqual(t))}var g3=class{constructor(t,e,o,c,r){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=c,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new y2(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new On(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(u6("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},On=class extends g3{data(){return super.data()}};function u6(s,t){return typeof t=="string"?ll(s,t):t instanceof ct?t._internalPath:t._delegate._internalPath}function Um(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Z(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nn=class{convertValue(t,e="none"){switch(o5(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _1(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(k0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw K()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let o={};return i5(t,(c,r)=>{o[c]=this.convertValue(r,e)}),o}convertGeoPoint(t){return new j4(_1(t.latitude),_1(t.longitude))}convertArray(t,e){return(t.values||[]).map(o=>this.convertValue(o,e))}convertServerTimestamp(t,e){switch(e){case"previous":let o=$n(t);return o==null?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(k4(t));default:return null}}convertTimestamp(t){let e=v0(t);return new W1(e.seconds,e.nanos)}convertDocumentKey(t,e){let o=A1.fromString(t);M1(Zh(o));let c=new Zs(o.get(1),o.get(3)),r=new $(o.popFirst(5));return c.isEqual(e)||h0(`Document ${r} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}};function qm(s,t,e){let o;return o=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,o}var j5=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Fn=class extends g3{constructor(t,e,o,c,r,n){super(t,e,o,c,n),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new U5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let o=this._document.data.field(u6("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,e.serverTimestamps)}}},U5=class extends Fn{data(t={}){return super.data(t)}},jn=class{constructor(t,e,o,c){this._firestore=t,this._userDataWriter=e,this._snapshot=c,this.metadata=new j5(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(o=>{t.call(e,new U5(this._firestore,this._userDataWriter,o.key,o,new j5(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Z(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(c,r){if(c._snapshot.oldDocs.isEmpty()){let n=0;return c._snapshot.docChanges.map(a=>{let h=new U5(c._firestore,c._userDataWriter,a.doc.key,a.doc,new j5(c._snapshot.mutatedKeys.has(a.doc.key),c._snapshot.fromCache),c.query.converter);return a.doc,{type:"added",doc:h,oldIndex:-1,newIndex:n++}})}{let n=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{let h=new U5(c._firestore,c._userDataWriter,a.doc.key,a.doc,new j5(c._snapshot.mutatedKeys.has(a.doc.key),c._snapshot.fromCache),c.query.converter),v=-1,d=-1;return a.type!==0&&(v=n.indexOf(a.doc.key),n=n.delete(a.doc.key)),a.type!==1&&(n=n.add(a.doc),d=n.indexOf(a.doc.key)),{type:$m(a.type),doc:h,oldIndex:v,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function $m(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}var Zn=class extends Nn{constructor(t){super(),this.firestore=t}convertBytes(t){return new N4(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new y2(this.firestore,null,e)}};function p6(s){s=l5(s,a3);let t=l5(s.firestore,a5),e=a6(t),o=new Zn(t);return Um(s._query),Im(e,s._query).then(c=>new jn(t,o,s,c))}function al(s,t,e,...o){s=l5(s,y2);let c=l5(s.firestore,a5),r=v6(c),n;return n=typeof(t=n0(t))=="string"||t instanceof ct?jm(r,"updateDoc",s._key,t,e,o):Fm(r,"updateDoc",s._key,t),hl(c,[n.toMutation(s._key,i0.exists(!0))])}function m6(s){return hl(l5(s.firestore,a5),[new T4(s._key,i0.none())])}function il(s,t){let e=l5(s.firestore,a5),o=G4(s),c=qm(s.converter,t);return hl(e,[Nm(v6(s.firestore),"addDoc",o._key,c,s.converter!==null,{}).toMutation(o._key,i0.exists(!1))]).then(()=>o)}function hl(s,t){return function(o,c){let r=new F2;return o.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return Hm(yield Em(o),c,r)})),r.promise}(a6(s),t)}(function(t,e=!0){(function(c){rt=c})(bi),V4(new l0("firestore",(o,{instanceIdentifier:c,options:r})=>{let n=o.getProvider("app").getImmediate(),a=new a5(new hr(o.getProvider("auth-internal")),new wr(o.getProvider("app-check-internal")),function(v,d){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Z(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zs(v.options.projectId,d)}(n,c),n);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),S0(Di,"4.6.5",t),S0(Di,"4.6.5","esm2017")})();var Gm="firebase",Wm="10.12.5";S0(Gm,Wm,"app");var f6={production:!0,firebaseConfig:{apiKey:"AIzaSyBZrN9H_D5R4cjpxckizldO0t9sJtB47DA",authDomain:"keepynotes-1d3e0.firebaseapp.com",projectId:"keepynotes-1d3e0",storageBucket:"keepynotes-1d3e0",messagingSenderId:"keepynotes-1d3e0.appspot.com",appId:"1:349075250932:web:158e05b11c8c46a63048a1",measurementId:"G-SC61C50XES"}};var Km=Qc(f6.firebaseConfig),W4=l6(Km),I0={addNote:Qm,loadNotes:Ym,removeNote:Jm,updateNote:Xm,addNoteWithAutoId:tf,updateNoteId:ef},vl="notes";var z6=rl(W4,vl);function Qm(s){return S(this,null,function*(){try{return(yield il(z6,s)).id}catch(t){console.error("Error adding note: ",t)}})}function Ym(){return S(this,null,function*(){try{let t=(yield p6(z6)).docs.map(e=>u1(k({},e.data()),{_id:e.id}));return console.log("adjustedNotes",t),t.sort((e,o)=>o.timestamp-e.timestamp)}catch(s){return console.error("Error loading notes: ",s),[]}})}function Jm(s){return S(this,null,function*(){try{let t=G4(W4,vl,s);yield m6(t)}catch(t){console.error("Error removing note: ",t)}})}function Xm(s,t){return S(this,null,function*(){try{let e=G4(W4,vl,s);yield al(e,t)}catch(e){console.error("Error updating note: ",e)}})}function tf(s){let t=rl(W4,"notes");return il(t,s)}function ef(s,t){let e=G4(W4,"notes",s);return al(e,{_id:e.id})}function K4(s,t){return function(){return s.apply(t,arguments)}}var{toString:sf}=Object.prototype,{getPrototypeOf:wl}=Object,M3=(s=>t=>{let e=sf.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),E2=s=>(s=s.toLowerCase(),t=>M3(t)===s),C3=s=>t=>typeof t===s,{isArray:lt}=Array,Q4=C3("undefined");function of(s){return s!==null&&!Q4(s)&&s.constructor!==null&&!Q4(s.constructor)&&z2(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}var C6=E2("ArrayBuffer");function cf(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&C6(s.buffer),t}var rf=C3("string"),z2=C3("function"),V6=C3("number"),V3=s=>s!==null&&typeof s=="object",nf=s=>s===!0||s===!1,x3=s=>{if(M3(s)!=="object")return!1;let t=wl(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},lf=E2("Date"),af=E2("File"),hf=E2("Blob"),vf=E2("FileList"),gf=s=>V3(s)&&z2(s.pipe),df=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||z2(s.append)&&((t=M3(s))==="formdata"||t==="object"&&z2(s.toString)&&s.toString()==="[object FormData]"))},wf=E2("URLSearchParams"),[uf,pf,mf,ff]=["ReadableStream","Request","Response","Headers"].map(E2),zf=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Y4(s,t,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let o,c;if(typeof s!="object"&&(s=[s]),lt(s))for(o=0,c=s.length;o<c;o++)t.call(null,s[o],o,s);else{let r=e?Object.getOwnPropertyNames(s):Object.keys(s),n=r.length,a;for(o=0;o<n;o++)a=r[o],t.call(null,s[a],a,s)}}function H6(s,t){t=t.toLowerCase();let e=Object.keys(s),o=e.length,c;for(;o-- >0;)if(c=e[o],t===c.toLowerCase())return c;return null}var v5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L6=s=>!Q4(s)&&s!==v5;function dl(){let{caseless:s}=L6(this)&&this||{},t={},e=(o,c)=>{let r=s&&H6(t,c)||c;x3(t[r])&&x3(o)?t[r]=dl(t[r],o):x3(o)?t[r]=dl({},o):lt(o)?t[r]=o.slice():t[r]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&Y4(arguments[o],e);return t}var xf=(s,t,e,{allOwnKeys:o}={})=>(Y4(t,(c,r)=>{e&&z2(c)?s[r]=K4(c,e):s[r]=c},{allOwnKeys:o}),s),Mf=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Cf=(s,t,e,o)=>{s.prototype=Object.create(t.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),e&&Object.assign(s.prototype,e)},Vf=(s,t,e,o)=>{let c,r,n,a={};if(t=t||{},s==null)return t;do{for(c=Object.getOwnPropertyNames(s),r=c.length;r-- >0;)n=c[r],(!o||o(n,s,t))&&!a[n]&&(t[n]=s[n],a[n]=!0);s=e!==!1&&wl(s)}while(s&&(!e||e(s,t))&&s!==Object.prototype);return t},Hf=(s,t,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=t.length;let o=s.indexOf(t,e);return o!==-1&&o===e},Lf=s=>{if(!s)return null;if(lt(s))return s;let t=s.length;if(!V6(t))return null;let e=new Array(t);for(;t-- >0;)e[t]=s[t];return e},yf=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&wl(Uint8Array)),Bf=(s,t)=>{let o=(s&&s[Symbol.iterator]).call(s),c;for(;(c=o.next())&&!c.done;){let r=c.value;t.call(s,r[0],r[1])}},_f=(s,t)=>{let e,o=[];for(;(e=s.exec(t))!==null;)o.push(e);return o},Af=E2("HTMLFormElement"),Sf=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,o,c){return o.toUpperCase()+c}),x6=(({hasOwnProperty:s})=>(t,e)=>s.call(t,e))(Object.prototype),Rf=E2("RegExp"),y6=(s,t)=>{let e=Object.getOwnPropertyDescriptors(s),o={};Y4(e,(c,r)=>{let n;(n=t(c,r,s))!==!1&&(o[r]=n||c)}),Object.defineProperties(s,o)},bf=s=>{y6(s,(t,e)=>{if(z2(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;let o=s[e];if(z2(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},kf=(s,t)=>{let e={},o=c=>{c.forEach(r=>{e[r]=!0})};return lt(s)?o(s):o(String(s).split(t)),e},Ef=()=>{},Tf=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t,gl="abcdefghijklmnopqrstuvwxyz",M6="0123456789",B6={DIGIT:M6,ALPHA:gl,ALPHA_DIGIT:gl+gl.toUpperCase()+M6},If=(s=16,t=B6.ALPHA_DIGIT)=>{let e="",{length:o}=t;for(;s--;)e+=t[Math.random()*o|0];return e};function Pf(s){return!!(s&&z2(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}var Df=s=>{let t=new Array(10),e=(o,c)=>{if(V3(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[c]=o;let r=lt(o)?[]:{};return Y4(o,(n,a)=>{let h=e(n,c+1);!Q4(h)&&(r[a]=h)}),t[c]=void 0,r}}return o};return e(s,0)},Of=E2("AsyncFunction"),Nf=s=>s&&(V3(s)||z2(s))&&z2(s.then)&&z2(s.catch),_6=((s,t)=>s?setImmediate:t?((e,o)=>(v5.addEventListener("message",({source:c,data:r})=>{c===v5&&r===e&&o.length&&o.shift()()},!1),c=>{o.push(c),v5.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",z2(v5.postMessage)),Ff=typeof queueMicrotask<"u"?queueMicrotask.bind(v5):typeof process<"u"&&process.nextTick||_6,L={isArray:lt,isArrayBuffer:C6,isBuffer:of,isFormData:df,isArrayBufferView:cf,isString:rf,isNumber:V6,isBoolean:nf,isObject:V3,isPlainObject:x3,isReadableStream:uf,isRequest:pf,isResponse:mf,isHeaders:ff,isUndefined:Q4,isDate:lf,isFile:af,isBlob:hf,isRegExp:Rf,isFunction:z2,isStream:gf,isURLSearchParams:wf,isTypedArray:yf,isFileList:vf,forEach:Y4,merge:dl,extend:xf,trim:zf,stripBOM:Mf,inherits:Cf,toFlatObject:Vf,kindOf:M3,kindOfTest:E2,endsWith:Hf,toArray:Lf,forEachEntry:Bf,matchAll:_f,isHTMLForm:Af,hasOwnProperty:x6,hasOwnProp:x6,reduceDescriptors:y6,freezeMethods:bf,toObjectSet:kf,toCamelCase:Sf,noop:Ef,toFiniteNumber:Tf,findKey:H6,global:v5,isContextDefined:L6,ALPHABET:B6,generateString:If,isSpecCompliantForm:Pf,toJSONObject:Df,isAsyncFn:Of,isThenable:Nf,setImmediate:_6,asap:Ff};function at(s,t,e,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),o&&(this.request=o),c&&(this.response=c)}L.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var A6=at.prototype,S6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{S6[s]={value:s}});Object.defineProperties(at,S6);Object.defineProperty(A6,"isAxiosError",{value:!0});at.from=(s,t,e,o,c,r)=>{let n=Object.create(A6);return L.toFlatObject(s,n,function(h){return h!==Error.prototype},a=>a!=="isAxiosError"),at.call(n,s.message,t,e,o,c),n.cause=s,n.name=s.name,r&&Object.assign(n,r),n};var Q=at;var H3=null;function ul(s){return L.isPlainObject(s)||L.isArray(s)}function b6(s){return L.endsWith(s,"[]")?s.slice(0,-2):s}function R6(s,t,e){return s?s.concat(t).map(function(c,r){return c=b6(c),!e&&r?"["+c+"]":c}).join(e?".":""):t}function jf(s){return L.isArray(s)&&!s.some(ul)}var Zf=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function Uf(s,t,e){if(!L.isObject(s))throw new TypeError("target must be an object");t=t||new(H3||FormData),e=L.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,B){return!L.isUndefined(B[R])});let o=e.metaTokens,c=e.visitor||d,r=e.dots,n=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(c))throw new TypeError("visitor must be a function");function v(A){if(A===null)return"";if(L.isDate(A))return A.toISOString();if(!h&&L.isBlob(A))throw new Q("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(A)||L.isTypedArray(A)?h&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function d(A,R,B){let F=A;if(A&&!B&&typeof A=="object"){if(L.endsWith(R,"{}"))R=o?R:R.slice(0,-2),A=JSON.stringify(A);else if(L.isArray(A)&&jf(A)||(L.isFileList(A)||L.endsWith(R,"[]"))&&(F=L.toArray(A)))return R=b6(R),F.forEach(function(O,l1){!(L.isUndefined(O)||O===null)&&t.append(n===!0?R6([R],l1,r):n===null?R:R+"[]",v(O))}),!1}return ul(A)?!0:(t.append(R6(B,R,r),v(A)),!1)}let u=[],z=Object.assign(Zf,{defaultVisitor:d,convertValue:v,isVisitable:ul});function y(A,R){if(!L.isUndefined(A)){if(u.indexOf(A)!==-1)throw Error("Circular reference detected in "+R.join("."));u.push(A),L.forEach(A,function(F,U){(!(L.isUndefined(F)||F===null)&&c.call(t,F,L.isString(U)?U.trim():U,R,z))===!0&&y(F,R?R.concat(U):[U])}),u.pop()}}if(!L.isObject(s))throw new TypeError("data must be an object");return y(s),t}var P0=Uf;function k6(s){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function E6(s,t){this._pairs=[],s&&P0(s,this,t)}var T6=E6.prototype;T6.append=function(t,e){this._pairs.push([t,e])};T6.toString=function(t){let e=t?function(o){return t.call(this,o,k6)}:k6;return this._pairs.map(function(c){return e(c[0])+"="+e(c[1])},"").join("&")};var L3=E6;function qf(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function J4(s,t,e){if(!t)return s;let o=e&&e.encode||qf,c=e&&e.serialize,r;if(c?r=c(t,e):r=L.isURLSearchParams(t)?t.toString():new L3(t,e).toString(o),r){let n=s.indexOf("#");n!==-1&&(s=s.slice(0,n)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}var pl=class{constructor(){this.handlers=[]}use(t,e,o){return this.handlers.push({fulfilled:t,rejected:e,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(o){o!==null&&t(o)})}},ml=pl;var y3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var I6=typeof URLSearchParams<"u"?URLSearchParams:L3;var P6=typeof FormData<"u"?FormData:null;var D6=typeof Blob<"u"?Blob:null;var O6={isBrowser:!0,classes:{URLSearchParams:I6,FormData:P6,Blob:D6},protocols:["http","https","file","blob","url","data"]};var zl={};Kv(zl,{hasBrowserEnv:()=>fl,hasStandardBrowserEnv:()=>$f,hasStandardBrowserWebWorkerEnv:()=>Gf,origin:()=>Wf});var fl=typeof window<"u"&&typeof document<"u",$f=(s=>fl&&["ReactNative","NativeScript","NS"].indexOf(s)<0)(typeof navigator<"u"&&navigator.product),Gf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wf=fl&&window.location.href||"http://localhost";var Z1=k(k({},zl),O6);function xl(s,t){return P0(s,new Z1.classes.URLSearchParams,Object.assign({visitor:function(e,o,c,r){return Z1.isNode&&L.isBuffer(e)?(this.append(o,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Kf(s){return L.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qf(s){let t={},e=Object.keys(s),o,c=e.length,r;for(o=0;o<c;o++)r=e[o],t[r]=s[r];return t}function Yf(s){function t(e,o,c,r){let n=e[r++];if(n==="__proto__")return!0;let a=Number.isFinite(+n),h=r>=e.length;return n=!n&&L.isArray(c)?c.length:n,h?(L.hasOwnProp(c,n)?c[n]=[c[n],o]:c[n]=o,!a):((!c[n]||!L.isObject(c[n]))&&(c[n]=[]),t(e,o,c[n],r)&&L.isArray(c[n])&&(c[n]=Qf(c[n])),!a)}if(L.isFormData(s)&&L.isFunction(s.entries)){let e={};return L.forEachEntry(s,(o,c)=>{t(Kf(o),c,e,0)}),e}return null}var B3=Yf;function Jf(s,t,e){if(L.isString(s))try{return(t||JSON.parse)(s),L.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(e||JSON.stringify)(s)}var Ml={transitional:y3,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){let o=e.getContentType()||"",c=o.indexOf("application/json")>-1,r=L.isObject(t);if(r&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return c?JSON.stringify(B3(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t)||L.isReadableStream(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return xl(t,this.formSerializer).toString();if((a=L.isFileList(t))||o.indexOf("multipart/form-data")>-1){let h=this.env&&this.env.FormData;return P0(a?{"files[]":t}:t,h&&new h,this.formSerializer)}}return r||c?(e.setContentType("application/json",!1),Jf(t)):t}],transformResponse:[function(t){let e=this.transitional||Ml.transitional,o=e&&e.forcedJSONParsing,c=this.responseType==="json";if(L.isResponse(t)||L.isReadableStream(t))return t;if(t&&L.isString(t)&&(o&&!this.responseType||c)){let n=!(e&&e.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(a){if(n)throw a.name==="SyntaxError"?Q.from(a,Q.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Z1.classes.FormData,Blob:Z1.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],s=>{Ml.headers[s]={}});var it=Ml;var Xf=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),N6=s=>{let t={},e,o,c;return s&&s.split(`
`).forEach(function(n){c=n.indexOf(":"),e=n.substring(0,c).trim().toLowerCase(),o=n.substring(c+1).trim(),!(!e||t[e]&&Xf[e])&&(e==="set-cookie"?t[e]?t[e].push(o):t[e]=[o]:t[e]=t[e]?t[e]+", "+o:o)}),t};var F6=Symbol("internals");function X4(s){return s&&String(s).trim().toLowerCase()}function _3(s){return s===!1||s==null?s:L.isArray(s)?s.map(_3):String(s)}function tz(s){let t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,o;for(;o=e.exec(s);)t[o[1]]=o[2];return t}var ez=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Cl(s,t,e,o,c){if(L.isFunction(o))return o.call(this,t,e);if(c&&(t=e),!!L.isString(t)){if(L.isString(o))return t.indexOf(o)!==-1;if(L.isRegExp(o))return o.test(t)}}function sz(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,o)=>e.toUpperCase()+o)}function oz(s,t){let e=L.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+e,{value:function(c,r,n){return this[o].call(this,t,c,r,n)},configurable:!0})})}var ht=class{constructor(t){t&&this.set(t)}set(t,e,o){let c=this;function r(a,h,v){let d=X4(h);if(!d)throw new Error("header name must be a non-empty string");let u=L.findKey(c,d);(!u||c[u]===void 0||v===!0||v===void 0&&c[u]!==!1)&&(c[u||h]=_3(a))}let n=(a,h)=>L.forEach(a,(v,d)=>r(v,d,h));if(L.isPlainObject(t)||t instanceof this.constructor)n(t,e);else if(L.isString(t)&&(t=t.trim())&&!ez(t))n(N6(t),e);else if(L.isHeaders(t))for(let[a,h]of t.entries())r(h,a,o);else t!=null&&r(e,t,o);return this}get(t,e){if(t=X4(t),t){let o=L.findKey(this,t);if(o){let c=this[o];if(!e)return c;if(e===!0)return tz(c);if(L.isFunction(e))return e.call(this,c,o);if(L.isRegExp(e))return e.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=X4(t),t){let o=L.findKey(this,t);return!!(o&&this[o]!==void 0&&(!e||Cl(this,this[o],o,e)))}return!1}delete(t,e){let o=this,c=!1;function r(n){if(n=X4(n),n){let a=L.findKey(o,n);a&&(!e||Cl(o,o[a],a,e))&&(delete o[a],c=!0)}}return L.isArray(t)?t.forEach(r):r(t),c}clear(t){let e=Object.keys(this),o=e.length,c=!1;for(;o--;){let r=e[o];(!t||Cl(this,this[r],r,t,!0))&&(delete this[r],c=!0)}return c}normalize(t){let e=this,o={};return L.forEach(this,(c,r)=>{let n=L.findKey(o,r);if(n){e[n]=_3(c),delete e[r];return}let a=t?sz(r):String(r).trim();a!==r&&delete e[r],e[a]=_3(c),o[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let e=Object.create(null);return L.forEach(this,(o,c)=>{o!=null&&o!==!1&&(e[c]=t&&L.isArray(o)?o.join(", "):o)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){let o=new this(t);return e.forEach(c=>o.set(c)),o}static accessor(t){let o=(this[F6]=this[F6]={accessors:{}}).accessors,c=this.prototype;function r(n){let a=X4(n);o[a]||(oz(c,n),o[a]=!0)}return L.isArray(t)?t.forEach(r):r(t),this}};ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(ht.prototype,({value:s},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(o){this[e]=o}}});L.freezeMethods(ht);var D1=ht;function te(s,t){let e=this||it,o=t||e,c=D1.from(o.headers),r=o.data;return L.forEach(s,function(a){r=a.call(e,r,c.normalize(),t?t.status:void 0)}),c.normalize(),r}function ee(s){return!!(s&&s.__CANCEL__)}function j6(s,t,e){Q.call(this,s??"canceled",Q.ERR_CANCELED,t,e),this.name="CanceledError"}L.inherits(j6,Q,{__CANCEL__:!0});var W2=j6;function se(s,t,e){let o=e.config.validateStatus;!e.status||!o||o(e.status)?s(e):t(new Q("Request failed with status code "+e.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Vl(s){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function cz(s,t){s=s||10;let e=new Array(s),o=new Array(s),c=0,r=0,n;return t=t!==void 0?t:1e3,function(h){let v=Date.now(),d=o[r];n||(n=v),e[c]=h,o[c]=v;let u=r,z=0;for(;u!==c;)z+=e[u++],u=u%s;if(c=(c+1)%s,c===r&&(r=(r+1)%s),v-n<t)return;let y=d&&v-d;return y?Math.round(z*1e3/y):void 0}}var Z6=cz;function rz(s,t){let e=0,o=1e3/t,c,r,n=(v,d=Date.now())=>{e=d,c=null,r&&(clearTimeout(r),r=null),s.apply(null,v)};return[(...v)=>{let d=Date.now(),u=d-e;u>=o?n(v,d):(c=v,r||(r=setTimeout(()=>{r=null,n(c)},o-u)))},()=>c&&n(c)]}var U6=rz;var vt=(s,t,e=3)=>{let o=0,c=Z6(50,250);return U6(r=>{let n=r.loaded,a=r.lengthComputable?r.total:void 0,h=n-o,v=c(h),d=n<=a;o=n;let u={loaded:n,total:a,progress:a?n/a:void 0,bytes:h,rate:v||void 0,estimated:v&&a&&d?(a-n)/v:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};s(u)},e)},Hl=(s,t)=>{let e=s!=null;return[o=>t[0]({lengthComputable:e,total:s,loaded:o}),t[1]]},Ll=s=>(...t)=>L.asap(()=>s(...t));var q6=Z1.hasStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),o;function c(r){let n=r;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return o=c(window.location.href),function(n){let a=L.isString(n)?c(n):n;return a.protocol===o.protocol&&a.host===o.host}}():function(){return function(){return!0}}();var $6=Z1.hasStandardBrowserEnv?{write(s,t,e,o,c,r){let n=[s+"="+encodeURIComponent(t)];L.isNumber(e)&&n.push("expires="+new Date(e).toGMTString()),L.isString(o)&&n.push("path="+o),L.isString(c)&&n.push("domain="+c),r===!0&&n.push("secure"),document.cookie=n.join("; ")},read(s){let t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yl(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Bl(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function oe(s,t){return s&&!yl(t)?Bl(s,t):t}var G6=s=>s instanceof D1?k({},s):s;function T2(s,t){t=t||{};let e={};function o(v,d,u){return L.isPlainObject(v)&&L.isPlainObject(d)?L.merge.call({caseless:u},v,d):L.isPlainObject(d)?L.merge({},d):L.isArray(d)?d.slice():d}function c(v,d,u){if(L.isUndefined(d)){if(!L.isUndefined(v))return o(void 0,v,u)}else return o(v,d,u)}function r(v,d){if(!L.isUndefined(d))return o(void 0,d)}function n(v,d){if(L.isUndefined(d)){if(!L.isUndefined(v))return o(void 0,v)}else return o(void 0,d)}function a(v,d,u){if(u in t)return o(v,d);if(u in s)return o(void 0,v)}let h={url:r,method:r,data:r,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:a,headers:(v,d)=>c(G6(v),G6(d),!0)};return L.forEach(Object.keys(Object.assign({},s,t)),function(d){let u=h[d]||c,z=u(s[d],t[d],d);L.isUndefined(z)&&u!==a||(e[d]=z)}),e}var A3=s=>{let t=T2({},s),{data:e,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:r,headers:n,auth:a}=t;t.headers=n=D1.from(n),t.url=J4(oe(t.baseURL,t.url),s.params,s.paramsSerializer),a&&n.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let h;if(L.isFormData(e)){if(Z1.hasStandardBrowserEnv||Z1.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((h=n.getContentType())!==!1){let[v,...d]=h?h.split(";").map(u=>u.trim()).filter(Boolean):[];n.setContentType([v||"multipart/form-data",...d].join("; "))}}if(Z1.hasStandardBrowserEnv&&(o&&L.isFunction(o)&&(o=o(t)),o||o!==!1&&q6(t.url))){let v=c&&r&&$6.read(r);v&&n.set(c,v)}return t};var nz=typeof XMLHttpRequest<"u",W6=nz&&function(s){return new Promise(function(e,o){let c=A3(s),r=c.data,n=D1.from(c.headers).normalize(),{responseType:a,onUploadProgress:h,onDownloadProgress:v}=c,d,u,z,y,A;function R(){y&&y(),A&&A(),c.cancelToken&&c.cancelToken.unsubscribe(d),c.signal&&c.signal.removeEventListener("abort",d)}let B=new XMLHttpRequest;B.open(c.method.toUpperCase(),c.url,!0),B.timeout=c.timeout;function F(){if(!B)return;let O=D1.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),R1={data:!a||a==="text"||a==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:O,config:s,request:B};se(function(M){e(M),R()},function(M){o(M),R()},R1),B=null}"onloadend"in B?B.onloadend=F:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(F)},B.onabort=function(){B&&(o(new Q("Request aborted",Q.ECONNABORTED,s,B)),B=null)},B.onerror=function(){o(new Q("Network Error",Q.ERR_NETWORK,s,B)),B=null},B.ontimeout=function(){let l1=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",R1=c.transitional||y3;c.timeoutErrorMessage&&(l1=c.timeoutErrorMessage),o(new Q(l1,R1.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,s,B)),B=null},r===void 0&&n.setContentType(null),"setRequestHeader"in B&&L.forEach(n.toJSON(),function(l1,R1){B.setRequestHeader(R1,l1)}),L.isUndefined(c.withCredentials)||(B.withCredentials=!!c.withCredentials),a&&a!=="json"&&(B.responseType=c.responseType),v&&([z,A]=vt(v,!0),B.addEventListener("progress",z)),h&&B.upload&&([u,y]=vt(h),B.upload.addEventListener("progress",u),B.upload.addEventListener("loadend",y)),(c.cancelToken||c.signal)&&(d=O=>{B&&(o(!O||O.type?new W2(null,s,B):O),B.abort(),B=null)},c.cancelToken&&c.cancelToken.subscribe(d),c.signal&&(c.signal.aborted?d():c.signal.addEventListener("abort",d)));let U=Vl(c.url);if(U&&Z1.protocols.indexOf(U)===-1){o(new Q("Unsupported protocol "+U+":",Q.ERR_BAD_REQUEST,s));return}B.send(r||null)})};var lz=(s,t)=>{let e=new AbortController,o,c=function(h){if(!o){o=!0,n();let v=h instanceof Error?h:this.reason;e.abort(v instanceof Q?v:new W2(v instanceof Error?v.message:v))}},r=t&&setTimeout(()=>{c(new Q(`timeout ${t} of ms exceeded`,Q.ETIMEDOUT))},t),n=()=>{s&&(r&&clearTimeout(r),r=null,s.forEach(h=>{h&&(h.removeEventListener?h.removeEventListener("abort",c):h.unsubscribe(c))}),s=null)};s.forEach(h=>h&&h.addEventListener&&h.addEventListener("abort",c));let{signal:a}=e;return a.unsubscribe=n,[a,()=>{r&&clearTimeout(r),r=null}]},K6=lz;var az=function*(s,t){let e=s.byteLength;if(!t||e<t){yield s;return}let o=0,c;for(;o<e;)c=o+t,yield s.slice(o,c),o=c},iz=function(s,t,e){return n9(this,null,function*(){try{for(var o=a9(s),c,r,n;c=!(r=yield new be(o.next())).done;c=!1){let a=r.value;yield*l9(az(ArrayBuffer.isView(a)?a:yield new be(e(String(a))),t))}}catch{n=[r]}finally{try{c&&(r=o.return)&&(yield new be(r.call(o)))}finally{if(n)throw n[0]}}})},_l=(s,t,e,o,c)=>{let r=iz(s,t,c),n=0,a,h=d=>{a||(a=!0,o&&o(d))};return new ReadableStream({pull(d){return S(this,null,function*(){try{let{done:u,value:z}=yield r.next();if(u){h(),d.close();return}let y=z.byteLength;if(e){let A=n+=y;e(A)}d.enqueue(new Uint8Array(z))}catch(u){throw h(u),u}})},cancel(d){return h(d),r.return()}},{highWaterMark:2})};var R3=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Y6=R3&&typeof ReadableStream=="function",Al=R3&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):s=>S(void 0,null,function*(){return new Uint8Array(yield new Response(s).arrayBuffer())})),J6=(s,...t)=>{try{return!!s(...t)}catch{return!1}},hz=Y6&&J6(()=>{let s=!1,t=new Request(Z1.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),Q6=64*1024,Sl=Y6&&J6(()=>L.isReadableStream(new Response("").body)),S3={stream:Sl&&(s=>s.body)};R3&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!S3[t]&&(S3[t]=L.isFunction(s[t])?e=>e[t]():(e,o)=>{throw new Q(`Response type '${t}' is not supported`,Q.ERR_NOT_SUPPORT,o)})})})(new Response);var vz=s=>S(void 0,null,function*(){if(s==null)return 0;if(L.isBlob(s))return s.size;if(L.isSpecCompliantForm(s))return(yield new Request(s).arrayBuffer()).byteLength;if(L.isArrayBufferView(s)||L.isArrayBuffer(s))return s.byteLength;if(L.isURLSearchParams(s)&&(s=s+""),L.isString(s))return(yield Al(s)).byteLength}),gz=(s,t)=>S(void 0,null,function*(){let e=L.toFiniteNumber(s.getContentLength());return e??vz(t)}),X6=R3&&(s=>S(void 0,null,function*(){let{url:t,method:e,data:o,signal:c,cancelToken:r,timeout:n,onDownloadProgress:a,onUploadProgress:h,responseType:v,headers:d,withCredentials:u="same-origin",fetchOptions:z}=A3(s);v=v?(v+"").toLowerCase():"text";let[y,A]=c||r||n?K6([c,r],n):[],R,B,F=()=>{!R&&setTimeout(()=>{y&&y.unsubscribe()}),R=!0},U;try{if(h&&hz&&e!=="get"&&e!=="head"&&(U=yield gz(d,o))!==0){let c1=new Request(t,{method:"POST",body:o,duplex:"half"}),M;if(L.isFormData(o)&&(M=c1.headers.get("content-type"))&&d.setContentType(M),c1.body){let[p,m]=Hl(U,vt(Ll(h)));o=_l(c1.body,Q6,p,m,Al)}}L.isString(u)||(u=u?"include":"omit"),B=new Request(t,u1(k({},z),{signal:y,method:e.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:u}));let O=yield fetch(B),l1=Sl&&(v==="stream"||v==="response");if(Sl&&(a||l1)){let c1={};["status","statusText","headers"].forEach(x=>{c1[x]=O[x]});let M=L.toFiniteNumber(O.headers.get("content-length")),[p,m]=a&&Hl(M,vt(Ll(a),!0))||[];O=new Response(_l(O.body,Q6,p,()=>{m&&m(),l1&&F()},Al),c1)}v=v||"text";let R1=yield S3[L.findKey(S3,v)||"text"](O,s);return!l1&&F(),A&&A(),yield new Promise((c1,M)=>{se(c1,M,{data:R1,headers:D1.from(O.headers),status:O.status,statusText:O.statusText,config:s,request:B})})}catch(O){throw F(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,s,B),{cause:O.cause||O}):Q.from(O,O&&O.code,s,B)}}));var Rl={http:H3,xhr:W6,fetch:X6};L.forEach(Rl,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});var t8=s=>`- ${s}`,dz=s=>L.isFunction(s)||s===null||s===!1,b3={getAdapter:s=>{s=L.isArray(s)?s:[s];let{length:t}=s,e,o,c={};for(let r=0;r<t;r++){e=s[r];let n;if(o=e,!dz(e)&&(o=Rl[(n=String(e)).toLowerCase()],o===void 0))throw new Q(`Unknown adapter '${n}'`);if(o)break;c[n||"#"+r]=o}if(!o){let r=Object.entries(c).map(([a,h])=>`adapter ${a} `+(h===!1?"is not supported by the environment":"is not available in the build")),n=t?r.length>1?`since :
`+r.map(t8).join(`
`):" "+t8(r[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o},adapters:Rl};function bl(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new W2(null,s)}function k3(s){return bl(s),s.headers=D1.from(s.headers),s.data=te.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),b3.getAdapter(s.adapter||it.adapter)(s).then(function(o){return bl(s),o.data=te.call(s,s.transformResponse,o),o.headers=D1.from(o.headers),o},function(o){return ee(o)||(bl(s),o&&o.response&&(o.response.data=te.call(s,s.transformResponse,o.response),o.response.headers=D1.from(o.response.headers))),Promise.reject(o)})}var E3="1.7.3";var kl={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{kl[s]=function(o){return typeof o===s||"a"+(t<1?"n ":" ")+s}});var e8={};kl.transitional=function(t,e,o){function c(r,n){return"[Axios v"+E3+"] Transitional option '"+r+"'"+n+(o?". "+o:"")}return(r,n,a)=>{if(t===!1)throw new Q(c(n," has been removed"+(e?" in "+e:"")),Q.ERR_DEPRECATED);return e&&!e8[n]&&(e8[n]=!0,console.warn(c(n," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,n,a):!0}};function wz(s,t,e){if(typeof s!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);let o=Object.keys(s),c=o.length;for(;c-- >0;){let r=o[c],n=t[r];if(n){let a=s[r],h=a===void 0||n(a,r,s);if(h!==!0)throw new Q("option "+r+" must be "+h,Q.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Q("Unknown option "+r,Q.ERR_BAD_OPTION)}}var T3={assertOptions:wz,validators:kl};var D0=T3.validators,gt=class{constructor(t){this.defaults=t,this.interceptors={request:new ml,response:new ml}}request(t,e){return S(this,null,function*(){try{return yield this._request(t,e)}catch(o){if(o instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;let r=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}})}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=T2(this.defaults,e);let{transitional:o,paramsSerializer:c,headers:r}=e;o!==void 0&&T3.assertOptions(o,{silentJSONParsing:D0.transitional(D0.boolean),forcedJSONParsing:D0.transitional(D0.boolean),clarifyTimeoutError:D0.transitional(D0.boolean)},!1),c!=null&&(L.isFunction(c)?e.paramsSerializer={serialize:c}:T3.assertOptions(c,{encode:D0.function,serialize:D0.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let n=r&&L.merge(r.common,r[e.method]);r&&L.forEach(["delete","get","head","post","put","patch","common"],A=>{delete r[A]}),e.headers=D1.concat(n,r);let a=[],h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(e)===!1||(h=h&&R.synchronous,a.unshift(R.fulfilled,R.rejected))});let v=[];this.interceptors.response.forEach(function(R){v.push(R.fulfilled,R.rejected)});let d,u=0,z;if(!h){let A=[k3.bind(this),void 0];for(A.unshift.apply(A,a),A.push.apply(A,v),z=A.length,d=Promise.resolve(e);u<z;)d=d.then(A[u++],A[u++]);return d}z=a.length;let y=e;for(u=0;u<z;){let A=a[u++],R=a[u++];try{y=A(y)}catch(B){R.call(this,B);break}}try{d=k3.call(this,y)}catch(A){return Promise.reject(A)}for(u=0,z=v.length;u<z;)d=d.then(v[u++],v[u++]);return d}getUri(t){t=T2(this.defaults,t);let e=oe(t.baseURL,t.url);return J4(e,t.params,t.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(t){gt.prototype[t]=function(e,o){return this.request(T2(o||{},{method:t,url:e,data:(o||{}).data}))}});L.forEach(["post","put","patch"],function(t){function e(o){return function(r,n,a){return this.request(T2(a||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}gt.prototype[t]=e(),gt.prototype[t+"Form"]=e(!0)});var ce=gt;var El=class s{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});let o=this;this.promise.then(c=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](c);o._listeners=null}),this.promise.then=c=>{let r,n=new Promise(a=>{o.subscribe(a),r=a}).then(c);return n.cancel=function(){o.unsubscribe(r)},n},t(function(r,n,a){o.reason||(o.reason=new W2(r,n,a),e(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new s(function(c){t=c}),cancel:t}}},s8=El;function Tl(s){return function(e){return s.apply(null,e)}}function Il(s){return L.isObject(s)&&s.isAxiosError===!0}var Pl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pl).forEach(([s,t])=>{Pl[t]=s});var o8=Pl;function c8(s){let t=new ce(s),e=K4(ce.prototype.request,t);return L.extend(e,ce.prototype,t,{allOwnKeys:!0}),L.extend(e,t,null,{allOwnKeys:!0}),e.create=function(c){return c8(T2(s,c))},e}var E1=c8(it);E1.Axios=ce;E1.CanceledError=W2;E1.CancelToken=s8;E1.isCancel=ee;E1.VERSION=E3;E1.toFormData=P0;E1.AxiosError=Q;E1.Cancel=E1.CanceledError;E1.all=function(t){return Promise.all(t)};E1.spread=Tl;E1.isAxiosError=Il;E1.mergeConfig=T2;E1.AxiosHeaders=D1;E1.formToJSON=s=>B3(L.isHTMLForm(s)?new FormData(s):s);E1.getAdapter=b3.getAdapter;E1.HttpStatusCode=o8;E1.default=E1;var dt=E1;var{Axios:Ly,AxiosError:yy,CanceledError:By,isCancel:_y,CancelToken:Ay,VERSION:Sy,all:Ry,Cancel:by,isAxiosError:ky,spread:Ey,toFormData:Ty,AxiosHeaders:Iy,HttpStatusCode:Py,formToJSON:Dy,getAdapter:Oy,mergeConfig:Ny}=dt;var r8={fetchPhotoFromUnsplash:pz},uz="3yF4Mw1jz_x9aL142pO5a4nXm_a3xc6Nu_BYEEIxQNA";function pz(s=1,t){return S(this,null,function*(){try{return(yield dt.get("https://api.unsplash.com/photos/random",{params:{query:t,per_page:s},headers:{Authorization:`Client-ID ${uz}`}})).data.urls.regular}catch(e){return console.error("Error fetching photos:",e),[]}})}function wt(s,t){return s=Math.ceil(s),t=Math.floor(t),Math.floor(Math.random()*(t-s+1))+s}function ut(s="n-"){let t=wt(1e4,1e8);return`${s}${t}`}function n8(s){let t=["The cat","A dog","My friend","An artist","The teacher"],e=["jumps","runs","paints","writes","reads"],o=["a book","a picture","a letter","an email","a song"],c=["quickly","slowly","happily","sadly","eagerly"],r=[];for(let n=0;n<s;n++){let a=t[Math.floor(Math.random()*t.length)],h=e[Math.floor(Math.random()*e.length)],v=o[Math.floor(Math.random()*o.length)],d=c[Math.floor(Math.random()*c.length)];r.push(`${a} ${h} ${v} ${d}.`)}return r.join(" ")}var l8={getDemoNotes:mz,getDemoNote:a8},re=["white","pink","lightcoral","lightskyblue","lightsteelblue","lightseagreen"];var Dl=["linear-gradient(0deg, #D9AFD9 0%, #97D9E1 100%)","linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%)","linear-gradient(62deg, #FBAB7E 0%, #F7CE68 100%)","linear-gradient(45deg, #FBDA61 0%, #FF5ACD 100%)","linear-gradient(180deg, #A9C9FF 0%, #FFBBEC 100%)","linear-gradient(0deg, #08AEEA 0%, #2AF598 100%)"];function mz(s=17){return S(this,null,function*(){let t=[];for(let e=0;e<s;e++)t.push(yield a8());return t})}function a8(){return S(this,null,function*(){let s=wt(0,5),t=["Meeting","Shopping","Project","Workout Plan","Recipe"],e=["txt","todo","img"],o=t[Math.floor(Math.random()*t.length)],c=Date.now()-wt(1e5,1e8),r=e[Math.floor(Math.random()*e.length)],n=h8(new Date(c)),a=s%2===0?re[s]:Dl[s],h={_id:"",title:o,type:r,createdAt:n,color:a,timestamp:Date.now()};h=yield fz(h);let v=yield I0.addNoteWithAutoId(h);return h._id=v.id,yield I0.updateNoteId(v.id,h._id),h})}function fz(s){return S(this,null,function*(){switch(s.type){case"todo":s.todos=zz(wt(3,5));break;case"img":s.imgUrl=yield xz(s.title);break;case"txt":default:s.txt=n8(5);break}return s})}function zz(s){let t=["Buy groceries","Finish report","Call the bank","Schedule appointment","Clean the house","Prepare presentation","Read a book","Exercise","Plan the trip","Pay bills"],e=[];for(let o=0;o<s;o++){let c=t[Math.floor(Math.random()*t.length)],r={_id:ut("t-"),createdAt:new Date(Date.now()),content:c,isDone:!!wt(0,1)};e.push(r)}return e}function xz(s){return r8.fetchPhotoFromUnsplash(1,s)}function i8(s="Title...",t="Description...",e="txt"){return{_id:"",title:s,txt:t,type:e,createdAt:h8(new Date),color:"#FFF",canvas:"",timestamp:Date.now()}}function h8(s){let t=s.getHours().toString().padStart(2,"0"),e=s.getMinutes().toString().padStart(2,"0"),o=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0");return`${t}:${e} ${o}/${c}`}var Mz=s=>({show:s}),v8=s=>({background:s}),g8=s=>({selected:s});function Cz(s,t){if(s&1){let e=L1();I(0,"div",2),q("click",function(c){let r=s1(e).$implicit,n=G();return o1(n.handleSelectColor(c,r))}),P()}if(s&2){let e=t.$implicit,o=G();U0(i2(4,v8,e)),C2(i2(6,g8,e===o.activeColor))}}function Vz(s,t){if(s&1){let e=L1();I(0,"div",2),q("click",function(c){let r=s1(e).$implicit,n=G();return o1(n.handleSelectColor(c,r))}),P()}if(s&2){let e=t.$implicit,o=G();U0(i2(4,v8,e)),C2(i2(6,g8,e===o.activeColor))}}var d8=(()=>{class s{noteId;noteColor;selectedNote;isColorPickerOpen;selectedColor=new T1;activeColor=c0;colors=re;gradients=Dl;ngOnInit(){this.activeColor=this.noteColor}handleSelectColor(e,o){e.stopPropagation(),e.preventDefault(),this.activeColor=o,this.selectedColor.emit({noteId:this.noteId,type:T5,data:o})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["color-picker"]],inputs:{noteId:"noteId",noteColor:"noteColor",selectedNote:"selectedNote",isColorPickerOpen:"isColorPickerOpen"},outputs:{selectedColor:"selectedColor"},standalone:!0,features:[w1],decls:5,vars:4,consts:[[1,"color-picker-container"],[1,"color-item",3,"style","class"],[1,"color-item",3,"click"]],template:function(o,c){o&1&&(I(0,"article",0),$1(1,Cz,1,8,"div",1,b2),$1(3,Vz,1,8,"div",1,b2),P()),o&2&&(C2(i2(2,Mz,c.isColorPickerOpen&&c.selectedNote._id===c.noteId)),j(),G1(c.colors),j(2),G1(c.gradients))},styles:[".color-picker-container[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:39px;display:grid;gap:4px;padding:5px 15px;border-radius:30px;grid-template-columns:repeat(6,1fr);pointer-events:none;opacity:0;box-shadow:#0000000d 0 0 0 1px}.color-picker-container.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1;background:#ffffff73}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px;border-radius:50%;width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{cursor:pointer}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(85%)}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%], .color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{outline:2px solid rgba(0,0,0,.452)}"]})}return s})();var w8=(()=>{class s{el;renderer;noteId;constructor(e,o){this.el=e,this.renderer=o}onMouseOver(){this.renderer.addClass(this.el.nativeElement,"hovered")}onMouseOut(){this.renderer.removeClass(this.el.nativeElement,"hovered")}static \u0275fac=function(o){return new(o||s)(d1(M2),d1(Ue))};static \u0275dir=S2({type:s,selectors:[["","noteHover",""]],hostBindings:function(o,c){o&1&&q("mouseover",function(){return c.onMouseOver()})("mouseout",function(){return c.onMouseOut()})},inputs:{noteId:[I2.None,"noteHover","noteId"]},standalone:!0})}return s})();var Hz=new n1(""),Lz=new n1("");function z8(s){return s!=null}function x8(s){return We(s)?X1(s):s}function M8(s){let t={};return s.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function C8(s,t){return t.map(e=>e(s))}function yz(s){return!s.validate}function V8(s){return s.map(t=>yz(t)?t:e=>t.validate(e))}function Bz(s){if(!s)return null;let t=s.filter(z8);return t.length==0?null:function(e){return M8(C8(e,t))}}function Zl(s){return s!=null?Bz(V8(s)):null}function _z(s){if(!s)return null;let t=s.filter(z8);return t.length==0?null:function(e){let o=C8(e,t).map(x8);return d9(o).pipe(p1(M8))}}function Ul(s){return s!=null?_z(V8(s)):null}function u8(s,t){return s===null?[t]:Array.isArray(s)?[...s,t]:[s,t]}function Az(s){return s._rawValidators}function Sz(s){return s._rawAsyncValidators}function Ol(s){return s?Array.isArray(s)?s:[s]:[]}function P3(s,t){return Array.isArray(s)?s.includes(t):s===t}function p8(s,t){let e=Ol(t);return Ol(s).forEach(c=>{P3(e,c)||e.push(c)}),e}function m8(s,t){return Ol(t).filter(e=>!P3(s,e))}var Nl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Zl(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ul(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ie=class extends Nl{get formDirective(){return null}get path(){return null}};var Fl=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Rz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},zB=u1(k({},Rz),{"[class.ng-submitted]":"isSubmitted"});var O3=(()=>{let t=class t extends Fl{constructor(o){super(o)}};t.\u0275fac=function(c){return new(c||t)(d1(ie,10))},t.\u0275dir=S2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(c,r){c&2&&s2("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Lo]});let s=t;return s})();var ne="VALID",I3="INVALID",pt="PENDING",le="DISABLED";function bz(s){return(ql(s)?s.validators:s)||null}function kz(s){return Array.isArray(s)?Zl(s):s||null}function Ez(s,t){return(ql(t)?t.asyncValidators:s)||null}function Tz(s){return Array.isArray(s)?Ul(s):s||null}function ql(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}function Iz(s,t,e){let o=s.controls;if(!(t?Object.keys(o):o).length)throw new H1(1e3,"");if(!o[e])throw new H1(1001,"")}function Pz(s,t,e){s._forEachChild((o,c)=>{if(e[c]===void 0)throw new H1(1002,"")})}var jl=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ne}get invalid(){return this.status===I3}get pending(){return this.status==pt}get disabled(){return this.status===le}get enabled(){return this.status!==le}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(p8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(p8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(m8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(m8(t,this._rawAsyncValidators))}hasValidator(t){return P3(this._rawValidators,t)}hasAsyncValidator(t){return P3(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=pt,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=le,this.errors=null,this._forEachChild(o=>{o.disable(u1(k({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(u1(k({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ne,this._forEachChild(o=>{o.enable(u1(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(u1(k({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ne||this.status===pt)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?le:ne}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=pt,this._hasOwnPendingAsyncValidator=!0;let e=x8(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((o,c)=>o&&o._find(c),this)}getError(t,e){let o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new T1,this.statusChanges=new T1}_calculateStatus(){return this._allControlsDisabled()?le:this.errors?I3:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pt)?pt:this._anyControlsHaveStatus(I3)?I3:ne}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ql(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=kz(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Tz(this._rawAsyncValidators)}},D3=class extends jl{constructor(t,e,o){super(bz(e),Ez(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Pz(this,!0,t),Object.keys(t).forEach(o=>{Iz(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(o=>{let c=this.controls[o];c&&c.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,c)=>{o.reset(t?t[c]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>o._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,o,c)=>((o.enabled||this.disabled)&&(e[c]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((c,r)=>{o=e(o,c,r)}),o}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var H8=new n1("CallSetDisabledState",{providedIn:"root",factory:()=>$l}),$l="always";function Dz(s,t,e=$l){L8(s,t),t.valueAccessor.writeValue(s.value),(s.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(s.disabled),Nz(s,t),jz(s,t),Fz(s,t),Oz(s,t)}function f8(s,t){s.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Oz(s,t){if(t.valueAccessor.setDisabledState){let e=o=>{t.valueAccessor.setDisabledState(o)};s.registerOnDisabledChange(e),t._registerOnDestroy(()=>{s._unregisterOnDisabledChange(e)})}}function L8(s,t){let e=Az(s);t.validator!==null?s.setValidators(u8(e,t.validator)):typeof e=="function"&&s.setValidators([e]);let o=Sz(s);t.asyncValidator!==null?s.setAsyncValidators(u8(o,t.asyncValidator)):typeof o=="function"&&s.setAsyncValidators([o]);let c=()=>s.updateValueAndValidity();f8(t._rawValidators,c),f8(t._rawAsyncValidators,c)}function Nz(s,t){t.valueAccessor.registerOnChange(e=>{s._pendingValue=e,s._pendingChange=!0,s._pendingDirty=!0,s.updateOn==="change"&&y8(s,t)})}function Fz(s,t){t.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,s.updateOn==="blur"&&s._pendingChange&&y8(s,t),s.updateOn!=="submit"&&s.markAsTouched()})}function y8(s,t){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function jz(s,t){let e=(o,c)=>{t.valueAccessor.writeValue(o),c&&t.viewToModelUpdate(o)};s.registerOnChange(e),t._registerOnDestroy(()=>{s._unregisterOnChange(e)})}function Zz(s,t){s==null,L8(s,t)}function Uz(s,t){s._syncPendingControls(),t.forEach(e=>{let o=e.control;o.updateOn==="submit"&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}var qz={provide:ie,useExisting:f9(()=>he)},ae=Promise.resolve(),he=(()=>{let t=class t extends ie{constructor(o,c,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new T1,this.form=new D3({},Zl(o),Ul(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(o){ae.then(()=>{let c=this._findContainer(o.path);o.control=c.registerControl(o.name,o.control),Dz(o.control,o,this.callSetDisabledState),o.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(o)})}getControl(o){return this.form.get(o.path)}removeControl(o){ae.then(()=>{let c=this._findContainer(o.path);c&&c.removeControl(o.name),this._directives.delete(o)})}addFormGroup(o){ae.then(()=>{let c=this._findContainer(o.path),r=new D3({});Zz(r,o),c.registerControl(o.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(o){ae.then(()=>{let c=this._findContainer(o.path);c&&c.removeControl(o.name)})}getFormGroup(o){return this.form.get(o.path)}updateModel(o,c){ae.then(()=>{this.form.get(o.path).setValue(c)})}setValue(o){this.control.setValue(o)}onSubmit(o){return this.submitted=!0,Uz(this.form,this._directives),this.ngSubmit.emit(o),o?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(o=void 0){this.form.reset(o),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(o){return o.pop(),o.length?this.form.get(o):this.form}};t.\u0275fac=function(c){return new(c||t)(d1(Hz,10),d1(Lz,10),d1(H8,8))},t.\u0275dir=S2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(c,r){c&1&&q("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[I2.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[V2([qz]),Lo]});let s=t;return s})();var N3=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=S2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let s=t;return s})();var $z=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({});let s=t;return s})();var F3=(()=>{let t=class t{static withConfig(o){return{ngModule:t,providers:[{provide:H8,useValue:o.callSetDisabledState??$l}]}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({imports:[$z]});let s=t;return s})();var _8={uploadPhotoToCloud:Gz};function Gz(s){return S(this,null,function*(){let t=new FormData;return t.append("file",s),t.append("upload_preset","keepy-notes"),t.append("cloud_name","dcg0ivasg"),yield dt.post("https://api.cloudinary.com/v1_1/dcg0ivasg/image/upload",t)})}var Gl={updateTodo:Wz,getEmptyTodo:Kz};function Wz(){return S(this,null,function*(){try{}catch(s){console.error(s)}})}function Kz(){return{_id:ut("t-"),createdAt:new Date,content:"",isDone:!1}}var Qz=["canvasElement"],A8=(()=>{class s{canvasElement;canvasImgUrl;ctx;drawing=!1;strokeWidth=10;strokeColor="black";ngAfterViewInit(){let e=this.canvasElement.nativeElement;this.ctx=e.getContext("2d"),this.resizeCanvas()}onResize(){this.resizeCanvas()}resizeCanvas(){let e=this.canvasElement.nativeElement,o=e.getBoundingClientRect();e.width=o.width,e.height=o.height,this.ctx.fillStyle="white",this.ctx.fillRect(0,0,e.width,e.height)}startDrawing(e){this.drawing=!0,this.draw(e)}stopDrawing(){this.drawing=!1,this.ctx.beginPath(),this.saveCanvas()}draw(e){if(!this.drawing)return;let c=this.canvasElement.nativeElement.getBoundingClientRect(),r=e.clientX-c.left,n=e.clientY-c.top;this.ctx.lineWidth=this.strokeWidth,this.ctx.lineCap="round",this.ctx.strokeStyle=this.strokeColor,this.ctx.lineTo(r,n),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(r,n)}saveCanvas(){let e=this.canvasElement.nativeElement;this.canvasImgUrl=e.toDataURL("image/png"),console.log("this.canvasImgUrl",this.canvasImgUrl)}setStrokeWidth(e){this.strokeWidth=e}setStrokeColor(e){this.strokeColor=e}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["note-canvas"]],viewQuery:function(o,c){if(o&1&&H5(Qz,5),o&2){let r;q0(r=$0())&&(c.canvasElement=r.first)}},hostBindings:function(o,c){o&1&&q("resize",function(n){return c.onResize(n)},!1,V9)},standalone:!0,features:[w1],decls:13,vars:14,consts:[["canvasElement",""],[1,"canvas-container"],[1,"canvas-controls"],["type","button",2,"background-color","black","width","15px","height","15px","border-radius","50%",3,"click"],["type","button",2,"background-color","black","width","20px","height","20px","border-radius","50%",3,"click"],["type","button",2,"background-color","black","width","25px","height","25px","border-radius","50%",3,"click"],["type","button",2,"background-color","#ffffffd8","width","30px","height","30px","border-radius","50%",3,"click"],["type","button",2,"background-color","black","width","30px","height","30px","border-radius","50%",3,"click"],["type","button",2,"background-color","blue","width","30px","height","30px","border-radius","50%",3,"click"],["type","button",2,"background-color","red","width","30px","height","30px","border-radius","50%",3,"click"],[1,"canvas",3,"mousedown","mouseup","mousemove"]],template:function(o,c){if(o&1){let r=L1();I(0,"div",1)(1,"div",2)(2,"div")(3,"button",3),q("click",function(){return s1(r),o1(c.setStrokeWidth(5))}),P(),I(4,"button",4),q("click",function(){return s1(r),o1(c.setStrokeWidth(10))}),P(),I(5,"button",5),q("click",function(){return s1(r),o1(c.setStrokeWidth(15))}),P()(),I(6,"div")(7,"button",6),q("click",function(){return s1(r),o1(c.setStrokeColor("white"))}),P(),I(8,"button",7),q("click",function(){return s1(r),o1(c.setStrokeColor("black"))}),P(),I(9,"button",8),q("click",function(){return s1(r),o1(c.setStrokeColor("blue"))}),P(),I(10,"button",9),q("click",function(){return s1(r),o1(c.setStrokeColor("red"))}),P()()(),I(11,"canvas",10,0),q("mousedown",function(a){return s1(r),o1(c.startDrawing(a))})("mouseup",function(){return s1(r),o1(c.stopDrawing())})("mousemove",function(a){return s1(r),o1(c.draw(a))}),P()()}o&2&&(j(3),s2("selected",c.strokeWidth===5),j(),s2("selected",c.strokeWidth===10),j(),s2("selected",c.strokeWidth===15),j(2),s2("selected",c.strokeColor==="white"),j(),s2("selected",c.strokeColor==="black"),j(),s2("selected",c.strokeColor==="blue"),j(),s2("selected",c.strokeColor==="red"))},styles:[".canvas-container[_ngcontent-%COMP%]{background-color:#333;display:block;touch-action:none;width:100%;height:300px;position:relative;background-color:#3b3e41;margin-bottom:50px}.canvas-controls[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-evenly;background-color:#fffe}.canvas-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-block-start:5px;margin-block-end:5px;outline:none;border:none}.canvas-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;filter:brightness(90%)}.canvas-controls[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{outline:2px solid rgb(151,151,151)}.canvas-controls[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}canvas[_ngcontent-%COMP%]{grid-column:2;width:100%;height:85%}"]})}return s})();var Yz=["noteCanvas"],Jz=s=>({background:s});function Xz(s,t){if(s&1){let e=L1();I(0,"textarea",8),q("input",function(c){s1(e);let r=G();return o1(r.setDescription(c))}),P()}if(s&2){let e=G();i1("value",e.description||null)}}function tx(s,t){if(s&1&&x1(0,"img",12),s&2){let e=G(2);i1("src",e.imgUrl,C0)}}function ex(s,t){if(s&1){let e=L1();I(0,"div",9)(1,"input",10,0),q("change",function(c){s1(e);let r=G();return o1(r.handleFileInput(c))}),P(),I(3,"button",11),q("click",function(){s1(e);let c=Ao(2);return o1(c.click())}),B1(4,"Upload Image"),P(),d2(5,tx,1,1,"img",12),P()}if(s&2){let e=G();j(5),o2(5,e.imgUrl?5:-1)}}function sx(s,t){if(s&1){let e=L1();I(0,"li",14)(1,"input",16),q("change",function(c){let r=s1(e).$implicit,n=G(2);return o1(n.setTodoContent(c,r._id))}),P(),I(2,"ng-icon",17),q("click",function(){let c=s1(e).$implicit,r=G(2);return o1(r.removeTodo(c._id))}),P()()}if(s&2){let e=t.$implicit,o=t.$index;j(),C2(e.isDone?"done":"active"),i1("placeholder","This is task number #00"+(o+1))}}function ox(s,t){if(s&1){let e=L1();I(0,"ul",13),$1(1,sx,3,3,"li",14,_o),I(3,"ng-icon",15),q("click",function(){s1(e);let c=G();return o1(c.addTodo())}),P()()}if(s&2){let e=G();j(),G1(e.todos)}}function cx(s,t){s&1&&x1(0,"note-canvas",18,1)}function rx(s,t){if(s&1){let e=L1();I(0,"ng-icon",19),q("click",function(){let c=s1(e).$implicit,r=G();return o1(r.setType(c.type))}),P()}if(s&2){let e=t.$implicit;i1("name",e.svg)("title",e.type)}}function nx(s,t){if(s&1){let e=L1();I(0,"li",21),q("click",function(){let c=s1(e).$implicit,r=G(2);return o1(r.setSelectedColor(c))}),P()}if(s&2){let e=t.$implicit,o=G(2);U0(i2(4,Jz,e)),s2("selected",e===o.selectedColor)}}function lx(s,t){if(s&1&&(I(0,"ul",7),$1(1,nx,1,6,"li",20,_o),P()),s&2){let e=G();j(),G1(e.colors)}}var S8=(()=>{class s{title;description;type;imgUrl;todos;noteToAdd;isEditorActive;isImgLoading;isColorPickerOpen=!1;colors=re;selectedColor="#fff";editorIcons=[{type:Sc,svg:"matColorLens"},{type:ai,svg:"matTextSnippet"},{type:li,svg:"matImage"},{type:ii,svg:"matViewList"},{type:Rc,svg:"matBrush"}];noteCanvas;addNote=new T1;ngOnInit(){this.resetEditor(),this.isEditorActive=!1,this.type="canvas"}setTodoContent(e,o){let c=this.todos.findIndex(r=>r._id===o);this.todos[c].content=e.target.value}setTitle(e){this.title=e.target.value}setSelectedColor(e){this.selectedColor=e}setType(e){if(e===Sc){this.isColorPickerOpen=!this.isColorPickerOpen;return}this.resetEditor(),this.type=e}setDescription(e){this.description=e.target.value}addTodo(){let e=Gl.getEmptyTodo();this.todos.push(e)}handleFileInput(e){let o=e.target.files[0];if(o){let c=new FileReader;c.onload=r=>{this.imgUrl=r.target.result},c.readAsDataURL(o)}}removeTodo(e){console.log("todoId",e),this.todos=this.todos.filter(o=>o._id!==e),console.log("this.todos AFTER REMOVE ",e,this.todos)}resetEditor(){this.isColorPickerOpen=!1,this.title=c0,this.description=c0,this.imgUrl=c0,this.type=z4,this.selectedColor="#fff",this.todos=[Gl.getEmptyTodo()],this.noteToAdd=i8()}handleImgUpload(){return S(this,null,function*(){if(this.imgUrl)try{let e=yield _8.uploadPhotoToCloud(this.imgUrl);this.noteToAdd.imgUrl=e.data.secure_url}catch(e){console.error("Image upload failed:",e)}})}handleTodos(){this.todos&&(this.noteToAdd.todos=[...this.todos],this.noteToAdd.todos.forEach((e,o)=>e.content?null:e.content=`Task number #00${o+1}`))}setNoteDetails(){this.noteToAdd.title=this.title,this.noteToAdd.type=this.type,this.noteToAdd.txt=this.description,this.noteToAdd.color=this.selectedColor}handleCanvas(){this.noteToAdd.type!==Rc||!this.noteCanvas.canvasImgUrl||(this.noteCanvas.saveCanvas(),this.noteToAdd.canvas=this.noteCanvas.canvasImgUrl)}handleAddNote(e){return S(this,null,function*(){try{e.preventDefault(),this.setNoteDetails(),this.handleTodos(),this.handleCanvas(),yield this.handleImgUpload(),this.addNote.emit({noteId:c0,type:ys,data:this.noteToAdd}),this.resetEditor()}catch(o){console.error(o)}})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["add-note"]],viewQuery:function(o,c){if(o&1&&H5(Yz,5),o&2){let r;q0(r=$0())&&(c.noteCanvas=r.first)}},outputs:{addNote:"addNote"},standalone:!0,features:[V2(B0({matImage:oi,matColorLens:Hs,matViewList:ri,matTextSnippet:ci,matClose:ti,matAdd:Ja,matBrush:Xa})),w1],decls:12,vars:3,consts:[["fileInput",""],["noteCanvas",""],[1,"add-note-container",3,"submit"],["type","text","placeholder","Title...",3,"input","value"],[1,"icons-container",2,"z-index","10"],[1,"note-icon",3,"name","title"],[2,"z-index","10"],[1,"colors-container"],["placeholder","How are you today...",3,"input","value"],[1,"img-container"],["type","file",2,"display","none",3,"change"],["type","button",3,"click"],["alt","Uploaded Image Preview",3,"src"],[1,"todos-container"],[1,"todo-item"],["type","button","name","matAdd",1,"delete-todo-btn","add-todo-btn",2,"margin-block-end","50px","margin-block-start","20px","border-radius","50%",3,"click"],["type","text",1,"todo-input",3,"change","placeholder"],["name","matClose",1,"delete-todo-btn",3,"click"],[2,"background-color","#3b3e41"],[1,"note-icon",3,"click","name","title"],[1,"color-item",3,"style","selected"],[1,"color-item",3,"click"]],template:function(o,c){if(o&1&&(I(0,"form",2),q("submit",function(n){return c.handleAddNote(n)}),I(1,"input",3),q("input",function(n){return c.setTitle(n)}),P(),d2(2,Xz,1,1)(3,ex,6,1)(4,ox,4,0)(5,cx,2,0),I(6,"div",4),$1(7,rx,1,2,"ng-icon",5,b2),P(),I(9,"button",6),B1(10,"Keep"),P(),d2(11,lx,3,0,"ul",7),P()),o&2){let r;j(),i1("value",c.title||null),j(),o2(2,(r=c.type)==="txt"?2:r==="img"?3:r==="todo"?4:r==="canvas"?5:-1),j(5),G1(c.editorIcons),j(4),o2(11,c.isColorPickerOpen?11:-1)}},dependencies:[F3,N3,O3,he,_0,A8],styles:[".add-note-container[_ngcontent-%COMP%]{outline:1px solid #585858;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:relative;border-radius:5px;color:#fff;display:grid;margin:auto;min-width:20%;max-width:600px;height:fit-content;margin-block-end:20px;margin-block-start:10px}.add-note-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-size:24px;font-weight:500}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#3b3e41;padding:15px 0 10px 10px;border-radius:5px 5px 0 0;transition:.2s background-color ease-in;font-weight:600;font-size:1.2em;color:#fff}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#000;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0 0 5px 5px;background-color:#3b3e41;color:#fff;transition:.2s background-color ease-in;padding-inline-start:10px;padding-block-start:10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;resize:none;height:calc(100px + 5vh);border:none;font-size:1em}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:16px;font-weight:400}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{color:#000;outline:none;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;outline:1px solid rgba(255,255,255,.123);padding:5px 30px;background:#33333369;justify-self:start;cursor:pointer;border:none;font-size:1rem;width:50px;height:auto;display:flex;align-items:center;justify-content:center;border-radius:5px;color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;opacity:.7;background-color:#fff}.icons-container[_ngcontent-%COMP%]{display:flex;padding:2px 5px 5px;outline:1px solid rgba(255,255,255,.123);border-radius:5px;position:absolute;bottom:10px;left:10px;gap:5px}.icons-container[_ngcontent-%COMP%]   .note-icon[_ngcontent-%COMP%]{font-size:1.5rem}.img-container[_ngcontent-%COMP%]{position:relative;width:100%;height:calc(100px + 5vh);background:#3b3e41;display:flex;align-items:center;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:80%;height:100%}.img-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;width:fit-content;top:10px;left:10px;padding:5px;height:30px}.todos-container[_ngcontent-%COMP%]{padding-inline-start:10px;padding-block-start:5px;background:#3b3e41;padding:inline;min-height:calc(100px + 5vh);display:flex;flex-direction:column}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{padding-inline-end:10px;display:flex;align-items:center}.todos-container[_ngcontent-%COMP%]   .add-todo-btn[_ngcontent-%COMP%]{position:relative;margin-inline-start:10px;margin-block-start:90%;padding:0;width:20px;height:20px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]{background-color:transparent;padding:0;font-weight:100;font-size:14px;border-bottom:1px solid rgba(255,255,255,.123);line-height:5px;color:#ffffffa6;width:100%;padding-block:10px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]::placeholder{font-size:1rem;font-weight:100;font-size:14px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]:focus{background-color:transparent;color:#fff}.delete-todo-btn[_ngcontent-%COMP%]{position:absolute;right:10px;font-family:cursive;outline:1px solid rgba(255,255,255,.123);background-color:#33333369;color:#fff;height:20px;width:20px;display:flex;align-items:end;justify-content:center;border-radius:50%}.delete-todo-btn[_ngcontent-%COMP%]:hover{color:#f08080;color:#000;opacity:.7;background-color:#fff;cursor:pointer}.colors-container[_ngcontent-%COMP%]{padding:5px;position:absolute;display:flex;gap:5px;left:235px;border-radius:5px;bottom:10px}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{transition:scale .1s;cursor:pointer;width:22px;height:22px;border-radius:50%}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.colors-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(110%);scale:1.2}",".color-picker-container[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:39px;display:grid;gap:4px;padding:5px 15px;border-radius:30px;grid-template-columns:repeat(6,1fr);pointer-events:none;opacity:0;box-shadow:#0000000d 0 0 0 1px}.color-picker-container.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1;background:#ffffff73}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px;border-radius:50%;width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{cursor:pointer}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(85%)}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%], .color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{outline:2px solid rgba(0,0,0,.452)}"]})}return s})();var Wl;try{Wl=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Wl=!1}var ge=(()=>{let t=class t{constructor(o){this._platformId=o,this.isBrowser=this._platformId?O9(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Wl)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(c){return new(c||t)(J(X2))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var ve;function ax(){if(ve==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ve=!0}))}finally{ve=ve||!1}return ve}function Kl(s){return ax()?s:!!s.capture}function R8(s){return s.composedPath?s.composedPath()[0]:s.target}function b8(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ql(s){return Array.isArray(s)?s:[s]}function Yl(s){return s instanceof M2?s.nativeElement:s}var E8=new Set,g5,ix=(()=>{let t=class t{constructor(o,c){this._platform=o,this._nonce=c,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):vx}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&hx(o,this._nonce),this._matchMedia(o)}};t.\u0275fac=function(c){return new(c||t)(J(ge),J(Ft,8))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function hx(s,t){if(!E8.has(s))try{g5||(g5=document.createElement("style"),t&&g5.setAttribute("nonce",t),g5.setAttribute("type","text/css"),document.head.appendChild(g5)),g5.sheet&&(g5.sheet.insertRule(`@media ${s} {body{ }}`,0),E8.add(s))}catch(e){console.error(e)}}function vx(s){return{matches:s==="all"||s==="",media:s,addListener:()=>{},removeListener:()=>{}}}var I8=(()=>{let t=class t{constructor(o,c){this._mediaMatcher=o,this._zone=c,this._queries=new Map,this._destroySubject=new A2}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return T8(Ql(o)).some(r=>this._registerQuery(r).mql.matches)}observe(o){let r=T8(Ql(o)).map(a=>this._registerQuery(a).observable),n=f5(r);return n=Ee(n.pipe(z0(1)),n.pipe(m9(1),Te(0))),n.pipe(p1(a=>{let h={matches:!1,breakpoints:{}};return a.forEach(({matches:v,query:d})=>{h.matches=h.matches||v,h.breakpoints[d]=v}),h}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let c=this._mediaMatcher.matchMedia(o),n={observable:new wo(a=>{let h=v=>this._zone.run(()=>a.next(v));return c.addListener(h),()=>{c.removeListener(h)}}).pipe(Ie(c),p1(({matches:a})=>({query:o,matches:a})),Pe(this._destroySubject)),mql:c};return this._queries.set(o,n),n}};t.\u0275fac=function(c){return new(c||t)(J(ix),J(I1))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function T8(s){return s.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function O8(s){return s.buttons===0||s.detail===0}function N8(s){let t=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var d5=function(s){return s[s.NONE=0]="NONE",s[s.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",s[s.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",s}(d5||{}),P8="cdk-high-contrast-black-on-white",D8="cdk-high-contrast-white-on-black",Jl="cdk-high-contrast-active",F8=(()=>{let t=class t{constructor(o,c){this._platform=o,this._document=c,this._breakpointSubscription=D(I8).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return d5.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let c=this._document.defaultView||window,r=c&&c.getComputedStyle?c.getComputedStyle(o):null,n=(r&&r.backgroundColor||"").replace(/ /g,"");switch(o.remove(),n){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return d5.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return d5.BLACK_ON_WHITE}return d5.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(Jl,P8,D8),this._hasCheckedHighContrastMode=!0;let c=this.getHighContrastMode();c===d5.BLACK_ON_WHITE?o.add(Jl,P8):c===d5.WHITE_ON_BLACK&&o.add(Jl,D8)}}};t.\u0275fac=function(c){return new(c||t)(J(ge),J(N1))},t.\u0275prov=t1({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var Xl=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({});let s=t;return s})();function dx(){return!0}var wx=new n1("mat-sanity-checks",{providedIn:"root",factory:dx}),W8=(()=>{let t=class t{constructor(o,c,r){this._sanityChecks=c,this._document=r,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return b8()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};t.\u0275fac=function(c){return new(c||t)(J(F8),J(wx,8),J(N1))},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({imports:[Xl,Xl]});let s=t;return s})();var B2=function(s){return s[s.FADING_IN=0]="FADING_IN",s[s.VISIBLE=1]="VISIBLE",s[s.FADING_OUT=2]="FADING_OUT",s[s.HIDDEN=3]="HIDDEN",s}(B2||{}),t7=class{constructor(t,e,o,c=!1){this._renderer=t,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=c,this.state=B2.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},j8=Kl({passive:!0,capture:!0}),e7=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=R8(t);e&&this._events.get(t.type)?.forEach((o,c)=>{(c===e||c.contains(e))&&o.forEach(r=>r.handleEvent(t))})}}addHandler(t,e,o,c){let r=this._events.get(e);if(r){let n=r.get(o);n?n.add(c):r.set(o,new Set([c]))}else this._events.set(e,new Map([[o,new Set([c])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,j8)})}removeHandler(t,e,o){let c=this._events.get(t);if(!c)return;let r=c.get(e);r&&(r.delete(o),r.size===0&&c.delete(e),c.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,j8)))}},Z8={enterDuration:225,exitDuration:150},ux=800,U8=Kl({passive:!0,capture:!0}),q8=["mousedown","touchstart"],$8=["mouseup","mouseleave","touchend","touchcancel"],de=class de{constructor(t,e,o,c){this._target=t,this._ngZone=e,this._platform=c,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,c.isBrowser&&(this._containerElement=Yl(o))}fadeInRipple(t,e,o={}){let c=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=k(k({},Z8),o.animation);o.centered&&(t=c.left+c.width/2,e=c.top+c.height/2);let n=o.radius||px(t,e,c),a=t-c.left,h=e-c.top,v=r.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-n}px`,d.style.top=`${h-n}px`,d.style.height=`${n*2}px`,d.style.width=`${n*2}px`,o.color!=null&&(d.style.backgroundColor=o.color),d.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),z=u.transitionProperty,y=u.transitionDuration,A=z==="none"||y==="0s"||y==="0s, 0s"||c.width===0&&c.height===0,R=new t7(this,d,o,A);d.style.transform="scale3d(1, 1, 1)",R.state=B2.FADING_IN,o.persistent||(this._mostRecentTransientRipple=R);let B=null;return!A&&(v||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let F=()=>this._finishRippleTransition(R),U=()=>this._destroyRipple(R);d.addEventListener("transitionend",F),d.addEventListener("transitioncancel",U),B={onTransitionEnd:F,onTransitionCancel:U}}),this._activeRipples.set(R,B),(A||!v)&&this._finishRippleTransition(R),R}fadeOutRipple(t){if(t.state===B2.FADING_OUT||t.state===B2.HIDDEN)return;let e=t.element,o=k(k({},Z8),t.config.animation);e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",t.state=B2.FADING_OUT,(t._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Yl(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,q8.forEach(o=>{de._eventManager.addHandler(this._ngZone,o,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{$8.forEach(e=>{this._triggerElement.addEventListener(e,this,U8)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===B2.FADING_IN?this._startFadeOutTransition(t):t.state===B2.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:o}=t.config;t.state=B2.VISIBLE,!o&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=B2.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=O8(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+ux;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!N8(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===B2.VISIBLE||t.config.terminateOnPointerUp&&t.state===B2.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(q8.forEach(e=>de._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&($8.forEach(e=>t.removeEventListener(e,this,U8)),this._pointerUpEventsRegistered=!1))}};de._eventManager=new e7;var G8=de;function px(s,t,e){let o=Math.max(Math.abs(s-e.left),Math.abs(s-e.right)),c=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+c*c)}var K8=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({imports:[w2,W8]});let s=t;return s})();var Q8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["loader"]],standalone:!0,features:[w1],decls:4,vars:0,consts:[[1,"loader-container"],[1,"loader-item","item-1"],[1,"loader-item","item-2"],[1,"loader-item","item-3"]],template:function(o,c){o&1&&(I(0,"article",0),x1(1,"div",1)(2,"div",2)(3,"div",3),P())},dependencies:[K8],styles:[".loader-container[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;margin-top:5vw}.loader-container[_ngcontent-%COMP%]   .loader-item[_ngcontent-%COMP%]{transition:scale .2s ease-in-out;width:50px;height:50px;background-color:#5c6166;border-radius:50%}.loader-container[_ngcontent-%COMP%]   .loader-item.item-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite}.loader-container[_ngcontent-%COMP%]   .loader-item.item-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite;animation-delay:.2s}.loader-container[_ngcontent-%COMP%]   .loader-item.item-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite;animation-delay:.4s}@keyframes _ngcontent-%COMP%_blow{20%{scale:1}50%{scale:1.2}80%{scale:1}}"]})}return s})();var K2=(()=>{class s{notesSubject=new q1([]);loadingSubject=new q1(!1);notes$=this.notesSubject.asObservable();loading$=this.loadingSubject.asObservable();originalNotes=[];loadNotes(){return S(this,null,function*(){this.loadingSubject.next(!0);try{let e=yield I0.loadNotes();if(!e.length){this.setNotes(yield l8.getDemoNotes(16));return}this.setNotes(e)}catch(e){console.error("Error loading notes: ",e)}finally{this.loadingSubject.next(!1)}})}getNoteById(e){return this.notesSubject.value.find(o=>e===o._id)}setNotes(e){this.notesSubject.next(e),this.originalNotes=[...e]}addNote(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{let o=yield I0.addNote(e),c=[...this.notesSubject.value];e._id=o,c.unshift(k({},e)),this.notesSubject.next(c),this.originalNotes.unshift(e)}catch(o){console.error("Error adding note: ",o)}finally{this.loadingSubject.next(!1)}})}updateNote(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{yield I0.updateNote(e._id,e);let o=[...this.notesSubject.value],c=o.findIndex(n=>n._id===e._id);o[c]=k({},e),this.notesSubject.next(o);let r=this.originalNotes.findIndex(n=>n._id===e._id);this.originalNotes[r]=k({},e)}catch(o){console.error("Error updating note: ",o)}finally{this.loadingSubject.next(!1)}})}removeNoteById(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{yield I0.removeNote(e);let o=this.notesSubject.value.filter(c=>c._id!==e);this.notesSubject.next(o),this.originalNotes=this.originalNotes.filter(c=>c._id!==e)}catch(o){console.error("Error removing note: ",o)}finally{this.loadingSubject.next(!1)}})}filterNotes(e){this.loadingSubject.next(!0);let o=e.toLowerCase(),c=this.originalNotes.filter(r=>r.title.toLowerCase().includes(o));this.notesSubject.next(c),setTimeout(()=>{this.loadingSubject.next(!1)},500)}getFilteredNotes(e){return this.originalNotes.filter(o=>o.title.toLowerCase().startsWith(e.toLowerCase()))}static \u0275fac=function(o){return new(o||s)};static \u0275prov=t1({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function mx(s,t){return this.note.todos}function fx(s,t){if(s&1&&(I(0,"p",1),B1(1),P()),s&2){let e=G();j(),t0(e.note.txt)}}function zx(s,t){if(s&1){let e=L1();I(0,"li",3)(1,"p"),B1(2),P(),I(3,"input",4),q("change",function(){let c=s1(e).$implicit,r=G(2);return o1(r.toggleIsDone(c._id))}),P()()}if(s&2){let e=t.$implicit;j(),C2(e.isDone?"done":"active"),j(),t0(e.content),j(),i1("checked",e.isDone)}}function xx(s,t){if(s&1){let e=L1();I(0,"ul",2),q("click",function(c){s1(e);let r=G();return o1(r.handleEventClick(c))}),$1(1,zx,4,4,"li",3,mx,!0),P()}if(s&2){let e=G();j(),G1(e.note.todos)}}function Mx(s,t){if(s&1&&x1(0,"img",5),s&2){let e=G();i1("src",e.note.imgUrl,C0)}}function Cx(s,t){if(s&1&&x1(0,"img",5),s&2){let e=G();i1("src",e.note.canvas,C0)}}var Y8=(()=>{class s{noteService;note;constructor(e){this.noteService=e}toggleIsDone(e){return S(this,null,function*(){if(!this.note.todos)return;let o=this.note.todos?.findIndex(c=>c._id===e);this.note.todos[o].isDone=!this.note.todos[o].isDone,yield this.noteService.updateNote(this.note)})}handleEventClick(e){e.stopPropagation()}static \u0275fac=function(o){return new(o||s)(d1(K2))};static \u0275cmp=g1({type:s,selectors:[["dynamic-note"]],inputs:{note:"note"},standalone:!0,features:[w1],decls:8,vars:3,consts:[[2,"position","absolute","bottom","6.5px","right","5px","color","#333"],[2,"margin-top","5px"],[1,"todos-container","flex","flex-col",3,"click"],[1,"todo-item"],["type","checkbox",3,"change","checked"],["alt","img",3,"src"]],template:function(o,c){if(o&1&&(I(0,"h2"),B1(1),P(),d2(2,fx,2,1)(3,xx,3,0)(4,Mx,1,1)(5,Cx,1,1),I(6,"p",0),B1(7),P()),o&2){let r;j(),t0(c.note.title),j(),o2(2,(r=c.note.type)==="txt"?2:r==="todo"?3:r==="img"?4:r==="canvas"?5:-1),j(5),t0(c.note.createdAt)}},dependencies:[w2],styles:['@charset "UTF-8";img[_ngcontent-%COMP%]{margin-block-start:10px;width:100%;border-radius:5px;object-fit:cover;max-height:220px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}.todos-container[_ngcontent-%COMP%]{border-radius:5px;margin-block-start:10px;margin-block-end:10px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;padding:5px;background-color:#ffffff4b;display:grid;gap:5px}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{text-decoration:line-through}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:25px;margin-inline-end:5px}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}']})}return s})();var Vx=s=>({background:s});function Hx(s,t){if(s&1){let e=L1();I(0,"div",3),q("click",function(){let c=s1(e).$implicit,r=G(2);return o1(r.displayNoteEditor(c._id))}),x1(1,"dynamic-note",4),I(2,"note-bottom-actions",5),q("noteAction",function(c){s1(e);let r=G(2);return o1(r.onNoteAction(c))}),P(),I(3,"color-picker",6),q("selectedColor",function(c){s1(e);let r=G(2);return o1(r.onNoteAction(c))}),P()()}if(s&2){let e=t.$implicit,o=G(2);s2("fly-animation",(o.selectedNote==null?null:o.selectedNote._id)===e._id),i1("ngStyle",i2(9,Vx,e.color)),j(),i1("note",e),j(),i1("noteId",e._id),j(),i1("noteId",e._id)("noteColor",e.color)("selectedNote",o.selectedNote)("isColorPickerOpen",o.isColorPickerOpen)}}function Lx(s,t){if(s&1&&(I(0,"section",1),$1(1,Hx,4,11,"div",2,b2),P(),x1(3,"router-outlet")),s&2){let e=G();j(),G1(e.notes)}}function yx(s,t){s&1&&x1(0,"loader")}var X8=(()=>{class s{notesService;router;cdr;notes;selectedNote;isColorPickerOpen;colorPickerTimeout;isLoadingNotes=!1;subscription;constructor(e,o,c){this.notesService=e,this.router=o,this.cdr=c}ngOnInit(){return S(this,null,function*(){this.isLoadingNotes=!0,this.subscription=this.notesService.notes$.subscribe(e=>{this.notes=e,this.isLoadingNotes=!1,this.cdr.markForCheck()}),yield this.notesService.loadNotes()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getNoteIdxById(e){return this.notes.findIndex(o=>o._id===e)}addUpdateNote(e,o){return S(this,null,function*(){e?yield this.notesService.updateNote(k({},o)):yield this.notesService.addNote(k({},o))})}removeNote(e){return S(this,null,function*(){yield this.notesService.removeNoteById(e)})}duplicateNote(e){return S(this,null,function*(){let o=this.notesService.getNoteById(e);if(!o)return;let c=u1(k({},o),{_id:ut()});yield this.notesService.addNote(c)})}paintNote(e,o){return S(this,null,function*(){let c=this.notesService.getNoteById(o);c&&(yield this.notesService.updateNote(u1(k({},c),{color:e})))})}toggleColorPicker(){this.isColorPickerOpen=!this.isColorPickerOpen,this.isColorPickerOpen&&setTimeout(()=>{this.isColorPickerOpen=!1},2500)}displayNoteEditor(e){this.router.navigate(["notes",e])}onNoteAction(e){return S(this,null,function*(){switch(this.selectedNote=e.noteId?this.notes[this.getNoteIdxById(e.noteId)]:null,e.type){case ys:yield this.addUpdateNote(e.noteId,e.data);break;case Ls:yield this.removeNote(e.noteId);break;case Bs:yield this.duplicateNote(e.noteId);break;case T5:e.data?yield this.paintNote(e.data,e.noteId):this.toggleColorPicker();break}})}static \u0275fac=function(o){return new(o||s)(d1(K2),d1(h2),d1(e0))};static \u0275cmp=g1({type:s,selectors:[["note-index"]],standalone:!0,features:[w1],decls:3,vars:2,consts:[[3,"addNote"],[1,"notes-layout"],["noteHover","",1,"note-preview",2,"position","relative",3,"ngStyle","fly-animation"],["noteHover","",1,"note-preview",2,"position","relative",3,"click","ngStyle"],[3,"note"],[1,"icons-container",3,"noteAction","noteId"],[3,"selectedColor","noteId","noteColor","selectedNote","isColorPickerOpen"]],template:function(o,c){o&1&&(I(0,"add-note",0),q("addNote",function(n){return c.onNoteAction(n)}),P(),d2(1,Lx,4,0)(2,yx,1,0,"loader")),o&2&&(j(),o2(1,c.isLoadingNotes?-1:1),j(),o2(2,c.notes.length?-1:2))},dependencies:[Y8,Q8,w2,I9,hi,d8,S8,w8,E5,w4],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:2;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]{position:relative;break-inside:avoid;display:flex;flex-direction:column;padding:10px 10px 40px;border-radius:5px;scale:1;transition:filter .3s,transform .3s,scale .2s}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]:before{background-color:linear-gradient(#333,#fff)}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.1;position:absolute;right:0;top:0;width:30px;height:30px;transition:opacity .4s;border:none;background-color:transparent}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00000052;color:#fff;opacity:1;border-radius:0 5px;cursor:pointer}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{position:absolute;bottom:2px;display:flex;transition:opacity .2s ease-in;gap:10px;width:100%;left:0;padding:5px 0;align-items:center;justify-content:center;background-color:#ffffff2c;border-top:1px solid rgba(0,0,0,.267);opacity:0}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   .icons-container.hovered[_ngcontent-%COMP%]{opacity:1}.note-preview.hovered[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{opacity:1}.notes-layout[_ngcontent-%COMP%]{padding-inline:5px;columns:300px auto;column-gap:10px}.notes-layout[_ngcontent-%COMP%]   .note-preview[_ngcontent-%COMP%]{margin-block-end:10px}@media (max-width: 800px){.notes-layout[_ngcontent-%COMP%]{padding:0}}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:2;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"],changeDetection:0})}return s})();var tv=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["App-labels-editor"]],standalone:!0,features:[w1],decls:2,vars:0,template:function(o,c){o&1&&(I(0,"p"),B1(1,"labels-editor works!"),P())},styles:["p[_ngcontent-%COMP%]{color:#fff}"]})}return s})();var ev=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["app-bin"]],standalone:!0,features:[w1],decls:2,vars:0,template:function(o,c){o&1&&(I(0,"p"),B1(1,"bin works!"),P())},dependencies:[w2],styles:["p[_ngcontent-%COMP%]{color:#fff}"],changeDetection:0})}return s})();function Bx(s,t){return this.noteToEdit==null?null:this.noteToEdit.todos}var _x=s=>({background:s});function Ax(s,t){if(s&1&&(I(0,"textarea",3),B1(1," "),P()),s&2){let e=G(2);i1("value",e.noteToEdit.txt)}}function Sx(s,t){if(s&1&&x1(0,"img",4),s&2){let e=G(2);i1("src",e.noteToEdit.imgUrl,C0)}}function Rx(s,t){if(s&1&&x1(0,"img",4),s&2){let e=G(2);i1("src",e.noteToEdit.canvas,C0)}}function bx(s,t){if(s&1){let e=L1();I(0,"li",7)(1,"input",8),q("change",function(c){let r=s1(e).$implicit,n=G(3);return o1(n.setTodoContent(c,r._id))}),P(),I(2,"input",9),q("change",function(){let c=s1(e).$implicit,r=G(3);return o1(r.toggleIsDone(c._id))}),P()()}if(s&2){let e=t.$implicit;j(),C2(e.isDone?"done":"active"),i1("value",e.content),j(),i1("checked",e.isDone)}}function kx(s,t){if(s&1&&(I(0,"div",5)(1,"ul",6),$1(2,bx,3,4,"li",7,Bx,!0),P()()),s&2){let e=G(2);j(2),G1(e.noteToEdit.todos)}}function Ex(s,t){if(s&1){let e=L1();I(0,"div",0),q("click",function(){s1(e);let c=G();return o1(c.closeDialog())}),P(),I(1,"dialog")(2,"form",1),q("submit",function(c){s1(e);let r=G();return o1(r.onUpdateNote(c))}),x1(3,"input",2),d2(4,Ax,2,1,"textarea",3)(5,Sx,1,1,"img",4)(6,Rx,1,1,"img",4)(7,kx,4,0,"div",5),I(8,"button"),B1(9,"Keep"),P()()()}if(s&2){let e=G();j(2),U0(i2(7,_x,e.noteToEdit.color)),j(),i1("value",e.noteToEdit.title),j(),o2(4,e.noteToEdit.type==="txt"?4:-1),j(),o2(5,e.noteToEdit.type==="img"?5:-1),j(),o2(6,e.noteToEdit.type==="canvas"?6:-1),j(),o2(7,e.noteToEdit.type==="todo"?7:-1)}}var sv=(()=>{class s{route;router;noteService;noteToEdit;noteId;constructor(e,o,c){this.route=e,this.router=o,this.noteService=c}ngOnInit(){return S(this,null,function*(){try{this.route.paramMap.subscribe(e=>{this.noteId=e.get("noteId"),this.noteToEdit=this.noteService.getNoteById(this.noteId),this.noteToEdit||this.router.navigate(["notes"])})}catch(e){console.log(e)}})}setTodoContent(e,o){if(!this.noteToEdit.todos)return;let c=this.noteToEdit.todos?.findIndex(r=>r._id===o);this.noteToEdit.todos[c].content=e.target.value,this.noteService.updateNote(this.noteToEdit)}toggleIsDone(e){return S(this,null,function*(){if(!this.noteToEdit.todos)return;let o=this.noteToEdit.todos?.findIndex(c=>c._id===e);this.noteToEdit.todos[o].isDone=!this.noteToEdit.todos[o].isDone,yield this.noteService.updateNote(this.noteToEdit)})}onUpdateNote(e){if(e.preventDefault(),!this.noteToEdit)return;let o=e.target,c=o.elements.namedItem("title"),r=o.elements.namedItem(z4);this.noteToEdit.title=c.value,this.noteToEdit.type===z4&&(this.noteToEdit.txt=r.value),this.noteService.updateNote(this.noteToEdit),this.router.navigate(["notes"])}closeDialog(){this.router.navigate(["notes"])}static \u0275fac=function(o){return new(o||s)(d1(o0),d1(h2),d1(K2))};static \u0275cmp=g1({type:s,selectors:[["App-note-details"]],standalone:!0,features:[w1],decls:1,vars:1,consts:[[1,"backdrop",3,"click"],[1,"add-note-container",3,"submit"],["type","text","placeholder","Title...","name","title",3,"value"],["placeholder"," How are you today...","name","txt",3,"value"],[2,"height","auto","width","100%","object-fit","cover",3,"src"],[1,"todos-layout"],[1,"todos-container","flex","flex-col"],[1,"todo-item"],["type","text","maxlength","30",1,"todo-input",3,"change","value"],["type","checkbox",3,"change","checked"]],template:function(o,c){o&1&&d2(0,Ex,10,9),o&2&&o2(0,c.noteId?0:-1)},dependencies:[F3,N3,O3,he,E5],styles:[".add-note-container[_ngcontent-%COMP%]{outline:1px solid #585858;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:relative;border-radius:5px;color:#fff;display:grid;margin:auto;min-width:20%;max-width:600px;height:fit-content;margin-block-end:20px;margin-block-start:10px}.add-note-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-size:24px;font-weight:500}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#3b3e41;padding:15px 0 10px 10px;border-radius:5px 5px 0 0;transition:.2s background-color ease-in;font-weight:600;font-size:1.2em;color:#fff}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#000;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0 0 5px 5px;background-color:#3b3e41;color:#fff;transition:.2s background-color ease-in;padding-inline-start:10px;padding-block-start:10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;resize:none;height:calc(100px + 5vh);border:none;font-size:1em}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:16px;font-weight:400}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{color:#000;outline:none;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;outline:1px solid rgba(255,255,255,.123);padding:5px 30px;background:#33333369;justify-self:start;cursor:pointer;border:none;font-size:1rem;width:50px;height:auto;display:flex;align-items:center;justify-content:center;border-radius:5px;color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;opacity:.7;background-color:#fff}.icons-container[_ngcontent-%COMP%]{display:flex;padding:2px 5px 5px;outline:1px solid rgba(255,255,255,.123);border-radius:5px;position:absolute;bottom:10px;left:10px;gap:5px}.icons-container[_ngcontent-%COMP%]   .note-icon[_ngcontent-%COMP%]{font-size:1.5rem}.img-container[_ngcontent-%COMP%]{position:relative;width:100%;height:calc(100px + 5vh);background:#3b3e41;display:flex;align-items:center;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:80%;height:100%}.img-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;width:fit-content;top:10px;left:10px;padding:5px;height:30px}.todos-container[_ngcontent-%COMP%]{padding-inline-start:10px;padding-block-start:5px;background:#3b3e41;padding:inline;min-height:calc(100px + 5vh);display:flex;flex-direction:column}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{padding-inline-end:10px;display:flex;align-items:center}.todos-container[_ngcontent-%COMP%]   .add-todo-btn[_ngcontent-%COMP%]{position:relative;margin-inline-start:10px;margin-block-start:90%;padding:0;width:20px;height:20px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]{background-color:transparent;padding:0;font-weight:100;font-size:14px;border-bottom:1px solid rgba(255,255,255,.123);line-height:5px;color:#ffffffa6;width:100%;padding-block:10px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]::placeholder{font-size:1rem;font-weight:100;font-size:14px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]:focus{background-color:transparent;color:#fff}.delete-todo-btn[_ngcontent-%COMP%]{position:absolute;right:10px;font-family:cursive;outline:1px solid rgba(255,255,255,.123);background-color:#33333369;color:#fff;height:20px;width:20px;display:flex;align-items:end;justify-content:center;border-radius:50%}.delete-todo-btn[_ngcontent-%COMP%]:hover{color:#f08080;color:#000;opacity:.7;background-color:#fff;cursor:pointer}.colors-container[_ngcontent-%COMP%]{padding:5px;position:absolute;display:flex;gap:5px;left:235px;border-radius:5px;bottom:10px}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{transition:scale .1s;cursor:pointer;width:22px;height:22px;border-radius:50%}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.colors-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(110%);scale:1.2}",'@charset "UTF-8";img[_ngcontent-%COMP%]{margin-block-start:10px;width:100%;border-radius:5px;object-fit:cover;max-height:220px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}.todos-container[_ngcontent-%COMP%]{border-radius:5px;margin-block-start:10px;margin-block-end:10px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;padding:5px;background-color:#ffffff4b;display:grid;gap:5px}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{text-decoration:line-through}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:25px;margin-inline-end:5px}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}','@charset "UTF-8";dialog[_ngcontent-%COMP%]{height:fit-content;z-index:20;inset:0;margin:auto;position:fixed;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;color:#000}dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{outline:1px black solid}dialog[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:gray}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]{height:fit-content;min-width:450px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:fit-content;color:#000;padding:10px;min-height:150px;font-size:20px;font-weight:400;background-color:transparent}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0 0 5px 5px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;font-size:28px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000;background-color:transparent}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder, dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#333}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]{padding-inline:10px;color:#000;position:relative;padding-block-end:50px}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:focus{outline:none;border:none}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;grid-column:2;margin:0;transition:background-color .3s,border-color .3s;transform:translateY(-13px)}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;font-size:15px;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s;grid-column:2;margin:0;transform:translateY(-13px)}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .input-todo[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:90%;border-bottom:none;font-size:16px;font-weight:100;padding-inline-start:10px}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:transparent;color:#000}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;transition:.2s ease;background:#00000080;z-index:10}@media (max-width: 600px){dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100vw;border-radius:0}dialog[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   .add-note-container[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   textarea[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]{padding-bottom:10%;border-radius:0;overflow:unset;width:97%;height:fit-content}dialog[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   .add-note-container[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]{border-radius:0}dialog[_ngcontent-ng-c4077960885][_ngcontent-%COMP%]   .todos-layout[_ngcontent-ng-c4077960885][_ngcontent-%COMP%]{width:100vw;border-radius:0;padding-bottom:20px}dialog[_ngcontent-ng-c4077960885][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;margin:auto}}']})}return s})();var ov=[{path:"labels",component:tv},{path:"notes",component:X8,children:[{path:":noteId",component:sv}]},{path:"bin",component:ev},{path:c0,redirectTo:"/notes",pathMatch:"full"},{path:"**",redirectTo:"/notes"}];var Tx="@",Ix=(()=>{let t=class t{constructor(o,c,r,n,a){this.doc=o,this.delegate=c,this.zone=r,this.animationType=n,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=D(H9,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-JIJOBE64.js")).catch(c=>{throw new H1(5300,!1)}).then(({\u0275createEngine:c,\u0275AnimationRendererFactory:r})=>{this._engine=c(this.animationType,this.doc,this.scheduler);let n=new r(this.delegate,this._engine,this.zone);return this.delegate=n,n})}createRenderer(o,c){let r=this.delegate.createRenderer(o,c);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let n=new s7(r);return c?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let h=a.createRenderer(o,c);n.use(h)}).catch(a=>{n.use(r)}),n}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(c){je()},t.\u0275prov=t1({token:t,factory:t.\u0275fac});let s=t;return s})(),s7=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,o,c){this.delegate.insertBefore(t,e,o,c)}removeChild(t,e,o){this.delegate.removeChild(t,e,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,c){this.delegate.setAttribute(t,e,o,c)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,c){this.delegate.setStyle(t,e,o,c)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){this.shouldReplay(e)&&this.replay.push(c=>c.setProperty(t,e,o)),this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.shouldReplay(e)&&this.replay.push(c=>c.listen(t,e,o)),this.delegate.listen(t,e,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(Tx)}};function cv(s="animations"){return qe("NgAsyncAnimations"),M0([{provide:Ze,useFactory:(t,e,o)=>new Ix(t,e,o,s),deps:[N1,es,I1]},{provide:Vo,useValue:s==="noop"?"NoopAnimations":"BrowserAnimations"}])}var rv={providers:[Ga(ov),na(),cv("noop")]};var nv='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"></path></svg>';var lv='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>';var mt=(()=>{class s{menuOpenSubject=new q1(!0);menuOpen$=this.menuOpenSubject.asObservable();toggleMenu(){this.menuOpenSubject.next(!this.menuOpenSubject.value)}static \u0275fac=function(o){return new(o||s)};static \u0275prov=t1({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var av=(()=>{class s{menuService;noteService;searchTerm$=new A2;loggedInUser={username:""};isMenuOpen=!0;toggleMenuClick=new T1;constructor(e,o){this.menuService=e,this.noteService=o,this.searchTerm$.pipe(Te(500)).subscribe(c=>this.noteService.filterNotes(c))}handleToggleMenu(){this.menuService.toggleMenu()}onSearchNotes(e){let o=e.target.value;this.searchTerm$.next(o)}static \u0275fac=function(o){return new(o||s)(d1(mt),d1(K2))};static \u0275cmp=g1({type:s,selectors:[["navbar"]],outputs:{toggleMenuClick:"toggleMenuClick"},standalone:!0,features:[V2([],[B0({heroBars4:nv,heroUserCircle:lv})]),w1],decls:6,vars:1,consts:[["name","heroBars4",1,"hamburger-svg",3,"click"],["type","text","placeholder","Search note...",1,"header-input",3,"input"],[2,"display","flex","align-items","center","gap","5px"],[2,"font-size","15px"],["name","heroUserCircle",1,"hamburger-svg"]],template:function(o,c){o&1&&(I(0,"ng-icon",0),q("click",function(){return c.handleToggleMenu()}),P(),I(1,"input",1),q("input",function(n){return c.onSearchNotes(n)}),P(),I(2,"div",2)(3,"p",3),B1(4),P(),x1(5,"ng-icon",4),P()),o&2&&(j(4),t0(c.loggedInUser.username))},dependencies:[_0],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:2;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}.header-input[_ngcontent-%COMP%]{color:#fff;outline:1px solid rgba(255,255,255,.2);transition:.2s ease-in;width:40%;min-width:418px;padding:15px 10px;font-size:1rem;background-color:#7788992d;border-radius:5px}.header-input[_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-weight:100}.header-input[_ngcontent-%COMP%]:focus{color:#000;background-color:#ffffffb6}.header-input[_ngcontent-%COMP%]:focus::placeholder{font-weight:100}.hamburger-svg[_ngcontent-%COMP%]{font-size:30px}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:2;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"]})}return s})();var iv='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z"></path><path fill-rule="evenodd" d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.133 2.845a.75.75 0 0 1 1.06 0l1.72 1.72 1.72-1.72a.75.75 0 1 1 1.06 1.06l-1.72 1.72 1.72 1.72a.75.75 0 1 1-1.06 1.06L12 15.685l-1.72 1.72a.75.75 0 1 1-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg>';var hv='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M11.097 1.515a.75.75 0 0 1 .589.882L10.666 7.5h4.47l1.079-5.397a.75.75 0 1 1 1.47.294L16.665 7.5h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.2 6h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103h-4.47l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103H3.75a.75.75 0 0 1 0-1.5h3.885l1.2-6H5.25a.75.75 0 0 1 0-1.5h3.885l1.08-5.397a.75.75 0 0 1 .882-.588ZM10.365 9l-1.2 6h4.47l1.2-6h-4.47Z" clip-rule="evenodd"></path></svg>';var vv='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"></path></svg>';var Px=s=>({selected:s});function Dx(s,t){if(s&1){let e=L1();I(0,"div",1),q("click",function(){let c=s1(e).$implicit,r=G();return o1(r.handleRouteSelect(c.route))}),I(1,"p"),B1(2),P(),x1(3,"ng-icon",2),P()}if(s&2){let e=t.$implicit,o=G();i1("ngClass",i2(3,Px,o.selectedRoute===e.route)),j(2),t0(e.label),j(),i1("name",e.svg)}}var gv=(()=>{class s{router;menuService;notesService;noteRef;isMenuOpen=!0;notesLength=0;selectedRoute="notes";links=[{label:"Notes",svg:"heroPencilSolid",route:"notes"},{label:"Labels",svg:"heroHashtagSolid",route:"labels"},{label:"Bin",svg:"heroArchiveBoxXMarkSolid",route:"bin"}];constructor(e,o,c,r){this.router=e,this.menuService=o,this.notesService=c,this.noteRef=r}ngOnInit(){this.notesService.notes$.subscribe(e=>{this.notesLength=e.length,this.links[0].label=`Notes (${this.notesLength})`,this.noteRef.markForCheck()})}handleRouteSelect(e){this.selectedRoute=e,this.router.navigate([e])}static \u0275fac=function(o){return new(o||s)(d1(h2),d1(mt),d1(K2),d1(e0))};static \u0275cmp=g1({type:s,selectors:[["sidebar"]],inputs:{isMenuOpen:"isMenuOpen"},standalone:!0,features:[V2([],[B0({heroPencilSolid:vv,heroHashtagSolid:hv,heroArchiveBoxXMarkSolid:iv})]),w1],decls:2,vars:0,consts:[[1,"sidebar-link",3,"ngClass"],[1,"sidebar-link",3,"click","ngClass"],[3,"name"]],template:function(o,c){o&1&&$1(0,Dx,4,5,"div",0,b2),o&2&&G1(c.links)},dependencies:[w2,Qe,_0],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:2;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"],changeDetection:0})}return s})();var dv=(s,t)=>({open:s,closed:t}),Ox=(s,t)=>({"open-index":s,"closed-index":t}),wv=(()=>{class s{menuService;title="Google Keep";constructor(e){this.menuService=e}static \u0275fac=function(o){return new(o||s)(d1(mt))};static \u0275cmp=g1({type:s,selectors:[["app-root"]],standalone:!0,features:[w1],decls:12,vars:24,consts:[[1,"app-container","main-layout"],[1,"navbar",3,"ngClass"],[1,"note-index","content-container",3,"ngClass"],[1,"sidebar",3,"ngClass"]],template:function(o,c){o&1&&(I(0,"main",0)(1,"navbar",1),G0(2,"async"),G0(3,"async"),B1(4," >"),P(),I(5,"main",2),G0(6,"async"),G0(7,"async"),x1(8,"router-outlet"),P(),x1(9,"sidebar",3),G0(10,"async"),G0(11,"async"),P()),o&2&&(j(),i1("ngClass",$e(15,dv,W0(2,3,c.menuService.menuOpen$),!W0(3,5,c.menuService.menuOpen$))),j(4),i1("ngClass",$e(18,Ox,W0(6,7,c.menuService.menuOpen$),!W0(7,9,c.menuService.menuOpen$))),j(4),i1("ngClass",$e(21,dv,W0(10,11,c.menuService.menuOpen$),!W0(11,13,c.menuService.menuOpen$))))},dependencies:[w2,Qe,P9,av,gv,E5,w4],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:2;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"]})}return s})();ca(wv,rv).catch(s=>console.error(s));
