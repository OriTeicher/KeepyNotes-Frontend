import{$ as go,$a as i2,A as ao,Aa as kt,Ab as f9,B as He,Ba as Re,Bb as z9,C as io,Ca as be,Cb as D1,D as e9,Da as Et,Db as x9,E as p0,Ea as K,Eb as Co,F as g5,Fa as w1,Fb as M9,G as O0,Ga as ke,Gb as C9,H as Le,Ha as v9,Hb as Pt,I as ho,Ia as Ee,Ib as Vo,J as m0,Ja as Te,Jb as Fe,K as s9,Ka as Ie,Kb as V9,L as St,La as k1,Lb as H9,M as f0,Ma as po,Mb as h2,N as vo,Na as g9,Nb as L9,O as o9,Oa as mo,Ob as y9,P as c9,Pa as p5,Pb as Ot,Q as r9,Qa as w9,Qb as B9,R as ye,Ra as fo,Rb as _9,S as p2,Sa as zo,T as Be,Ta as J2,U as I1,Ua as m1,V as x1,Va as m5,W as n9,Wa as Tt,X as J,Xa as k2,Y as Y1,Ya as B2,Z as l9,Za as X2,_ as s1,_a as a2,a as k,aa as Q,ab as Z,b as l1,ba as I,bb as U,c as $7,ca as Rt,cb as C1,d as Rv,da as _e,db as c2,e as S,ea as bt,eb as i1,f as Ce,fa as b2,fb as h1,g as W7,ga as g1,gb as H1,h as K7,ha as J1,hb as _2,i as Q7,ia as L2,ib as E2,j as Y7,ja as z0,jb as d1,k as J7,ka as a9,kb as f2,l as ro,la as w5,lb as De,m as no,ma as y2,mb as N0,n as lo,na as d5,nb as F0,o as H2,oa as Z1,ob as Pe,p as j1,pa as U1,pb as Oe,q as u0,qa as Ae,qb as xo,r as Q1,ra as u5,rb as It,s as q,sa as wo,sb as Dt,t as At,ta as m2,tb as d9,u as Ve,ua as b1,ub as Ne,v as X7,va as i9,vb as t0,w as t9,wa as Se,wb as u9,x as a1,xa as h9,xb as p9,y as v5,ya as Y2,yb as m9,z as l2,za as uo,zb as Mo}from"./chunk-KKYWLEF2.js";var Ze=class s{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let o=e.indexOf(":");if(o>0){let c=e.slice(0,o),r=c.toLowerCase(),n=e.slice(o+1).trim();this.maybeSetNormalizedName(c,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,o)=>{this.setHeaderEntries(o,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,o])=>{this.setHeaderEntries(e,o)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new s;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof s?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(t.name,e);let c=(t.op==="a"?this.headers.get(e):void 0)||[];c.push(...o),this.headers.set(e,c);break;case"d":let r=t.value;if(!r)this.headers.delete(e),this.normalizedNames.delete(e);else{let n=this.headers.get(e);if(!n)return;n=n.filter(a=>r.indexOf(a)===-1),n.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,n)}break}}setHeaderEntries(t,e){let o=(Array.isArray(e)?e:[e]).map(r=>r.toString()),c=t.toLowerCase();this.headers.set(c,o),this.maybeSetNormalizedName(t,c)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var I9=function(s){return s[s.Sent=0]="Sent",s[s.UploadProgress=1]="UploadProgress",s[s.ResponseHeader=2]="ResponseHeader",s[s.DownloadProgress=3]="DownloadProgress",s[s.Response=4]="Response",s[s.User=5]="User",s}(I9||{}),Ho=class{constructor(t,e=D9.Ok,o="OK"){this.headers=t.headers||new Ze,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Ue=class s extends Ho{constructor(t={}){super(t),this.type=I9.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new s({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var D9=function(s){return s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Processing=102]="Processing",s[s.EarlyHints=103]="EarlyHints",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultiStatus=207]="MultiStatus",s[s.AlreadyReported=208]="AlreadyReported",s[s.ImUsed=226]="ImUsed",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.Unused=306]="Unused",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.PayloadTooLarge=413]="PayloadTooLarge",s[s.UriTooLong=414]="UriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RangeNotSatisfiable=416]="RangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.MisdirectedRequest=421]="MisdirectedRequest",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.Locked=423]="Locked",s[s.FailedDependency=424]="FailedDependency",s[s.TooEarly=425]="TooEarly",s[s.UpgradeRequired=426]="UpgradeRequired",s[s.PreconditionRequired=428]="PreconditionRequired",s[s.TooManyRequests=429]="TooManyRequests",s[s.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",s[s.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported",s[s.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",s[s.InsufficientStorage=507]="InsufficientStorage",s[s.LoopDetected=508]="LoopDetected",s[s.NotExtended=510]="NotExtended",s[s.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",s}(D9||{});var Ev=new s1("");var A9="b",S9="h",R9="s",b9="st",k9="u",E9="rt",je=new s1(""),Tv=["GET","HEAD"];function Iv(s,t){let u=I(je),{isCacheActive:e}=u,o=$7(u,["isCacheActive"]),{transferCache:c,method:r}=s;if(!e||r==="POST"&&!o.includePostRequests&&!c||r!=="POST"&&!Tv.includes(r)||c===!1||o.filter?.(s)===!1)return t(s);let n=I(Re),a=Pv(s),h=n.get(a,null),v=o.includeHeaders;if(typeof c=="object"&&c.includeHeaders&&(v=c.includeHeaders),h){let{[A9]:z,[E9]:y,[S9]:A,[R9]:R,[b9]:B,[k9]:O}=h,F=z;switch(y){case"arraybuffer":F=new TextEncoder().encode(z).buffer;break;case"blob":F=new Blob([z]);break}let D=new Ze(A);return q(new Ue({body:F,headers:D,status:R,statusText:B,url:O}))}let w=Ot(I(Y2));return t(s).pipe(I1(z=>{z instanceof Ue&&w&&n.set(a,{[A9]:z.body,[S9]:Dv(z.headers,v),[R9]:z.status,[b9]:z.statusText,[k9]:z.url||"",[E9]:s.responseType})}))}function Dv(s,t){if(!t)return{};let e={};for(let o of t){let c=s.getAll(o);c!==null&&(e[o]=c)}return e}function T9(s){return[...s.keys()].sort().map(t=>`${t}=${s.getAll(t)}`).join("&")}function Pv(s){let{params:t,method:e,responseType:o,url:c}=s,r=T9(t),n=s.serializeBody();n instanceof URLSearchParams?n=T9(n):typeof n!="string"&&(n="");let a=[e,o,c,n,r].join("|"),h=Ov(a);return h}function Ov(s){let t=0;for(let e of s)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function P9(s){return[{provide:je,useFactory:()=>(Ie("NgHttpTransferCache"),k({isCacheActive:!0},s))},{provide:Ev,useValue:Iv,multi:!0,deps:[Re,je]},{provide:It,multi:!0,useFactory:()=>{let t=I(Dt),e=I(je);return()=>{d9(t).then(()=>{e.isCacheActive=!1})}}}]}var Bo=class extends z9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_o=class s extends Bo{static makeCurrent(){f9(new s)}onAndCancel(t,e,o){return t.addEventListener(e,o),()=>{t.removeEventListener(e,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Fv();return e==null?null:jv(e)}resetBaseElement(){Nt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Vo(document.cookie,t)}},Nt=null;function Fv(){return Nt=Nt||document.querySelector("base"),Nt?Nt.getAttribute("href"):null}function jv(s){return new URL(s,document.baseURI).pathname}var Zv=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})(),Ao=new s1(""),F9=(()=>{let t=class t{constructor(o,c){this._zone=c,this._eventNameToPlugin=new Map,o.forEach(r=>{r.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,c,r){return this._findPluginFor(c).addEventListener(o,c,r)}getZone(){return this._zone}_findPluginFor(o){let c=this._eventNameToPlugin.get(o);if(c)return c;if(c=this._plugins.find(n=>n.supports(o)),!c)throw new x1(5101,!1);return this._eventNameToPlugin.set(o,c),c}};t.\u0275fac=function(c){return new(c||t)(Q(Ao),Q(k1))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})(),qe=class{constructor(t){this._doc=t}},Lo="ng-app-id",j9=(()=>{let t=class t{constructor(o,c,r,n={}){this.doc=o,this.appId=c,this.nonce=r,this.platformId=n,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ot(n),this.resetHostNodes()}addStyles(o){for(let c of o)this.changeUsageCount(c,1)===1&&this.onStyleAdded(c)}removeStyles(o){for(let c of o)this.changeUsageCount(c,-1)<=0&&this.onStyleRemoved(c)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(c=>c.remove()),o.clear());for(let c of this.getAllStyles())this.onStyleRemoved(c);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let c of this.getAllStyles())this.addStyleToHost(o,c)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let c of this.hostNodes)this.addStyleToHost(c,o)}onStyleRemoved(o){let c=this.styleRef;c.get(o)?.elements?.forEach(r=>r.remove()),c.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${Lo}="${this.appId}"]`);if(o?.length){let c=new Map;return o.forEach(r=>{r.textContent!=null&&c.set(r.textContent,r)}),c}return null}changeUsageCount(o,c){let r=this.styleRef;if(r.has(o)){let n=r.get(o);return n.usage+=c,n.usage}return r.set(o,{usage:c,elements:[]}),c}getStyleElement(o,c){let r=this.styleNodesInDOM,n=r?.get(c);if(n?.parentNode===o)return r.delete(c),n.removeAttribute(Lo),n;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=c,this.platformIsServer&&a.setAttribute(Lo,this.appId),o.appendChild(a),a}}addStyleToHost(o,c){let r=this.getStyleElement(o,c),n=this.styleRef,a=n.get(c)?.elements;a?a.push(r):n.set(c,{elements:[r],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};t.\u0275fac=function(c){return new(c||t)(Q(D1),Q(Se),Q(kt,8),Q(Y2))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})(),yo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ko=/%COMP%/g,Z9="%COMP%",Uv=`_nghost-${Z9}`,qv=`_ngcontent-${Z9}`,Gv=!0,$v=new s1("",{providedIn:"root",factory:()=>Gv});function Wv(s){return qv.replace(ko,s)}function Kv(s){return Uv.replace(ko,s)}function U9(s,t){return t.map(e=>e.replace(ko,s))}var Ge=(()=>{let t=class t{constructor(o,c,r,n,a,h,v,w=null){this.eventManager=o,this.sharedStylesHost=c,this.appId=r,this.removeStylesOnCompDestroy=n,this.doc=a,this.platformId=h,this.ngZone=v,this.nonce=w,this.rendererByCompId=new Map,this.platformIsServer=Ot(h),this.defaultRenderer=new Ft(o,a,v,this.platformIsServer)}createRenderer(o,c){if(!o||!c)return this.defaultRenderer;this.platformIsServer&&c.encapsulation===bt.ShadowDom&&(c=l1(k({},c),{encapsulation:bt.Emulated}));let r=this.getOrCreateRenderer(o,c);return r instanceof $e?r.applyToHost(o):r instanceof jt&&r.applyStyles(),r}getOrCreateRenderer(o,c){let r=this.rendererByCompId,n=r.get(c.id);if(!n){let a=this.doc,h=this.ngZone,v=this.eventManager,w=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,z=this.platformIsServer;switch(c.encapsulation){case bt.Emulated:n=new $e(v,w,c,this.appId,u,a,h,z);break;case bt.ShadowDom:return new So(v,w,o,c,a,h,this.nonce,z);default:n=new jt(v,w,c,u,a,h,z);break}r.set(c.id,n)}return n}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(c){return new(c||t)(Q(F9),Q(j9),Q(Se),Q($v),Q(D1),Q(Y2),Q(k1),Q(kt))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})(),Ft=class{constructor(t,e,o,c){this.eventManager=t,this.doc=e,this.ngZone=o,this.platformIsServer=c,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(yo[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(O9(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(O9(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o=typeof t=="string"?this.doc.querySelector(t):t;if(!o)throw new x1(-5104,!1);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,c){if(c){e=c+":"+e;let r=yo[c];r?t.setAttributeNS(r,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){let c=yo[o];c?t.removeAttributeNS(c,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,c){c&(Et.DashCase|Et.Important)?t.style.setProperty(e,o,c&Et.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&Et.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t!=null&&(t[e]=o)}setValue(t,e){t.nodeValue=e}listen(t,e,o){if(typeof t=="string"&&(t=Mo().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(o))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function O9(s){return s.tagName==="TEMPLATE"&&s.content!==void 0}var So=class extends Ft{constructor(t,e,o,c,r,n,a,h){super(t,r,n,h),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let v=U9(c.id,c.styles);for(let w of v){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=w,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jt=class extends Ft{constructor(t,e,o,c,r,n,a,h){super(t,r,n,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=c,this.styles=h?U9(h,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$e=class extends jt{constructor(t,e,o,c,r,n,a,h){let v=c+"-"+o.id;super(t,e,o,r,n,a,h,v),this.contentAttr=Wv(v),this.hostAttr=Kv(v)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}},Qv=(()=>{let t=class t extends qe{constructor(o){super(o)}supports(o){return!0}addEventListener(o,c,r){return o.addEventListener(c,r,!1),()=>this.removeEventListener(o,c,r)}removeEventListener(o,c,r){return o.removeEventListener(c,r)}};t.\u0275fac=function(c){return new(c||t)(Q(D1))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})(),N9=["alt","control","meta","shift"],Yv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jv={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey},Xv=(()=>{let t=class t extends qe{constructor(o){super(o)}supports(o){return t.parseEventName(o)!=null}addEventListener(o,c,r){let n=t.parseEventName(c),a=t.eventCallback(n.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mo().onAndCancel(o,n.domEventName,a))}static parseEventName(o){let c=o.toLowerCase().split("."),r=c.shift();if(c.length===0||!(r==="keydown"||r==="keyup"))return null;let n=t._normalizeKey(c.pop()),a="",h=c.indexOf("code");if(h>-1&&(c.splice(h,1),a="code."),N9.forEach(w=>{let u=c.indexOf(w);u>-1&&(c.splice(u,1),a+=w+".")}),a+=n,c.length!=0||n.length===0)return null;let v={};return v.domEventName=r,v.fullKey=a,v}static matchEventFullKeyCode(o,c){let r=Yv[o.key]||o.key,n="";return c.indexOf("code.")>-1&&(r=o.code,n="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),N9.forEach(a=>{if(a!==r){let h=Jv[a];h(o)&&(n+=a+".")}}),n+=r,n===c)}static eventCallback(o,c,r){return n=>{t.matchEventFullKeyCode(n,o)&&r.runGuarded(()=>c(n))}}static _normalizeKey(o){return o==="esc"?"escape":o}};t.\u0275fac=function(c){return new(c||t)(Q(D1))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})();function q9(s,t){return u9(k({rootComponent:s},tg(t)))}function tg(s){return{appProviders:[...rg,...s?.providers??[]],platformProviders:cg}}function eg(){_o.makeCurrent()}function sg(){return new wo}function og(){return i9(document),document}var cg=[{provide:Y2,useValue:L9},{provide:h9,useValue:eg,multi:!0},{provide:D1,useFactory:og,deps:[]}];var rg=[{provide:a9,useValue:"root"},{provide:wo,useFactory:sg,deps:[]},{provide:Ao,useClass:Qv,multi:!0,deps:[D1,k1,Y2]},{provide:Ao,useClass:Xv,multi:!0,deps:[D1]},Ge,j9,F9,{provide:Ee,useExisting:Ge},{provide:_9,useClass:Zv,deps:[]},[]];var G9=(()=>{let t=class t{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};t.\u0275fac=function(c){return new(c||t)(Q(D1))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var Ro=function(s){return s[s.NoHttpTransferCache=0]="NoHttpTransferCache",s[s.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",s}(Ro||{});function $9(...s){let t=[],e=new Set,o=e.has(Ro.HttpTransferCacheOptions);for(let{\u0275providers:c,\u0275kind:r}of s)e.add(r),c.length&&t.push(c);return z0([[],p9(),e.has(Ro.NoHttpTransferCache)||o?[]:P9({}),t])}var X="primary",c4=Symbol("RouteTitle"),Po=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function C5(s){return new Po(s)}function lg(s,t,e){let o=e.path.split("/");if(o.length>s.length||e.pathMatch==="full"&&(t.hasChildren()||o.length<s.length))return null;let c={};for(let r=0;r<o.length;r++){let n=o[r],a=s[r];if(n.startsWith(":"))c[n.substring(1)]=a;else if(n!==a.path)return null}return{consumed:s.slice(0,o.length),posParams:c}}function ag(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;++e)if(!T2(s[e],t[e]))return!1;return!0}function T2(s,t){let e=s?Oo(s):void 0,o=t?Oo(t):void 0;if(!e||!o||e.length!=o.length)return!1;let c;for(let r=0;r<e.length;r++)if(c=e[r],!ca(s[c],t[c]))return!1;return!0}function Oo(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function ca(s,t){if(Array.isArray(s)&&Array.isArray(t)){if(s.length!==t.length)return!1;let e=[...s].sort(),o=[...t].sort();return e.every((c,r)=>o[r]===c)}else return s===t}function ra(s){return s.length>0?s[s.length-1]:null}function V0(s){return Ve(s)?s:Oe(s)?Q1(Promise.resolve(s)):q(s)}var ig={exact:la,subset:aa},na={exact:hg,subset:vg,ignored:()=>!0};function W9(s,t,e){return ig[e.paths](s.root,t.root,e.matrixParams)&&na[e.queryParams](s.queryParams,t.queryParams)&&!(e.fragment==="exact"&&s.fragment!==t.fragment)}function hg(s,t){return T2(s,t)}function la(s,t,e){if(!Z0(s.segments,t.segments)||!Qe(s.segments,t.segments,e)||s.numberOfChildren!==t.numberOfChildren)return!1;for(let o in t.children)if(!s.children[o]||!la(s.children[o],t.children[o],e))return!1;return!0}function vg(s,t){return Object.keys(t).length<=Object.keys(s).length&&Object.keys(t).every(e=>ca(s[e],t[e]))}function aa(s,t,e){return ia(s,t,t.segments,e)}function ia(s,t,e,o){if(s.segments.length>e.length){let c=s.segments.slice(0,e.length);return!(!Z0(c,e)||t.hasChildren()||!Qe(c,e,o))}else if(s.segments.length===e.length){if(!Z0(s.segments,e)||!Qe(s.segments,e,o))return!1;for(let c in t.children)if(!s.children[c]||!aa(s.children[c],t.children[c],o))return!1;return!0}else{let c=e.slice(0,s.segments.length),r=e.slice(s.segments.length);return!Z0(s.segments,c)||!Qe(s.segments,c,o)||!s.children[X]?!1:ia(s.children[X],t,r,o)}}function Qe(s,t,e){return t.every((o,c)=>na[e](s[c].parameters,o.parameters))}var x0=class{constructor(t=new u1([],{}),e={},o=null){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap??=C5(this.queryParams),this._queryParamMap}toString(){return dg.serialize(this)}},u1=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ye(this)}},j0=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=C5(this.parameters),this._parameterMap}toString(){return va(this)}};function gg(s,t){return Z0(s,t)&&s.every((e,o)=>T2(e.parameters,t[o].parameters))}function Z0(s,t){return s.length!==t.length?!1:s.every((e,o)=>e.path===t[o].path)}function wg(s,t){let e=[];return Object.entries(s.children).forEach(([o,c])=>{o===X&&(e=e.concat(t(c,o)))}),Object.entries(s.children).forEach(([o,c])=>{o!==X&&(e=e.concat(t(c,o)))}),e}var r4=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:()=>new Kt,providedIn:"root"});let s=t;return s})(),Kt=class{parse(t){let e=new Fo(t);return new x0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Zt(t.root,!0)}`,o=mg(t.queryParams),c=typeof t.fragment=="string"?`#${ug(t.fragment)}`:"";return`${e}${o}${c}`}},dg=new Kt;function Ye(s){return s.segments.map(t=>va(t)).join("/")}function Zt(s,t){if(!s.hasChildren())return Ye(s);if(t){let e=s.children[X]?Zt(s.children[X],!1):"",o=[];return Object.entries(s.children).forEach(([c,r])=>{c!==X&&o.push(`${c}:${Zt(r,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}else{let e=wg(s,(o,c)=>c===X?[Zt(s.children[X],!1)]:[`${c}:${Zt(o,!1)}`]);return Object.keys(s.children).length===1&&s.children[X]!=null?`${Ye(s)}/${e[0]}`:`${Ye(s)}/(${e.join("//")})`}}function ha(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function We(s){return ha(s).replace(/%3B/gi,";")}function ug(s){return encodeURI(s)}function No(s){return ha(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Je(s){return decodeURIComponent(s)}function K9(s){return Je(s.replace(/\+/g,"%20"))}function va(s){return`${No(s.path)}${pg(s.parameters)}`}function pg(s){return Object.entries(s).map(([t,e])=>`;${No(t)}=${No(e)}`).join("")}function mg(s){let t=Object.entries(s).map(([e,o])=>Array.isArray(o)?o.map(c=>`${We(e)}=${We(c)}`).join("&"):`${We(e)}=${We(o)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var fg=/^[^\/()?;#]+/;function Eo(s){let t=s.match(fg);return t?t[0]:""}var zg=/^[^\/()?;=#]+/;function xg(s){let t=s.match(zg);return t?t[0]:""}var Mg=/^[^=?&#]+/;function Cg(s){let t=s.match(Mg);return t?t[0]:""}var Vg=/^[^&#]+/;function Hg(s){let t=s.match(Vg);return t?t[0]:""}var Fo=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new u1([],{}):new u1([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[X]=new u1(t,e)),o}parseSegment(){let t=Eo(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new x1(4009,!1);return this.capture(t),new j0(Je(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=xg(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let c=Eo(this.remaining);c&&(o=c,this.capture(o))}t[Je(e)]=Je(o)}parseQueryParam(t){let e=Cg(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let n=Hg(this.remaining);n&&(o=n,this.capture(o))}let c=K9(e),r=K9(o);if(t.hasOwnProperty(c)){let n=t[c];Array.isArray(n)||(n=[n],t[c]=n),n.push(r)}else t[c]=r}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Eo(this.remaining),c=this.remaining[o.length];if(c!=="/"&&c!==")"&&c!==";")throw new x1(4010,!1);let r;o.indexOf(":")>-1?(r=o.slice(0,o.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=X);let n=this.parseChildren();e[r]=Object.keys(n).length===1?n[X]:new u1([],n),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new x1(4011,!1)}};function ga(s){return s.segments.length>0?new u1([],{[X]:s}):s}function wa(s){let t={};for(let[o,c]of Object.entries(s.children)){let r=wa(c);if(o===X&&r.segments.length===0&&r.hasChildren())for(let[n,a]of Object.entries(r.children))t[n]=a;else(r.segments.length>0||r.hasChildren())&&(t[o]=r)}let e=new u1(s.segments,t);return Lg(e)}function Lg(s){if(s.numberOfChildren===1&&s.children[X]){let t=s.children[X];return new u1(s.segments.concat(t.segments),t.children)}return s}function V5(s){return s instanceof x0}function yg(s,t,e=null,o=null){let c=da(s);return ua(c,t,e,o)}function da(s){let t;function e(r){let n={};for(let h of r.children){let v=e(h);n[h.outlet]=v}let a=new u1(r.url,n);return r===s&&(t=a),a}let o=e(s.root),c=ga(o);return t??c}function ua(s,t,e,o){let c=s;for(;c.parent;)c=c.parent;if(t.length===0)return To(c,c,c,e,o);let r=Bg(t);if(r.toRoot())return To(c,c,new u1([],{}),e,o);let n=_g(r,c,s),a=n.processChildren?Gt(n.segmentGroup,n.index,r.commands):ma(n.segmentGroup,n.index,r.commands);return To(c,n.segmentGroup,a,e,o)}function Xe(s){return typeof s=="object"&&s!=null&&!s.outlets&&!s.segmentPath}function Qt(s){return typeof s=="object"&&s!=null&&s.outlets}function To(s,t,e,o,c){let r={};o&&Object.entries(o).forEach(([h,v])=>{r[h]=Array.isArray(v)?v.map(w=>`${w}`):`${v}`});let n;s===t?n=e:n=pa(s,t,e);let a=ga(wa(n));return new x0(a,r,c)}function pa(s,t,e){let o={};return Object.entries(s.children).forEach(([c,r])=>{r===t?o[c]=e:o[c]=pa(r,t,e)}),new u1(s.segments,o)}var ts=class{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&Xe(o[0]))throw new x1(4003,!1);let c=o.find(Qt);if(c&&c!==ra(o))throw new x1(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Bg(s){if(typeof s[0]=="string"&&s.length===1&&s[0]==="/")return new ts(!0,0,s);let t=0,e=!1,o=s.reduce((c,r,n)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([h,v])=>{a[h]=typeof v=="string"?v.split("/"):v}),[...c,{outlets:a}]}if(r.segmentPath)return[...c,r.segmentPath]}return typeof r!="string"?[...c,r]:n===0?(r.split("/").forEach((a,h)=>{h==0&&a==="."||(h==0&&a===""?e=!0:a===".."?t++:a!=""&&c.push(a))}),c):[...c,r]},[]);return new ts(e,t,o)}var x5=class{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}};function _g(s,t,e){if(s.isAbsolute)return new x5(t,!0,0);if(!e)return new x5(t,!1,NaN);if(e.parent===null)return new x5(e,!0,0);let o=Xe(s.commands[0])?0:1,c=e.segments.length-1+o;return Ag(e,c,s.numberOfDoubleDots)}function Ag(s,t,e){let o=s,c=t,r=e;for(;r>c;){if(r-=c,o=o.parent,!o)throw new x1(4005,!1);c=o.segments.length}return new x5(o,!1,c-r)}function Sg(s){return Qt(s[0])?s[0].outlets:{[X]:s}}function ma(s,t,e){if(s??=new u1([],{}),s.segments.length===0&&s.hasChildren())return Gt(s,t,e);let o=Rg(s,t,e),c=e.slice(o.commandIndex);if(o.match&&o.pathIndex<s.segments.length){let r=new u1(s.segments.slice(0,o.pathIndex),{});return r.children[X]=new u1(s.segments.slice(o.pathIndex),s.children),Gt(r,0,c)}else return o.match&&c.length===0?new u1(s.segments,{}):o.match&&!s.hasChildren()?jo(s,t,e):o.match?Gt(s,0,c):jo(s,t,e)}function Gt(s,t,e){if(e.length===0)return new u1(s.segments,{});{let o=Sg(e),c={};if(Object.keys(o).some(r=>r!==X)&&s.children[X]&&s.numberOfChildren===1&&s.children[X].segments.length===0){let r=Gt(s.children[X],t,e);return new u1(s.segments,r.children)}return Object.entries(o).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(c[r]=ma(s.children[r],t,n))}),Object.entries(s.children).forEach(([r,n])=>{o[r]===void 0&&(c[r]=n)}),new u1(s.segments,c)}}function Rg(s,t,e){let o=0,c=t,r={match:!1,pathIndex:0,commandIndex:0};for(;c<s.segments.length;){if(o>=e.length)return r;let n=s.segments[c],a=e[o];if(Qt(a))break;let h=`${a}`,v=o<e.length-1?e[o+1]:null;if(c>0&&h===void 0)break;if(h&&v&&typeof v=="object"&&v.outlets===void 0){if(!Y9(h,v,n))return r;o+=2}else{if(!Y9(h,{},n))return r;o++}c++}return{match:!0,pathIndex:c,commandIndex:o}}function jo(s,t,e){let o=s.segments.slice(0,t),c=0;for(;c<e.length;){let r=e[c];if(Qt(r)){let h=bg(r.outlets);return new u1(o,h)}if(c===0&&Xe(e[0])){let h=s.segments[t];o.push(new j0(h.path,Q9(e[0]))),c++;continue}let n=Qt(r)?r.outlets[X]:`${r}`,a=c<e.length-1?e[c+1]:null;n&&a&&Xe(a)?(o.push(new j0(n,Q9(a))),c+=2):(o.push(new j0(n,{})),c++)}return new u1(o,{})}function bg(s){let t={};return Object.entries(s).forEach(([e,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(t[e]=jo(new u1([],{}),0,o))}),t}function Q9(s){let t={};return Object.entries(s).forEach(([e,o])=>t[e]=`${o}`),t}function Y9(s,t,e){return s==e.path&&T2(t,e.parameters)}var $t="imperative",P1=function(s){return s[s.NavigationStart=0]="NavigationStart",s[s.NavigationEnd=1]="NavigationEnd",s[s.NavigationCancel=2]="NavigationCancel",s[s.NavigationError=3]="NavigationError",s[s.RoutesRecognized=4]="RoutesRecognized",s[s.ResolveStart=5]="ResolveStart",s[s.ResolveEnd=6]="ResolveEnd",s[s.GuardsCheckStart=7]="GuardsCheckStart",s[s.GuardsCheckEnd=8]="GuardsCheckEnd",s[s.RouteConfigLoadStart=9]="RouteConfigLoadStart",s[s.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",s[s.ChildActivationStart=11]="ChildActivationStart",s[s.ChildActivationEnd=12]="ChildActivationEnd",s[s.ActivationStart=13]="ActivationStart",s[s.ActivationEnd=14]="ActivationEnd",s[s.Scroll=15]="Scroll",s[s.NavigationSkipped=16]="NavigationSkipped",s}(P1||{}),z2=class{constructor(t,e){this.id=t,this.url=e}},H5=class extends z2{constructor(t,e,o="imperative",c=null){super(t,e),this.type=P1.NavigationStart,this.navigationTrigger=o,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},e0=class extends z2{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o,this.type=P1.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},g2=function(s){return s[s.Redirect=0]="Redirect",s[s.SupersededByNewNavigation=1]="SupersededByNewNavigation",s[s.NoDataFromResolver=2]="NoDataFromResolver",s[s.GuardRejected=3]="GuardRejected",s}(g2||{}),es=function(s){return s[s.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",s[s.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",s}(es||{}),M0=class extends z2{constructor(t,e,o,c){super(t,e),this.reason=o,this.code=c,this.type=P1.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},C0=class extends z2{constructor(t,e,o,c){super(t,e),this.reason=o,this.code=c,this.type=P1.NavigationSkipped}},Yt=class extends z2{constructor(t,e,o,c){super(t,e),this.error=o,this.target=c,this.type=P1.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ss=class extends z2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=P1.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zo=class extends z2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=P1.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uo=class extends z2{constructor(t,e,o,c,r){super(t,e),this.urlAfterRedirects=o,this.state=c,this.shouldActivate=r,this.type=P1.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qo=class extends z2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=P1.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Go=class extends z2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=P1.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$o=class{constructor(t){this.route=t,this.type=P1.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wo=class{constructor(t){this.route=t,this.type=P1.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ko=class{constructor(t){this.snapshot=t,this.type=P1.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qo=class{constructor(t){this.snapshot=t,this.type=P1.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yo=class{constructor(t){this.snapshot=t,this.type=P1.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jo=class{constructor(t){this.snapshot=t,this.type=P1.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},os=class{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o,this.type=P1.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Jt=class{},Xt=class{constructor(t){this.url=t}};var Xo=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new n4,this.attachRef=null}},n4=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(o,c){let r=this.getOrCreateContext(o);r.outlet=c,this.contexts.set(o,r)}onChildOutletDestroyed(o){let c=this.getContext(o);c&&(c.outlet=null,c.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let c=this.getContext(o);return c||(c=new Xo,this.contexts.set(o,c)),c}getContext(o){return this.contexts.get(o)||null}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),cs=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=tc(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){let e=tc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=ec(t,this._root);return e.length<2?[]:e[e.length-2].children.map(c=>c.value).filter(c=>c!==t)}pathFromRoot(t){return ec(t,this._root).map(e=>e.value)}};function tc(s,t){if(s===t.value)return t;for(let e of t.children){let o=tc(s,e);if(o)return o}return null}function ec(s,t){if(s===t.value)return[t];for(let e of t.children){let o=ec(s,e);if(o.length)return o.unshift(t),o}return[]}var v2=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function z5(s){let t={};return s&&s.children.forEach(e=>t[e.value.outlet]=e),t}var rs=class extends cs{constructor(t,e){super(t),this.snapshot=e,vc(this,t)}toString(){return this.snapshot.toString()}};function fa(s){let t=kg(s),e=new j1([new j0("",{})]),o=new j1({}),c=new j1({}),r=new j1({}),n=new j1(""),a=new s0(e,o,r,n,c,X,s,t.root);return a.snapshot=t.root,new rs(new v2(a,[]),t)}function kg(s){let t={},e={},o={},c="",r=new t4([],t,o,c,e,X,s,null,{});return new ns("",new v2(r,[]))}var s0=class{constructor(t,e,o,c,r,n,a,h){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=o,this.fragmentSubject=c,this.dataSubject=r,this.outlet=n,this.component=a,this._futureSnapshot=h,this.title=this.dataSubject?.pipe(a1(v=>v[c4]))??q(void 0),this.url=t,this.params=e,this.queryParams=o,this.fragment=c,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(a1(t=>C5(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(a1(t=>C5(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hc(s,t,e="emptyOnly"){let o,{routeConfig:c}=s;return t!==null&&(e==="always"||c?.path===""||!t.component&&!t.routeConfig?.loadComponent)?o={params:k(k({},t.params),s.params),data:k(k({},t.data),s.data),resolve:k(k(k(k({},s.data),t.data),c?.data),s._resolvedData)}:o={params:k({},s.params),data:k({},s.data),resolve:k(k({},s.data),s._resolvedData??{})},c&&xa(c)&&(o.resolve[c4]=c.title),o}var t4=class{get title(){return this.data?.[c4]}constructor(t,e,o,c,r,n,a,h,v){this.url=t,this.params=e,this.queryParams=o,this.fragment=c,this.data=r,this.outlet=n,this.component=a,this.routeConfig=h,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=C5(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=C5(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(o=>o.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},ns=class extends cs{constructor(t,e){super(e),this.url=t,vc(this,e)}toString(){return za(this._root)}};function vc(s,t){t.value._routerState=s,t.children.forEach(e=>vc(s,e))}function za(s){let t=s.children.length>0?` { ${s.children.map(za).join(", ")} } `:"";return`${s.value}${t}`}function Io(s){if(s.snapshot){let t=s.snapshot,e=s._futureSnapshot;s.snapshot=e,T2(t.queryParams,e.queryParams)||s.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&s.fragmentSubject.next(e.fragment),T2(t.params,e.params)||s.paramsSubject.next(e.params),ag(t.url,e.url)||s.urlSubject.next(e.url),T2(t.data,e.data)||s.dataSubject.next(e.data)}else s.snapshot=s._futureSnapshot,s.dataSubject.next(s._futureSnapshot.data)}function sc(s,t){let e=T2(s.params,t.params)&&gg(s.url,t.url),o=!s.parent!=!t.parent;return e&&!o&&(!s.parent||sc(s.parent,t.parent))}function xa(s){return typeof s.title=="string"||s.title===null}var l4=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new b1,this.deactivateEvents=new b1,this.attachEvents=new b1,this.detachEvents=new b1,this.parentContexts=I(n4),this.location=I(g9),this.changeDetector=I(t0),this.environmentInjector=I(w5),this.inputBinder=I(gs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:c,previousValue:r}=o.name;if(c)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x1(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x1(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x1(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,c){this.activated=o,this._activatedRoute=c,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,c){if(this.isActivated)throw new x1(4013,!1);this._activatedRoute=o;let r=this.location,a=o.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,v=new oc(o,h,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:v,environmentInjector:c??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=L2({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d5]});let s=t;return s})(),oc=class s{__ngOutletInjector(t){return new s(this.route,this.childContexts,t)}constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===s0?this.route:t===n4?this.childContexts:this.parent.get(t,e)}},gs=new s1(""),J9=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){let{activatedRoute:c}=o,r=v5([c.queryParams,c.params,c.data]).pipe(p2(([n,a,h],v)=>(h=k(k(k({},n),a),h),v===0?q(h):Promise.resolve(h)))).subscribe(n=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==c||c.component===null){this.unsubscribeFromRouteData(o);return}let a=m9(c.component);if(!a){this.unsubscribeFromRouteData(o);return}for(let{templateName:h}of a.inputs)o.activatedComponentRef.setInput(h,n[h])});this.outletDataSubscriptions.set(o,r)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})();function Eg(s,t,e){let o=e4(s,t._root,e?e._root:void 0);return new rs(o,t)}function e4(s,t,e){if(e&&s.shouldReuseRoute(t.value,e.value.snapshot)){let o=e.value;o._futureSnapshot=t.value;let c=Tg(s,t,e);return new v2(o,c)}else{if(s.shouldAttach(t.value)){let r=s.retrieve(t.value);if(r!==null){let n=r.route;return n.value._futureSnapshot=t.value,n.children=t.children.map(a=>e4(s,a)),n}}let o=Ig(t.value),c=t.children.map(r=>e4(s,r));return new v2(o,c)}}function Tg(s,t,e){return t.children.map(o=>{for(let c of e.children)if(s.shouldReuseRoute(o.value,c.value.snapshot))return e4(s,o,c);return e4(s,o)})}function Ig(s){return new s0(new j1(s.url),new j1(s.params),new j1(s.queryParams),new j1(s.fragment),new j1(s.data),s.outlet,s.component,s)}var Ma="ngNavigationCancelingError";function Ca(s,t){let{redirectTo:e,navigationBehaviorOptions:o}=V5(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,c=Va(!1,g2.Redirect);return c.url=e,c.navigationBehaviorOptions=o,c}function Va(s,t){let e=new Error(`NavigationCancelingError: ${s||""}`);return e[Ma]=!0,e.cancellationCode=t,e}function Dg(s){return Ha(s)&&V5(s.url)}function Ha(s){return!!s&&s[Ma]}var Pg=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=g1({type:t,selectors:[["ng-component"]],standalone:!0,features:[d1],decls:1,vars:0,template:function(c,r){c&1&&C1(0,"router-outlet")},dependencies:[l4],encapsulation:2});let s=t;return s})();function Og(s,t){return s.providers&&!s._injector&&(s._injector=fo(s.providers,t,`Route: ${s.path}`)),s._injector??t}function gc(s){let t=s.children&&s.children.map(gc),e=t?l1(k({},s),{children:t}):k({},s);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==X&&(e.component=Pg),e}function I2(s){return s.outlet||X}function Ng(s,t){let e=s.filter(o=>I2(o)===t);return e.push(...s.filter(o=>I2(o)!==t)),e}function a4(s){if(!s)return null;if(s.routeConfig?._injector)return s.routeConfig._injector;for(let t=s.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Fg=(s,t,e,o)=>a1(c=>(new cc(t,c.targetRouterState,c.currentRouterState,e,o).activate(s),c)),cc=class{constructor(t,e,o,c,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=c,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),Io(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){let c=z5(e);t.children.forEach(r=>{let n=r.value.outlet;this.deactivateRoutes(r,c[n],o),delete c[n]}),Object.values(c).forEach(r=>{this.deactivateRouteAndItsChildren(r,o)})}deactivateRoutes(t,e,o){let c=t.value,r=e?e.value:null;if(c===r)if(c.component){let n=o.getContext(c.outlet);n&&this.deactivateChildRoutes(t,e,n.children)}else this.deactivateChildRoutes(t,e,o);else r&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let o=e.getContext(t.value.outlet),c=o&&t.value.component?o.children:e,r=z5(t);for(let n of Object.values(r))this.deactivateRouteAndItsChildren(n,c);if(o&&o.outlet){let n=o.outlet.detach(),a=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:n,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let o=e.getContext(t.value.outlet),c=o&&t.value.component?o.children:e,r=z5(t);for(let n of Object.values(r))this.deactivateRouteAndItsChildren(n,c);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(t,e,o){let c=z5(e);t.children.forEach(r=>{this.activateRoutes(r,c[r.value.outlet],o),this.forwardEvent(new Jo(r.value.snapshot))}),t.children.length&&this.forwardEvent(new Qo(t.value.snapshot))}activateRoutes(t,e,o){let c=t.value,r=e?e.value:null;if(Io(c),c===r)if(c.component){let n=o.getOrCreateContext(c.outlet);this.activateChildRoutes(t,e,n.children)}else this.activateChildRoutes(t,e,o);else if(c.component){let n=o.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){let a=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),n.children.onOutletReAttached(a.contexts),n.attachRef=a.componentRef,n.route=a.route.value,n.outlet&&n.outlet.attach(a.componentRef,a.route.value),Io(a.route.value),this.activateChildRoutes(t,null,n.children)}else{let a=a4(c.snapshot);n.attachRef=null,n.route=c,n.injector=a,n.outlet&&n.outlet.activateWith(c,n.injector),this.activateChildRoutes(t,null,n.children)}}else this.activateChildRoutes(t,null,o)}},ls=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},M5=class{constructor(t,e){this.component=t,this.route=e}};function jg(s,t,e){let o=s._root,c=t?t._root:null;return Ut(o,c,e,[o.value])}function Zg(s){let t=s.routeConfig?s.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:s,guards:t}}function y5(s,t){let e=Symbol(),o=t.get(s,e);return o===e?typeof s=="function"&&!l9(s)?s:t.get(s):o}function Ut(s,t,e,o,c={canDeactivateChecks:[],canActivateChecks:[]}){let r=z5(t);return s.children.forEach(n=>{Ug(n,r[n.value.outlet],e,o.concat([n.value]),c),delete r[n.value.outlet]}),Object.entries(r).forEach(([n,a])=>Wt(a,e.getContext(n),c)),c}function Ug(s,t,e,o,c={canDeactivateChecks:[],canActivateChecks:[]}){let r=s.value,n=t?t.value:null,a=e?e.getContext(s.value.outlet):null;if(n&&r.routeConfig===n.routeConfig){let h=qg(n,r,r.routeConfig.runGuardsAndResolvers);h?c.canActivateChecks.push(new ls(o)):(r.data=n.data,r._resolvedData=n._resolvedData),r.component?Ut(s,t,a?a.children:null,o,c):Ut(s,t,e,o,c),h&&a&&a.outlet&&a.outlet.isActivated&&c.canDeactivateChecks.push(new M5(a.outlet.component,n))}else n&&Wt(t,a,c),c.canActivateChecks.push(new ls(o)),r.component?Ut(s,null,a?a.children:null,o,c):Ut(s,null,e,o,c);return c}function qg(s,t,e){if(typeof e=="function")return e(s,t);switch(e){case"pathParamsChange":return!Z0(s.url,t.url);case"pathParamsOrQueryParamsChange":return!Z0(s.url,t.url)||!T2(s.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sc(s,t)||!T2(s.queryParams,t.queryParams);case"paramsChange":default:return!sc(s,t)}}function Wt(s,t,e){let o=z5(s),c=s.value;Object.entries(o).forEach(([r,n])=>{c.component?t?Wt(n,t.children.getContext(r),e):Wt(n,null,e):Wt(n,t,e)}),c.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new M5(t.outlet.component,c)):e.canDeactivateChecks.push(new M5(null,c)):e.canDeactivateChecks.push(new M5(null,c))}function i4(s){return typeof s=="function"}function Gg(s){return typeof s=="boolean"}function $g(s){return s&&i4(s.canLoad)}function Wg(s){return s&&i4(s.canActivate)}function Kg(s){return s&&i4(s.canActivateChild)}function Qg(s){return s&&i4(s.canDeactivate)}function Yg(s){return s&&i4(s.canMatch)}function La(s){return s instanceof X7||s?.name==="EmptyError"}var Ke=Symbol("INITIAL_VALUE");function L5(){return p2(s=>v5(s.map(t=>t.pipe(m0(1),ye(Ke)))).pipe(a1(t=>{for(let e of t)if(e!==!0){if(e===Ke)return Ke;if(e===!1||e instanceof x0)return e}return!0}),p0(t=>t!==Ke),m0(1)))}function Jg(s,t){return l2(e=>{let{targetSnapshot:o,currentSnapshot:c,guards:{canActivateChecks:r,canDeactivateChecks:n}}=e;return n.length===0&&r.length===0?q(l1(k({},e),{guardsResult:!0})):Xg(n,o,c,s).pipe(l2(a=>a&&Gg(a)?tw(o,r,s,t):q(a)),a1(a=>l1(k({},e),{guardsResult:a})))})}function Xg(s,t,e,o){return Q1(s).pipe(l2(c=>rw(c.component,c.route,e,t,o)),f0(c=>c!==!0,!0))}function tw(s,t,e,o){return Q1(t).pipe(O0(c=>He(sw(c.route.parent,o),ew(c.route,o),cw(s,c.path,e),ow(s,c.route,e))),f0(c=>c!==!0,!0))}function ew(s,t){return s!==null&&t&&t(new Yo(s)),q(!0)}function sw(s,t){return s!==null&&t&&t(new Ko(s)),q(!0)}function ow(s,t,e){let o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||o.length===0)return q(!0);let c=o.map(r=>io(()=>{let n=a4(t)??e,a=y5(r,n),h=Wg(a)?a.canActivate(t,s):y2(n,()=>a(t,s));return V0(h).pipe(f0())}));return q(c).pipe(L5())}function cw(s,t,e){let o=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(n=>Zg(n)).filter(n=>n!==null).map(n=>io(()=>{let a=n.guards.map(h=>{let v=a4(n.node)??e,w=y5(h,v),u=Kg(w)?w.canActivateChild(o,s):y2(v,()=>w(o,s));return V0(u).pipe(f0())});return q(a).pipe(L5())}));return q(r).pipe(L5())}function rw(s,t,e,o,c){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return q(!0);let n=r.map(a=>{let h=a4(t)??c,v=y5(a,h),w=Qg(v)?v.canDeactivate(s,t,e,o):y2(h,()=>v(s,t,e,o));return V0(w).pipe(f0())});return q(n).pipe(L5())}function nw(s,t,e,o){let c=t.canLoad;if(c===void 0||c.length===0)return q(!0);let r=c.map(n=>{let a=y5(n,s),h=$g(a)?a.canLoad(t,e):y2(s,()=>a(t,e));return V0(h)});return q(r).pipe(L5(),ya(o))}function ya(s){return J7(I1(t=>{if(V5(t))throw Ca(s,t)}),a1(t=>t===!0))}function lw(s,t,e,o){let c=t.canMatch;if(!c||c.length===0)return q(!0);let r=c.map(n=>{let a=y5(n,s),h=Yg(a)?a.canMatch(t,e):y2(s,()=>a(t,e));return V0(h)});return q(r).pipe(L5(),ya(o))}var s4=class{constructor(t){this.segmentGroup=t||null}},as=class extends Error{constructor(t){super(),this.urlTree=t}};function f5(s){return At(new s4(s))}function aw(s){return At(new x1(4e3,!1))}function iw(s){return At(Va(!1,g2.GuardRejected))}var rc=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let o=[],c=e.root;for(;;){if(o=o.concat(c.segments),c.numberOfChildren===0)return q(o);if(c.numberOfChildren>1||!c.children[X])return aw(t.redirectTo);c=c.children[X]}}applyRedirectCommands(t,e,o){let c=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,o);if(e.startsWith("/"))throw new as(c);return c}applyRedirectCreateUrlTree(t,e,o,c){let r=this.createSegmentGroup(t,e.root,o,c);return new x0(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let o={};return Object.entries(t).forEach(([c,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);o[c]=e[a]}else o[c]=r}),o}createSegmentGroup(t,e,o,c){let r=this.createSegments(t,e.segments,o,c),n={};return Object.entries(e.children).forEach(([a,h])=>{n[a]=this.createSegmentGroup(t,h,o,c)}),new u1(r,n)}createSegments(t,e,o,c){return e.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,c):this.findOrReturn(r,o))}findPosParam(t,e,o){let c=o[e.path.substring(1)];if(!c)throw new x1(4001,!1);return c}findOrReturn(t,e){let o=0;for(let c of e){if(c.path===t.path)return e.splice(o),c;o++}return t}},nc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hw(s,t,e,o,c){let r=wc(s,t,e);return r.matched?(o=Og(t,o),lw(o,t,e,c).pipe(a1(n=>n===!0?r:k({},nc)))):q(r)}function wc(s,t,e){if(t.path==="**")return vw(e);if(t.path==="")return t.pathMatch==="full"&&(s.hasChildren()||e.length>0)?k({},nc):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let c=(t.matcher||lg)(e,s,t);if(!c)return k({},nc);let r={};Object.entries(c.posParams??{}).forEach(([a,h])=>{r[a]=h.path});let n=c.consumed.length>0?k(k({},r),c.consumed[c.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:c.consumed,remainingSegments:e.slice(c.consumed.length),parameters:n,positionalParamSegments:c.posParams??{}}}function vw(s){return{matched:!0,parameters:s.length>0?ra(s).parameters:{},consumedSegments:s,remainingSegments:[],positionalParamSegments:{}}}function X9(s,t,e,o){return e.length>0&&dw(s,e,o)?{segmentGroup:new u1(t,ww(o,new u1(e,s.children))),slicedSegments:[]}:e.length===0&&uw(s,e,o)?{segmentGroup:new u1(s.segments,gw(s,e,o,s.children)),slicedSegments:e}:{segmentGroup:new u1(s.segments,s.children),slicedSegments:e}}function gw(s,t,e,o){let c={};for(let r of e)if(ws(s,t,r)&&!o[I2(r)]){let n=new u1([],{});c[I2(r)]=n}return k(k({},o),c)}function ww(s,t){let e={};e[X]=t;for(let o of s)if(o.path===""&&I2(o)!==X){let c=new u1([],{});e[I2(o)]=c}return e}function dw(s,t,e){return e.some(o=>ws(s,t,o)&&I2(o)!==X)}function uw(s,t,e){return e.some(o=>ws(s,t,o))}function ws(s,t,e){return(s.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function pw(s,t,e,o){return I2(s)!==o&&(o===X||!ws(t,e,s))?!1:wc(t,s,e).matched}function mw(s,t,e){return t.length===0&&!s.children[e]}var lc=class{};function fw(s,t,e,o,c,r,n="emptyOnly"){return new ac(s,t,e,o,c,n,r).recognize()}var zw=31,ac=class{constructor(t,e,o,c,r,n,a){this.injector=t,this.configLoader=e,this.rootComponentType=o,this.config=c,this.urlTree=r,this.paramsInheritanceStrategy=n,this.urlSerializer=a,this.applyRedirects=new rc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new x1(4002,`'${t.segmentGroup}'`)}recognize(){let t=X9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(a1(e=>{let o=new t4([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),c=new v2(o,e),r=new ns("",c),n=yg(o,[],this.urlTree.queryParams,this.urlTree.fragment);return n.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(n),this.inheritParamsAndData(r._root,null),{state:r,tree:n}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,X).pipe(g5(o=>{if(o instanceof as)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof s4?this.noMatchError(o):o}))}inheritParamsAndData(t,e){let o=t.value,c=hc(o,e,this.paramsInheritanceStrategy);o.params=Object.freeze(c.params),o.data=Object.freeze(c.data),t.children.forEach(r=>this.inheritParamsAndData(r,o))}processSegmentGroup(t,e,o,c){return o.segments.length===0&&o.hasChildren()?this.processChildren(t,e,o):this.processSegment(t,e,o,o.segments,c,!0).pipe(a1(r=>r instanceof v2?[r]:[]))}processChildren(t,e,o){let c=[];for(let r of Object.keys(o.children))r==="primary"?c.unshift(r):c.push(r);return Q1(c).pipe(O0(r=>{let n=o.children[r],a=Ng(e,r);return this.processSegmentGroup(t,a,n,r)}),c9((r,n)=>(r.push(...n),r)),ho(null),o9(),l2(r=>{if(r===null)return f5(o);let n=Ba(r);return xw(n),q(n)}))}processSegment(t,e,o,c,r,n){return Q1(e).pipe(O0(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,o,c,r,n).pipe(g5(h=>{if(h instanceof s4)return q(null);throw h}))),f0(a=>!!a),g5(a=>{if(La(a))return mw(o,c,r)?q(new lc):f5(o);throw a}))}processSegmentAgainstRoute(t,e,o,c,r,n,a){return pw(o,c,r,n)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(t,c,o,r,n):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,c,e,o,r,n):f5(c):f5(c)}expandSegmentAgainstRouteUsingRedirect(t,e,o,c,r,n){let{matched:a,consumedSegments:h,positionalParamSegments:v,remainingSegments:w}=wc(e,c,r);if(!a)return f5(e);c.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zw&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(h,c.redirectTo,v);return this.applyRedirects.lineralizeSegments(c,u).pipe(l2(z=>this.processSegment(t,o,e,z.concat(w),n,!1)))}matchSegmentAgainstRoute(t,e,o,c,r){let n=hw(e,o,c,t,this.urlSerializer);return o.path==="**"&&(e.children={}),n.pipe(p2(a=>a.matched?(t=o._injector??t,this.getChildConfig(t,o,c).pipe(p2(({routes:h})=>{let v=o._loadedInjector??t,{consumedSegments:w,remainingSegments:u,parameters:z}=a,y=new t4(w,z,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Cw(o),I2(o),o.component??o._loadedComponent??null,o,Vw(o)),{segmentGroup:A,slicedSegments:R}=X9(e,w,u,h);if(R.length===0&&A.hasChildren())return this.processChildren(v,h,A).pipe(a1(O=>O===null?null:new v2(y,O)));if(h.length===0&&R.length===0)return q(new v2(y,[]));let B=I2(o)===r;return this.processSegment(v,h,A,R,B?X:r,!0).pipe(a1(O=>new v2(y,O instanceof v2?[O]:[])))}))):f5(e)))}getChildConfig(t,e,o){return e.children?q({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?q({routes:e._loadedRoutes,injector:e._loadedInjector}):nw(t,e,o,this.urlSerializer).pipe(l2(c=>c?this.configLoader.loadChildren(t,e).pipe(I1(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):iw(e))):q({routes:[],injector:t})}};function xw(s){s.sort((t,e)=>t.value.outlet===X?-1:e.value.outlet===X?1:t.value.outlet.localeCompare(e.value.outlet))}function Mw(s){let t=s.value.routeConfig;return t&&t.path===""}function Ba(s){let t=[],e=new Set;for(let o of s){if(!Mw(o)){t.push(o);continue}let c=t.find(r=>o.value.routeConfig===r.value.routeConfig);c!==void 0?(c.children.push(...o.children),e.add(c)):t.push(o)}for(let o of e){let c=Ba(o.children);t.push(new v2(o.value,c))}return t.filter(o=>!e.has(o))}function Cw(s){return s.data||{}}function Vw(s){return s.resolve||{}}function Hw(s,t,e,o,c,r){return l2(n=>fw(s,t,e,o,n.extractedUrl,c,r).pipe(a1(({state:a,tree:h})=>l1(k({},n),{targetSnapshot:a,urlAfterRedirects:h}))))}function Lw(s,t){return l2(e=>{let{targetSnapshot:o,guards:{canActivateChecks:c}}=e;if(!c.length)return q(e);let r=new Set(c.map(h=>h.route)),n=new Set;for(let h of r)if(!n.has(h))for(let v of _a(h))n.add(v);let a=0;return Q1(n).pipe(O0(h=>r.has(h)?yw(h,o,s,t):(h.data=hc(h,h.parent,s).resolve,q(void 0))),I1(()=>a++),vo(1),l2(h=>a===n.size?q(e):u0))})}function _a(s){let t=s.children.map(e=>_a(e)).flat();return[s,...t]}function yw(s,t,e,o){let c=s.routeConfig,r=s._resolve;return c?.title!==void 0&&!xa(c)&&(r[c4]=c.title),Bw(r,s,t,o).pipe(a1(n=>(s._resolvedData=n,s.data=hc(s,s.parent,e).resolve,null)))}function Bw(s,t,e,o){let c=Oo(s);if(c.length===0)return q({});let r={};return Q1(c).pipe(l2(n=>_w(s[n],t,e,o).pipe(f0(),I1(a=>{r[n]=a}))),vo(1),s9(r),g5(n=>La(n)?u0:At(n)))}function _w(s,t,e,o){let c=a4(t)??o,r=y5(s,c),n=r.resolve?r.resolve(t,e):y2(c,()=>r(t,e));return V0(n)}function Do(s){return p2(t=>{let e=s(t);return e?Q1(e).pipe(a1(()=>t)):q(t)})}var Aa=(()=>{let t=class t{buildTitle(o){let c,r=o.root;for(;r!==void 0;)c=this.getResolvedTitleForRoute(r)??c,r=r.children.find(n=>n.outlet===X);return c}getResolvedTitleForRoute(o){return o.data[c4]}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:()=>I(Aw),providedIn:"root"});let s=t;return s})(),Aw=(()=>{let t=class t extends Aa{constructor(o){super(),this.title=o}updateTitle(o){let c=this.buildTitle(o);c!==void 0&&this.title.setTitle(c)}};t.\u0275fac=function(c){return new(c||t)(Q(G9))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),h4=new s1("",{providedIn:"root",factory:()=>({})}),o4=new s1(""),dc=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Ne)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return q(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let c=V0(o.loadComponent()).pipe(a1(Sa),I1(n=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=n}),St(()=>{this.componentLoaders.delete(o)})),r=new lo(c,()=>new H2).pipe(no());return this.componentLoaders.set(o,r),r}loadChildren(o,c){if(this.childrenLoaders.get(c))return this.childrenLoaders.get(c);if(c._loadedRoutes)return q({routes:c._loadedRoutes,injector:c._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(c);let n=Sw(c,this.compiler,o,this.onLoadEndListener).pipe(St(()=>{this.childrenLoaders.delete(c)})),a=new lo(n,()=>new H2).pipe(no());return this.childrenLoaders.set(c,a),a}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Sw(s,t,e,o){return V0(s.loadChildren()).pipe(a1(Sa),l2(c=>c instanceof w9||Array.isArray(c)?q(c):Q1(t.compileModuleAsync(c))),a1(c=>{o&&o(s);let r,n,a=!1;return Array.isArray(c)?(n=c,a=!0):(r=c.create(e).injector,n=r.get(o4,[],{optional:!0,self:!0}).flat()),{routes:n.map(gc),injector:r}}))}function Rw(s){return s&&typeof s=="object"&&"default"in s}function Sa(s){return Rw(s)?s.default:s}var uc=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:()=>I(bw),providedIn:"root"});let s=t;return s})(),bw=(()=>{let t=class t{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,c){return o}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Ra=new s1(""),ba=new s1("");function kw(s,t,e){let o=s.get(ba),c=s.get(D1);return s.get(k1).runOutsideAngular(()=>{if(!c.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(v=>setTimeout(v));let r,n=new Promise(v=>{r=v}),a=c.startViewTransition(()=>(r(),Ew(s))),{onViewTransitionCreated:h}=o;return h&&y2(s,()=>h({transition:a,from:t,to:e})),n})}function Ew(s){return new Promise(t=>{po(t,{injector:s})})}var pc=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H2,this.transitionAbortSubject=new H2,this.configLoader=I(dc),this.environmentInjector=I(w5),this.urlSerializer=I(r4),this.rootContexts=I(n4),this.location=I(Pt),this.inputBindingEnabled=I(gs,{optional:!0})!==null,this.titleStrategy=I(Aa),this.options=I(h4,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(uc),this.createViewTransition=I(Ra,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let o=r=>this.events.next(new $o(r)),c=r=>this.events.next(new Wo(r));this.configLoader.onLoadEndListener=c,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let c=++this.navigationId;this.transitions?.next(l1(k(k({},this.transitions.value),o),{id:c}))}setupNavigations(o,c,r){return this.transitions=new j1({id:0,currentUrlTree:c,currentRawUrl:c,extractedUrl:this.urlHandlingStrategy.extract(c),urlAfterRedirects:this.urlHandlingStrategy.extract(c),rawUrl:c,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$t,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(p0(n=>n.id!==0),a1(n=>l1(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),p2(n=>{let a=!1,h=!1;return q(n).pipe(p2(v=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",g2.SupersededByNewNavigation),u0;this.currentTransition=n,this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?l1(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let w=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=v.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!w&&u!=="reload"){let z="";return this.events.next(new C0(v.id,this.urlSerializer.serialize(v.rawUrl),z,es.IgnoredSameUrlNavigation)),v.resolve(null),u0}if(this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return q(v).pipe(p2(z=>{let y=this.transitions?.getValue();return this.events.next(new H5(z.id,this.urlSerializer.serialize(z.extractedUrl),z.source,z.restoredState)),y!==this.transitions?.getValue()?u0:Promise.resolve(z)}),Hw(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),I1(z=>{n.targetSnapshot=z.targetSnapshot,n.urlAfterRedirects=z.urlAfterRedirects,this.currentNavigation=l1(k({},this.currentNavigation),{finalUrl:z.urlAfterRedirects});let y=new ss(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot);this.events.next(y)}));if(w&&this.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){let{id:z,extractedUrl:y,source:A,restoredState:R,extras:B}=v,O=new H5(z,this.urlSerializer.serialize(y),A,R);this.events.next(O);let F=fa(this.rootComponentType).snapshot;return this.currentTransition=n=l1(k({},v),{targetSnapshot:F,urlAfterRedirects:y,extras:l1(k({},B),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,q(n)}else{let z="";return this.events.next(new C0(v.id,this.urlSerializer.serialize(v.extractedUrl),z,es.IgnoredByUrlHandlingStrategy)),v.resolve(null),u0}}),I1(v=>{let w=new Zo(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}),a1(v=>(this.currentTransition=n=l1(k({},v),{guards:jg(v.targetSnapshot,v.currentSnapshot,this.rootContexts)}),n)),Jg(this.environmentInjector,v=>this.events.next(v)),I1(v=>{if(n.guardsResult=v.guardsResult,V5(v.guardsResult))throw Ca(this.urlSerializer,v.guardsResult);let w=new Uo(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(w)}),p0(v=>v.guardsResult?!0:(this.cancelNavigationTransition(v,"",g2.GuardRejected),!1)),Do(v=>{if(v.guards.canActivateChecks.length)return q(v).pipe(I1(w=>{let u=new qo(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(u)}),p2(w=>{let u=!1;return q(w).pipe(Lw(this.paramsInheritanceStrategy,this.environmentInjector),I1({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(w,"",g2.NoDataFromResolver)}}))}),I1(w=>{let u=new Go(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(u)}))}),Do(v=>{let w=u=>{let z=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&z.push(this.configLoader.loadComponent(u.routeConfig).pipe(I1(y=>{u.component=y}),a1(()=>{})));for(let y of u.children)z.push(...w(y));return z};return v5(w(v.targetSnapshot.root)).pipe(ho(null),m0(1))}),Do(()=>this.afterPreactivation()),p2(()=>{let{currentSnapshot:v,targetSnapshot:w}=n,u=this.createViewTransition?.(this.environmentInjector,v.root,w.root);return u?Q1(u).pipe(a1(()=>n)):q(n)}),a1(v=>{let w=Eg(o.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=n=l1(k({},v),{targetRouterState:w}),this.currentNavigation.targetRouterState=w,n}),I1(()=>{this.events.next(new Jt)}),Fg(this.rootContexts,o.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),m0(1),I1({next:v=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new e0(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),this.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{a=!0}}),Be(this.transitionAbortSubject.pipe(I1(v=>{throw v}))),St(()=>{!a&&!h&&this.cancelNavigationTransition(n,"",g2.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),g5(v=>{if(h=!0,Ha(v))this.events.next(new M0(n.id,this.urlSerializer.serialize(n.extractedUrl),v.message,v.cancellationCode)),Dg(v)?this.events.next(new Xt(v.url)):n.resolve(!1);else{this.events.next(new Yt(n.id,this.urlSerializer.serialize(n.extractedUrl),v,n.targetSnapshot??void 0));try{n.resolve(o.errorHandler(v))}catch(w){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(w)}}return u0}))}))}cancelNavigationTransition(o,c,r){let n=new M0(o.id,this.urlSerializer.serialize(o.extractedUrl),c,r);this.events.next(n),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Tw(s){return s!==$t}var Iw=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:()=>I(Dw),providedIn:"root"});let s=t;return s})(),ic=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Dw=(()=>{let t=class t extends ic{};t.\u0275fac=(()=>{let o;return function(r){return(o||(o=Ae(t)))(r||t)}})(),t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),ka=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:()=>I(Pw),providedIn:"root"});let s=t;return s})(),Pw=(()=>{let t=class t extends ka{constructor(){super(...arguments),this.location=I(Pt),this.urlSerializer=I(r4),this.options=I(h4,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(uc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new x0,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fa(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(c=>{c.type==="popstate"&&o(c.url,c.state)})}handleRouterEvent(o,c){if(o instanceof H5)this.stateMemento=this.createStateMemento();else if(o instanceof C0)this.rawUrlTree=c.initialUrl;else if(o instanceof ss){if(this.urlUpdateStrategy==="eager"&&!c.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(c.finalUrl,c.initialUrl);this.setBrowserUrl(r,c)}}else o instanceof Jt?(this.currentUrlTree=c.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(c.finalUrl,c.initialUrl),this.routerState=c.targetRouterState,this.urlUpdateStrategy==="deferred"&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c))):o instanceof M0&&(o.code===g2.GuardRejected||o.code===g2.NoDataFromResolver)?this.restoreHistory(c):o instanceof Yt?this.restoreHistory(c,!0):o instanceof e0&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,c){let r=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(r)||c.extras.replaceUrl){let n=this.browserPageId,a=k(k({},c.extras.state),this.generateNgRouterState(c.id,n));this.location.replaceState(r,"",a)}else{let n=k(k({},c.extras.state),this.generateNgRouterState(c.id,this.browserPageId+1));this.location.go(r,"",n)}}restoreHistory(o,c=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,n=this.currentPageId-r;n!==0?this.location.historyGo(n):this.currentUrlTree===o.finalUrl&&n===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(c&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,c){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:c}:{navigationId:o}}};t.\u0275fac=(()=>{let o;return function(r){return(o||(o=Ae(t)))(r||t)}})(),t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),qt=function(s){return s[s.COMPLETE=0]="COMPLETE",s[s.FAILED=1]="FAILED",s[s.REDIRECTING=2]="REDIRECTING",s}(qt||{});function Ea(s,t){s.events.pipe(p0(e=>e instanceof e0||e instanceof M0||e instanceof Yt||e instanceof C0),a1(e=>e instanceof e0||e instanceof C0?qt.COMPLETE:(e instanceof M0?e.code===g2.Redirect||e.code===g2.SupersededByNewNavigation:!1)?qt.REDIRECTING:qt.FAILED),p0(e=>e!==qt.REDIRECTING),m0(1)).subscribe(()=>{t()})}function Ow(s){throw s}var Nw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},r2=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(Pe),this.stateManager=I(ka),this.options=I(h4,{optional:!0})||{},this.pendingTasks=I(zo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(pc),this.urlSerializer=I(r4),this.location=I(Pt),this.urlHandlingStrategy=I(uc),this._events=new H2,this.errorHandler=this.options.errorHandler||Ow,this.navigated=!1,this.routeReuseStrategy=I(Iw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(o4,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(gs,{optional:!0}),this.eventsSubscription=new Y7,this.isNgZoneEnabled=I(k1)instanceof k1&&k1.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(c=>{try{let r=this.navigationTransitions.currentTransition,n=this.navigationTransitions.currentNavigation;if(r!==null&&n!==null){if(this.stateManager.handleRouterEvent(c,n),c instanceof M0&&c.code!==g2.Redirect&&c.code!==g2.SupersededByNewNavigation)this.navigated=!0;else if(c instanceof e0)this.navigated=!0;else if(c instanceof Xt){let a=this.urlHandlingStrategy.merge(c.url,r.currentRawUrl),h={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Tw(r.source)};this.scheduleNavigation(a,$t,null,h,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Zw(c)&&this._events.next(c)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$t,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,c)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",c)},0)})}navigateToSyncWithBrowser(o,c,r){let n={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let v=k({},r);delete v.navigationId,delete v.\u0275routerPageId,Object.keys(v).length!==0&&(n.state=v)}let h=this.parseUrl(o);this.scheduleNavigation(h,c,a,n)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(gc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,c={}){let{relativeTo:r,queryParams:n,fragment:a,queryParamsHandling:h,preserveFragment:v}=c,w=v?this.currentUrlTree.fragment:a,u=null;switch(h){case"merge":u=k(k({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}u!==null&&(u=this.removeEmptyProps(u));let z;try{let y=r?r.snapshot:this.routerState.snapshot.root;z=da(y)}catch{(typeof o[0]!="string"||!o[0].startsWith("/"))&&(o=[]),z=this.currentUrlTree.root}return ua(z,o,u,w??null)}navigateByUrl(o,c={skipLocationChange:!1}){let r=V5(o)?o:this.parseUrl(o),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,$t,null,c)}navigate(o,c={skipLocationChange:!1}){return jw(o),this.navigateByUrl(this.createUrlTree(o,c),c)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,c){let r;if(c===!0?r=k({},Nw):c===!1?r=k({},Fw):r=c,V5(o))return W9(this.currentUrlTree,o,r);let n=this.parseUrl(o);return W9(this.currentUrlTree,n,r)}removeEmptyProps(o){return Object.entries(o).reduce((c,[r,n])=>(n!=null&&(c[r]=n),c),{})}scheduleNavigation(o,c,r,n,a){if(this.disposed)return Promise.resolve(!1);let h,v,w;a?(h=a.resolve,v=a.reject,w=a.promise):w=new Promise((z,y)=>{h=z,v=y});let u=this.pendingTasks.add();return Ea(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:c,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:n,resolve:h,reject:v,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(z=>Promise.reject(z))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function jw(s){for(let t=0;t<s.length;t++)if(s[t]==null)throw new x1(4008,!1)}function Zw(s){return!(s instanceof Jt)&&!(s instanceof Xt)}var is=class{};var Uw=(()=>{let t=class t{constructor(o,c,r,n,a){this.router=o,this.injector=r,this.preloadingStrategy=n,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(p0(o=>o instanceof e0),O0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,c){let r=[];for(let n of c){n.providers&&!n._injector&&(n._injector=fo(n.providers,o,`Route: ${n.path}`));let a=n._injector??o,h=n._loadedInjector??a;(n.loadChildren&&!n._loadedRoutes&&n.canLoad===void 0||n.loadComponent&&!n._loadedComponent)&&r.push(this.preloadConfig(a,n)),(n.children||n._loadedRoutes)&&r.push(this.processRoutes(h,n.children??n._loadedRoutes))}return Q1(r).pipe(ao())}preloadConfig(o,c){return this.preloadingStrategy.preload(c,()=>{let r;c.loadChildren&&c.canLoad===void 0?r=this.loader.loadChildren(o,c):r=q(null);let n=r.pipe(l2(a=>a===null?q(void 0):(c._loadedRoutes=a.routes,c._loadedInjector=a.injector,this.processRoutes(a.injector??o,a.routes))));if(c.loadComponent&&!c._loadedComponent){let a=this.loader.loadComponent(c);return Q1([n,a]).pipe(ao())}else return n})}};t.\u0275fac=function(c){return new(c||t)(Q(r2),Q(Ne),Q(w5),Q(is),Q(dc))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Ta=new s1(""),qw=(()=>{let t=class t{constructor(o,c,r,n,a={}){this.urlSerializer=o,this.transitions=c,this.viewportScroller=r,this.zone=n,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=I(w5),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof H5?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof e0?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof C0&&o.code===es.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof os&&(o.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(o.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,c){this.zone.runOutsideAngular(()=>S(this,null,function*(){yield new Promise(r=>{setTimeout(()=>{r()}),po(()=>{r()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new os(o,this.lastSource==="popstate"?this.store[this.restoredId]:null,c))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(c){ke()},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})();function Ia(s,...t){return z0([{provide:o4,multi:!0,useValue:s},[],{provide:s0,useFactory:Da,deps:[r2]},{provide:It,multi:!0,useFactory:Pa},t.map(e=>e.\u0275providers)])}function Da(s){return s.routerState.root}function v4(s,t){return{\u0275kind:s,\u0275providers:t}}function Pa(){let s=I(u5);return t=>{let e=s.get(Dt);if(t!==e.components[0])return;let o=s.get(r2),c=s.get(Oa);s.get(mc)===1&&o.initialNavigation(),s.get(Na,null,go.Optional)?.setUpPreloading(),s.get(Ta,null,go.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),c.closed||(c.next(),c.complete(),c.unsubscribe())}}var Oa=new s1("",{factory:()=>new H2}),mc=new s1("",{providedIn:"root",factory:()=>1});function Gw(){return v4(2,[{provide:mc,useValue:0},{provide:xo,multi:!0,deps:[u5],useFactory:t=>{let e=t.get(x9,Promise.resolve());return()=>e.then(()=>new Promise(o=>{let c=t.get(r2),r=t.get(Oa);Ea(c,()=>{o(!0)}),t.get(pc).afterPreactivation=()=>(o(!0),r.closed?q(void 0):r),c.initialNavigation()}))}}])}function $w(){return v4(3,[{provide:xo,multi:!0,useFactory:()=>{let t=I(r2);return()=>{t.setUpLocationChangeListener()}}},{provide:mc,useValue:2}])}var Na=new s1("");function Ww(s){return v4(0,[{provide:Na,useExisting:Uw},{provide:is,useExisting:s}])}function Kw(){return v4(8,[J9,{provide:gs,useExisting:J9}])}function Qw(s){let t=[{provide:Ra,useValue:kw},{provide:ba,useValue:k({skipNextTransition:!!s?.skipInitialTransition},s)}];return v4(9,t)}var ta=new s1("ROUTER_FORROOT_GUARD"),Yw=[Pt,{provide:r4,useClass:Kt},r2,n4,{provide:s0,useFactory:Da,deps:[r2]},dc,[]],B5=(()=>{let t=class t{constructor(o){}static forRoot(o,c){return{ngModule:t,providers:[Yw,[],{provide:o4,multi:!0,useValue:o},{provide:ta,useFactory:ed,deps:[[r2,new Rt,new _e]]},{provide:h4,useValue:c||{}},c?.useHash?Xw():td(),Jw(),c?.preloadingStrategy?Ww(c.preloadingStrategy).\u0275providers:[],c?.initialNavigation?sd(c):[],c?.bindToComponentInputs?Kw().\u0275providers:[],c?.enableViewTransitions?Qw().\u0275providers:[],od()]}}static forChild(o){return{ngModule:t,providers:[{provide:o4,multi:!0,useValue:o}]}}};t.\u0275fac=function(c){return new(c||t)(Q(ta,8))},t.\u0275mod=J1({type:t}),t.\u0275inj=Y1({});let s=t;return s})();function Jw(){return{provide:Ta,useFactory:()=>{let s=I(B9),t=I(k1),e=I(h4),o=I(pc),c=I(r4);return e.scrollOffset&&s.setOffset(e.scrollOffset),new qw(c,o,s,t,e)}}}function Xw(){return{provide:Co,useClass:C9}}function td(){return{provide:Co,useClass:M9}}function ed(s){return"guarded"}function sd(s){return[s.initialNavigation==="disabled"?$w().\u0275providers:[],s.initialNavigation==="enabledBlocking"?Gw().\u0275providers:[]]}var ea=new s1("");function od(){return[{provide:ea,useFactory:Pa},{provide:It,multi:!0,useExisting:ea}]}var MM=new s1("Ng Glyph Config");var CM=new s1("NgGlyphsToken");function nd(s){return s==null?"":/^\d+$/.test(s)?`${s}px`:s}var ld=new s1("Ng Icon Pre Processor"),ad=new s1("Ng Icon Post Processor");function id(){return I(ld,{optional:!0})??(s=>s)}function hd(){return I(ad,{optional:!0})??(()=>{})}var vd=new s1("Ng Icon Config"),gd={size:"1em"};function wd(){return I(vd,{optional:!0})??gd}var dd=new s1("Ng Icon Loader Token");var ud=new s1("Ng Icon Cache Token");function pd(){return I(dd,{optional:!0})}function md(){return I(ud,{optional:!0})}function _5(s){return[{provide:fc,useFactory:t=>k(k({},t?.reduce((e,o)=>k(k({},e),o),{})),s),deps:[[fc,new Rt,new _e]],multi:!0}]}var fc=new s1("Icons Token");function fd(){return I(fc,{optional:!0})??[]}function zd(s){return typeof s=="string"?Promise.resolve(s):Ve(s)?t9(s):s}function xd(s){return s.replace(/([^a-zA-Z0-9])+(.)?/g,(t,e,o)=>o?o.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,t=>t.toLowerCase())}var Md=new s1("Ng Icon Logger"),zc=class{log(t){console.log(t)}warn(t){console.warn(t)}error(t){console.error(t)}};function Cd(){return I(Md,{optional:!0})??new zc}var A5=(()=>{let t=class t{constructor(){this.config=wd(),this.icons=fd(),this.loader=pd(),this.cache=md(),this.preProcessor=id(),this.postProcessor=hd(),this.injector=I(u5),this.elementRef=I(m2),this.logger=Cd(),this.size=this.config.size,this.color=this.config.color}set name(o){this.setIcon(o)}set svg(o){this.setSvg(o)}ngOnChanges(o){o.size&&this.setIconSize(),o.color&&this.setIconColor(),o.strokeWidth&&this.setIconStrokeWidth()}ngOnInit(){this.setIconStyles()}setIconColor(){this.elementRef.nativeElement.style.removeProperty("color"),this.color!==void 0&&this.elementRef.nativeElement.style.setProperty("color",this.color)}setIconSize(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__size"),this.size!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__size",this.size.toString())}setIconStrokeWidth(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__stroke-width"),this.strokeWidth!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__stroke-width",this.strokeWidth.toString())}setIconStyles(){this.setIconColor(),this.setIconSize(),this.setIconStrokeWidth()}setSvg(o){this.elementRef.nativeElement.innerHTML=this.preProcessor(o),this.postProcessor(this.elementRef.nativeElement)}setIcon(o){return S(this,null,function*(){let c=xd(o);for(let r of[...this.icons].reverse())if(r[c]){this.setSvg(r[c]);return}if(this.loader){let r=yield this.requestIconFromLoader(o);if(r!==null){this.setSvg(r);return}}this.logger.warn(`No icon named ${o} was found. You may need to import it using the withIcons function.`)})}requestIconFromLoader(o){return new Promise(c=>{y2(this.injector,()=>S(this,null,function*(){if(this.cache){let a=this.cache.get(o);if(typeof a=="string"){c(a);return}if(a instanceof Promise){let h=yield a;c(h);return}}let r=zd(this.loader(o));this.cache?.set(o,r);let n=yield r;this.cache?.set(o,n),c(n)}))})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=g1({type:t,selectors:[["ng-icon"]],inputs:{name:"name",svg:"svg",size:[b2.HasDecoratorInputTransform,"size","size",nd],strokeWidth:"strokeWidth",color:"color"},standalone:!0,features:[p5,d5,d1],decls:0,vars:0,template:function(c,r){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}"],changeDetection:0});let s=t;return s})();var Fa='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3a9 9 0 0 0 0 18c.83 0 1.5-.67 1.5-1.5c0-.39-.15-.74-.39-1.01c-.23-.26-.38-.61-.38-.99c0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5c0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9S8 9.67 8 10.5S7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"></path></svg>';var ja='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>';var Za='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></svg>';var Ua='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19L21 7l-1.4-1.4L9 16.2z"></path></svg>';var qa='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 20H5V7c0-.55-.45-1-1-1s-1 .45-1 1v13c0 1.1.9 2 2 2h10c.55 0 1-.45 1-1s-.45-1-1-1zm5-4V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2zm-2 0H9V4h9v12z"></path></svg>';function Vd(s,t){if(s&1){let e=c2();Z(0,"ng-icon",1),i1("click",function(c){let r=Z1(e).$implicit,n=h1();return U1(n.handleNoteAction(c,r.type))}),U()}if(s&2){let e=t.$implicit;m1("name",e.svg)("title",e.type)}}var Ga=(()=>{class s{noteId=null;noteAction=new b1;icons=[{type:"remove",svg:"matDeleteForever"},{type:"copy",svg:"matContentCopyRound"},{type:"color",svg:"matColorLens"},{type:"todo",svg:"matDone"}];handleNoteAction(e,o){e.preventDefault(),e.stopPropagation(),this.noteId&&this.noteAction.emit({noteId:this.noteId,type:o})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["note-bottom-actions"]],inputs:{noteId:"noteId"},outputs:{noteAction:"noteAction"},standalone:!0,features:[E2([],[_5({matDeleteForever:Za,matContentCopy:ja,matColorLens:Fa,matContentCopyRound:qa,matDone:Ua})]),d1],decls:2,vars:0,consts:[[1,"note-icon",3,"name","title"],[1,"note-icon",3,"click","name","title"]],template:function(o,c){o&1&&a2(0,Vd,1,2,"ng-icon",0,X2),o&2&&i2(c.icons)},dependencies:[A5],styles:[".note-icon[_ngcontent-%COMP%]{font-size:23px;transition:scale .2s;bottom:0}.note-icon[_ngcontent-%COMP%]:hover{opacity:.5}"]})}return s})();var $a="remove",us="update",Wa="copy",ps="color";var D2="";var Qa=function(s){let t=[],e=0;for(let o=0;o<s.length;o++){let c=s.charCodeAt(o);c<128?t[e++]=c:c<2048?(t[e++]=c>>6|192,t[e++]=c&63|128):(c&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(c=65536+((c&1023)<<10)+(s.charCodeAt(++o)&1023),t[e++]=c>>18|240,t[e++]=c>>12&63|128,t[e++]=c>>6&63|128,t[e++]=c&63|128):(t[e++]=c>>12|224,t[e++]=c>>6&63|128,t[e++]=c&63|128)}return t},Hd=function(s){let t=[],e=0,o=0;for(;e<s.length;){let c=s[e++];if(c<128)t[o++]=String.fromCharCode(c);else if(c>191&&c<224){let r=s[e++];t[o++]=String.fromCharCode((c&31)<<6|r&63)}else if(c>239&&c<365){let r=s[e++],n=s[e++],a=s[e++],h=((c&7)<<18|(r&63)<<12|(n&63)<<6|a&63)-65536;t[o++]=String.fromCharCode(55296+(h>>10)),t[o++]=String.fromCharCode(56320+(h&1023))}else{let r=s[e++],n=s[e++];t[o++]=String.fromCharCode((c&15)<<12|(r&63)<<6|n&63)}}return t.join("")},Ya={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let c=0;c<s.length;c+=3){let r=s[c],n=c+1<s.length,a=n?s[c+1]:0,h=c+2<s.length,v=h?s[c+2]:0,w=r>>2,u=(r&3)<<4|a>>4,z=(a&15)<<2|v>>6,y=v&63;h||(y=64,n||(z=64)),o.push(e[w],e[u],e[z],e[y])}return o.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Qa(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):Hd(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let c=0;c<s.length;){let r=e[s.charAt(c++)],a=c<s.length?e[s.charAt(c)]:0;++c;let v=c<s.length?e[s.charAt(c)]:64;++c;let u=c<s.length?e[s.charAt(c)]:64;if(++c,r==null||a==null||v==null||u==null)throw new xc;let z=r<<2|a>>4;if(o.push(z),v!==64){let y=a<<4&240|v>>2;if(o.push(y),u!==64){let A=v<<6&192|u;o.push(A)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}},xc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ld=function(s){let t=Qa(s);return Ya.encodeByteArray(t,!0)},g4=function(s){return Ld(s).replace(/\./g,"")},yd=function(s){try{return Ya.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Bd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _d=()=>Bd().__FIREBASE_DEFAULTS__,Ad=()=>{if(typeof process>"u"||typeof process.env>"u")return;let s=process.env.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Sd=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=s&&yd(s[1]);return t&&JSON.parse(t)},Mc=()=>{try{return _d()||Ad()||Sd()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Rd=s=>{var t,e;return(e=(t=Mc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},Ja=s=>{let t=Rd(s);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let o=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),o]:[t.substring(0,e),o]},Cc=()=>{var s;return(s=Mc())===null||s===void 0?void 0:s.config};var ms=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,o)=>{e?this.reject(e):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,o))}}};function Xa(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},o=t||"demo-project",c=s.iat||0,r=s.sub||s.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let n=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:c,exp:c+3600,auth_time:c,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},s);return[g4(JSON.stringify(e)),g4(JSON.stringify(n)),""].join(".")}function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bd(){var s;let t=(s=Mc())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ei(){return!bd()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vc(){try{return typeof indexedDB=="object"}catch{return!1}}function si(){return new Promise((s,t)=>{try{let e=!0,o="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(o);c.onsuccess=()=>{c.result.close(),e||self.indexedDB.deleteDatabase(o),s(!0)},c.onupgradeneeded=()=>{e=!1},c.onerror=()=>{var r;t(((r=c.error)===null||r===void 0?void 0:r.message)||"")}}catch(e){t(e)}})}var kd="FirebaseError",o0=class s extends Error{constructor(t,e,o){super(e),this.code=t,this.customData=o,this.name=kd,Object.setPrototypeOf(this,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w4.prototype.create)}},w4=class{constructor(t,e,o){this.service=t,this.serviceName=e,this.errors=o}create(t,...e){let o=e[0]||{},c=`${this.service}/${t}`,r=this.errors[t],n=r?Ed(r,o):"Error",a=`${this.serviceName}: ${n} (${c}).`;return new o0(c,a,o)}};function Ed(s,t){return s.replace(Td,(e,o)=>{let c=t[o];return c!=null?String(c):`<${o}?>`})}var Td=/\{\$([^}]+)}/g;function d4(s,t){if(s===t)return!0;let e=Object.keys(s),o=Object.keys(t);for(let c of e){if(!o.includes(c))return!1;let r=s[c],n=t[c];if(Ka(r)&&Ka(n)){if(!d4(r,n))return!1}else if(r!==n)return!1}for(let c of o)if(!e.includes(c))return!1;return!0}function Ka(s){return s!==null&&typeof s=="object"}var IM=4*60*60*1e3;function c0(s){return s&&s._delegate?s._delegate:s}var r0=class{constructor(t,e,o){this.name=t,this.instanceFactory=e,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var U0="[DEFAULT]";var Hc=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let o=new ms;if(this.instancesDeferred.set(e,o),this.isInitialized(e)||this.shouldAutoInitialize())try{let c=this.getOrInitializeService({instanceIdentifier:e});c&&o.resolve(c)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let o=this.normalizeInstanceIdentifier(t?.identifier),c=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(r){if(c)return null;throw r}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Dd(t))try{this.getOrInitializeService({instanceIdentifier:U0})}catch{}for(let[e,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(e);try{let r=this.getOrInitializeService({instanceIdentifier:c});o.resolve(r)}catch{}}}}clearInstance(t=U0){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return S(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=U0){return this.instances.has(t)}getOptions(t=U0){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let c=this.getOrInitializeService({instanceIdentifier:o,options:e});for(let[r,n]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(r);o===a&&n.resolve(c)}return c}onInit(t,e){var o;let c=this.normalizeInstanceIdentifier(e),r=(o=this.onInitCallbacks.get(c))!==null&&o!==void 0?o:new Set;r.add(t),this.onInitCallbacks.set(c,r);let n=this.instances.get(c);return n&&t(n,c),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){let o=this.onInitCallbacks.get(e);if(o)for(let c of o)try{c(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Id(t),options:e}),this.instances.set(t,o),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=U0){return this.component?this.component.multipleInstances?t:U0:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Id(s){return s===U0?void 0:s}function Dd(s){return s.instantiationMode==="EAGER"}var fs=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Hc(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var Pd=[],r1=function(s){return s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT",s}(r1||{}),Od={debug:r1.DEBUG,verbose:r1.VERBOSE,info:r1.INFO,warn:r1.WARN,error:r1.ERROR,silent:r1.SILENT},Nd=r1.INFO,Fd={[r1.DEBUG]:"log",[r1.VERBOSE]:"log",[r1.INFO]:"info",[r1.WARN]:"warn",[r1.ERROR]:"error"},jd=(s,t,...e)=>{if(t<s.logLevel)return;let o=new Date().toISOString(),c=Fd[t];if(c)console[c](`[${o}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},S5=class{constructor(t){this.name=t,this._logLevel=Nd,this._logHandler=jd,this._userLogHandler=null,Pd.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in r1))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Od[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,r1.DEBUG,...t),this._logHandler(this,r1.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,r1.VERBOSE,...t),this._logHandler(this,r1.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,r1.INFO,...t),this._logHandler(this,r1.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,r1.WARN,...t),this._logHandler(this,r1.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,r1.ERROR,...t),this._logHandler(this,r1.ERROR,...t)}};var Zd=(s,t)=>t.some(e=>s instanceof e),oi,ci;function Ud(){return oi||(oi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qd(){return ci||(ci=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ri=new WeakMap,yc=new WeakMap,ni=new WeakMap,Lc=new WeakMap,_c=new WeakMap;function Gd(s){let t=new Promise((e,o)=>{let c=()=>{s.removeEventListener("success",r),s.removeEventListener("error",n)},r=()=>{e(P2(s.result)),c()},n=()=>{o(s.error),c()};s.addEventListener("success",r),s.addEventListener("error",n)});return t.then(e=>{e instanceof IDBCursor&&ri.set(e,s)}).catch(()=>{}),_c.set(t,s),t}function $d(s){if(yc.has(s))return;let t=new Promise((e,o)=>{let c=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",n),s.removeEventListener("abort",n)},r=()=>{e(),c()},n=()=>{o(s.error||new DOMException("AbortError","AbortError")),c()};s.addEventListener("complete",r),s.addEventListener("error",n),s.addEventListener("abort",n)});yc.set(s,t)}var Bc={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return yc.get(s);if(t==="objectStoreNames")return s.objectStoreNames||ni.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return P2(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function li(s){Bc=s(Bc)}function Wd(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let o=s.call(zs(this),t,...e);return ni.set(o,t.sort?t.sort():[t]),P2(o)}:qd().includes(s)?function(...t){return s.apply(zs(this),t),P2(ri.get(this))}:function(...t){return P2(s.apply(zs(this),t))}}function Kd(s){return typeof s=="function"?Wd(s):(s instanceof IDBTransaction&&$d(s),Zd(s,Ud())?new Proxy(s,Bc):s)}function P2(s){if(s instanceof IDBRequest)return Gd(s);if(Lc.has(s))return Lc.get(s);let t=Kd(s);return t!==s&&(Lc.set(s,t),_c.set(t,s)),t}var zs=s=>_c.get(s);function ii(s,t,{blocked:e,upgrade:o,blocking:c,terminated:r}={}){let n=indexedDB.open(s,t),a=P2(n);return o&&n.addEventListener("upgradeneeded",h=>{o(P2(n.result),h.oldVersion,h.newVersion,P2(n.transaction),h)}),e&&n.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),a.then(h=>{r&&h.addEventListener("close",()=>r()),c&&h.addEventListener("versionchange",v=>c(v.oldVersion,v.newVersion,v))}).catch(()=>{}),a}var Qd=["get","getKey","getAll","getAllKeys","count"],Yd=["put","add","delete","clear"],Ac=new Map;function ai(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Ac.get(t))return Ac.get(t);let e=t.replace(/FromIndex$/,""),o=t!==e,c=Yd.includes(e);if(!(e in(o?IDBIndex:IDBObjectStore).prototype)||!(c||Qd.includes(e)))return;let r=function(n,...a){return S(this,null,function*(){let h=this.transaction(n,c?"readwrite":"readonly"),v=h.store;return o&&(v=v.index(a.shift())),(yield Promise.all([v[e](...a),c&&h.done]))[0]})};return Ac.set(t,r),r}li(s=>l1(k({},s),{get:(t,e,o)=>ai(t,e)||s.get(t,e,o),has:(t,e)=>!!ai(t,e)||s.has(t,e)}));var Rc=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Jd(e)){let o=e.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(e=>e).join(" ")}};function Jd(s){let t=s.getComponent();return t?.type==="VERSION"}var bc="@firebase/app",hi="0.10.8";var q0=new S5("@firebase/app"),Xd="@firebase/app-compat",tu="@firebase/analytics-compat",eu="@firebase/analytics",su="@firebase/app-check-compat",ou="@firebase/app-check",cu="@firebase/auth",ru="@firebase/auth-compat",nu="@firebase/database",lu="@firebase/database-compat",au="@firebase/functions",iu="@firebase/functions-compat",hu="@firebase/installations",vu="@firebase/installations-compat",gu="@firebase/messaging",wu="@firebase/messaging-compat",du="@firebase/performance",uu="@firebase/performance-compat",pu="@firebase/remote-config",mu="@firebase/remote-config-compat",fu="@firebase/storage",zu="@firebase/storage-compat",xu="@firebase/firestore",Mu="@firebase/vertexai-preview",Cu="@firebase/firestore-compat",Vu="firebase",Hu="10.12.5";var kc="[DEFAULT]",Lu={[bc]:"fire-core",[Xd]:"fire-core-compat",[eu]:"fire-analytics",[tu]:"fire-analytics-compat",[ou]:"fire-app-check",[su]:"fire-app-check-compat",[cu]:"fire-auth",[ru]:"fire-auth-compat",[nu]:"fire-rtdb",[lu]:"fire-rtdb-compat",[au]:"fire-fn",[iu]:"fire-fn-compat",[hu]:"fire-iid",[vu]:"fire-iid-compat",[gu]:"fire-fcm",[wu]:"fire-fcm-compat",[du]:"fire-perf",[uu]:"fire-perf-compat",[pu]:"fire-rc",[mu]:"fire-rc-compat",[fu]:"fire-gcs",[zu]:"fire-gcs-compat",[xu]:"fire-fst",[Cu]:"fire-fst-compat",[Mu]:"fire-vertex","fire-js":"fire-js",[Vu]:"fire-js-all"};var xs=new Map,yu=new Map,Ec=new Map;function vi(s,t){try{s.container.addComponent(t)}catch(e){q0.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function u4(s){let t=s.name;if(Ec.has(t))return q0.debug(`There were multiple attempts to register component ${t}.`),!1;Ec.set(t,s);for(let e of xs.values())vi(e,s);for(let e of yu.values())vi(e,s);return!0}function ui(s,t){let e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}var Bu={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},H0=new w4("app","Firebase",Bu);var Tc=class{constructor(t,e,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new r0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw H0.create("app-deleted",{appName:this._name})}};var pi=Hu;function Pc(s,t={}){let e=s;typeof t!="object"&&(t={name:t});let o=Object.assign({name:kc,automaticDataCollectionEnabled:!1},t),c=o.name;if(typeof c!="string"||!c)throw H0.create("bad-app-name",{appName:String(c)});if(e||(e=Cc()),!e)throw H0.create("no-options");let r=xs.get(c);if(r){if(d4(e,r.options)&&d4(o,r.config))return r;throw H0.create("duplicate-app",{appName:c})}let n=new fs(c);for(let h of Ec.values())n.addComponent(h);let a=new Tc(e,o,n);return xs.set(c,a),a}function mi(s=kc){let t=xs.get(s);if(!t&&s===kc&&Cc())return Pc();if(!t)throw H0.create("no-app",{appName:s});return t}function L0(s,t,e){var o;let c=(o=Lu[s])!==null&&o!==void 0?o:s;e&&(c+=`-${e}`);let r=c.match(/\s|\//),n=t.match(/\s|\//);if(r||n){let a=[`Unable to register library "${c}" with version "${t}":`];r&&a.push(`library name "${c}" contains illegal characters (whitespace or "/")`),r&&n&&a.push("and"),n&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),q0.warn(a.join(" "));return}u4(new r0(`${c}-version`,()=>({library:c,version:t}),"VERSION"))}var _u="firebase-heartbeat-database",Au=1,p4="firebase-heartbeat-store",Sc=null;function fi(){return Sc||(Sc=ii(_u,Au,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(p4)}catch(e){console.warn(e)}}}}).catch(s=>{throw H0.create("idb-open",{originalErrorMessage:s.message})})),Sc}function Su(s){return S(this,null,function*(){try{let e=(yield fi()).transaction(p4),o=yield e.objectStore(p4).get(zi(s));return yield e.done,o}catch(t){if(t instanceof o0)q0.warn(t.message);else{let e=H0.create("idb-get",{originalErrorMessage:t?.message});q0.warn(e.message)}}})}function gi(s,t){return S(this,null,function*(){try{let o=(yield fi()).transaction(p4,"readwrite");yield o.objectStore(p4).put(t,zi(s)),yield o.done}catch(e){if(e instanceof o0)q0.warn(e.message);else{let o=H0.create("idb-set",{originalErrorMessage:e?.message});q0.warn(o.message)}}})}function zi(s){return`${s.name}!${s.options.appId}`}var Ru=1024,bu=30*24*60*60*1e3,Ic=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Dc(e),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}triggerHeartbeat(){return S(this,null,function*(){var t,e;let c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wi();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(n=>n.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(n=>{let a=new Date(n.date).valueOf();return Date.now()-a<=bu}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return S(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=wi(),{heartbeatsToSend:o,unsentEntries:c}=ku(this._heartbeatsCache.heartbeats),r=g4(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=e,c.length>0?(this._heartbeatsCache.heartbeats=c,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r})}};function wi(){return new Date().toISOString().substring(0,10)}function ku(s,t=Ru){let e=[],o=s.slice();for(let c of s){let r=e.find(n=>n.agent===c.agent);if(r){if(r.dates.push(c.date),di(e)>t){r.dates.pop();break}}else if(e.push({agent:c.agent,dates:[c.date]}),di(e)>t){e.pop();break}o=o.slice(1)}return{heartbeatsToSend:e,unsentEntries:o}}var Dc=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Vc()?si().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield Su(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let c=yield this.read();return gi(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:c.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let c=yield this.read();return gi(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...t.heartbeats]})}else return})}};function di(s){return g4(JSON.stringify({version:2,heartbeats:s})).length}function Eu(s){u4(new r0("platform-logger",t=>new Rc(t),"PRIVATE")),u4(new r0("heartbeat",t=>new Ic(t),"PRIVATE")),L0(bc,hi,s),L0(bc,hi,"esm2017"),L0("fire-js","")}Eu("");var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mi={};var y0,Oc;(function(){var s;function t(M,p){function m(){}m.prototype=p.prototype,M.D=p.prototype,M.prototype=new m,M.prototype.constructor=M,M.C=function(x,C,H){for(var f=Array(arguments.length-2),W2=2;W2<arguments.length;W2++)f[W2-2]=arguments[W2];return p.prototype[C].apply(x,f)}}function e(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,e),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(M,p,m){m||(m=0);var x=Array(16);if(typeof p=="string")for(var C=0;16>C;++C)x[C]=p.charCodeAt(m++)|p.charCodeAt(m++)<<8|p.charCodeAt(m++)<<16|p.charCodeAt(m++)<<24;else for(C=0;16>C;++C)x[C]=p[m++]|p[m++]<<8|p[m++]<<16|p[m++]<<24;p=M.g[0],m=M.g[1],C=M.g[2];var H=M.g[3],f=p+(H^m&(C^H))+x[0]+3614090360&4294967295;p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[1]+3905402710&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[2]+606105819&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[3]+3250441966&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[4]+4118548399&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[5]+1200080426&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[6]+2821735955&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[7]+4249261313&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[8]+1770035416&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[9]+2336552879&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[10]+4294925233&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[11]+2304563134&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[12]+1804603682&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[13]+4254626195&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[14]+2792965006&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[15]+1236535329&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(C^H&(m^C))+x[1]+4129170786&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[6]+3225465664&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[11]+643717713&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[0]+3921069994&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[5]+3593408605&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[10]+38016083&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[15]+3634488961&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[4]+3889429448&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[9]+568446438&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[14]+3275163606&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[3]+4107603335&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[8]+1163531501&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[13]+2850285829&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[2]+4243563512&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[7]+1735328473&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[12]+2368359562&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(m^C^H)+x[5]+4294588738&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[8]+2272392833&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[11]+1839030562&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[14]+4259657740&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[1]+2763975236&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[4]+1272893353&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[7]+4139469664&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[10]+3200236656&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[13]+681279174&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[0]+3936430074&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[3]+3572445317&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[6]+76029189&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[9]+3654602809&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[12]+3873151461&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[15]+530742520&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[2]+3299628645&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(C^(m|~H))+x[0]+4096336452&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[7]+1126891415&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[14]+2878612391&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[5]+4237533241&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[12]+1700485571&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[3]+2399980690&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[10]+4293915773&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[1]+2240044497&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[8]+1873313359&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[15]+4264355552&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[6]+2734768916&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[13]+1309151649&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[4]+4149444226&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[11]+3174756917&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[2]+718787259&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[9]+3951481745&4294967295,M.g[0]=M.g[0]+p&4294967295,M.g[1]=M.g[1]+(C+(f<<21&4294967295|f>>>11))&4294967295,M.g[2]=M.g[2]+C&4294967295,M.g[3]=M.g[3]+H&4294967295}o.prototype.u=function(M,p){p===void 0&&(p=M.length);for(var m=p-this.blockSize,x=this.B,C=this.h,H=0;H<p;){if(C==0)for(;H<=m;)c(this,M,H),H+=this.blockSize;if(typeof M=="string"){for(;H<p;)if(x[C++]=M.charCodeAt(H++),C==this.blockSize){c(this,x),C=0;break}}else for(;H<p;)if(x[C++]=M[H++],C==this.blockSize){c(this,x),C=0;break}}this.h=C,this.o+=p},o.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var p=1;p<M.length-8;++p)M[p]=0;var m=8*this.o;for(p=M.length-8;p<M.length;++p)M[p]=m&255,m/=256;for(this.u(M),M=Array(16),p=m=0;4>p;++p)for(var x=0;32>x;x+=8)M[m++]=this.g[p]>>>x&255;return M};function r(M,p){var m=a;return Object.prototype.hasOwnProperty.call(m,M)?m[M]:m[M]=p(M)}function n(M,p){this.h=p;for(var m=[],x=!0,C=M.length-1;0<=C;C--){var H=M[C]|0;x&&H==p||(m[C]=H,x=!1)}this.g=m}var a={};function h(M){return-128<=M&&128>M?r(M,function(p){return new n([p|0],0>p?-1:0)}):new n([M|0],0>M?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return u;if(0>M)return B(v(-M));for(var p=[],m=1,x=0;M>=m;x++)p[x]=M/m|0,m*=4294967296;return new n(p,0)}function w(M,p){if(M.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(M.charAt(0)=="-")return B(w(M.substring(1),p));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=v(Math.pow(p,8)),x=u,C=0;C<M.length;C+=8){var H=Math.min(8,M.length-C),f=parseInt(M.substring(C,C+H),p);8>H?(H=v(Math.pow(p,H)),x=x.j(H).add(v(f))):(x=x.j(m),x=x.add(v(f)))}return x}var u=h(0),z=h(1),y=h(16777216);s=n.prototype,s.m=function(){if(R(this))return-B(this).m();for(var M=0,p=1,m=0;m<this.g.length;m++){var x=this.i(m);M+=(0<=x?x:4294967296+x)*p,p*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(A(this))return"0";if(R(this))return"-"+B(this).toString(M);for(var p=v(Math.pow(M,6)),m=this,x="";;){var C=o1(m,p).g;m=O(m,C.j(p));var H=((0<m.g.length?m.g[0]:m.h)>>>0).toString(M);if(m=C,A(m))return H+x;for(;6>H.length;)H="0"+H;x=H+x}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function A(M){if(M.h!=0)return!1;for(var p=0;p<M.g.length;p++)if(M.g[p]!=0)return!1;return!0}function R(M){return M.h==-1}s.l=function(M){return M=O(this,M),R(M)?-1:A(M)?0:1};function B(M){for(var p=M.g.length,m=[],x=0;x<p;x++)m[x]=~M.g[x];return new n(m,~M.h).add(z)}s.abs=function(){return R(this)?B(this):this},s.add=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0,C=0;C<=p;C++){var H=x+(this.i(C)&65535)+(M.i(C)&65535),f=(H>>>16)+(this.i(C)>>>16)+(M.i(C)>>>16);x=f>>>16,H&=65535,f&=65535,m[C]=f<<16|H}return new n(m,m[m.length-1]&-2147483648?-1:0)};function O(M,p){return M.add(B(p))}s.j=function(M){if(A(this)||A(M))return u;if(R(this))return R(M)?B(this).j(B(M)):B(B(this).j(M));if(R(M))return B(this.j(B(M)));if(0>this.l(y)&&0>M.l(y))return v(this.m()*M.m());for(var p=this.g.length+M.g.length,m=[],x=0;x<2*p;x++)m[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<M.g.length;C++){var H=this.i(x)>>>16,f=this.i(x)&65535,W2=M.i(C)>>>16,ht=M.i(C)&65535;m[2*x+2*C]+=f*ht,F(m,2*x+2*C),m[2*x+2*C+1]+=H*ht,F(m,2*x+2*C+1),m[2*x+2*C+1]+=f*W2,F(m,2*x+2*C+1),m[2*x+2*C+2]+=H*W2,F(m,2*x+2*C+2)}for(x=0;x<p;x++)m[x]=m[2*x+1]<<16|m[2*x];for(x=p;x<2*p;x++)m[x]=0;return new n(m,0)};function F(M,p){for(;(M[p]&65535)!=M[p];)M[p+1]+=M[p]>>>16,M[p]&=65535,p++}function D(M,p){this.g=M,this.h=p}function o1(M,p){if(A(p))throw Error("division by zero");if(A(M))return new D(u,u);if(R(M))return p=o1(B(M),p),new D(B(p.g),B(p.h));if(R(p))return p=o1(M,B(p)),new D(B(p.g),p.h);if(30<M.g.length){if(R(M)||R(p))throw Error("slowDivide_ only works with positive integers.");for(var m=z,x=p;0>=x.l(M);)m=_1(m),x=_1(x);var C=t1(m,1),H=t1(x,1);for(x=t1(x,2),m=t1(m,2);!A(x);){var f=H.add(x);0>=f.l(M)&&(C=C.add(m),H=f),x=t1(x,1),m=t1(m,1)}return p=O(M,C.j(p)),new D(C,p)}for(C=u;0<=M.l(p);){for(m=Math.max(1,Math.floor(M.m()/p.m())),x=Math.ceil(Math.log(m)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),H=v(m),f=H.j(p);R(f)||0<f.l(M);)m-=x,H=v(m),f=H.j(p);A(H)&&(H=z),C=C.add(H),M=O(M,f)}return new D(C,M)}s.A=function(M){return o1(this,M).h},s.and=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)&M.i(x);return new n(m,this.h&M.h)},s.or=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)|M.i(x);return new n(m,this.h|M.h)},s.xor=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)^M.i(x);return new n(m,this.h^M.h)};function _1(M){for(var p=M.g.length+1,m=[],x=0;x<p;x++)m[x]=M.i(x)<<1|M.i(x-1)>>>31;return new n(m,M.h)}function t1(M,p){var m=p>>5;p%=32;for(var x=M.g.length-m,C=[],H=0;H<x;H++)C[H]=0<p?M.i(H+m)>>>p|M.i(H+m+1)<<32-p:M.i(H+m);return new n(C,M.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Oc=Mi.Md5=o,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=v,n.fromString=w,y0=Mi.Integer=n}).apply(typeof xi<"u"?xi:typeof self<"u"?self:typeof window<"u"?window:{});var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n0={};var Nc,Fc,R5,jc,m4,Cs,Zc,Uc,qc;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,i,g){return l==Array.prototype||l==Object.prototype||(l[i]=g.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ms=="object"&&Ms];for(var i=0;i<l.length;++i){var g=l[i];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var o=e(this);function c(l,i){if(i)t:{var g=o;l=l.split(".");for(var d=0;d<l.length-1;d++){var V=l[d];if(!(V in g))break t;g=g[V]}l=l[l.length-1],d=g[l],i=i(d),i!=d&&i!=null&&t(g,l,{configurable:!0,writable:!0,value:i})}}function r(l,i){l instanceof String&&(l+="");var g=0,d=!1,V={next:function(){if(!d&&g<l.length){var _=g++;return{value:i(_,l[_]),done:!1}}return d=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}c("Array.prototype.values",function(l){return l||function(){return r(this,function(i,g){return g})}});var n=n||{},a=this||self;function h(l){var i=typeof l;return i=i!="object"?i:l?Array.isArray(l)?"array":i:"null",i=="array"||i=="object"&&typeof l.length=="number"}function v(l){var i=typeof l;return i=="object"&&l!=null||i=="function"}function w(l,i,g){return l.call.apply(l.bind,arguments)}function u(l,i,g){if(!l)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,d),l.apply(i,V)}}return function(){return l.apply(i,arguments)}}function z(l,i,g){return z=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:u,z.apply(null,arguments)}function y(l,i){var g=Array.prototype.slice.call(arguments,1);return function(){var d=g.slice();return d.push.apply(d,arguments),l.apply(this,d)}}function A(l,i){function g(){}g.prototype=i.prototype,l.aa=i.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(d,V,_){for(var T=Array(arguments.length-2),p1=2;p1<arguments.length;p1++)T[p1-2]=arguments[p1];return i.prototype[V].apply(d,T)}}function R(l){let i=l.length;if(0<i){let g=Array(i);for(let d=0;d<i;d++)g[d]=l[d];return g}return[]}function B(l,i){for(let g=1;g<arguments.length;g++){let d=arguments[g];if(h(d)){let V=l.length||0,_=d.length||0;l.length=V+_;for(let T=0;T<_;T++)l[V+T]=d[T]}else l.push(d)}}class O{constructor(i,g){this.i=i,this.j=g,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}function F(l){return/^[\s\xa0]*$/.test(l)}function D(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function o1(l){return o1[" "](l),l}o1[" "]=function(){};var _1=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function t1(l,i,g){for(let d in l)i.call(g,l[d],d,l)}function M(l,i){for(let g in l)i.call(void 0,l[g],g,l)}function p(l){let i={};for(let g in l)i[g]=l[g];return i}let m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,i){let g,d;for(let V=1;V<arguments.length;V++){d=arguments[V];for(g in d)l[g]=d[g];for(let _=0;_<m.length;_++)g=m[_],Object.prototype.hasOwnProperty.call(d,g)&&(l[g]=d[g])}}function C(l){var i=1;l=l.split(":");let g=[];for(;0<i&&l.length;)g.push(l.shift()),i--;return l.length&&g.push(l.join(":")),g}function H(l){a.setTimeout(()=>{throw l},0)}function f(){var l=E3;let i=null;return l.g&&(i=l.g,l.g=l.g.next,l.g||(l.h=null),i.next=null),i}class W2{constructor(){this.h=this.g=null}add(i,g){let d=ht.get();d.set(i,g),this.h?this.h.next=d:this.g=d,this.h=d}}var ht=new O(()=>new Y8,l=>l.reset());class Y8{constructor(){this.next=this.g=this.h=null}set(i,g){this.h=i,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,gt=!1,E3=new W2,Gl=()=>{let l=a.Promise.resolve(void 0);vt=()=>{l.then(J8)}};var J8=()=>{for(var l;l=f();){try{l.h.call(l.g)}catch(g){H(g)}var i=ht;i.j(l),100>i.h&&(i.h++,l.next=i.g,i.g=l)}gt=!1};function v0(){this.s=this.s,this.C=this.C}v0.prototype.s=!1,v0.prototype.ma=function(){this.s||(this.s=!0,this.N())},v0.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G1(l,i){this.type=l,this.g=this.target=i,this.defaultPrevented=!1}G1.prototype.h=function(){this.defaultPrevented=!0};var X8=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,i=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,i),a.removeEventListener("test",g,i)}catch{}return l}();function wt(l,i){if(G1.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,d=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=i,i=l.relatedTarget){if(_1){t:{try{o1(i.nodeName);var V=!0;break t}catch{}V=!1}V||(i=null)}}else g=="mouseover"?i=l.fromElement:g=="mouseout"&&(i=l.toElement);this.relatedTarget=i,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:tv[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&wt.aa.h.call(this)}}A(wt,G1);var tv={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),ev=0;function sv(l,i,g,d,V){this.listener=l,this.proxy=null,this.src=i,this.type=g,this.capture=!!d,this.ha=V,this.key=++ev,this.da=this.fa=!1}function re(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ne(l){this.src=l,this.g={},this.h=0}ne.prototype.add=function(l,i,g,d,V){var _=l.toString();l=this.g[_],l||(l=this.g[_]=[],this.h++);var T=I3(l,i,d,V);return-1<T?(i=l[T],g||(i.fa=!1)):(i=new sv(i,this.src,_,!!d,V),i.fa=g,l.push(i)),i};function T3(l,i){var g=i.type;if(g in l.g){var d=l.g[g],V=Array.prototype.indexOf.call(d,i,void 0),_;(_=0<=V)&&Array.prototype.splice.call(d,V,1),_&&(re(i),l.g[g].length==0&&(delete l.g[g],l.h--))}}function I3(l,i,g,d){for(var V=0;V<l.length;++V){var _=l[V];if(!_.da&&_.listener==i&&_.capture==!!g&&_.ha==d)return V}return-1}var D3="closure_lm_"+(1e6*Math.random()|0),P3={};function $l(l,i,g,d,V){if(d&&d.once)return Kl(l,i,g,d,V);if(Array.isArray(i)){for(var _=0;_<i.length;_++)$l(l,i[_],g,d,V);return null}return g=j3(g),l&&l[dt]?l.K(i,g,v(d)?!!d.capture:!!d,V):Wl(l,i,g,!1,d,V)}function Wl(l,i,g,d,V,_){if(!i)throw Error("Invalid event type");var T=v(V)?!!V.capture:!!V,p1=N3(l);if(p1||(l[D3]=p1=new ne(l)),g=p1.add(i,g,d,T,_),g.proxy)return g;if(d=ov(),g.proxy=d,d.src=l,d.listener=g,l.addEventListener)X8||(V=T),V===void 0&&(V=!1),l.addEventListener(i.toString(),d,V);else if(l.attachEvent)l.attachEvent(Yl(i.toString()),d);else if(l.addListener&&l.removeListener)l.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ov(){function l(g){return i.call(l.src,l.listener,g)}let i=cv;return l}function Kl(l,i,g,d,V){if(Array.isArray(i)){for(var _=0;_<i.length;_++)Kl(l,i[_],g,d,V);return null}return g=j3(g),l&&l[dt]?l.L(i,g,v(d)?!!d.capture:!!d,V):Wl(l,i,g,!0,d,V)}function Ql(l,i,g,d,V){if(Array.isArray(i))for(var _=0;_<i.length;_++)Ql(l,i[_],g,d,V);else d=v(d)?!!d.capture:!!d,g=j3(g),l&&l[dt]?(l=l.i,i=String(i).toString(),i in l.g&&(_=l.g[i],g=I3(_,g,d,V),-1<g&&(re(_[g]),Array.prototype.splice.call(_,g,1),_.length==0&&(delete l.g[i],l.h--)))):l&&(l=N3(l))&&(i=l.g[i.toString()],l=-1,i&&(l=I3(i,g,d,V)),(g=-1<l?i[l]:null)&&O3(g))}function O3(l){if(typeof l!="number"&&l&&!l.da){var i=l.src;if(i&&i[dt])T3(i.i,l);else{var g=l.type,d=l.proxy;i.removeEventListener?i.removeEventListener(g,d,l.capture):i.detachEvent?i.detachEvent(Yl(g),d):i.addListener&&i.removeListener&&i.removeListener(d),(g=N3(i))?(T3(g,l),g.h==0&&(g.src=null,i[D3]=null)):re(l)}}}function Yl(l){return l in P3?P3[l]:P3[l]="on"+l}function cv(l,i){if(l.da)l=!0;else{i=new wt(i,this);var g=l.listener,d=l.ha||l.src;l.fa&&O3(l),l=g.call(d,i)}return l}function N3(l){return l=l[D3],l instanceof ne?l:null}var F3="__closure_events_fn_"+(1e9*Math.random()>>>0);function j3(l){return typeof l=="function"?l:(l[F3]||(l[F3]=function(i){return l.handleEvent(i)}),l[F3])}function $1(){v0.call(this),this.i=new ne(this),this.M=this,this.F=null}A($1,v0),$1.prototype[dt]=!0,$1.prototype.removeEventListener=function(l,i,g,d){Ql(this,l,i,g,d)};function s2(l,i){var g,d=l.F;if(d)for(g=[];d;d=d.F)g.push(d);if(l=l.M,d=i.type||i,typeof i=="string")i=new G1(i,l);else if(i instanceof G1)i.target=i.target||l;else{var V=i;i=new G1(d,l),x(i,V)}if(V=!0,g)for(var _=g.length-1;0<=_;_--){var T=i.g=g[_];V=le(T,d,!0,i)&&V}if(T=i.g=l,V=le(T,d,!0,i)&&V,V=le(T,d,!1,i)&&V,g)for(_=0;_<g.length;_++)T=i.g=g[_],V=le(T,d,!1,i)&&V}$1.prototype.N=function(){if($1.aa.N.call(this),this.i){var l=this.i,i;for(i in l.g){for(var g=l.g[i],d=0;d<g.length;d++)re(g[d]);delete l.g[i],l.h--}}this.F=null},$1.prototype.K=function(l,i,g,d){return this.i.add(String(l),i,!1,g,d)},$1.prototype.L=function(l,i,g,d){return this.i.add(String(l),i,!0,g,d)};function le(l,i,g,d){if(i=l.i.g[String(i)],!i)return!0;i=i.concat();for(var V=!0,_=0;_<i.length;++_){var T=i[_];if(T&&!T.da&&T.capture==g){var p1=T.listener,F1=T.ha||T.src;T.fa&&T3(l.i,T),V=p1.call(F1,d)!==!1&&V}}return V&&!d.defaultPrevented}function Jl(l,i,g){if(typeof l=="function")g&&(l=z(l,g));else if(l&&typeof l.handleEvent=="function")l=z(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:a.setTimeout(l,i||0)}function Xl(l){l.g=Jl(()=>{l.g=null,l.i&&(l.i=!1,Xl(l))},l.l);let i=l.h;l.h=null,l.m.apply(null,i)}class rv extends v0{constructor(i,g){super(),this.m=i,this.l=g,this.h=null,this.i=!1,this.g=null}j(i){this.h=arguments,this.g?this.i=!0:Xl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ut(l){v0.call(this),this.h=l,this.g={}}A(ut,v0);var t7=[];function e7(l){t1(l.g,function(i,g){this.g.hasOwnProperty(g)&&O3(i)},l),l.g={}}ut.prototype.N=function(){ut.aa.N.call(this),e7(this)},ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Z3=a.JSON.stringify,nv=a.JSON.parse,lv=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function U3(){}U3.prototype.h=null;function s7(l){return l.h||(l.h=l.i())}function o7(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function q3(){G1.call(this,"d")}A(q3,G1);function G3(){G1.call(this,"c")}A(G3,G1);var T0={},c7=null;function ae(){return c7=c7||new $1}T0.La="serverreachability";function r7(l){G1.call(this,T0.La,l)}A(r7,G1);function mt(l){let i=ae();s2(i,new r7(i))}T0.STAT_EVENT="statevent";function n7(l,i){G1.call(this,T0.STAT_EVENT,l),this.stat=i}A(n7,G1);function o2(l){let i=ae();s2(i,new n7(i,l))}T0.Ma="timingevent";function l7(l,i){G1.call(this,T0.Ma,l),this.size=i}A(l7,G1);function ft(l,i){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},i)}function zt(){this.g=!0}zt.prototype.xa=function(){this.g=!1};function av(l,i,g,d,V,_){l.info(function(){if(l.g)if(_)for(var T="",p1=_.split("&"),F1=0;F1<p1.length;F1++){var n1=p1[F1].split("=");if(1<n1.length){var W1=n1[0];n1=n1[1];var K1=W1.split("_");T=2<=K1.length&&K1[1]=="type"?T+(W1+"="+n1+"&"):T+(W1+"=redacted&")}}else T=null;else T=_;return"XMLHTTP REQ ("+d+") [attempt "+V+"]: "+i+`
`+g+`
`+T})}function iv(l,i,g,d,V,_,T){l.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+V+"]: "+i+`
`+g+`
`+_+" "+T})}function l5(l,i,g,d){l.info(function(){return"XMLHTTP TEXT ("+i+"): "+vv(l,g)+(d?" "+d:"")})}function hv(l,i){l.info(function(){return"TIMEOUT: "+i})}zt.prototype.info=function(){};function vv(l,i){if(!l.g)return i;if(!i)return null;try{var g=JSON.parse(i);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var d=g[l];if(!(2>d.length)){var V=d[1];if(Array.isArray(V)&&!(1>V.length)){var _=V[0];if(_!="noop"&&_!="stop"&&_!="close")for(var T=1;T<V.length;T++)V[T]=""}}}}return Z3(g)}catch{return i}}var ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},a7={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$3;function he(){}A(he,U3),he.prototype.g=function(){return new XMLHttpRequest},he.prototype.i=function(){return{}},$3=new he;function g0(l,i,g,d){this.j=l,this.i=i,this.l=g,this.R=d||1,this.U=new ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new i7}function i7(){this.i=null,this.g="",this.h=!1}var h7={},W3={};function K3(l,i,g){l.L=1,l.v=de(K2(i)),l.m=g,l.P=!0,v7(l,null)}function v7(l,i){l.F=Date.now(),ve(l),l.A=K2(l.v);var g=l.A,d=l.R;Array.isArray(d)||(d=[String(d)]),L7(g.i,"t",d),l.C=0,g=l.j.J,l.h=new i7,l.g=Z7(l.j,g?i:null,!l.m),0<l.O&&(l.M=new rv(z(l.Y,l,l.g),l.O)),i=l.U,g=l.g,d=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(t7[0]=V.toString()),V=t7);for(var _=0;_<V.length;_++){var T=$l(g,V[_],d||i.handleEvent,!1,i.h||i);if(!T)break;i.g[T.key]=T}i=l.H?p(l.H):{},l.m?(l.u||(l.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,i)):(l.u="GET",l.g.ea(l.A,l.u,null,i)),mt(),av(l.i,l.u,l.A,l.l,l.R,l.m)}g0.prototype.ca=function(l){l=l.target;let i=this.M;i&&Q2(l)==3?i.j():this.Y(l)},g0.prototype.Y=function(l){try{if(l==this.g)t:{let K1=Q2(this.g);var i=this.g.Ba();let h5=this.g.Z();if(!(3>K1)&&(K1!=3||this.g&&(this.h.h||this.g.oa()||b7(this.g)))){this.J||K1!=4||i==7||(i==8||0>=h5?mt(3):mt(2)),Q3(this);var g=this.g.Z();this.X=g;e:if(g7(this)){var d=b7(this.g);l="";var V=d.length,_=Q2(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){I0(this),xt(this);var T="";break e}this.h.i=new a.TextDecoder}for(i=0;i<V;i++)this.h.h=!0,l+=this.h.i.decode(d[i],{stream:!(_&&i==V-1)});d.length=0,this.h.g+=l,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=g==200,iv(this.i,this.u,this.A,this.l,this.R,K1,g),this.o){if(this.T&&!this.K){e:{if(this.g){var p1,F1=this.g;if((p1=F1.g?F1.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(p1)){var n1=p1;break e}}n1=null}if(g=n1)l5(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Y3(this,g);else{this.o=!1,this.s=3,o2(12),I0(this),xt(this);break t}}if(this.P){g=!0;let V2;for(;!this.J&&this.C<T.length;)if(V2=gv(this,T),V2==W3){K1==4&&(this.s=4,o2(14),g=!1),l5(this.i,this.l,null,"[Incomplete Response]");break}else if(V2==h7){this.s=4,o2(15),l5(this.i,this.l,T,"[Invalid Chunk]"),g=!1;break}else l5(this.i,this.l,V2,null),Y3(this,V2);if(g7(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),K1!=4||T.length!=0||this.h.h||(this.s=1,o2(16),g=!1),this.o=this.o&&g,!g)l5(this.i,this.l,T,"[Invalid Chunked Response]"),I0(this),xt(this);else if(0<T.length&&!this.W){this.W=!0;var W1=this.j;W1.g==this&&W1.ba&&!W1.M&&(W1.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),oo(W1),W1.M=!0,o2(11))}}else l5(this.i,this.l,T,null),Y3(this,T);K1==4&&I0(this),this.o&&!this.J&&(K1==4?O7(this.j,this):(this.o=!1,ve(this)))}else Av(this.g),g==400&&0<T.indexOf("Unknown SID")?(this.s=3,o2(12)):(this.s=0,o2(13)),I0(this),xt(this)}}}catch{}finally{}};function g7(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function gv(l,i){var g=l.C,d=i.indexOf(`
`,g);return d==-1?W3:(g=Number(i.substring(g,d)),isNaN(g)?h7:(d+=1,d+g>i.length?W3:(i=i.slice(d,d+g),l.C=d+g,i)))}g0.prototype.cancel=function(){this.J=!0,I0(this)};function ve(l){l.S=Date.now()+l.I,w7(l,l.I)}function w7(l,i){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ft(z(l.ba,l),i)}function Q3(l){l.B&&(a.clearTimeout(l.B),l.B=null)}g0.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(hv(this.i,this.A),this.L!=2&&(mt(),o2(17)),I0(this),this.s=2,xt(this)):w7(this,this.S-l)};function xt(l){l.j.G==0||l.J||O7(l.j,l)}function I0(l){Q3(l);var i=l.M;i&&typeof i.ma=="function"&&i.ma(),l.M=null,e7(l.U),l.g&&(i=l.g,l.g=null,i.abort(),i.ma())}function Y3(l,i){try{var g=l.j;if(g.G!=0&&(g.g==l||J3(g.h,l))){if(!l.K&&J3(g.h,l)&&g.G==3){try{var d=g.Da.g.parse(i)}catch{d=null}if(Array.isArray(d)&&d.length==3){var V=d;if(V[0]==0){t:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ze(g),me(g);else break t;so(g),o2(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=ft(z(g.Za,g),6e3));if(1>=p7(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else P0(g,11)}else if((l.K||g.g==l)&&ze(g),!F(i))for(V=g.Da.g.parse(i),i=0;i<V.length;i++){let n1=V[i];if(g.T=n1[0],n1=n1[1],g.G==2)if(n1[0]=="c"){g.K=n1[1],g.ia=n1[2];let W1=n1[3];W1!=null&&(g.la=W1,g.j.info("VER="+g.la));let K1=n1[4];K1!=null&&(g.Aa=K1,g.j.info("SVER="+g.Aa));let h5=n1[5];h5!=null&&typeof h5=="number"&&0<h5&&(d=1.5*h5,g.L=d,g.j.info("backChannelRequestTimeoutMs_="+d)),d=g;let V2=l.g;if(V2){let Me=V2.g?V2.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Me){var _=d.h;_.g||Me.indexOf("spdy")==-1&&Me.indexOf("quic")==-1&&Me.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(X3(_,_.h),_.h=null))}if(d.D){let co=V2.g?V2.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(d.ya=co,z1(d.I,d.D,co))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),d=g;var T=l;if(d.qa=j7(d,d.J?d.ia:null,d.W),T.K){m7(d.h,T);var p1=T,F1=d.L;F1&&(p1.I=F1),p1.B&&(Q3(p1),ve(p1)),d.g=T}else D7(d);0<g.i.length&&fe(g)}else n1[0]!="stop"&&n1[0]!="close"||P0(g,7);else g.G==3&&(n1[0]=="stop"||n1[0]=="close"?n1[0]=="stop"?P0(g,7):eo(g):n1[0]!="noop"&&g.l&&g.l.ta(n1),g.v=0)}}mt(4)}catch{}}var wv=class{constructor(l,i){this.g=l,this.map=i}};function d7(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function u7(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function p7(l){return l.h?1:l.g?l.g.size:0}function J3(l,i){return l.h?l.h==i:l.g?l.g.has(i):!1}function X3(l,i){l.g?l.g.add(i):l.h=i}function m7(l,i){l.h&&l.h==i?l.h=null:l.g&&l.g.has(i)&&l.g.delete(i)}d7.prototype.cancel=function(){if(this.i=f7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function f7(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let i=l.i;for(let g of l.g.values())i=i.concat(g.D);return i}return R(l.i)}function dv(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(h(l)){for(var i=[],g=l.length,d=0;d<g;d++)i.push(l[d]);return i}i=[],g=0;for(d in l)i[g++]=l[d];return i}function uv(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(h(l)||typeof l=="string"){var i=[];l=l.length;for(var g=0;g<l;g++)i.push(g);return i}i=[],g=0;for(let d in l)i[g++]=d;return i}}}function z7(l,i){if(l.forEach&&typeof l.forEach=="function")l.forEach(i,void 0);else if(h(l)||typeof l=="string")Array.prototype.forEach.call(l,i,void 0);else for(var g=uv(l),d=dv(l),V=d.length,_=0;_<V;_++)i.call(void 0,d[_],g&&g[_],l)}var x7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pv(l,i){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var d=l[g].indexOf("="),V=null;if(0<=d){var _=l[g].substring(0,d);V=l[g].substring(d+1)}else _=l[g];i(_,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function D0(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof D0){this.h=l.h,ge(this,l.j),this.o=l.o,this.g=l.g,we(this,l.s),this.l=l.l;var i=l.i,g=new Vt;g.i=i.i,i.g&&(g.g=new Map(i.g),g.h=i.h),M7(this,g),this.m=l.m}else l&&(i=String(l).match(x7))?(this.h=!1,ge(this,i[1]||"",!0),this.o=Mt(i[2]||""),this.g=Mt(i[3]||"",!0),we(this,i[4]),this.l=Mt(i[5]||"",!0),M7(this,i[6]||"",!0),this.m=Mt(i[7]||"")):(this.h=!1,this.i=new Vt(null,this.h))}D0.prototype.toString=function(){var l=[],i=this.j;i&&l.push(Ct(i,C7,!0),":");var g=this.g;return(g||i=="file")&&(l.push("//"),(i=this.o)&&l.push(Ct(i,C7,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ct(g,g.charAt(0)=="/"?zv:fv,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ct(g,Mv)),l.join("")};function K2(l){return new D0(l)}function ge(l,i,g){l.j=g?Mt(i,!0):i,l.j&&(l.j=l.j.replace(/:$/,""))}function we(l,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);l.s=i}else l.s=null}function M7(l,i,g){i instanceof Vt?(l.i=i,Cv(l.i,l.h)):(g||(i=Ct(i,xv)),l.i=new Vt(i,l.h))}function z1(l,i,g){l.i.set(i,g)}function de(l){return z1(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mt(l,i){return l?i?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ct(l,i,g){return typeof l=="string"?(l=encodeURI(l).replace(i,mv),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function mv(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var C7=/[#\/\?@]/g,fv=/[#\?:]/g,zv=/[#\?]/g,xv=/[#\?@]/g,Mv=/#/g;function Vt(l,i){this.h=this.g=null,this.i=l||null,this.j=!!i}function w0(l){l.g||(l.g=new Map,l.h=0,l.i&&pv(l.i,function(i,g){l.add(decodeURIComponent(i.replace(/\+/g," ")),g)}))}s=Vt.prototype,s.add=function(l,i){w0(this),this.i=null,l=a5(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(i),this.h+=1,this};function V7(l,i){w0(l),i=a5(l,i),l.g.has(i)&&(l.i=null,l.h-=l.g.get(i).length,l.g.delete(i))}function H7(l,i){return w0(l),i=a5(l,i),l.g.has(i)}s.forEach=function(l,i){w0(this),this.g.forEach(function(g,d){g.forEach(function(V){l.call(i,V,d,this)},this)},this)},s.na=function(){w0(this);let l=Array.from(this.g.values()),i=Array.from(this.g.keys()),g=[];for(let d=0;d<i.length;d++){let V=l[d];for(let _=0;_<V.length;_++)g.push(i[d])}return g},s.V=function(l){w0(this);let i=[];if(typeof l=="string")H7(this,l)&&(i=i.concat(this.g.get(a5(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)i=i.concat(l[g])}return i},s.set=function(l,i){return w0(this),this.i=null,l=a5(this,l),H7(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[i]),this.h+=1,this},s.get=function(l,i){return l?(l=this.V(l),0<l.length?String(l[0]):i):i};function L7(l,i,g){V7(l,i),0<g.length&&(l.i=null,l.g.set(a5(l,i),R(g)),l.h+=g.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],i=Array.from(this.g.keys());for(var g=0;g<i.length;g++){var d=i[g];let _=encodeURIComponent(String(d)),T=this.V(d);for(d=0;d<T.length;d++){var V=_;T[d]!==""&&(V+="="+encodeURIComponent(String(T[d]))),l.push(V)}}return this.i=l.join("&")};function a5(l,i){return i=String(i),l.j&&(i=i.toLowerCase()),i}function Cv(l,i){i&&!l.j&&(w0(l),l.i=null,l.g.forEach(function(g,d){var V=d.toLowerCase();d!=V&&(V7(this,d),L7(this,V,g))},l)),l.j=i}function Vv(l,i){let g=new zt;if(a.Image){let d=new Image;d.onload=y(d0,g,"TestLoadImage: loaded",!0,i,d),d.onerror=y(d0,g,"TestLoadImage: error",!1,i,d),d.onabort=y(d0,g,"TestLoadImage: abort",!1,i,d),d.ontimeout=y(d0,g,"TestLoadImage: timeout",!1,i,d),a.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=l}else i(!1)}function Hv(l,i){let g=new zt,d=new AbortController,V=setTimeout(()=>{d.abort(),d0(g,"TestPingServer: timeout",!1,i)},1e4);fetch(l,{signal:d.signal}).then(_=>{clearTimeout(V),_.ok?d0(g,"TestPingServer: ok",!0,i):d0(g,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(V),d0(g,"TestPingServer: error",!1,i)})}function d0(l,i,g,d,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),d(g)}catch{}}function Lv(){this.g=new lv}function yv(l,i,g){let d=g||"";try{z7(l,function(V,_){let T=V;v(V)&&(T=Z3(V)),i.push(d+_+"="+encodeURIComponent(T))})}catch(V){throw i.push(d+"type="+encodeURIComponent("_badmap")),V}}function Ht(l){this.l=l.Ub||null,this.j=l.eb||!1}A(Ht,U3),Ht.prototype.g=function(){return new ue(this.l,this.j)},Ht.prototype.i=function(l){return function(){return l}}({});function ue(l,i){$1.call(this),this.D=l,this.o=i,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ue,$1),s=ue.prototype,s.open=function(l,i){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=i,this.readyState=1,yt(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let i={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(i.body=l),(this.D||a).fetch(new Request(this.A,i)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lt(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,yt(this)),this.g&&(this.readyState=3,yt(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;y7(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function y7(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var i=l.value?l.value:new Uint8Array(0);(i=this.v.decode(i,{stream:!l.done}))&&(this.response=this.responseText+=i)}l.done?Lt(this):yt(this),this.readyState==3&&y7(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Lt(this))},s.Qa=function(l){this.g&&(this.response=l,Lt(this))},s.ga=function(){this.g&&Lt(this)};function Lt(l){l.readyState=4,l.l=null,l.j=null,l.v=null,yt(l)}s.setRequestHeader=function(l,i){this.u.append(l,i)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],i=this.h.entries();for(var g=i.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=i.next();return l.join(`\r
`)};function yt(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ue.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function B7(l){let i="";return t1(l,function(g,d){i+=d,i+=":",i+=g,i+=`\r
`}),i}function to(l,i,g){t:{for(d in g){var d=!1;break t}d=!0}d||(g=B7(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):z1(l,i,g))}function V1(l){$1.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(V1,$1);var Bv=/^https?$/i,_v=["POST","PUT"];s=V1.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,i,g,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);i=i?i.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$3.g(),this.v=this.o?s7(this.o):s7($3),this.g.onreadystatechange=z(this.Ea,this);try{this.B=!0,this.g.open(i,String(l),!0),this.B=!1}catch(_){_7(this,_);return}if(l=g||"",g=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var V in d)g.set(V,d[V]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let _ of d.keys())g.set(_,d.get(_));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(g.keys()).find(_=>_.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_v,i,void 0))||d||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[_,T]of g)this.g.setRequestHeader(_,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{R7(this),this.u=!0,this.g.send(l),this.u=!1}catch(_){_7(this,_)}};function _7(l,i){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=i,l.m=5,A7(l),pe(l)}function A7(l){l.A||(l.A=!0,s2(l,"complete"),s2(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,s2(this,"complete"),s2(this,"abort"),pe(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pe(this,!0)),V1.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?S7(this):this.bb())},s.bb=function(){S7(this)};function S7(l){if(l.h&&typeof n<"u"&&(!l.v[1]||Q2(l)!=4||l.Z()!=2)){if(l.u&&Q2(l)==4)Jl(l.Ea,0,l);else if(s2(l,"readystatechange"),Q2(l)==4){l.h=!1;try{let T=l.Z();t:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}var g;if(!(g=i)){var d;if(d=T===0){var V=String(l.D).match(x7)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),d=!Bv.test(V?V.toLowerCase():"")}g=d}if(g)s2(l,"complete"),s2(l,"success");else{l.m=6;try{var _=2<Q2(l)?l.g.statusText:""}catch{_=""}l.l=_+" ["+l.Z()+"]",A7(l)}}finally{pe(l)}}}}function pe(l,i){if(l.g){R7(l);let g=l.g,d=l.v[0]?()=>{}:null;l.g=null,l.v=null,i||s2(l,"ready");try{g.onreadystatechange=d}catch{}}}function R7(l){l.I&&(a.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function Q2(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<Q2(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var i=this.g.responseText;return l&&i.indexOf(l)==0&&(i=i.substring(l.length)),nv(i)}};function b7(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Av(l){let i={};l=(l.g&&2<=Q2(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<l.length;d++){if(F(l[d]))continue;var g=C(l[d]);let V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let _=i[V]||[];i[V]=_,_.push(g)}M(i,function(d){return d.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bt(l,i,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||i}function k7(l){this.Aa=0,this.i=[],this.j=new zt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bt("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bt("baseRetryDelayMs",5e3,l),this.cb=Bt("retryDelaySeedMs",1e4,l),this.Wa=Bt("forwardChannelMaxRetries",2,l),this.wa=Bt("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new d7(l&&l.concurrentRequestLimit),this.Da=new Lv,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=k7.prototype,s.la=8,s.G=1,s.connect=function(l,i,g,d){o2(0),this.W=l,this.H=i||{},g&&d!==void 0&&(this.H.OSID=g,this.H.OAID=d),this.F=this.X,this.I=j7(this,null,this.W),fe(this)};function eo(l){if(E7(l),l.G==3){var i=l.U++,g=K2(l.I);if(z1(g,"SID",l.K),z1(g,"RID",i),z1(g,"TYPE","terminate"),_t(l,g),i=new g0(l,l.j,i),i.L=2,i.v=de(K2(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(i.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=i.v,g=!0),g||(i.g=Z7(i.j,null),i.g.ea(i.v)),i.F=Date.now(),ve(i)}F7(l)}function me(l){l.g&&(oo(l),l.g.cancel(),l.g=null)}function E7(l){me(l),l.u&&(a.clearTimeout(l.u),l.u=null),ze(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function fe(l){if(!u7(l.h)&&!l.s){l.s=!0;var i=l.Ga;vt||Gl(),gt||(vt(),gt=!0),E3.add(i,l),l.B=0}}function Sv(l,i){return p7(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=i.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ft(z(l.Ga,l,i),N7(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new g0(this,this.j,l),_=this.o;if(this.S&&(_?(_=p(_),x(_,this.S)):_=this.S),this.m!==null||this.O||(V.H=_,_=null),this.P)t:{for(var i=0,g=0;g<this.i.length;g++){e:{var d=this.i[g];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break e}d=void 0}if(d===void 0)break;if(i+=d,4096<i){i=g;break t}if(i===4096||g===this.i.length-1){i=g+1;break t}}i=1e3}else i=1e3;i=I7(this,V,i),g=K2(this.I),z1(g,"RID",l),z1(g,"CVER",22),this.D&&z1(g,"X-HTTP-Session-Id",this.D),_t(this,g),_&&(this.O?i="headers="+encodeURIComponent(String(B7(_)))+"&"+i:this.m&&to(g,this.m,_)),X3(this.h,V),this.Ua&&z1(g,"TYPE","init"),this.P?(z1(g,"$req",i),z1(g,"SID","null"),V.T=!0,K3(V,g,null)):K3(V,g,i),this.G=2}}else this.G==3&&(l?T7(this,l):this.i.length==0||u7(this.h)||T7(this))};function T7(l,i){var g;i?g=i.l:g=l.U++;let d=K2(l.I);z1(d,"SID",l.K),z1(d,"RID",g),z1(d,"AID",l.T),_t(l,d),l.m&&l.o&&to(d,l.m,l.o),g=new g0(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),i&&(l.i=i.D.concat(l.i)),i=I7(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),X3(l.h,g),K3(g,d,i)}function _t(l,i){l.H&&t1(l.H,function(g,d){z1(i,d,g)}),l.l&&z7({},function(g,d){z1(i,d,g)})}function I7(l,i,g){g=Math.min(l.i.length,g);var d=l.l?z(l.l.Na,l.l,l):null;t:{var V=l.i;let _=-1;for(;;){let T=["count="+g];_==-1?0<g?(_=V[0].g,T.push("ofs="+_)):_=0:T.push("ofs="+_);let p1=!0;for(let F1=0;F1<g;F1++){let n1=V[F1].g,W1=V[F1].map;if(n1-=_,0>n1)_=Math.max(0,V[F1].g-100),p1=!1;else try{yv(W1,T,"req"+n1+"_")}catch{d&&d(W1)}}if(p1){d=T.join("&");break t}}}return l=l.i.splice(0,g),i.D=l,d}function D7(l){if(!l.g&&!l.u){l.Y=1;var i=l.Fa;vt||Gl(),gt||(vt(),gt=!0),E3.add(i,l),l.v=0}}function so(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ft(z(l.Fa,l),N7(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,P7(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ft(z(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,o2(10),me(this),P7(this))};function oo(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function P7(l){l.g=new g0(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var i=K2(l.qa);z1(i,"RID","rpc"),z1(i,"SID",l.K),z1(i,"AID",l.T),z1(i,"CI",l.F?"0":"1"),!l.F&&l.ja&&z1(i,"TO",l.ja),z1(i,"TYPE","xmlhttp"),_t(l,i),l.m&&l.o&&to(i,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=de(K2(i)),g.m=null,g.P=!0,v7(g,l)}s.Za=function(){this.C!=null&&(this.C=null,me(this),so(this),o2(19))};function ze(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function O7(l,i){var g=null;if(l.g==i){ze(l),oo(l),l.g=null;var d=2}else if(J3(l.h,i))g=i.D,m7(l.h,i),d=1;else return;if(l.G!=0){if(i.o)if(d==1){g=i.m?i.m.length:0,i=Date.now()-i.F;var V=l.B;d=ae(),s2(d,new l7(d,g)),fe(l)}else D7(l);else if(V=i.s,V==3||V==0&&0<i.X||!(d==1&&Sv(l,i)||d==2&&so(l)))switch(g&&0<g.length&&(i=l.h,i.i=i.i.concat(g)),V){case 1:P0(l,5);break;case 4:P0(l,10);break;case 3:P0(l,6);break;default:P0(l,2)}}}function N7(l,i){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*i}function P0(l,i){if(l.j.info("Error code "+i),i==2){var g=z(l.fb,l),d=l.Xa;let V=!d;d=new D0(d||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ge(d,"https"),de(d),V?Vv(d.toString(),g):Hv(d.toString(),g)}else o2(2);l.G=0,l.l&&l.l.sa(i),F7(l),E7(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),o2(2)):(this.j.info("Failed to ping google.com"),o2(1))};function F7(l){if(l.G=0,l.ka=[],l.l){let i=f7(l.h);(i.length!=0||l.i.length!=0)&&(B(l.ka,i),B(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function j7(l,i,g){var d=g instanceof D0?K2(g):new D0(g);if(d.g!="")i&&(d.g=i+"."+d.g),we(d,d.s);else{var V=a.location;d=V.protocol,i=i?i+"."+V.hostname:V.hostname,V=+V.port;var _=new D0(null);d&&ge(_,d),i&&(_.g=i),V&&we(_,V),g&&(_.l=g),d=_}return g=l.D,i=l.ya,g&&i&&z1(d,g,i),z1(d,"VER",l.la),_t(l,d),d}function Z7(l,i,g){if(i&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return i=l.Ca&&!l.pa?new V1(new Ht({eb:g})):new V1(l.pa),i.Ha(l.J),i}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function U7(){}s=U7.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function xe(){}xe.prototype.g=function(l,i){return new n2(l,i)};function n2(l,i){$1.call(this),this.g=new k7(i),this.l=l,this.h=i&&i.messageUrlParams||null,l=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(l?l["X-WebChannel-Content-Type"]=i.messageContentType:l={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.va&&(l?l["X-WebChannel-Client-Profile"]=i.va:l={"X-WebChannel-Client-Profile":i.va}),this.g.S=l,(l=i&&i.Sb)&&!F(l)&&(this.g.m=l),this.v=i&&i.supportsCrossDomainXhr||!1,this.u=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!F(i)&&(this.g.D=i,l=this.h,l!==null&&i in l&&(l=this.h,i in l&&delete l[i])),this.j=new i5(this)}A(n2,$1),n2.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},n2.prototype.close=function(){eo(this.g)},n2.prototype.o=function(l){var i=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Z3(l),l=g);i.i.push(new wv(i.Ya++,l)),i.G==3&&fe(i)},n2.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,n2.aa.N.call(this)};function q7(l){q3.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var i=l.__sm__;if(i){t:{for(let g in i){l=g;break t}l=void 0}(this.i=l)&&(l=this.i,i=i!==null&&l in i?i[l]:void 0),this.data=i}else this.data=l}A(q7,q3);function G7(){G3.call(this),this.status=1}A(G7,G3);function i5(l){this.g=l}A(i5,U7),i5.prototype.ua=function(){s2(this.g,"a")},i5.prototype.ta=function(l){s2(this.g,new q7(l))},i5.prototype.sa=function(l){s2(this.g,new G7)},i5.prototype.ra=function(){s2(this.g,"b")},xe.prototype.createWebChannel=xe.prototype.g,n2.prototype.send=n2.prototype.o,n2.prototype.open=n2.prototype.m,n2.prototype.close=n2.prototype.close,qc=n0.createWebChannelTransport=function(){return new xe},Uc=n0.getStatEventTarget=function(){return ae()},Zc=n0.Event=T0,Cs=n0.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,m4=n0.ErrorCode=ie,a7.COMPLETE="complete",jc=n0.EventType=a7,o7.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",$1.prototype.listen=$1.prototype.K,R5=n0.WebChannel=o7,Fc=n0.FetchXmlHttpFactory=Ht,V1.prototype.listenOnce=V1.prototype.L,V1.prototype.getLastError=V1.prototype.Ka,V1.prototype.getLastErrorCode=V1.prototype.Ba,V1.prototype.getStatus=V1.prototype.Z,V1.prototype.getResponseJson=V1.prototype.Oa,V1.prototype.getResponseText=V1.prototype.oa,V1.prototype.send=V1.prototype.ea,V1.prototype.setWithCredentials=V1.prototype.Ha,Nc=n0.XhrIo=V1}).apply(typeof Ms<"u"?Ms:typeof self<"u"?self:typeof window<"u"?window:{});var Ci="@firebase/firestore";var O1=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};O1.UNAUTHENTICATED=new O1(null),O1.GOOGLE_CREDENTIALS=new O1("google-credentials-uid"),O1.FIRST_PARTY=new O1("first-party-uid"),O1.MOCK_USER=new O1("mock-user");var X5="10.12.5";var W0=new S5("@firebase/firestore");function f4(){return W0.logLevel}function P(s,...t){if(W0.logLevel<=r1.DEBUG){let e=t.map(bn);W0.debug(`Firestore (${X5}): ${s}`,...e)}}function a0(s,...t){if(W0.logLevel<=r1.ERROR){let e=t.map(bn);W0.error(`Firestore (${X5}): ${s}`,...e)}}function O5(s,...t){if(W0.logLevel<=r1.WARN){let e=t.map(bn);W0.warn(`Firestore (${X5}): ${s}`,...e)}}function bn(s){if(typeof s=="string")return s;try{return function(e){return JSON.stringify(e)}(s)}catch{return s}}function G(s="Unexpected state"){let t=`FIRESTORE (${X5}) INTERNAL ASSERTION FAILED: `+s;throw a0(t),new Error(t)}function f1(s,t){s||G()}function W(s,t){return s}var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N=class extends o0{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var N2=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Bs=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Qc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(O1.UNAUTHENTICATED))}shutdown(){}},Yc=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Jc=class{constructor(t){this.t=t,this.currentUser=O1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let o=this.i,c=h=>this.i!==o?(o=this.i,e(h)):Promise.resolve(),r=new N2;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new N2,t.enqueueRetryable(()=>c(this.currentUser))};let n=()=>{let h=r;t.enqueueRetryable(()=>S(this,null,function*(){yield h.promise,yield c(this.currentUser)}))},a=h=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),n()};this.t.onInit(h=>a(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?a(h):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new N2)}},0),n()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(o=>this.i!==t?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(f1(typeof o.accessToken=="string"),new Bs(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return f1(t===null||typeof t=="string"),new O1(t)}},Xc=class{constructor(t,e,o){this.l=t,this.h=e,this.P=o,this.type="FirstParty",this.user=O1.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},tr=class{constructor(t,e,o){this.l=t,this.h=e,this.P=o}getToken(){return Promise.resolve(new Xc(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(O1.FIRST_PARTY))}shutdown(){}invalidateToken(){}},er=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},sr=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let o=r=>{r.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let n=r.token!==this.R;return this.R=r.token,P("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>o(r))};let c=r=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>c(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?c(r):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(f1(typeof e.token=="string"),this.R=e.token,new er(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Tu(s){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let o=0;o<s;o++)e[o]=Math.floor(256*Math.random());return e}var _s=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,o="";for(;o.length<20;){let c=Tu(40);for(let r=0;r<c.length;++r)o.length<20&&c[r]<e&&(o+=t.charAt(c[r]%t.length))}return o}};function v1(s,t){return s<t?-1:s>t?1:0}function N5(s,t,e){return s.length===t.length&&s.every((o,c)=>e(o,t[c]))}var q1=class s{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new N(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new N(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new N(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new N(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return s.fromMillis(Date.now())}static fromDate(t){return s.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*e));return new s(e,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?v1(this.nanoseconds,t.nanoseconds):v1(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class s{constructor(t){this.timestamp=t}static fromTimestamp(t){return new s(t)}static min(){return new s(new q1(0,0))}static max(){return new s(new q1(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var As=class s{constructor(t,e,o){e===void 0?e=0:e>t.length&&G(),o===void 0?o=t.length-e:o>t.length-e&&G(),this.segments=t,this.offset=e,this.len=o}get length(){return this.len}isEqual(t){return s.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof s?t.forEach(o=>{e.push(o)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let o=Math.min(t.length,e.length);for(let c=0;c<o;c++){let r=t.get(c),n=e.get(c);if(r<n)return-1;if(r>n)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},y1=class s extends As{construct(t,e,o){return new s(t,e,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let o of t){if(o.indexOf("//")>=0)throw new N(b.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);e.push(...o.split("/").filter(c=>c.length>0))}return new s(e)}static emptyPath(){return new s([])}},Iu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,d2=class s extends As{construct(t,e,o){return new s(t,e,o)}static isValidIdentifier(t){return Iu.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),s.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new s(["__name__"])}static fromServerFormat(t){let e=[],o="",c=0,r=()=>{if(o.length===0)throw new N(b.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(o),o=""},n=!1;for(;c<t.length;){let a=t[c];if(a==="\\"){if(c+1===t.length)throw new N(b.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let h=t[c+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new N(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=h,c+=2}else a==="`"?(n=!n,c++):a!=="."||n?(o+=a,c++):(r(),c++)}if(r(),n)throw new N(b.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new s(e)}static emptyPath(){return new s([])}};var j=class s{constructor(t){this.path=t}static fromPath(t){return new s(y1.fromString(t))}static fromName(t){return new s(y1.fromString(t).popFirst(5))}static empty(){return new s(y1.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&y1.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return y1.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new s(new y1(t.slice()))}};var or=class{constructor(t,e,o,c){this.indexId=t,this.collectionGroup=e,this.fields=o,this.indexState=c}};or.UNKNOWN_ID=-1;function Du(s,t){let e=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,c=Y.fromTimestamp(o===1e9?new q1(e+1,0):new q1(e,o));return new K0(c,j.empty(),t)}function Pu(s){return new K0(s.readTime,s.key,-1)}var K0=class s{constructor(t,e,o){this.readTime=t,this.documentKey=e,this.largestBatchId=o}static min(){return new s(Y.min(),j.empty(),-1)}static max(){return new s(Y.max(),j.empty(),-1)}};function Ou(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=j.comparator(s.documentKey,t.documentKey),e!==0?e:v1(s.largestBatchId,t.largestBatchId))}var Nu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cr=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function T4(s){return S(this,null,function*(){if(s.code!==b.FAILED_PRECONDITION||s.message!==Nu)throw s;P("LocalStore","Unexpectedly lost primary lease")})}var E=class s{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new s((o,c)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(o,c)},this.catchCallback=r=>{this.wrapFailure(e,r).next(o,c)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof s?e:s.resolve(e)}catch(e){return s.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):s.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):s.reject(e)}static resolve(t){return new s((e,o)=>{e(t)})}static reject(t){return new s((e,o)=>{o(t)})}static waitFor(t){return new s((e,o)=>{let c=0,r=0,n=!1;t.forEach(a=>{++c,a.next(()=>{++r,n&&r===c&&e()},h=>o(h))}),n=!0,r===c&&e()})}static or(t){let e=s.resolve(!1);for(let o of t)e=e.next(c=>c?s.resolve(c):o());return e}static forEach(t,e){let o=[];return t.forEach((c,r)=>{o.push(e.call(this,c,r))}),this.waitFor(o)}static mapArray(t,e){return new s((o,c)=>{let r=t.length,n=new Array(r),a=0;for(let h=0;h<r;h++){let v=h;e(t[v]).next(w=>{n[v]=w,++a,a===r&&o(n)},w=>c(w))}})}static doWhile(t,e){return new s((o,c)=>{let r=()=>{t()===!0?e().next(()=>{r()},c):o()};r()})}};function Fu(s){let t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function I4(s){return s.name==="IndexedDbTransactionError"}var Yi=(()=>{class s{constructor(e,o){this.previousValue=e,o&&(o.sequenceNumberHandler=c=>this.ie(c),this.se=c=>o.writeSequenceNumber(c))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return s.oe=-1,s})();function s3(s){return s==null}function H4(s){return s===0&&1/s==-1/0}function ju(s){return typeof s=="number"&&Number.isInteger(s)&&!H4(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}var Zu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pC=[...Zu,"documentOverlays"],Uu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qu=Uu,Gu=[...qu,"indexConfiguration","indexState","indexEntries"];var mC=[...Gu,"globals"];function Vi(s){let t=0;for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function s5(s,t){for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function Ji(s){for(let t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}var B1=class s{constructor(t,e){this.comparator=t,this.root=e||F2.EMPTY}insert(t,e){return new s(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,F2.BLACK,null,null))}remove(t){return new s(this.comparator,this.root.remove(t,this.comparator).copy(null,null,F2.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let o=this.comparator(t,e.key);if(o===0)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null}indexOf(t){let e=0,o=this.root;for(;!o.isEmpty();){let c=this.comparator(t,o.key);if(c===0)return e+o.left.size;c<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,o)=>(t(e,o),!1))}toString(){let t=[];return this.inorderTraversal((e,o)=>(t.push(`${e}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new T5(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new T5(this.root,t,this.comparator,!1)}getReverseIterator(){return new T5(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new T5(this.root,t,this.comparator,!0)}},T5=class{constructor(t,e,o,c){this.isReverse=c,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?o(t.key,e):1,e&&c&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},F2=class s{constructor(t,e,o,c,r){this.key=t,this.value=e,this.color=o??s.RED,this.left=c??s.EMPTY,this.right=r??s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,o,c,r){return new s(t??this.key,e??this.value,o??this.color,c??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,o){let c=this,r=o(t,c.key);return c=r<0?c.copy(null,null,null,c.left.insert(t,e,o),null):r===0?c.copy(null,e,null,null,null):c.copy(null,null,null,null,c.right.insert(t,e,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let o,c=this;if(e(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,e),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),e(t,c.key)===0){if(c.right.isEmpty())return s.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,e))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let t=this.left.check();if(t!==this.right.check())throw G();return t+(this.isRed()?0:1)}};F2.EMPTY=null,F2.RED=!0,F2.BLACK=!1;F2.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,e,o,c,r){return this}insert(t,e,o){return new F2(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var t2=class s{constructor(t){this.comparator=t,this.data=new B1(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,o)=>(t(e),!1))}forEachInRange(t,e){let o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){let c=o.getNext();if(this.comparator(c.key,t[1])>=0)return;e(c.key)}}forEachWhile(t,e){let o;for(o=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ss(this.data.getIterator())}getIteratorFrom(t){return new Ss(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(o=>{e=e.add(o)}),e}isEqual(t){if(!(t instanceof s)||this.size!==t.size)return!1;let e=this.data.getIterator(),o=t.data.getIterator();for(;e.hasNext();){let c=e.getNext().key,r=o.getNext().key;if(this.comparator(c,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new s(this.comparator);return e.data=t,e}},Ss=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var x2=class s{constructor(t){this.fields=t,t.sort(d2.comparator)}static empty(){return new s([])}unionWith(t){let e=new t2(d2.comparator);for(let o of this.fields)e=e.add(o);for(let o of t)e=e.add(o);return new s(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return N5(this.fields,t.fields,(e,o)=>e.isEqual(o))}};var Rs=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var e2=class s{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(c){try{return atob(c)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Rs("Invalid base64 string: "+r):r}}(t);return new s(e)}static fromUint8Array(t){let e=function(c){let r="";for(let n=0;n<c.length;++n)r+=String.fromCharCode(c[n]);return r}(t);return new s(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let o=new Uint8Array(e.length);for(let c=0;c<e.length;c++)o[c]=e.charCodeAt(c);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return v1(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};e2.EMPTY_BYTE_STRING=new e2("");var $u=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function i0(s){if(f1(!!s),typeof s=="string"){let t=0,e=$u.exec(s);if(f1(!!e),e[1]){let c=e[1];c=(c+"000000000").substr(0,9),t=Number(c)}let o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:L1(s.seconds),nanos:L1(s.nanos)}}function L1(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function _0(s){return typeof s=="string"?e2.fromBase64String(s):e2.fromUint8Array(s)}function kn(s){var t,e;return((e=(((t=s?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function En(s){let t=s.mapValue.fields.__previous_value__;return kn(t)?En(t):t}function L4(s){let t=i0(s.mapValue.fields.__local_write_time__.timestampValue);return new q1(t.seconds,t.nanos)}var rr=class{constructor(t,e,o,c,r,n,a,h,v){this.databaseId=t,this.appId=e,this.persistenceKey=o,this.host=c,this.ssl=r,this.forceLongPolling=n,this.autoDetectLongPolling=a,this.longPollingOptions=h,this.useFetchStreams=v}},bs=class s{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof s&&t.projectId===this.projectId&&t.database===this.database}};var Vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Q0(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?kn(s)?4:Xi(s)?9007199254740991:10:G()}function U2(s,t){if(s===t)return!0;let e=Q0(s);if(e!==Q0(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return L4(s).isEqual(L4(t));case 3:return function(c,r){if(typeof c.timestampValue=="string"&&typeof r.timestampValue=="string"&&c.timestampValue.length===r.timestampValue.length)return c.timestampValue===r.timestampValue;let n=i0(c.timestampValue),a=i0(r.timestampValue);return n.seconds===a.seconds&&n.nanos===a.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(c,r){return _0(c.bytesValue).isEqual(_0(r.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(c,r){return L1(c.geoPointValue.latitude)===L1(r.geoPointValue.latitude)&&L1(c.geoPointValue.longitude)===L1(r.geoPointValue.longitude)}(s,t);case 2:return function(c,r){if("integerValue"in c&&"integerValue"in r)return L1(c.integerValue)===L1(r.integerValue);if("doubleValue"in c&&"doubleValue"in r){let n=L1(c.doubleValue),a=L1(r.doubleValue);return n===a?H4(n)===H4(a):isNaN(n)&&isNaN(a)}return!1}(s,t);case 9:return N5(s.arrayValue.values||[],t.arrayValue.values||[],U2);case 10:return function(c,r){let n=c.mapValue.fields||{},a=r.mapValue.fields||{};if(Vi(n)!==Vi(a))return!1;for(let h in n)if(n.hasOwnProperty(h)&&(a[h]===void 0||!U2(n[h],a[h])))return!1;return!0}(s,t);default:return G()}}function y4(s,t){return(s.values||[]).find(e=>U2(e,t))!==void 0}function F5(s,t){if(s===t)return 0;let e=Q0(s),o=Q0(t);if(e!==o)return v1(e,o);switch(e){case 0:case 9007199254740991:return 0;case 1:return v1(s.booleanValue,t.booleanValue);case 2:return function(r,n){let a=L1(r.integerValue||r.doubleValue),h=L1(n.integerValue||n.doubleValue);return a<h?-1:a>h?1:a===h?0:isNaN(a)?isNaN(h)?0:-1:1}(s,t);case 3:return Hi(s.timestampValue,t.timestampValue);case 4:return Hi(L4(s),L4(t));case 5:return v1(s.stringValue,t.stringValue);case 6:return function(r,n){let a=_0(r),h=_0(n);return a.compareTo(h)}(s.bytesValue,t.bytesValue);case 7:return function(r,n){let a=r.split("/"),h=n.split("/");for(let v=0;v<a.length&&v<h.length;v++){let w=v1(a[v],h[v]);if(w!==0)return w}return v1(a.length,h.length)}(s.referenceValue,t.referenceValue);case 8:return function(r,n){let a=v1(L1(r.latitude),L1(n.latitude));return a!==0?a:v1(L1(r.longitude),L1(n.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return function(r,n){let a=r.values||[],h=n.values||[];for(let v=0;v<a.length&&v<h.length;++v){let w=F5(a[v],h[v]);if(w)return w}return v1(a.length,h.length)}(s.arrayValue,t.arrayValue);case 10:return function(r,n){if(r===Vs.mapValue&&n===Vs.mapValue)return 0;if(r===Vs.mapValue)return 1;if(n===Vs.mapValue)return-1;let a=r.fields||{},h=Object.keys(a),v=n.fields||{},w=Object.keys(v);h.sort(),w.sort();for(let u=0;u<h.length&&u<w.length;++u){let z=v1(h[u],w[u]);if(z!==0)return z;let y=F5(a[h[u]],v[w[u]]);if(y!==0)return y}return v1(h.length,w.length)}(s.mapValue,t.mapValue);default:throw G()}}function Hi(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return v1(s,t);let e=i0(s),o=i0(t),c=v1(e.seconds,o.seconds);return c!==0?c:v1(e.nanos,o.nanos)}function j5(s){return nr(s)}function nr(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){let o=i0(e);return`time(${o.seconds},${o.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return _0(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return j.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let o="[",c=!0;for(let r of e.values||[])c?c=!1:o+=",",o+=nr(r);return o+"]"}(s.arrayValue):"mapValue"in s?function(e){let o=Object.keys(e.fields||{}).sort(),c="{",r=!0;for(let n of o)r?r=!1:c+=",",c+=`${n}:${nr(e.fields[n])}`;return c+"}"}(s.mapValue):G()}function lr(s){return!!s&&"integerValue"in s}function Tn(s){return!!s&&"arrayValue"in s}function Li(s){return!!s&&"nullValue"in s}function yi(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ls(s){return!!s&&"mapValue"in s}function x4(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){let t={mapValue:{fields:{}}};return s5(s.mapValue.fields,(e,o)=>t.mapValue.fields[e]=x4(o)),t}if(s.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=x4(s.arrayValue.values[e]);return t}return Object.assign({},s)}function Xi(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var w2=class s{constructor(t){this.value=t}static empty(){return new s({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let o=0;o<t.length-1;++o)if(e=(e.mapValue.fields||{})[t.get(o)],!Ls(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=x4(e)}setAll(t){let e=d2.emptyPath(),o={},c=[];t.forEach((n,a)=>{if(!e.isImmediateParentOf(a)){let h=this.getFieldsMap(e);this.applyChanges(h,o,c),o={},c=[],e=a.popLast()}n?o[a.lastSegment()]=x4(n):c.push(a.lastSegment())});let r=this.getFieldsMap(e);this.applyChanges(r,o,c)}delete(t){let e=this.field(t.popLast());Ls(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return U2(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let o=0;o<t.length;++o){let c=e.mapValue.fields[t.get(o)];Ls(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=c),e=c}return e.mapValue.fields}applyChanges(t,e,o){s5(e,(c,r)=>t[c]=r);for(let c of o)delete t[c]}clone(){return new s(x4(this.value))}};function th(s){let t=[];return s5(s.fields,(e,o)=>{let c=new d2([e]);if(Ls(o)){let r=th(o.mapValue).fields;if(r.length===0)t.push(c);else for(let n of r)t.push(c.child(n))}else t.push(c)}),new x2(t)}var A2=class s{constructor(t,e,o,c,r,n,a){this.key=t,this.documentType=e,this.version=o,this.readTime=c,this.createTime=r,this.data=n,this.documentState=a}static newInvalidDocument(t){return new s(t,0,Y.min(),Y.min(),Y.min(),w2.empty(),0)}static newFoundDocument(t,e,o,c){return new s(t,1,e,Y.min(),o,c,0)}static newNoDocument(t,e){return new s(t,2,e,Y.min(),Y.min(),w2.empty(),0)}static newUnknownDocument(t,e){return new s(t,3,e,Y.min(),Y.min(),w2.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=w2.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=w2.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof s&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Z5=class{constructor(t,e){this.position=t,this.inclusive=e}};function Bi(s,t,e){let o=0;for(let c=0;c<s.position.length;c++){let r=t[c],n=s.position[c];if(r.field.isKeyField()?o=j.comparator(j.fromName(n.referenceValue),e.key):o=F5(n,e.data.field(r.field)),r.dir==="desc"&&(o*=-1),o!==0)break}return o}function _i(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!U2(s.position[e],t.position[e]))return!1;return!0}var U5=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function Wu(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}var ks=class{},E1=class s extends ks{constructor(t,e,o){super(),this.field=t,this.op=e,this.value=o}static create(t,e,o){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,o):new ir(t,e,o):e==="array-contains"?new gr(t,o):e==="in"?new wr(t,o):e==="not-in"?new dr(t,o):e==="array-contains-any"?new ur(t,o):new s(t,e,o)}static createKeyFieldInFilter(t,e,o){return e==="in"?new hr(t,o):new vr(t,o)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(F5(e,this.value)):e!==null&&Q0(this.value)===Q0(e)&&this.matchesComparison(F5(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},q2=class s extends ks{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new s(t,e)}matches(t){return eh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function eh(s){return s.op==="and"}function sh(s){return Ku(s)&&eh(s)}function Ku(s){for(let t of s.filters)if(t instanceof q2)return!1;return!0}function ar(s){if(s instanceof E1)return s.field.canonicalString()+s.op.toString()+j5(s.value);if(sh(s))return s.filters.map(t=>ar(t)).join(",");{let t=s.filters.map(e=>ar(e)).join(",");return`${s.op}(${t})`}}function oh(s,t){return s instanceof E1?function(o,c){return c instanceof E1&&o.op===c.op&&o.field.isEqual(c.field)&&U2(o.value,c.value)}(s,t):s instanceof q2?function(o,c){return c instanceof q2&&o.op===c.op&&o.filters.length===c.filters.length?o.filters.reduce((r,n,a)=>r&&oh(n,c.filters[a]),!0):!1}(s,t):void G()}function ch(s){return s instanceof E1?function(e){return`${e.field.canonicalString()} ${e.op} ${j5(e.value)}`}(s):s instanceof q2?function(e){return e.op.toString()+" {"+e.getFilters().map(ch).join(" ,")+"}"}(s):"Filter"}var ir=class extends E1{constructor(t,e,o){super(t,e,o),this.key=j.fromName(o.referenceValue)}matches(t){let e=j.comparator(t.key,this.key);return this.matchesComparison(e)}},hr=class extends E1{constructor(t,e){super(t,"in",e),this.keys=rh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},vr=class extends E1{constructor(t,e){super(t,"not-in",e),this.keys=rh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function rh(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(o=>j.fromName(o.referenceValue))}var gr=class extends E1{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Tn(e)&&y4(e.arrayValue,this.value)}},wr=class extends E1{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&y4(this.value.arrayValue,e)}},dr=class extends E1{constructor(t,e){super(t,"not-in",e)}matches(t){if(y4(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!y4(this.value.arrayValue,e)}},ur=class extends E1{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Tn(e)||!e.arrayValue.values)&&e.arrayValue.values.some(o=>y4(this.value.arrayValue,o))}};var pr=class{constructor(t,e=null,o=[],c=[],r=null,n=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=o,this.filters=c,this.limit=r,this.startAt=n,this.endAt=a,this.ue=null}};function Ai(s,t=null,e=[],o=[],c=null,r=null,n=null){return new pr(s,t,e,o,c,r,n)}function In(s){let t=W(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(o=>ar(o)).join(","),e+="|ob:",e+=t.orderBy.map(o=>function(r){return r.field.canonicalString()+r.dir}(o)).join(","),s3(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(o=>j5(o)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(o=>j5(o)).join(",")),t.ue=e}return t.ue}function Dn(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!Wu(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!oh(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!_i(s.startAt,t.startAt)&&_i(s.endAt,t.endAt)}function mr(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}var q5=class{constructor(t,e=null,o=[],c=[],r=null,n="F",a=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=o,this.filters=c,this.limit=r,this.limitType=n,this.startAt=a,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Qu(s,t,e,o,c,r,n,a){return new q5(s,t,e,o,c,r,n,a)}function nh(s){return new q5(s)}function Si(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Yu(s){return s.collectionGroup!==null}function M4(s){let t=W(s);if(t.ce===null){t.ce=[];let e=new Set;for(let r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());let o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(n){let a=new t2(d2.comparator);return n.filters.forEach(h=>{h.getFlattenedFilters().forEach(v=>{v.isInequality()&&(a=a.add(v.field))})}),a})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new U5(r,o))}),e.has(d2.keyField().canonicalString())||t.ce.push(new U5(d2.keyField(),o))}return t.ce}function j2(s){let t=W(s);return t.le||(t.le=Ju(t,M4(s))),t.le}function Ju(s,t){if(s.limitType==="F")return Ai(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(c=>{let r=c.dir==="desc"?"asc":"desc";return new U5(c.field,r)});let e=s.endAt?new Z5(s.endAt.position,s.endAt.inclusive):null,o=s.startAt?new Z5(s.startAt.position,s.startAt.inclusive):null;return Ai(s.path,s.collectionGroup,t,s.filters,s.limit,e,o)}}function fr(s,t,e){return new q5(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function o3(s,t){return Dn(j2(s),j2(t))&&s.limitType===t.limitType}function lh(s){return`${In(j2(s))}|lt:${s.limitType}`}function b5(s){return`Query(target=${function(e){let o=e.path.canonicalString();return e.collectionGroup!==null&&(o+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(o+=`, filters: [${e.filters.map(c=>ch(c)).join(", ")}]`),s3(e.limit)||(o+=", limit: "+e.limit),e.orderBy.length>0&&(o+=`, orderBy: [${e.orderBy.map(c=>function(n){return`${n.field.canonicalString()} (${n.dir})`}(c)).join(", ")}]`),e.startAt&&(o+=", startAt: ",o+=e.startAt.inclusive?"b:":"a:",o+=e.startAt.position.map(c=>j5(c)).join(",")),e.endAt&&(o+=", endAt: ",o+=e.endAt.inclusive?"a:":"b:",o+=e.endAt.position.map(c=>j5(c)).join(",")),`Target(${o})`}(j2(s))}; limitType=${s.limitType})`}function c3(s,t){return t.isFoundDocument()&&function(o,c){let r=c.key.path;return o.collectionGroup!==null?c.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(r):j.isDocumentKey(o.path)?o.path.isEqual(r):o.path.isImmediateParentOf(r)}(s,t)&&function(o,c){for(let r of M4(o))if(!r.field.isKeyField()&&c.data.field(r.field)===null)return!1;return!0}(s,t)&&function(o,c){for(let r of o.filters)if(!r.matches(c))return!1;return!0}(s,t)&&function(o,c){return!(o.startAt&&!function(n,a,h){let v=Bi(n,a,h);return n.inclusive?v<=0:v<0}(o.startAt,M4(o),c)||o.endAt&&!function(n,a,h){let v=Bi(n,a,h);return n.inclusive?v>=0:v>0}(o.endAt,M4(o),c))}(s,t)}function Xu(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ah(s){return(t,e)=>{let o=!1;for(let c of M4(s)){let r=tp(c,t,e);if(r!==0)return r;o=o||c.field.isKeyField()}return 0}}function tp(s,t,e){let o=s.field.isKeyField()?j.comparator(t.key,e.key):function(r,n,a){let h=n.data.field(r),v=a.data.field(r);return h!==null&&v!==null?F5(h,v):G()}(s.field,t,e);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return G()}}var A0=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),o=this.inner[e];if(o!==void 0){for(let[c,r]of o)if(this.equalsFn(c,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){let o=this.mapKeyFn(t),c=this.inner[o];if(c===void 0)return this.inner[o]=[[t,e]],void this.innerSize++;for(let r=0;r<c.length;r++)if(this.equalsFn(c[r][0],t))return void(c[r]=[t,e]);c.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),o=this.inner[e];if(o===void 0)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return o.length===1?delete this.inner[e]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(t){s5(this.inner,(e,o)=>{for(let[c,r]of o)t(c,r)})}isEmpty(){return Ji(this.inner)}size(){return this.innerSize}};var ep=new B1(j.comparator);function h0(){return ep}var ih=new B1(j.comparator);function z4(...s){let t=ih;for(let e of s)t=t.insert(e.key,e);return t}function hh(s){let t=ih;return s.forEach((e,o)=>t=t.insert(e,o.overlayedDocument)),t}function G0(){return C4()}function vh(){return C4()}function C4(){return new A0(s=>s.toString(),(s,t)=>s.isEqual(t))}var sp=new B1(j.comparator),op=new t2(j.comparator);function e1(...s){let t=op;for(let e of s)t=t.add(e);return t}var cp=new t2(v1);function rp(){return cp}function gh(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:H4(t)?"-0":t}}function wh(s){return{integerValue:""+s}}function np(s,t){return ju(t)?wh(t):gh(s,t)}var G5=class{constructor(){this._=void 0}};function lp(s,t,e){return s instanceof $5?function(c,r){let n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return r&&kn(r)&&(r=En(r)),r&&(n.fields.__previous_value__=r),{mapValue:n}}(e,t):s instanceof Y0?uh(s,t):s instanceof J0?ph(s,t):function(c,r){let n=dh(c,r),a=Ri(n)+Ri(c.Pe);return lr(n)&&lr(c.Pe)?wh(a):gh(c.serializer,a)}(s,t)}function ap(s,t,e){return s instanceof Y0?uh(s,t):s instanceof J0?ph(s,t):e}function dh(s,t){return s instanceof W5?function(o){return lr(o)||function(r){return!!r&&"doubleValue"in r}(o)}(t)?t:{integerValue:0}:null}var $5=class extends G5{},Y0=class extends G5{constructor(t){super(),this.elements=t}};function uh(s,t){let e=mh(t);for(let o of s.elements)e.some(c=>U2(c,o))||e.push(o);return{arrayValue:{values:e}}}var J0=class extends G5{constructor(t){super(),this.elements=t}};function ph(s,t){let e=mh(t);for(let o of s.elements)e=e.filter(c=>!U2(c,o));return{arrayValue:{values:e}}}var W5=class extends G5{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function Ri(s){return L1(s.integerValue||s.doubleValue)}function mh(s){return Tn(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function ip(s,t){return s.field.isEqual(t.field)&&function(o,c){return o instanceof Y0&&c instanceof Y0||o instanceof J0&&c instanceof J0?N5(o.elements,c.elements,U2):o instanceof W5&&c instanceof W5?U2(o.Pe,c.Pe):o instanceof $5&&c instanceof $5}(s.transform,t.transform)}var zr=class{constructor(t,e){this.version=t,this.transformResults=e}},l0=class s{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new s}static exists(t){return new s(void 0,t)}static updateTime(t){return new s(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function ys(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}var K5=class{};function fh(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new B4(s.key,l0.none()):new X0(s.key,s.data,l0.none());{let e=s.data,o=w2.empty(),c=new t2(d2.comparator);for(let r of t.fields)if(!c.has(r)){let n=e.field(r);n===null&&r.length>1&&(r=r.popLast(),n=e.field(r)),n===null?o.delete(r):o.set(r,n),c=c.add(r)}return new G2(s.key,o,new x2(c.toArray()),l0.none())}}function hp(s,t,e){s instanceof X0?function(c,r,n){let a=c.value.clone(),h=ki(c.fieldTransforms,r,n.transformResults);a.setAll(h),r.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(s,t,e):s instanceof G2?function(c,r,n){if(!ys(c.precondition,r))return void r.convertToUnknownDocument(n.version);let a=ki(c.fieldTransforms,r,n.transformResults),h=r.data;h.setAll(zh(c)),h.setAll(a),r.convertToFoundDocument(n.version,h).setHasCommittedMutations()}(s,t,e):function(c,r,n){r.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,e)}function V4(s,t,e,o){return s instanceof X0?function(r,n,a,h){if(!ys(r.precondition,n))return a;let v=r.value.clone(),w=Ei(r.fieldTransforms,h,n);return v.setAll(w),n.convertToFoundDocument(n.version,v).setHasLocalMutations(),null}(s,t,e,o):s instanceof G2?function(r,n,a,h){if(!ys(r.precondition,n))return a;let v=Ei(r.fieldTransforms,h,n),w=n.data;return w.setAll(zh(r)),w.setAll(v),n.convertToFoundDocument(n.version,w).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(s,t,e,o):function(r,n,a){return ys(r.precondition,n)?(n.convertToNoDocument(n.version).setHasLocalMutations(),null):a}(s,t,e)}function vp(s,t){let e=null;for(let o of s.fieldTransforms){let c=t.data.field(o.field),r=dh(o.transform,c||null);r!=null&&(e===null&&(e=w2.empty()),e.set(o.field,r))}return e||null}function bi(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(o,c){return o===void 0&&c===void 0||!(!o||!c)&&N5(o,c,(r,n)=>ip(r,n))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}var X0=class extends K5{constructor(t,e,o,c=[]){super(),this.key=t,this.value=e,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}},G2=class extends K5{constructor(t,e,o,c,r=[]){super(),this.key=t,this.data=e,this.fieldMask=o,this.precondition=c,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function zh(s){let t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let o=s.data.field(e);t.set(e,o)}}),t}function ki(s,t,e){let o=new Map;f1(s.length===e.length);for(let c=0;c<e.length;c++){let r=s[c],n=r.transform,a=t.data.field(r.field);o.set(r.field,ap(n,a,e[c]))}return o}function Ei(s,t,e){let o=new Map;for(let c of s){let r=c.transform,n=e.data.field(c.field);o.set(c.field,lp(r,n,t))}return o}var B4=class extends K5{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xr=class extends K5{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Mr=class{constructor(t,e,o,c){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(t,e){let o=e.mutationResults;for(let c=0;c<this.mutations.length;c++){let r=this.mutations[c];r.key.isEqual(t.key)&&hp(r,t,o[c])}}applyToLocalView(t,e){for(let o of this.baseMutations)o.key.isEqual(t.key)&&(e=V4(o,t,e,this.localWriteTime));for(let o of this.mutations)o.key.isEqual(t.key)&&(e=V4(o,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let o=vh();return this.mutations.forEach(c=>{let r=t.get(c.key),n=r.overlayedDocument,a=this.applyToLocalView(n,r.mutatedFields);a=e.has(c.key)?null:a;let h=fh(n,a);h!==null&&o.set(c.key,h),n.isValidDocument()||n.convertToNoDocument(Y.min())}),o}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),e1())}isEqual(t){return this.batchId===t.batchId&&N5(this.mutations,t.mutations,(e,o)=>bi(e,o))&&N5(this.baseMutations,t.baseMutations,(e,o)=>bi(e,o))}},Cr=class s{constructor(t,e,o,c){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=c}static from(t,e,o){f1(t.mutations.length===o.length);let c=function(){return sp}(),r=t.mutations;for(let n=0;n<r.length;n++)c=c.insert(r[n].key,o[n].version);return new s(t,e,o,c)}};var Vr=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Hr=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var A1,c1;function gp(s){switch(s){default:return G();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function xh(s){if(s===void 0)return a0("GRPC error has no .code"),b.UNKNOWN;switch(s){case A1.OK:return b.OK;case A1.CANCELLED:return b.CANCELLED;case A1.UNKNOWN:return b.UNKNOWN;case A1.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case A1.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case A1.INTERNAL:return b.INTERNAL;case A1.UNAVAILABLE:return b.UNAVAILABLE;case A1.UNAUTHENTICATED:return b.UNAUTHENTICATED;case A1.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case A1.NOT_FOUND:return b.NOT_FOUND;case A1.ALREADY_EXISTS:return b.ALREADY_EXISTS;case A1.PERMISSION_DENIED:return b.PERMISSION_DENIED;case A1.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case A1.ABORTED:return b.ABORTED;case A1.OUT_OF_RANGE:return b.OUT_OF_RANGE;case A1.UNIMPLEMENTED:return b.UNIMPLEMENTED;case A1.DATA_LOSS:return b.DATA_LOSS;default:return G()}}(c1=A1||(A1={}))[c1.OK=0]="OK",c1[c1.CANCELLED=1]="CANCELLED",c1[c1.UNKNOWN=2]="UNKNOWN",c1[c1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c1[c1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c1[c1.NOT_FOUND=5]="NOT_FOUND",c1[c1.ALREADY_EXISTS=6]="ALREADY_EXISTS",c1[c1.PERMISSION_DENIED=7]="PERMISSION_DENIED",c1[c1.UNAUTHENTICATED=16]="UNAUTHENTICATED",c1[c1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c1[c1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c1[c1.ABORTED=10]="ABORTED",c1[c1.OUT_OF_RANGE=11]="OUT_OF_RANGE",c1[c1.UNIMPLEMENTED=12]="UNIMPLEMENTED",c1[c1.INTERNAL=13]="INTERNAL",c1[c1.UNAVAILABLE=14]="UNAVAILABLE",c1[c1.DATA_LOSS=15]="DATA_LOSS";var Ti=null;function wp(){return new TextEncoder}var dp=new y0([4294967295,4294967295],0);function Ii(s){let t=wp().encode(s),e=new Oc;return e.update(t),new Uint8Array(e.digest())}function Di(s){let t=new DataView(s.buffer),e=t.getUint32(0,!0),o=t.getUint32(4,!0),c=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new y0([e,o],0),new y0([c,r],0)]}var Lr=class s{constructor(t,e,o){if(this.bitmap=t,this.padding=e,this.hashCount=o,e<0||e>=8)throw new $0(`Invalid padding: ${e}`);if(o<0)throw new $0(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new $0(`Invalid hash count: ${o}`);if(t.length===0&&e!==0)throw new $0(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=y0.fromNumber(this.Ie)}Ee(t,e,o){let c=t.add(e.multiply(y0.fromNumber(o)));return c.compare(dp)===1&&(c=new y0([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=Ii(t),[o,c]=Di(e);for(let r=0;r<this.hashCount;r++){let n=this.Ee(o,c,r);if(!this.de(n))return!1}return!0}static create(t,e,o){let c=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),n=new s(r,c,e);return o.forEach(a=>n.insert(a)),n}insert(t){if(this.Ie===0)return;let e=Ii(t),[o,c]=Di(e);for(let r=0;r<this.hashCount;r++){let n=this.Ee(o,c,r);this.Ae(n)}}Ae(t){let e=Math.floor(t/8),o=t%8;this.bitmap[e]|=1<<o}},$0=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Es=class s{constructor(t,e,o,c,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,o){let c=new Map;return c.set(t,_4.createSynthesizedTargetChangeForCurrentChange(t,e,o)),new s(Y.min(),c,new B1(v1),h0(),e1())}},_4=class s{constructor(t,e,o,c,r){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,o){return new s(o,e,e1(),e1(),e1())}};var D5=class{constructor(t,e,o,c){this.Re=t,this.removedTargetIds=e,this.key=o,this.Ve=c}},Ts=class{constructor(t,e){this.targetId=t,this.me=e}},Is=class{constructor(t,e,o=e2.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=e,this.resumeToken=o,this.cause=c}},Ds=class{constructor(){this.fe=0,this.ge=Oi(),this.pe=e2.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=e1(),e=e1(),o=e1();return this.ge.forEach((c,r)=>{switch(r){case 0:t=t.add(c);break;case 2:e=e.add(c);break;case 1:o=o.add(c);break;default:G()}}),new _4(this.pe,this.ye,t,e,o)}ve(){this.we=!1,this.ge=Oi()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,f1(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},yr=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=h0(),this.qe=Pi(),this.Qe=new B1(v1)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let o=this.Ge(e);switch(t.state){case 0:this.ze(e)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.ve(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),o.De(t.resumeToken));break;default:G()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((o,c)=>{this.ze(c)&&e(c)})}He(t){let e=t.targetId,o=t.me.count,c=this.Je(e);if(c){let r=c.target;if(mr(r))if(o===0){let n=new j(r.path);this.Ue(e,n,A2.newNoDocument(n,Y.min()))}else f1(o===1);else{let n=this.Ye(e);if(n!==o){let a=this.Ze(t),h=a?this.Xe(a,t,n):1;if(h!==0){this.je(e);let v=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,v)}Ti?.et(function(w,u,z,y,A){var R,B,O,F,D,o1;let _1={localCacheCount:w,existenceFilterCount:u.count,databaseId:z.database,projectId:z.projectId},t1=u.unchangedNames;return t1&&(_1.bloomFilter={applied:A===0,hashCount:(R=t1?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(F=(O=(B=t1?.bits)===null||B===void 0?void 0:B.bitmap)===null||O===void 0?void 0:O.length)!==null&&F!==void 0?F:0,padding:(o1=(D=t1?.bits)===null||D===void 0?void 0:D.padding)!==null&&o1!==void 0?o1:0,mightContain:M=>{var p;return(p=y?.mightContain(M))!==null&&p!==void 0&&p}}),_1}(n,t.me,this.Le.tt(),a,h))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:o="",padding:c=0},hashCount:r=0}=e,n,a;try{n=_0(o).toUint8Array()}catch(h){if(h instanceof Rs)return O5("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{a=new Lr(n,c,r)}catch(h){return O5(h instanceof $0?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return a.Ie===0?null:a}Xe(t,e,o){return e.me.count===o-this.nt(t,e.targetId)?0:2}nt(t,e){let o=this.Le.getRemoteKeysForTarget(e),c=0;return o.forEach(r=>{let n=this.Le.tt(),a=`projects/${n.projectId}/databases/${n.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,r,null),c++)}),c}rt(t){let e=new Map;this.Be.forEach((r,n)=>{let a=this.Je(n);if(a){if(r.current&&mr(a.target)){let h=new j(a.target.path);this.ke.get(h)!==null||this.it(n,h)||this.Ue(n,h,A2.newNoDocument(h,t))}r.be&&(e.set(n,r.Ce()),r.ve())}});let o=e1();this.qe.forEach((r,n)=>{let a=!0;n.forEachWhile(h=>{let v=this.Je(h);return!v||v.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(o=o.add(r))}),this.ke.forEach((r,n)=>n.setReadTime(t));let c=new Es(t,e,this.Qe,this.ke,o);return this.ke=h0(),this.qe=Pi(),this.Qe=new B1(v1),c}$e(t,e){if(!this.ze(t))return;let o=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,o),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,o){if(!this.ze(t))return;let c=this.Ge(t);this.it(t,e)?c.Fe(e,1):c.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),o&&(this.ke=this.ke.insert(e,o))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Ds,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new t2(v1),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||P("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ds),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function Pi(){return new B1(j.comparator)}function Oi(){return new B1(j.comparator)}var up={asc:"ASCENDING",desc:"DESCENDING"},pp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mp={and:"AND",or:"OR"},Br=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function _r(s,t){return s.useProto3Json||s3(t)?t:{value:t}}function Ps(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mh(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function fp(s,t){return Ps(s,t.toTimestamp())}function Z2(s){return f1(!!s),Y.fromTimestamp(function(e){let o=i0(e);return new q1(o.seconds,o.nanos)}(s))}function Pn(s,t){return Ar(s,t).canonicalString()}function Ar(s,t){let e=function(c){return new y1(["projects",c.projectId,"databases",c.database])}(s).child("documents");return t===void 0?e:e.child(t)}function Ch(s){let t=y1.fromString(s);return f1(Bh(t)),t}function Sr(s,t){return Pn(s.databaseId,t.path)}function Gc(s,t){let e=Ch(t);if(e.get(1)!==s.databaseId.projectId)throw new N(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new N(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new j(Hh(e))}function Vh(s,t){return Pn(s.databaseId,t)}function zp(s){let t=Ch(s);return t.length===4?y1.emptyPath():Hh(t)}function Rr(s){return new y1(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Hh(s){return f1(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Ni(s,t,e){return{name:Sr(s,t),fields:e.value.mapValue.fields}}function xp(s,t){let e;if("targetChange"in t){t.targetChange;let o=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:G()}(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],r=function(v,w){return v.useProto3Json?(f1(w===void 0||typeof w=="string"),e2.fromBase64String(w||"")):(f1(w===void 0||w instanceof Buffer||w instanceof Uint8Array),e2.fromUint8Array(w||new Uint8Array))}(s,t.targetChange.resumeToken),n=t.targetChange.cause,a=n&&function(v){let w=v.code===void 0?b.UNKNOWN:xh(v.code);return new N(w,v.message||"")}(n);e=new Is(o,c,r,a||null)}else if("documentChange"in t){t.documentChange;let o=t.documentChange;o.document,o.document.name,o.document.updateTime;let c=Gc(s,o.document.name),r=Z2(o.document.updateTime),n=o.document.createTime?Z2(o.document.createTime):Y.min(),a=new w2({mapValue:{fields:o.document.fields}}),h=A2.newFoundDocument(c,r,n,a),v=o.targetIds||[],w=o.removedTargetIds||[];e=new D5(v,w,h.key,h)}else if("documentDelete"in t){t.documentDelete;let o=t.documentDelete;o.document;let c=Gc(s,o.document),r=o.readTime?Z2(o.readTime):Y.min(),n=A2.newNoDocument(c,r),a=o.removedTargetIds||[];e=new D5([],a,n.key,n)}else if("documentRemove"in t){t.documentRemove;let o=t.documentRemove;o.document;let c=Gc(s,o.document),r=o.removedTargetIds||[];e=new D5([],r,c,null)}else{if(!("filter"in t))return G();{t.filter;let o=t.filter;o.targetId;let{count:c=0,unchangedNames:r}=o,n=new Hr(c,r),a=o.targetId;e=new Ts(a,n)}}return e}function Mp(s,t){let e;if(t instanceof X0)e={update:Ni(s,t.key,t.value)};else if(t instanceof B4)e={delete:Sr(s,t.key)};else if(t instanceof G2)e={update:Ni(s,t.key,t.data),updateMask:Sp(t.fieldMask)};else{if(!(t instanceof xr))return G();e={verify:Sr(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(o=>function(r,n){let a=n.transform;if(a instanceof $5)return{fieldPath:n.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Y0)return{fieldPath:n.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof J0)return{fieldPath:n.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof W5)return{fieldPath:n.field.canonicalString(),increment:a.Pe};throw G()}(0,o))),t.precondition.isNone||(e.currentDocument=function(c,r){return r.updateTime!==void 0?{updateTime:fp(c,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:G()}(s,t.precondition)),e}function Cp(s,t){return s&&s.length>0?(f1(t!==void 0),s.map(e=>function(c,r){let n=c.updateTime?Z2(c.updateTime):Z2(r);return n.isEqual(Y.min())&&(n=Z2(r)),new zr(n,c.transformResults||[])}(e,t))):[]}function Vp(s,t){return{documents:[Vh(s,t.path)]}}function Hp(s,t){let e={structuredQuery:{}},o=t.path,c;t.collectionGroup!==null?(c=o,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=o.popLast(),e.structuredQuery.from=[{collectionId:o.lastSegment()}]),e.parent=Vh(s,c);let r=function(v){if(v.length!==0)return yh(q2.create(v,"and"))}(t.filters);r&&(e.structuredQuery.where=r);let n=function(v){if(v.length!==0)return v.map(w=>function(z){return{field:k5(z.field),direction:Bp(z.dir)}}(w))}(t.orderBy);n&&(e.structuredQuery.orderBy=n);let a=_r(s,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{_t:e,parent:c}}function Lp(s){let t=zp(s.parent),e=s.structuredQuery,o=e.from?e.from.length:0,c=null;if(o>0){f1(o===1);let w=e.from[0];w.allDescendants?c=w.collectionId:t=t.child(w.collectionId)}let r=[];e.where&&(r=function(u){let z=Lh(u);return z instanceof q2&&sh(z)?z.getFilters():[z]}(e.where));let n=[];e.orderBy&&(n=function(u){return u.map(z=>function(A){return new U5(E5(A.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(z))}(e.orderBy));let a=null;e.limit&&(a=function(u){let z;return z=typeof u=="object"?u.value:u,s3(z)?null:z}(e.limit));let h=null;e.startAt&&(h=function(u){let z=!!u.before,y=u.values||[];return new Z5(y,z)}(e.startAt));let v=null;return e.endAt&&(v=function(u){let z=!u.before,y=u.values||[];return new Z5(y,z)}(e.endAt)),Qu(t,c,n,r,a,"F",h,v)}function yp(s,t){let e=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Lh(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let o=E5(e.unaryFilter.field);return E1.create(o,"==",{doubleValue:NaN});case"IS_NULL":let c=E5(e.unaryFilter.field);return E1.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=E5(e.unaryFilter.field);return E1.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=E5(e.unaryFilter.field);return E1.create(n,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(s):s.fieldFilter!==void 0?function(e){return E1.create(E5(e.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return q2.create(e.compositeFilter.filters.map(o=>Lh(o)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return G()}}(e.compositeFilter.op))}(s):G()}function Bp(s){return up[s]}function _p(s){return pp[s]}function Ap(s){return mp[s]}function k5(s){return{fieldPath:s.canonicalString()}}function E5(s){return d2.fromServerFormat(s.fieldPath)}function yh(s){return s instanceof E1?function(e){if(e.op==="=="){if(yi(e.value))return{unaryFilter:{field:k5(e.field),op:"IS_NAN"}};if(Li(e.value))return{unaryFilter:{field:k5(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(yi(e.value))return{unaryFilter:{field:k5(e.field),op:"IS_NOT_NAN"}};if(Li(e.value))return{unaryFilter:{field:k5(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:k5(e.field),op:_p(e.op),value:e.value}}}(s):s instanceof q2?function(e){let o=e.getFilters().map(c=>yh(c));return o.length===1?o[0]:{compositeFilter:{op:Ap(e.op),filters:o}}}(s):G()}function Sp(s){let t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bh(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}var A4=class s{constructor(t,e,o,c,r=Y.min(),n=Y.min(),a=e2.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=n,this.resumeToken=a,this.expectedCount=h}withSequenceNumber(t){return new s(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var br=class{constructor(t){this.ct=t}};function Rp(s){let t=Lp({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fr(t,t.limit,"L"):t}var Os=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(L1(t.integerValue));else if("doubleValue"in t){let o=L1(t.doubleValue);isNaN(o)?this.dt(e,13):(this.dt(e,15),H4(o)?e.At(0):e.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(e,20),typeof o=="string"&&(o=i0(o)),e.Rt(`${o.seconds||""}`),e.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(_0(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let o=t.geoPointValue;this.dt(e,45),e.At(o.latitude||0),e.At(o.longitude||0)}else"mapValue"in t?Xi(t)?this.dt(e,Number.MAX_SAFE_INTEGER):(this.wt(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.St(t.arrayValue,e),this.ft(e)):G()}Vt(t,e){this.dt(e,25),this.bt(t,e)}bt(t,e){e.Rt(t)}wt(t,e){let o=t.fields||{};this.dt(e,55);for(let c of Object.keys(o))this.Vt(c,e),this.Tt(o[c],e)}St(t,e){let o=t.values||[];this.dt(e,50);for(let c of o)this.Tt(c,e)}yt(t,e){this.dt(e,37),j.fromName(t).path.forEach(o=>{this.dt(e,60),this.bt(o,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};Os.Dt=new Os;var kr=class{constructor(){this.an=new Er}addToCollectionParentIndex(t,e){return this.an.add(e),E.resolve()}getCollectionParents(t,e){return E.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return E.resolve()}deleteFieldIndex(t,e){return E.resolve()}deleteAllFieldIndexes(t){return E.resolve()}createTargetIndexes(t,e){return E.resolve()}getDocumentsMatchingTarget(t,e){return E.resolve(null)}getIndexType(t,e){return E.resolve(0)}getFieldIndexes(t,e){return E.resolve([])}getNextCollectionGroupToUpdate(t){return E.resolve(null)}getMinOffset(t,e){return E.resolve(K0.min())}getMinOffsetFromCollectionGroup(t,e){return E.resolve(K0.min())}updateCollectionGroup(t,e,o){return E.resolve()}updateIndexEntries(t,e){return E.resolve()}},Er=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),o=t.popLast(),c=this.index[e]||new t2(y1.comparator),r=!c.has(o);return this.index[e]=c.add(o),r}has(t){let e=t.lastSegment(),o=t.popLast(),c=this.index[e];return c&&c.has(o)}getEntries(t){return(this.index[t]||new t2(y1.comparator)).toArray()}};var zC=new Uint8Array(0);var O2=class s{constructor(t,e,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new s(t,s.DEFAULT_COLLECTION_PERCENTILE,s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};O2.DEFAULT_COLLECTION_PERCENTILE=10,O2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,O2.DEFAULT=new O2(41943040,O2.DEFAULT_COLLECTION_PERCENTILE,O2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),O2.DISABLED=new O2(-1,0,0);var S4=class s{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new s(0)}static Bn(){return new s(-1)}};var Tr=class{constructor(){this.changes=new A0(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,A2.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let o=this.changes.get(e);return o!==void 0?E.resolve(o):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Ir=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Dr=class{constructor(t,e,o,c){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=o,this.indexManager=c}getDocument(t,e){let o=null;return this.documentOverlayCache.getOverlay(t,e).next(c=>(o=c,this.remoteDocumentCache.getEntry(t,e))).next(c=>(o!==null&&V4(o.mutation,c,x2.empty(),q1.now()),c))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.getLocalViewOfDocuments(t,o,e1()).next(()=>o))}getLocalViewOfDocuments(t,e,o=e1()){let c=G0();return this.populateOverlays(t,c,e).next(()=>this.computeViews(t,e,c,o).next(r=>{let n=z4();return r.forEach((a,h)=>{n=n.insert(a,h.overlayedDocument)}),n}))}getOverlayedDocuments(t,e){let o=G0();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,e1()))}populateOverlays(t,e,o){let c=[];return o.forEach(r=>{e.has(r)||c.push(r)}),this.documentOverlayCache.getOverlays(t,c).next(r=>{r.forEach((n,a)=>{e.set(n,a)})})}computeViews(t,e,o,c){let r=h0(),n=C4(),a=function(){return C4()}();return e.forEach((h,v)=>{let w=o.get(v.key);c.has(v.key)&&(w===void 0||w.mutation instanceof G2)?r=r.insert(v.key,v):w!==void 0?(n.set(v.key,w.mutation.getFieldMask()),V4(w.mutation,v,w.mutation.getFieldMask(),q1.now())):n.set(v.key,x2.empty())}),this.recalculateAndSaveOverlays(t,r).next(h=>(h.forEach((v,w)=>n.set(v,w)),e.forEach((v,w)=>{var u;return a.set(v,new Ir(w,(u=n.get(v))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(t,e){let o=C4(),c=new B1((n,a)=>n-a),r=e1();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(n=>{for(let a of n)a.keys().forEach(h=>{let v=e.get(h);if(v===null)return;let w=o.get(h)||x2.empty();w=a.applyToLocalView(v,w),o.set(h,w);let u=(c.get(a.batchId)||e1()).add(h);c=c.insert(a.batchId,u)})}).next(()=>{let n=[],a=c.getReverseIterator();for(;a.hasNext();){let h=a.getNext(),v=h.key,w=h.value,u=vh();w.forEach(z=>{if(!r.has(z)){let y=fh(e.get(z),o.get(z));y!==null&&u.set(z,y),r=r.add(z)}}),n.push(this.documentOverlayCache.saveOverlays(t,v,u))}return E.waitFor(n)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,e,o,c){return function(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Yu(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,o,c):this.getDocumentsMatchingCollectionQuery(t,e,o,c)}getNextDocuments(t,e,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,o,c).next(r=>{let n=c-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,o.largestBatchId,c-r.size):E.resolve(G0()),a=-1,h=r;return n.next(v=>E.forEach(v,(w,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),r.get(w)?E.resolve():this.remoteDocumentCache.getEntry(t,w).next(z=>{h=h.insert(w,z)}))).next(()=>this.populateOverlays(t,v,r)).next(()=>this.computeViews(t,h,v,e1())).next(w=>({batchId:a,changes:hh(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new j(e)).next(o=>{let c=z4();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(t,e,o,c){let r=e.collectionGroup,n=z4();return this.indexManager.getCollectionParents(t,r).next(a=>E.forEach(a,h=>{let v=function(u,z){return new q5(z,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e,h.child(r));return this.getDocumentsMatchingCollectionQuery(t,v,o,c).next(w=>{w.forEach((u,z)=>{n=n.insert(u,z)})})}).next(()=>n))}getDocumentsMatchingCollectionQuery(t,e,o,c){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,o.largestBatchId).next(n=>(r=n,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,o,r,c))).next(n=>{r.forEach((h,v)=>{let w=v.getKey();n.get(w)===null&&(n=n.insert(w,A2.newInvalidDocument(w)))});let a=z4();return n.forEach((h,v)=>{let w=r.get(h);w!==void 0&&V4(w.mutation,v,x2.empty(),q1.now()),c3(e,v)&&(a=a.insert(h,v))}),a})}};var Pr=class{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return E.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(c){return{id:c.id,version:c.version,createTime:Z2(c.createTime)}}(e)),E.resolve()}getNamedQuery(t,e){return E.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(c){return{name:c.name,query:Rp(c.bundledQuery),readTime:Z2(c.readTime)}}(e)),E.resolve()}};var Or=class{constructor(){this.overlays=new B1(j.comparator),this.Pr=new Map}getOverlay(t,e){return E.resolve(this.overlays.get(e))}getOverlays(t,e){let o=G0();return E.forEach(e,c=>this.getOverlay(t,c).next(r=>{r!==null&&o.set(c,r)})).next(()=>o)}saveOverlays(t,e,o){return o.forEach((c,r)=>{this.ht(t,e,r)}),E.resolve()}removeOverlaysForBatchId(t,e,o){let c=this.Pr.get(o);return c!==void 0&&(c.forEach(r=>this.overlays=this.overlays.remove(r)),this.Pr.delete(o)),E.resolve()}getOverlaysForCollection(t,e,o){let c=G0(),r=e.length+1,n=new j(e.child("")),a=this.overlays.getIteratorFrom(n);for(;a.hasNext();){let h=a.getNext().value,v=h.getKey();if(!e.isPrefixOf(v.path))break;v.path.length===r&&h.largestBatchId>o&&c.set(h.getKey(),h)}return E.resolve(c)}getOverlaysForCollectionGroup(t,e,o,c){let r=new B1((v,w)=>v-w),n=this.overlays.getIterator();for(;n.hasNext();){let v=n.getNext().value;if(v.getKey().getCollectionGroup()===e&&v.largestBatchId>o){let w=r.get(v.largestBatchId);w===null&&(w=G0(),r=r.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}let a=G0(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((v,w)=>a.set(v,w)),!(a.size()>=c)););return E.resolve(a)}ht(t,e,o){let c=this.overlays.get(o.key);if(c!==null){let n=this.Pr.get(c.largestBatchId).delete(o.key);this.Pr.set(c.largestBatchId,n)}this.overlays=this.overlays.insert(o.key,new Vr(e,o));let r=this.Pr.get(e);r===void 0&&(r=e1(),this.Pr.set(e,r)),this.Pr.set(e,r.add(o.key))}};var Nr=class{constructor(){this.sessionToken=e2.EMPTY_BYTE_STRING}getSessionToken(t){return E.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,E.resolve()}};var R4=class{constructor(){this.Ir=new t2(S1.Tr),this.Er=new t2(S1.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){let o=new S1(t,e);this.Ir=this.Ir.add(o),this.Er=this.Er.add(o)}Ar(t,e){t.forEach(o=>this.addReference(o,e))}removeReference(t,e){this.Rr(new S1(t,e))}Vr(t,e){t.forEach(o=>this.removeReference(o,e))}mr(t){let e=new j(new y1([])),o=new S1(e,t),c=new S1(e,t+1),r=[];return this.Er.forEachInRange([o,c],n=>{this.Rr(n),r.push(n.key)}),r}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){let e=new j(new y1([])),o=new S1(e,t),c=new S1(e,t+1),r=e1();return this.Er.forEachInRange([o,c],n=>{r=r.add(n.key)}),r}containsKey(t){let e=new S1(t,0),o=this.Ir.firstAfterOrEqual(e);return o!==null&&t.isEqual(o.key)}},S1=class{constructor(t,e){this.key=t,this.yr=e}static Tr(t,e){return j.comparator(t.key,e.key)||v1(t.yr,e.yr)}static dr(t,e){return v1(t.yr,e.yr)||j.comparator(t.key,e.key)}};var Fr=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new t2(S1.Tr)}checkEmpty(t){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,o,c){let r=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let n=new Mr(r,e,o,c);this.mutationQueue.push(n);for(let a of c)this.Sr=this.Sr.add(new S1(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return E.resolve(n)}lookupMutationBatch(t,e){return E.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){let o=e+1,c=this.Dr(o),r=c<0?0:c;return E.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let o=new S1(e,0),c=new S1(e,Number.POSITIVE_INFINITY),r=[];return this.Sr.forEachInRange([o,c],n=>{let a=this.br(n.yr);r.push(a)}),E.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new t2(v1);return e.forEach(c=>{let r=new S1(c,0),n=new S1(c,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([r,n],a=>{o=o.add(a.yr)})}),E.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,e){let o=e.path,c=o.length+1,r=o;j.isDocumentKey(r)||(r=r.child(""));let n=new S1(new j(r),0),a=new t2(v1);return this.Sr.forEachWhile(h=>{let v=h.key.path;return!!o.isPrefixOf(v)&&(v.length===c&&(a=a.add(h.yr)),!0)},n),E.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(o=>{let c=this.br(o);c!==null&&e.push(c)}),e}removeMutationBatch(t,e){f1(this.vr(e.batchId,"removed")===0),this.mutationQueue.shift();let o=this.Sr;return E.forEach(e.mutations,c=>{let r=new S1(c.key,e.batchId);return o=o.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)}).next(()=>{this.Sr=o})}xn(t){}containsKey(t,e){let o=new S1(e,0),c=this.Sr.firstAfterOrEqual(o);return E.resolve(e.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,E.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){let e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var jr=class{constructor(t){this.Fr=t,this.docs=function(){return new B1(j.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let o=e.key,c=this.docs.get(o),r=c?c.size:0,n=this.Fr(e);return this.docs=this.docs.insert(o,{document:e.mutableCopy(),size:n}),this.size+=n-r,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let o=this.docs.get(e);return E.resolve(o?o.document.mutableCopy():A2.newInvalidDocument(e))}getEntries(t,e){let o=h0();return e.forEach(c=>{let r=this.docs.get(c);o=o.insert(c,r?r.document.mutableCopy():A2.newInvalidDocument(c))}),E.resolve(o)}getDocumentsMatchingQuery(t,e,o,c){let r=h0(),n=e.path,a=new j(n.child("")),h=this.docs.getIteratorFrom(a);for(;h.hasNext();){let{key:v,value:{document:w}}=h.getNext();if(!n.isPrefixOf(v.path))break;v.path.length>n.length+1||Ou(Pu(w),o)<=0||(c.has(w.key)||c3(e,w))&&(r=r.insert(w.key,w.mutableCopy()))}return E.resolve(r)}getAllFromCollectionGroup(t,e,o,c){G()}Mr(t,e){return E.forEach(this.docs,o=>e(o))}newChangeBuffer(t){return new Zr(this)}getSize(t){return E.resolve(this.size)}},Zr=class extends Tr{constructor(t){super(),this.ur=t}applyChanges(t){let e=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?e.push(this.ur.addEntry(t,c)):this.ur.removeEntry(o)}),E.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}};var Ur=class{constructor(t){this.persistence=t,this.Or=new A0(e=>In(e),Dn),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new R4,this.targetCount=0,this.Br=S4.Ln()}forEachTarget(t,e){return this.Or.forEach((o,c)=>e(c)),E.resolve()}getLastRemoteSnapshotVersion(t){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return E.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.Nr&&(this.Nr=e),E.resolve()}Qn(t){this.Or.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Br=new S4(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,E.resolve()}updateTargetData(t,e){return this.Qn(e),E.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Lr.mr(e.targetId),this.targetCount-=1,E.resolve()}removeTargets(t,e,o){let c=0,r=[];return this.Or.forEach((n,a)=>{a.sequenceNumber<=e&&o.get(a.targetId)===null&&(this.Or.delete(n),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),c++)}),E.waitFor(r).next(()=>c)}getTargetCount(t){return E.resolve(this.targetCount)}getTargetData(t,e){let o=this.Or.get(e)||null;return E.resolve(o)}addMatchingKeys(t,e,o){return this.Lr.Ar(e,o),E.resolve()}removeMatchingKeys(t,e,o){this.Lr.Vr(e,o);let c=this.persistence.referenceDelegate,r=[];return c&&e.forEach(n=>{r.push(c.markPotentiallyOrphaned(t,n))}),E.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Lr.mr(e),E.resolve()}getMatchingKeysForTargetId(t,e){let o=this.Lr.pr(e);return E.resolve(o)}containsKey(t,e){return E.resolve(this.Lr.containsKey(e))}};var qr=class{constructor(t,e){this.kr={},this.overlays={},this.qr=new Yi(0),this.Qr=!1,this.Qr=!0,this.Kr=new Nr,this.referenceDelegate=t(this),this.$r=new Ur(this),this.indexManager=new kr,this.remoteDocumentCache=function(c){return new jr(c)}(o=>this.referenceDelegate.Ur(o)),this.serializer=new br(e),this.Wr=new Pr(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Or,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let o=this.kr[t.toKey()];return o||(o=new Fr(e,this.referenceDelegate),this.kr[t.toKey()]=o),o}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,e,o){P("MemoryPersistence","Starting transaction:",t);let c=new Gr(this.qr.next());return this.referenceDelegate.Gr(),o(c).next(r=>this.referenceDelegate.zr(c).next(()=>r)).toPromise().then(r=>(c.raiseOnCommittedEvent(),r))}jr(t,e){return E.or(Object.values(this.kr).map(o=>()=>o.containsKey(t,e)))}},Gr=class extends cr{constructor(t){super(),this.currentSequenceNumber=t}},$r=class s{constructor(t){this.persistence=t,this.Hr=new R4,this.Jr=null}static Yr(t){return new s(t)}get Zr(){if(this.Jr)return this.Jr;throw G()}addReference(t,e,o){return this.Hr.addReference(o,e),this.Zr.delete(o.toString()),E.resolve()}removeReference(t,e,o){return this.Hr.removeReference(o,e),this.Zr.add(o.toString()),E.resolve()}markPotentiallyOrphaned(t,e){return this.Zr.add(e.toString()),E.resolve()}removeTarget(t,e){this.Hr.mr(e.targetId).forEach(c=>this.Zr.add(c.toString()));let o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next(c=>{c.forEach(r=>this.Zr.add(r.toString()))}).next(()=>o.removeTargetData(t,e))}Gr(){this.Jr=new Set}zr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Zr,o=>{let c=j.fromPath(o);return this.Xr(t,c).next(r=>{r||e.removeEntry(c,Y.min())})}).next(()=>(this.Jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Xr(t,e).next(o=>{o?this.Zr.delete(e.toString()):this.Zr.add(e.toString())})}Ur(t){return 0}Xr(t,e){return E.or([()=>E.resolve(this.Hr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.jr(t,e)])}};var Wr=class s{constructor(t,e,o,c){this.targetId=t,this.fromCache=e,this.Ki=o,this.$i=c}static Ui(t,e){let o=e1(),c=e1();for(let r of e.docChanges)switch(r.type){case 0:o=o.add(r.doc.key);break;case 1:c=c.add(r.doc.key)}return new s(t,e.fromCache,o,c)}};var Kr=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Qr=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return ei()?8:Fu(ti())>0?6:4}()}initialize(t,e){this.Hi=t,this.indexManager=e,this.Wi=!0}getDocumentsMatchingQuery(t,e,o,c){let r={result:null};return this.Ji(t,e).next(n=>{r.result=n}).next(()=>{if(!r.result)return this.Yi(t,e,c,o).next(n=>{r.result=n})}).next(()=>{if(r.result)return;let n=new Kr;return this.Zi(t,e,n).next(a=>{if(r.result=a,this.Gi)return this.Xi(t,e,n,a.size)})}).next(()=>r.result)}Xi(t,e,o,c){return o.documentReadCount<this.zi?(f4()<=r1.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",b5(e),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),E.resolve()):(f4()<=r1.DEBUG&&P("QueryEngine","Query:",b5(e),"scans",o.documentReadCount,"local documents and returns",c,"documents as results."),o.documentReadCount>this.ji*c?(f4()<=r1.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",b5(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,j2(e))):E.resolve())}Ji(t,e){if(Si(e))return E.resolve(null);let o=j2(e);return this.indexManager.getIndexType(t,o).next(c=>c===0?null:(e.limit!==null&&c===1&&(e=fr(e,null,"F"),o=j2(e)),this.indexManager.getDocumentsMatchingTarget(t,o).next(r=>{let n=e1(...r);return this.Hi.getDocuments(t,n).next(a=>this.indexManager.getMinOffset(t,o).next(h=>{let v=this.es(e,a);return this.ts(e,v,n,h.readTime)?this.Ji(t,fr(e,null,"F")):this.ns(t,v,e,h)}))})))}Yi(t,e,o,c){return Si(e)||c.isEqual(Y.min())?E.resolve(null):this.Hi.getDocuments(t,o).next(r=>{let n=this.es(e,r);return this.ts(e,n,o,c)?E.resolve(null):(f4()<=r1.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),b5(e)),this.ns(t,n,e,Du(c,-1)).next(a=>a))})}es(t,e){let o=new t2(ah(t));return e.forEach((c,r)=>{c3(t,r)&&(o=o.add(r))}),o}ts(t,e,o,c){if(t.limit===null)return!1;if(o.size!==e.size)return!0;let r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(c)>0)}Zi(t,e,o){return f4()<=r1.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",b5(e)),this.Hi.getDocumentsMatchingQuery(t,e,K0.min(),o)}ns(t,e,o,c){return this.Hi.getDocumentsMatchingQuery(t,o,c).next(r=>(e.forEach(n=>{r=r.insert(n.key,n)}),r))}};var Yr=class{constructor(t,e,o,c){this.persistence=t,this.rs=e,this.serializer=c,this.ss=new B1(v1),this.os=new A0(r=>In(r),Dn),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(o)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dr(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ss))}};function bp(s,t,e,o){return new Yr(s,t,e,o)}function _h(s,t){return S(this,null,function*(){let e=W(s);return yield e.persistence.runTransaction("Handle user change","readonly",o=>{let c;return e.mutationQueue.getAllMutationBatches(o).next(r=>(c=r,e.cs(t),e.mutationQueue.getAllMutationBatches(o))).next(r=>{let n=[],a=[],h=e1();for(let v of c){n.push(v.batchId);for(let w of v.mutations)h=h.add(w.key)}for(let v of r){a.push(v.batchId);for(let w of v.mutations)h=h.add(w.key)}return e.localDocuments.getDocuments(o,h).next(v=>({ls:v,removedBatchIds:n,addedBatchIds:a}))})})})}function kp(s,t){let e=W(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{let c=t.batch.keys(),r=e.us.newChangeBuffer({trackRemovals:!0});return function(a,h,v,w){let u=v.batch,z=u.keys(),y=E.resolve();return z.forEach(A=>{y=y.next(()=>w.getEntry(h,A)).next(R=>{let B=v.docVersions.get(A);f1(B!==null),R.version.compareTo(B)<0&&(u.applyToRemoteDocument(R,v),R.isValidDocument()&&(R.setReadTime(v.commitVersion),w.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(h,u))}(e,o,t,r).next(()=>r.apply(o)).next(()=>e.mutationQueue.performConsistencyCheck(o)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(o,c,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(a){let h=e1();for(let v=0;v<a.mutationResults.length;++v)a.mutationResults[v].transformResults.length>0&&(h=h.add(a.batch.mutations[v].key));return h}(t))).next(()=>e.localDocuments.getDocuments(o,c))})}function Ah(s){let t=W(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.$r.getLastRemoteSnapshotVersion(e))}function Ep(s,t){let e=W(s),o=t.snapshotVersion,c=e.ss;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let n=e.us.newChangeBuffer({trackRemovals:!0});c=e.ss;let a=[];t.targetChanges.forEach((w,u)=>{let z=c.get(u);if(!z)return;a.push(e.$r.removeMatchingKeys(r,w.removedDocuments,u).next(()=>e.$r.addMatchingKeys(r,w.addedDocuments,u)));let y=z.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(u)!==null?y=y.withResumeToken(e2.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):w.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(w.resumeToken,o)),c=c.insert(u,y),function(R,B,O){return R.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(z,y,w)&&a.push(e.$r.updateTargetData(r,y))});let h=h0(),v=e1();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,w))}),a.push(Tp(r,n,t.documentUpdates).next(w=>{h=w.hs,v=w.Ps})),!o.isEqual(Y.min())){let w=e.$r.getLastRemoteSnapshotVersion(r).next(u=>e.$r.setTargetsMetadata(r,r.currentSequenceNumber,o));a.push(w)}return E.waitFor(a).next(()=>n.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,h,v)).next(()=>h)}).then(r=>(e.ss=c,r))}function Tp(s,t,e){let o=e1(),c=e1();return e.forEach(r=>o=o.add(r)),t.getEntries(s,o).next(r=>{let n=h0();return e.forEach((a,h)=>{let v=r.get(a);h.isFoundDocument()!==v.isFoundDocument()&&(c=c.add(a)),h.isNoDocument()&&h.version.isEqual(Y.min())?(t.removeEntry(a,h.readTime),n=n.insert(a,h)):!v.isValidDocument()||h.version.compareTo(v.version)>0||h.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(h),n=n.insert(a,h)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",v.version," Watch version:",h.version)}),{hs:n,Ps:c}})}function Ip(s,t){let e=W(s);return e.persistence.runTransaction("Get next mutation batch","readonly",o=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function Dp(s,t){let e=W(s);return e.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return e.$r.getTargetData(o,t).next(r=>r?(c=r,E.resolve(c)):e.$r.allocateTargetId(o).next(n=>(c=new A4(t,n,"TargetPurposeListen",o.currentSequenceNumber),e.$r.addTargetData(o,c).next(()=>c))))}).then(o=>{let c=e.ss.get(o.targetId);return(c===null||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(e.ss=e.ss.insert(o.targetId,o),e.os.set(t,o.targetId)),o})}function Jr(s,t,e){return S(this,null,function*(){let o=W(s),c=o.ss.get(t),r=e?"readwrite":"readwrite-primary";try{e||(yield o.persistence.runTransaction("Release target",r,n=>o.persistence.referenceDelegate.removeTarget(n,c)))}catch(n){if(!I4(n))throw n;P("LocalStore",`Failed to update sequence numbers for target ${t}: ${n}`)}o.ss=o.ss.remove(t),o.os.delete(c.target)})}function Fi(s,t,e){let o=W(s),c=Y.min(),r=e1();return o.persistence.runTransaction("Execute query","readwrite",n=>function(h,v,w){let u=W(h),z=u.os.get(w);return z!==void 0?E.resolve(u.ss.get(z)):u.$r.getTargetData(v,w)}(o,n,j2(t)).next(a=>{if(a)return c=a.lastLimboFreeSnapshotVersion,o.$r.getMatchingKeysForTargetId(n,a.targetId).next(h=>{r=h})}).next(()=>o.rs.getDocumentsMatchingQuery(n,t,e?c:Y.min(),e?r:e1())).next(a=>(Pp(o,Xu(t),a),{documents:a,Is:r})))}function Pp(s,t,e){let o=s._s.get(t)||Y.min();e.forEach((c,r)=>{r.readTime.compareTo(o)>0&&(o=r.readTime)}),s._s.set(t,o)}var Ns=class{constructor(){this.activeTargetIds=rp()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Xr=class{constructor(){this.io=new Ns,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,o){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,e,o){this.so[t]=e}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new Ns,Promise.resolve()}handleUserChange(t,e,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var tn=class{oo(t){}shutdown(){}};var Fs=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.lo)t(0)}co(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.lo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hs=null;function $c(){return Hs===null?Hs=function(){return 268435456+Math.round(2147483648*Math.random())}():Hs++,"0x"+Hs.toString(16)}var Op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var en=class{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}};var X1="WebChannelConnection",sn=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let o=e.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=o+"://"+e.host,this.Do=`projects/${c}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${c}`:`project_id=${c}&database_id=${r}`}get vo(){return!1}Fo(e,o,c,r,n){let a=$c(),h=this.Mo(e,o.toUriEncodedString());P("RestConnection",`Sending RPC '${e}' ${a}:`,h,c);let v={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(v,r,n),this.Oo(e,h,v,c).then(w=>(P("RestConnection",`Received RPC '${e}' ${a}: `,w),w),w=>{throw O5("RestConnection",`RPC '${e}' ${a} failed with error: `,w,"url: ",h,"request:",c),w})}No(e,o,c,r,n,a){return this.Fo(e,o,c,r,n)}xo(e,o,c){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+X5}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((r,n)=>e[n]=r),c&&c.headers.forEach((r,n)=>e[n]=r)}Mo(e,o){let c=Op[e];return`${this.bo}/v1/${o}:${c}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,e,o,c){let r=$c();return new Promise((n,a)=>{let h=new Nc;h.setWithCredentials(!0),h.listenOnce(jc.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case m4.NO_ERROR:let w=h.getResponseJson();P(X1,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(w)),n(w);break;case m4.TIMEOUT:P(X1,`RPC '${t}' ${r} timed out`),a(new N(b.DEADLINE_EXCEEDED,"Request time out"));break;case m4.HTTP_ERROR:let u=h.getStatus();if(P(X1,`RPC '${t}' ${r} failed with status:`,u,"response text:",h.getResponseText()),u>0){let z=h.getResponseJson();Array.isArray(z)&&(z=z[0]);let y=z?.error;if(y&&y.status&&y.message){let A=function(B){let O=B.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(O)>=0?O:b.UNKNOWN}(y.status);a(new N(A,y.message))}else a(new N(b.UNKNOWN,"Server responded with status "+h.getStatus()))}else a(new N(b.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{P(X1,`RPC '${t}' ${r} completed.`)}});let v=JSON.stringify(c);P(X1,`RPC '${t}' ${r} sending request:`,c),h.send(e,"POST",v,o,15)})}Lo(t,e,o){let c=$c(),r=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=qc(),a=Uc(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(h.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(h.xmlHttpFactory=new Fc({})),this.xo(h.initMessageHeaders,e,o),h.encodeInitMessageHeaders=!0;let w=r.join("");P(X1,`Creating RPC '${t}' stream ${c}: ${w}`,h);let u=n.createWebChannel(w,h),z=!1,y=!1,A=new en({Po:B=>{y?P(X1,`Not sending because RPC '${t}' stream ${c} is closed:`,B):(z||(P(X1,`Opening RPC '${t}' stream ${c} transport.`),u.open(),z=!0),P(X1,`RPC '${t}' stream ${c} sending:`,B),u.send(B))},Io:()=>u.close()}),R=(B,O,F)=>{B.listen(O,D=>{try{F(D)}catch(o1){setTimeout(()=>{throw o1},0)}})};return R(u,R5.EventType.OPEN,()=>{y||(P(X1,`RPC '${t}' stream ${c} transport opened.`),A.po())}),R(u,R5.EventType.CLOSE,()=>{y||(y=!0,P(X1,`RPC '${t}' stream ${c} transport closed`),A.wo())}),R(u,R5.EventType.ERROR,B=>{y||(y=!0,O5(X1,`RPC '${t}' stream ${c} transport errored:`,B),A.wo(new N(b.UNAVAILABLE,"The operation could not be completed")))}),R(u,R5.EventType.MESSAGE,B=>{var O;if(!y){let F=B.data[0];f1(!!F);let D=F,o1=D.error||((O=D[0])===null||O===void 0?void 0:O.error);if(o1){P(X1,`RPC '${t}' stream ${c} received error:`,o1);let _1=o1.status,t1=function(m){let x=A1[m];if(x!==void 0)return xh(x)}(_1),M=o1.message;t1===void 0&&(t1=b.INTERNAL,M="Unknown error status: "+_1+" with message "+o1.message),y=!0,A.wo(new N(t1,M)),u.close()}else P(X1,`RPC '${t}' stream ${c} received:`,F),A.So(F)}}),R(a,Zc.STAT_EVENT,B=>{B.stat===Cs.PROXY?P(X1,`RPC '${t}' stream ${c} detected buffering proxy`):B.stat===Cs.NOPROXY&&P(X1,`RPC '${t}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{A.yo()},0),A}};function Wc(){return typeof document<"u"?document:null}function r3(s){return new Br(s,!0)}var js=class{constructor(t,e,o=1e3,c=1.5,r=6e4){this.ai=t,this.timerId=e,this.Bo=o,this.ko=c,this.qo=r,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();let e=Math.floor(this.Qo+this.Go()),o=Math.max(0,Date.now()-this.$o),c=Math.max(0,e-o);c>0&&P("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Qo} ms, delay with jitter: ${e} ms, last attempt: ${o} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,c,()=>(this.$o=Date.now(),t())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var Zs=class{constructor(t,e,o,c,r,n,a,h){this.ai=t,this.jo=o,this.Ho=c,this.connection=r,this.authCredentialsProvider=n,this.appCheckCredentialsProvider=a,this.listener=h,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new js(t,e)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return S(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(t){this.a_(),this.stream.send(t)}o_(){return S(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(t,e){return S(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,t!==4?this.e_.reset():e&&e.code===b.RESOURCE_EXHAUSTED?(a0(e.toString()),a0("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):e&&e.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Vo(e)})}c_(){}auth(){this.state=1;let t=this.l_(this.Jo),e=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Jo===e&&this.h_(o,c)},o=>{t(()=>{let c=new N(b.UNKNOWN,"Fetching auth token failed: "+o.message);return this.P_(c)})})}h_(t,e){let o=this.l_(this.Jo);this.stream=this.I_(t,e),this.stream.To(()=>{o(()=>this.listener.To())}),this.stream.Ao(()=>{o(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(c=>{o(()=>this.P_(c))}),this.stream.onMessage(c=>{o(()=>++this.Xo==1?this.T_(c):this.onNext(c))})}r_(){this.state=5,this.e_.Wo(()=>S(this,null,function*(){this.state=0,this.start()}))}P_(t){return P("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return e=>{this.ai.enqueueAndForget(()=>this.Jo===t?e():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},on=class extends Zs{constructor(t,e,o,c,r,n){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,o,c,n),this.serializer=r}I_(t,e){return this.connection.Lo("Listen",t,e)}T_(t){return this.onNext(t)}onNext(t){this.e_.reset();let e=xp(this.serializer,t),o=function(r){if(!("targetChange"in r))return Y.min();let n=r.targetChange;return n.targetIds&&n.targetIds.length?Y.min():n.readTime?Z2(n.readTime):Y.min()}(t);return this.listener.E_(e,o)}d_(t){let e={};e.database=Rr(this.serializer),e.addTarget=function(r,n){let a,h=n.target;if(a=mr(h)?{documents:Vp(r,h)}:{query:Hp(r,h)._t},a.targetId=n.targetId,n.resumeToken.approximateByteSize()>0){a.resumeToken=Mh(r,n.resumeToken);let v=_r(r,n.expectedCount);v!==null&&(a.expectedCount=v)}else if(n.snapshotVersion.compareTo(Y.min())>0){a.readTime=Ps(r,n.snapshotVersion.toTimestamp());let v=_r(r,n.expectedCount);v!==null&&(a.expectedCount=v)}return a}(this.serializer,t);let o=yp(this.serializer,t);o&&(e.labels=o),this.__(e)}A_(t){let e={};e.database=Rr(this.serializer),e.removeTarget=t,this.__(e)}},cn=class extends Zs{constructor(t,e,o,c,r,n){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,o,c,n),this.serializer=r}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(t,e){return this.connection.Lo("Write",t,e)}T_(t){return f1(!!t.streamToken),this.lastStreamToken=t.streamToken,f1(!t.writeResults||t.writeResults.length===0),this.listener.m_()}onNext(t){f1(!!t.streamToken),this.lastStreamToken=t.streamToken,this.e_.reset();let e=Cp(t.writeResults,t.commitTime),o=Z2(t.commitTime);return this.listener.f_(o,e)}g_(){let t={};t.database=Rr(this.serializer),this.__(t)}V_(t){let e={streamToken:this.lastStreamToken,writes:t.map(o=>Mp(this.serializer,o))};this.__(e)}};var rn=class extends class{}{constructor(t,e,o,c){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=o,this.serializer=c,this.p_=!1}y_(){if(this.p_)throw new N(b.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,e,o,c){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,n])=>this.connection.Fo(t,Ar(e,o),c,r,n)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new N(b.UNKNOWN,r.toString())})}No(t,e,o,c,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,a])=>this.connection.No(t,Ar(e,o),c,n,a,r)).catch(n=>{throw n.name==="FirebaseError"?(n.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new N(b.UNKNOWN,n.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},nn=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(t){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,t==="Online"&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(a0(e),this.b_=!1):P("OnlineStateTracker",e)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var ln=class{constructor(t,e,o,c,r){this.localStore=t,this.datastore=e,this.asyncQueue=o,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=r,this.B_.oo(n=>{o.enqueueAndForget(()=>S(this,null,function*(){o5(this)&&(P("RemoteStore","Restarting streams for network reachability change."),yield function(h){return S(this,null,function*(){let v=W(h);v.N_.add(4),yield D4(v),v.k_.set("Unknown"),v.N_.delete(4),yield n3(v)})}(this))}))}),this.k_=new nn(o,c)}};function n3(s){return S(this,null,function*(){if(o5(s))for(let t of s.L_)yield t(!0)})}function D4(s){return S(this,null,function*(){for(let t of s.L_)yield t(!1)})}function Sh(s,t){let e=W(s);e.O_.has(t.targetId)||(e.O_.set(t.targetId,t),jn(e)?Fn(e):tt(e).n_()&&Nn(e,t))}function On(s,t){let e=W(s),o=tt(e);e.O_.delete(t),o.n_()&&Rh(e,t),e.O_.size===0&&(o.n_()?o.s_():o5(e)&&e.k_.set("Unknown"))}function Nn(s,t){if(s.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){let e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}tt(s).d_(t)}function Rh(s,t){s.q_.xe(t),tt(s).A_(t)}function Fn(s){s.q_=new yr({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.O_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),tt(s).start(),s.k_.D_()}function jn(s){return o5(s)&&!tt(s).t_()&&s.O_.size>0}function o5(s){return W(s).N_.size===0}function bh(s){s.q_=void 0}function Np(s){return S(this,null,function*(){s.k_.set("Online")})}function Fp(s){return S(this,null,function*(){s.O_.forEach((t,e)=>{Nn(s,t)})})}function jp(s,t){return S(this,null,function*(){bh(s),jn(s)?(s.k_.F_(t),Fn(s)):s.k_.set("Unknown")})}function Zp(s,t,e){return S(this,null,function*(){if(s.k_.set("Online"),t instanceof Is&&t.state===2&&t.cause)try{yield function(c,r){return S(this,null,function*(){let n=r.cause;for(let a of r.targetIds)c.O_.has(a)&&(yield c.remoteSyncer.rejectListen(a,n),c.O_.delete(a),c.q_.removeTarget(a))})}(s,t)}catch(o){P("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield Us(s,o)}else if(t instanceof D5?s.q_.Ke(t):t instanceof Ts?s.q_.He(t):s.q_.We(t),!e.isEqual(Y.min()))try{let o=yield Ah(s.localStore);e.compareTo(o)>=0&&(yield function(r,n){let a=r.q_.rt(n);return a.targetChanges.forEach((h,v)=>{if(h.resumeToken.approximateByteSize()>0){let w=r.O_.get(v);w&&r.O_.set(v,w.withResumeToken(h.resumeToken,n))}}),a.targetMismatches.forEach((h,v)=>{let w=r.O_.get(h);if(!w)return;r.O_.set(h,w.withResumeToken(e2.EMPTY_BYTE_STRING,w.snapshotVersion)),Rh(r,h);let u=new A4(w.target,h,v,w.sequenceNumber);Nn(r,u)}),r.remoteSyncer.applyRemoteEvent(a)}(s,e))}catch(o){P("RemoteStore","Failed to raise snapshot:",o),yield Us(s,o)}})}function Us(s,t,e){return S(this,null,function*(){if(!I4(t))throw t;s.N_.add(1),yield D4(s),s.k_.set("Offline"),e||(e=()=>Ah(s.localStore)),s.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){P("RemoteStore","Retrying IndexedDB access"),yield e(),s.N_.delete(1),yield n3(s)}))})}function kh(s,t){return t().catch(e=>Us(s,e,t))}function l3(s){return S(this,null,function*(){let t=W(s),e=S0(t),o=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;Up(t);)try{let c=yield Ip(t.localStore,o);if(c===null){t.x_.length===0&&e.s_();break}o=c.batchId,qp(t,c)}catch(c){yield Us(t,c)}Eh(t)&&Th(t)})}function Up(s){return o5(s)&&s.x_.length<10}function qp(s,t){s.x_.push(t);let e=S0(s);e.n_()&&e.R_&&e.V_(t.mutations)}function Eh(s){return o5(s)&&!S0(s).t_()&&s.x_.length>0}function Th(s){S0(s).start()}function Gp(s){return S(this,null,function*(){S0(s).g_()})}function $p(s){return S(this,null,function*(){let t=S0(s);for(let e of s.x_)t.V_(e.mutations)})}function Wp(s,t,e){return S(this,null,function*(){let o=s.x_.shift(),c=Cr.from(o,t,e);yield kh(s,()=>s.remoteSyncer.applySuccessfulWrite(c)),yield l3(s)})}function Kp(s,t){return S(this,null,function*(){t&&S0(s).R_&&(yield function(o,c){return S(this,null,function*(){if(function(n){return gp(n)&&n!==b.ABORTED}(c.code)){let r=o.x_.shift();S0(o).i_(),yield kh(o,()=>o.remoteSyncer.rejectFailedWrite(r.batchId,c)),yield l3(o)}})}(s,t)),Eh(s)&&Th(s)})}function ji(s,t){return S(this,null,function*(){let e=W(s);e.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let o=o5(e);e.N_.add(3),yield D4(e),o&&e.k_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.N_.delete(3),yield n3(e)})}function Qp(s,t){return S(this,null,function*(){let e=W(s);t?(e.N_.delete(2),yield n3(e)):t||(e.N_.add(2),yield D4(e),e.k_.set("Unknown"))})}function tt(s){return s.Q_||(s.Q_=function(e,o,c){let r=W(e);return r.y_(),new on(o,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,c)}(s.datastore,s.asyncQueue,{To:Np.bind(null,s),Ao:Fp.bind(null,s),Vo:jp.bind(null,s),E_:Zp.bind(null,s)}),s.L_.push(t=>S(this,null,function*(){t?(s.Q_.i_(),jn(s)?Fn(s):s.k_.set("Unknown")):(yield s.Q_.stop(),bh(s))}))),s.Q_}function S0(s){return s.K_||(s.K_=function(e,o,c){let r=W(e);return r.y_(),new cn(o,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,c)}(s.datastore,s.asyncQueue,{To:()=>Promise.resolve(),Ao:Gp.bind(null,s),Vo:Kp.bind(null,s),m_:$p.bind(null,s),f_:Wp.bind(null,s)}),s.L_.push(t=>S(this,null,function*(){t?(s.K_.i_(),yield l3(s)):(yield s.K_.stop(),s.x_.length>0&&(P("RemoteStore",`Stopping write stream with ${s.x_.length} pending writes`),s.x_=[]))}))),s.K_}var an=class s{constructor(t,e,o,c,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=c,this.removalCallback=r,this.deferred=new N2,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(n=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,o,c,r){let n=Date.now()+o,a=new s(t,e,n,c,r);return a.start(o),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(b.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Zn(s,t){if(a0("AsyncQueue",`${t}: ${s}`),I4(s))return new N(b.UNAVAILABLE,`${t}: ${s}`);throw s}var qs=class s{constructor(t){this.comparator=t?(e,o)=>t(e,o)||j.comparator(e.key,o.key):(e,o)=>j.comparator(e.key,o.key),this.keyedMap=z4(),this.sortedSet=new B1(this.comparator)}static emptySet(t){return new s(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,o)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof s)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;e.hasNext();){let c=e.getNext().key,r=o.getNext().key;if(!c.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let o=new s;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o}};var Gs=class{constructor(){this.U_=new B1(j.comparator)}track(t){let e=t.doc.key,o=this.U_.get(e);o?t.type!==0&&o.type===3?this.U_=this.U_.insert(e,t):t.type===3&&o.type!==1?this.U_=this.U_.insert(e,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.U_=this.U_.insert(e,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.U_=this.U_.remove(e):t.type===1&&o.type===2?this.U_=this.U_.insert(e,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):G():this.U_=this.U_.insert(e,t)}W_(){let t=[];return this.U_.inorderTraversal((e,o)=>{t.push(o)}),t}},Q5=class s{constructor(t,e,o,c,r,n,a,h,v){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=r,this.fromCache=n,this.syncStateChanged=a,this.excludesMetadataChanges=h,this.hasCachedResults=v}static fromInitialDocuments(t,e,o,c,r){let n=[];return e.forEach(a=>{n.push({type:0,doc:a})}),new s(t,e,qs.emptySet(e),n,o,c,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&o3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(let c=0;c<e.length;c++)if(e[c].type!==o[c].type||!e[c].doc.isEqual(o[c].doc))return!1;return!0}};var hn=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(t=>t.H_())}},vn=class{constructor(){this.queries=Zi(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(e,o){let c=W(e),r=c.queries;c.queries=Zi(),r.forEach((n,a)=>{for(let h of a.z_)h.onError(o)})})(this,new N(b.ABORTED,"Firestore shutting down"))}};function Zi(){return new A0(s=>lh(s),o3)}function Yp(s,t){return S(this,null,function*(){let e=W(s),o=3,c=t.query,r=e.queries.get(c);r?!r.j_()&&t.H_()&&(o=2):(r=new hn,o=t.H_()?0:1);try{switch(o){case 0:r.G_=yield e.onListen(c,!0);break;case 1:r.G_=yield e.onListen(c,!1);break;case 2:yield e.onFirstRemoteStoreListen(c)}}catch(n){let a=Zn(n,`Initialization of query '${b5(t.query)}' failed`);return void t.onError(a)}e.queries.set(c,r),r.z_.push(t),t.Y_(e.onlineState),r.G_&&t.Z_(r.G_)&&Un(e)})}function Jp(s,t){return S(this,null,function*(){let e=W(s),o=t.query,c=3,r=e.queries.get(o);if(r){let n=r.z_.indexOf(t);n>=0&&(r.z_.splice(n,1),r.z_.length===0?c=t.H_()?0:1:!r.j_()&&t.H_()&&(c=2))}switch(c){case 0:return e.queries.delete(o),e.onUnlisten(o,!0);case 1:return e.queries.delete(o),e.onUnlisten(o,!1);case 2:return e.onLastRemoteStoreUnlisten(o);default:return}})}function Xp(s,t){let e=W(s),o=!1;for(let c of t){let r=c.query,n=e.queries.get(r);if(n){for(let a of n.z_)a.Z_(c)&&(o=!0);n.G_=c}}o&&Un(e)}function tm(s,t,e){let o=W(s),c=o.queries.get(t);if(c)for(let r of c.z_)r.onError(e);o.queries.delete(t)}function Un(s){s.J_.forEach(t=>{t.next()})}var gn,Ui;(Ui=gn||(gn={})).X_="default",Ui.Cache="cache";var wn=class{constructor(t,e,o){this.query=t,this.ea=e,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=o||{}}Z_(t){if(!this.options.includeMetadataChanges){let o=[];for(let c of t.docChanges)c.type!==3&&o.push(c);t=new Q5(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ta?this.ra(t)&&(this.ea.next(t),e=!0):this.ia(t,this.onlineState)&&(this.sa(t),e=!0),this.na=t,e}onError(t){this.ea.error(t)}Y_(t){this.onlineState=t;let e=!1;return this.na&&!this.ta&&this.ia(this.na,t)&&(this.sa(this.na),e=!0),e}ia(t,e){if(!t.fromCache||!this.H_())return!0;let o=e!=="Offline";return(!this.options.oa||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ra(t){if(t.docChanges.length>0)return!0;let e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}sa(t){t=Q5.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ta=!0,this.ea.next(t)}H_(){return this.options.source!==gn.Cache}};var $s=class{constructor(t){this.key=t}},Ws=class{constructor(t){this.key=t}},dn=class{constructor(t,e){this.query=t,this.Ia=e,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=e1(),this.mutatedKeys=e1(),this.da=ah(t),this.Aa=new qs(this.da)}get Ra(){return this.Ia}Va(t,e){let o=e?e.ma:new Gs,c=e?e.Aa:this.Aa,r=e?e.mutatedKeys:this.mutatedKeys,n=c,a=!1,h=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,v=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal((w,u)=>{let z=c.get(w),y=c3(this.query,u)?u:null,A=!!z&&this.mutatedKeys.has(z.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),B=!1;z&&y?z.data.isEqual(y.data)?A!==R&&(o.track({type:3,doc:y}),B=!0):this.fa(z,y)||(o.track({type:2,doc:y}),B=!0,(h&&this.da(y,h)>0||v&&this.da(y,v)<0)&&(a=!0)):!z&&y?(o.track({type:0,doc:y}),B=!0):z&&!y&&(o.track({type:1,doc:z}),B=!0,(h||v)&&(a=!0)),B&&(y?(n=n.add(y),r=R?r.add(w):r.delete(w)):(n=n.delete(w),r=r.delete(w)))}),this.query.limit!==null)for(;n.size>this.query.limit;){let w=this.query.limitType==="F"?n.last():n.first();n=n.delete(w.key),r=r.delete(w.key),o.track({type:1,doc:w})}return{Aa:n,ma:o,ts:a,mutatedKeys:r}}fa(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,o,c){let r=this.Aa;this.Aa=t.Aa,this.mutatedKeys=t.mutatedKeys;let n=t.ma.W_();n.sort((w,u)=>function(y,A){let R=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return R(y)-R(A)}(w.type,u.type)||this.da(w.doc,u.doc)),this.ga(o),c=c!=null&&c;let a=e&&!c?this.pa():[],h=this.Ea.size===0&&this.current&&!c?1:0,v=h!==this.Ta;return this.Ta=h,n.length!==0||v?{snapshot:new Q5(this.query,t.Aa,r,n,t.mutatedKeys,h===0,v,!1,!!o&&o.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Gs,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(t){return!this.Ia.has(t)&&!!this.Aa.has(t)&&!this.Aa.get(t).hasLocalMutations}ga(t){t&&(t.addedDocuments.forEach(e=>this.Ia=this.Ia.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ia=this.Ia.delete(e)),this.current=t.current)}pa(){if(!this.current)return[];let t=this.Ea;this.Ea=e1(),this.Aa.forEach(o=>{this.wa(o.key)&&(this.Ea=this.Ea.add(o.key))});let e=[];return t.forEach(o=>{this.Ea.has(o)||e.push(new Ws(o))}),this.Ea.forEach(o=>{t.has(o)||e.push(new $s(o))}),e}Sa(t){this.Ia=t.Is,this.Ea=e1();let e=this.Va(t.documents);return this.applyChanges(e,!0)}ba(){return Q5.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},un=class{constructor(t,e,o){this.query=t,this.targetId=e,this.view=o}},pn=class{constructor(t){this.key=t,this.Da=!1}},mn=class{constructor(t,e,o,c,r,n){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=c,this.currentUser=r,this.maxConcurrentLimboResolutions=n,this.Ca={},this.va=new A0(a=>lh(a),o3),this.Fa=new Map,this.Ma=new Set,this.xa=new B1(j.comparator),this.Oa=new Map,this.Na=new R4,this.La={},this.Ba=new Map,this.ka=S4.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function em(s,t,e=!0){return S(this,null,function*(){let o=Fh(s),c,r=o.va.get(t);return r?(o.sharedClientState.addLocalQueryTarget(r.targetId),c=r.view.ba()):c=yield Ih(o,t,e,!0),c})}function sm(s,t){return S(this,null,function*(){let e=Fh(s);yield Ih(e,t,!0,!1)})}function Ih(s,t,e,o){return S(this,null,function*(){let c=yield Dp(s.localStore,j2(t)),r=c.targetId,n=e?s.sharedClientState.addLocalQueryTarget(r):"not-current",a;return o&&(a=yield om(s,t,r,n==="current",c.resumeToken)),s.isPrimaryClient&&e&&Sh(s.remoteStore,c),a})}function om(s,t,e,o,c){return S(this,null,function*(){s.Qa=(u,z,y)=>function(R,B,O,F){return S(this,null,function*(){let D=B.view.Va(O);D.ts&&(D=yield Fi(R.localStore,B.query,!1).then(({documents:M})=>B.view.Va(M,D)));let o1=F&&F.targetChanges.get(B.targetId),_1=F&&F.targetMismatches.get(B.targetId)!=null,t1=B.view.applyChanges(D,R.isPrimaryClient,o1,_1);return Gi(R,B.targetId,t1.ya),t1.snapshot})}(s,u,z,y);let r=yield Fi(s.localStore,t,!0),n=new dn(t,r.Is),a=n.Va(r.documents),h=_4.createSynthesizedTargetChangeForCurrentChange(e,o&&s.onlineState!=="Offline",c),v=n.applyChanges(a,s.isPrimaryClient,h);Gi(s,e,v.ya);let w=new un(t,e,n);return s.va.set(t,w),s.Fa.has(e)?s.Fa.get(e).push(t):s.Fa.set(e,[t]),v.snapshot})}function cm(s,t,e){return S(this,null,function*(){let o=W(s),c=o.va.get(t),r=o.Fa.get(c.targetId);if(r.length>1)return o.Fa.set(c.targetId,r.filter(n=>!o3(n,t))),void o.va.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(c.targetId),o.sharedClientState.isActiveQueryTarget(c.targetId)||(yield Jr(o.localStore,c.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(c.targetId),e&&On(o.remoteStore,c.targetId),fn(o,c.targetId)}).catch(T4))):(fn(o,c.targetId),yield Jr(o.localStore,c.targetId,!0))})}function rm(s,t){return S(this,null,function*(){let e=W(s),o=e.va.get(t),c=e.Fa.get(o.targetId);e.isPrimaryClient&&c.length===1&&(e.sharedClientState.removeLocalQueryTarget(o.targetId),On(e.remoteStore,o.targetId))})}function nm(s,t,e){return S(this,null,function*(){let o=wm(s);try{let c=yield function(n,a){let h=W(n),v=q1.now(),w=a.reduce((y,A)=>y.add(A.key),e1()),u,z;return h.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=h0(),R=e1();return h.us.getEntries(y,w).next(B=>{A=B,A.forEach((O,F)=>{F.isValidDocument()||(R=R.add(O))})}).next(()=>h.localDocuments.getOverlayedDocuments(y,A)).next(B=>{u=B;let O=[];for(let F of a){let D=vp(F,u.get(F.key).overlayedDocument);D!=null&&O.push(new G2(F.key,D,th(D.value.mapValue),l0.exists(!0)))}return h.mutationQueue.addMutationBatch(y,v,O,a)}).next(B=>{z=B;let O=B.applyToLocalDocumentSet(u,R);return h.documentOverlayCache.saveOverlays(y,B.batchId,O)})}).then(()=>({batchId:z.batchId,changes:hh(u)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(c.batchId),function(n,a,h){let v=n.La[n.currentUser.toKey()];v||(v=new B1(v1)),v=v.insert(a,h),n.La[n.currentUser.toKey()]=v}(o,c.batchId,e),yield P4(o,c.changes),yield l3(o.remoteStore)}catch(c){let r=Zn(c,"Failed to persist write");e.reject(r)}})}function Dh(s,t){return S(this,null,function*(){let e=W(s);try{let o=yield Ep(e.localStore,t);t.targetChanges.forEach((c,r)=>{let n=e.Oa.get(r);n&&(f1(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?n.Da=!0:c.modifiedDocuments.size>0?f1(n.Da):c.removedDocuments.size>0&&(f1(n.Da),n.Da=!1))}),yield P4(e,o,t)}catch(o){yield T4(o)}})}function qi(s,t,e){let o=W(s);if(o.isPrimaryClient&&e===0||!o.isPrimaryClient&&e===1){let c=[];o.va.forEach((r,n)=>{let a=n.view.Y_(t);a.snapshot&&c.push(a.snapshot)}),function(n,a){let h=W(n);h.onlineState=a;let v=!1;h.queries.forEach((w,u)=>{for(let z of u.z_)z.Y_(a)&&(v=!0)}),v&&Un(h)}(o.eventManager,t),c.length&&o.Ca.E_(c),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function lm(s,t,e){return S(this,null,function*(){let o=W(s);o.sharedClientState.updateQueryState(t,"rejected",e);let c=o.Oa.get(t),r=c&&c.key;if(r){let n=new B1(j.comparator);n=n.insert(r,A2.newNoDocument(r,Y.min()));let a=e1().add(r),h=new Es(Y.min(),new Map,new B1(v1),n,a);yield Dh(o,h),o.xa=o.xa.remove(r),o.Oa.delete(t),qn(o)}else yield Jr(o.localStore,t,!1).then(()=>fn(o,t,e)).catch(T4)})}function am(s,t){return S(this,null,function*(){let e=W(s),o=t.batch.batchId;try{let c=yield kp(e.localStore,t);Oh(e,o,null),Ph(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),yield P4(e,c)}catch(c){yield T4(c)}})}function im(s,t,e){return S(this,null,function*(){let o=W(s);try{let c=yield function(n,a){let h=W(n);return h.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return h.mutationQueue.lookupMutationBatch(v,a).next(u=>(f1(u!==null),w=u.keys(),h.mutationQueue.removeMutationBatch(v,u))).next(()=>h.mutationQueue.performConsistencyCheck(v)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(v,w,a)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>h.localDocuments.getDocuments(v,w))})}(o.localStore,t);Oh(o,t,e),Ph(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),yield P4(o,c)}catch(c){yield T4(c)}})}function Ph(s,t){(s.Ba.get(t)||[]).forEach(e=>{e.resolve()}),s.Ba.delete(t)}function Oh(s,t,e){let o=W(s),c=o.La[o.currentUser.toKey()];if(c){let r=c.get(t);r&&(e?r.reject(e):r.resolve(),c=c.remove(t)),o.La[o.currentUser.toKey()]=c}}function fn(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(let o of s.Fa.get(t))s.va.delete(o),e&&s.Ca.Ka(o,e);s.Fa.delete(t),s.isPrimaryClient&&s.Na.mr(t).forEach(o=>{s.Na.containsKey(o)||Nh(s,o)})}function Nh(s,t){s.Ma.delete(t.path.canonicalString());let e=s.xa.get(t);e!==null&&(On(s.remoteStore,e),s.xa=s.xa.remove(t),s.Oa.delete(e),qn(s))}function Gi(s,t,e){for(let o of e)o instanceof $s?(s.Na.addReference(o.key,t),hm(s,o)):o instanceof Ws?(P("SyncEngine","Document no longer in limbo: "+o.key),s.Na.removeReference(o.key,t),s.Na.containsKey(o.key)||Nh(s,o.key)):G()}function hm(s,t){let e=t.key,o=e.path.canonicalString();s.xa.get(e)||s.Ma.has(o)||(P("SyncEngine","New document in limbo: "+e),s.Ma.add(o),qn(s))}function qn(s){for(;s.Ma.size>0&&s.xa.size<s.maxConcurrentLimboResolutions;){let t=s.Ma.values().next().value;s.Ma.delete(t);let e=new j(y1.fromString(t)),o=s.ka.next();s.Oa.set(o,new pn(e)),s.xa=s.xa.insert(e,o),Sh(s.remoteStore,new A4(j2(nh(e.path)),o,"TargetPurposeLimboResolution",Yi.oe))}}function P4(s,t,e){return S(this,null,function*(){let o=W(s),c=[],r=[],n=[];o.va.isEmpty()||(o.va.forEach((a,h)=>{n.push(o.Qa(h,t,e).then(v=>{var w;if((v||e)&&o.isPrimaryClient){let u=v?!v.fromCache:(w=e?.targetChanges.get(h.targetId))===null||w===void 0?void 0:w.current;o.sharedClientState.updateQueryState(h.targetId,u?"current":"not-current")}if(v){c.push(v);let u=Wr.Ui(h.targetId,v);r.push(u)}}))}),yield Promise.all(n),o.Ca.E_(c),yield function(h,v){return S(this,null,function*(){let w=W(h);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>E.forEach(v,z=>E.forEach(z.Ki,y=>w.persistence.referenceDelegate.addReference(u,z.targetId,y)).next(()=>E.forEach(z.$i,y=>w.persistence.referenceDelegate.removeReference(u,z.targetId,y)))))}catch(u){if(!I4(u))throw u;P("LocalStore","Failed to update sequence numbers: "+u)}for(let u of v){let z=u.targetId;if(!u.fromCache){let y=w.ss.get(z),A=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(A);w.ss=w.ss.insert(z,R)}}})}(o.localStore,r))})}function vm(s,t){return S(this,null,function*(){let e=W(s);if(!e.currentUser.isEqual(t)){P("SyncEngine","User change. New user:",t.toKey());let o=yield _h(e.localStore,t);e.currentUser=t,function(r,n){r.Ba.forEach(a=>{a.forEach(h=>{h.reject(new N(b.CANCELLED,n))})}),r.Ba.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield P4(e,o.ls)}})}function gm(s,t){let e=W(s),o=e.Oa.get(t);if(o&&o.Da)return e1().add(o.key);{let c=e1(),r=e.Fa.get(t);if(!r)return c;for(let n of r){let a=e.va.get(n);c=c.unionWith(a.view.Ra)}return c}}function Fh(s){let t=W(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lm.bind(null,t),t.Ca.E_=Xp.bind(null,t.eventManager),t.Ca.Ka=tm.bind(null,t.eventManager),t}function wm(s){let t=W(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=am.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=im.bind(null,t),t}var Ks=class{constructor(){this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=r3(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return bp(this.persistence,new Qr,t.initialUser,this.serializer)}createPersistence(t){return new qr($r.Yr,this.serializer)}createSharedClientState(t){return new Xr}terminate(){return S(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var zn=class{initialize(t,e){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>qi(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=vm.bind(null,this.syncEngine),yield Qp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new vn}()}createDatastore(t){let e=r3(t.databaseInfo.databaseId),o=function(r){return new sn(r)}(t.databaseInfo);return function(r,n,a,h){return new rn(r,n,a,h)}(t.authCredentials,t.appCheckCredentials,o,e)}createRemoteStore(t){return function(o,c,r,n,a){return new ln(o,c,r,n,a)}(this.localStore,this.datastore,t.asyncQueue,e=>qi(this.syncEngine,e,0),function(){return Fs.D()?new Fs:new tn}())}createSyncEngine(t,e){return function(c,r,n,a,h,v,w){let u=new mn(c,r,n,a,h,v);return w&&(u.qa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return S(this,null,function*(){var t,e;yield function(c){return S(this,null,function*(){let r=W(c);P("RemoteStore","RemoteStore shutting down."),r.N_.add(5),yield D4(r),r.B_.shutdown(),r.k_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};var xn=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Wa(this.observer.next,t)}error(t){this.observer.error?this.Wa(this.observer.error,t):a0("Uncaught Error in snapshot listener:",t.toString())}Ga(){this.muted=!0}Wa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var Mn=class{constructor(t,e,o,c){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=o,this.databaseInfo=c,this.user=O1.UNAUTHENTICATED,this.clientId=_s.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,r=>S(this,null,function*(){P("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(o,r=>(P("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new N2;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let o=Zn(e,"Failed to shutdown persistence");t.reject(o)}})),t.promise}};function Kc(s,t){return S(this,null,function*(){s.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let e=s.configuration;yield t.initialize(e);let o=e.initialUser;s.setCredentialChangeListener(c=>S(this,null,function*(){o.isEqual(c)||(yield _h(t.localStore,c),o=c)})),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t})}function $i(s,t){return S(this,null,function*(){s.asyncQueue.verifyOperationInProgress();let e=yield um(s);P("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,s.configuration),s.setCredentialChangeListener(o=>ji(t.remoteStore,o)),s.setAppCheckTokenChangeListener((o,c)=>ji(t.remoteStore,c)),s._onlineComponents=t})}function dm(s){return s.name==="FirebaseError"?s.code===b.FAILED_PRECONDITION||s.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}function um(s){return S(this,null,function*(){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kc(s,s._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!dm(e))throw e;O5("Error using user provided cache. Falling back to memory cache: "+e),yield Kc(s,new Ks)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield Kc(s,new Ks);return s._offlineComponents})}function jh(s){return S(this,null,function*(){return s._onlineComponents||(s._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield $i(s,s._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield $i(s,new zn))),s._onlineComponents})}function pm(s){return jh(s).then(t=>t.syncEngine)}function mm(s){return S(this,null,function*(){let t=yield jh(s),e=t.eventManager;return e.onListen=em.bind(null,t.syncEngine),e.onUnlisten=cm.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=sm.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=rm.bind(null,t.syncEngine),e})}function fm(s,t,e={}){let o=new N2;return s.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(r,n,a,h,v){let w=new xn({next:z=>{n.enqueueAndForget(()=>Jp(r,u)),z.fromCache&&h.source==="server"?v.reject(new N(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(z)},error:z=>v.reject(z)}),u=new wn(a,w,{includeMetadataChanges:!0,oa:!0});return Yp(r,u)}(yield mm(s),s.asyncQueue,t,e,o)})),o.promise}function Zh(s){let t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}var Wi=new Map;function Uh(s,t,e){if(!e)throw new N(b.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function zm(s,t,e,o){if(t===!0&&o===!0)throw new N(b.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function Ki(s){if(!j.isDocumentKey(s))throw new N(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Qi(s){if(j.isDocumentKey(s))throw new N(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Gn(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{let t=function(o){return o.constructor?o.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":G()}function t5(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new N(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Gn(s);throw new N(b.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}var Qs=class{constructor(t){var e,o;if(t.host===void 0){if(t.ssl!==void 0)throw new N(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new N(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zh((o=t.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new N(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new N(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new N(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(o,c){return o.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Y5=class{constructor(t,e,o,c){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qs({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new N(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new N(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qs(t),t.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new Qc;switch(o.type){case"firstParty":return new tr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new N(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let o=Wi.get(e);o&&(P("ComponentProvider","Removing Datastore"),Wi.delete(e),o.terminate())}(this),Promise.resolve()}};function xm(s,t,e,o={}){var c;let r=(s=t5(s,Y5))._getSettings(),n=`${t}:${e}`;if(r.host!=="firestore.googleapis.com"&&r.host!==n&&O5("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},r),{host:n,ssl:!1})),o.mockUserToken){let a,h;if(typeof o.mockUserToken=="string")a=o.mockUserToken,h=O1.MOCK_USER;else{a=Xa(o.mockUserToken,(c=s._app)===null||c===void 0?void 0:c.options.projectId);let v=o.mockUserToken.sub||o.mockUserToken.user_id;if(!v)throw new N(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new O1(v)}s._authCredentials=new Yc(new Bs(a,h))}}var Ys=class s{constructor(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new s(this.firestore,t,this._query)}},M2=class s{constructor(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new B0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new s(this.firestore,t,this._key)}},B0=class s extends Ys{constructor(t,e,o){super(t,e,nh(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new M2(this.firestore,null,new j(t))}withConverter(t){return new s(this.firestore,t,this._path)}};function $n(s,t,...e){if(s=c0(s),Uh("collection","path",t),s instanceof Y5){let o=y1.fromString(t,...e);return Qi(o),new B0(s,null,o)}{if(!(s instanceof M2||s instanceof B0))throw new N(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=s._path.child(y1.fromString(t,...e));return Qi(o),new B0(s.firestore,null,o)}}function O4(s,t,...e){if(s=c0(s),arguments.length===1&&(t=_s.newId()),Uh("doc","path",t),s instanceof Y5){let o=y1.fromString(t,...e);return Ki(o),new M2(s,null,new j(o))}{if(!(s instanceof M2||s instanceof B0))throw new N(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=s._path.child(y1.fromString(t,...e));return Ki(o),new M2(s.firestore,s instanceof B0?s.converter:null,new j(o))}}var Cn=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new js(this,"async_queue_retry"),this.Tu=()=>{let e=Wc();e&&P("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};let t=Wc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;let e=Wc();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise(()=>{});let e=new N2;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.au.push(t),this.Au()))}Au(){return S(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!I4(t))throw t;P("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(t){let e=this._u.then(()=>(this.hu=!0,t().catch(o=>{this.lu=o,this.hu=!1;let c=function(n){let a=n.message||"";return n.stack&&(a=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),a}(o);throw a0("INTERNAL UNHANDLED ERROR: ",c),o}).then(o=>(this.hu=!1,o))));return this._u=e,e}enqueueAfterDelay(t,e,o){this.Eu(),this.Iu.indexOf(t)>-1&&(e=0);let c=an.createAndSchedule(this,t,e,o,r=>this.Ru(r));return this.cu.push(c),c}Eu(){this.lu&&G()}verifyOperationInProgress(){}Vu(){return S(this,null,function*(){let t;do t=this._u,yield t;while(t!==this._u)})}mu(t){for(let e of this.cu)if(e.timerId===t)return!0;return!1}fu(t){return this.Vu().then(()=>{this.cu.sort((e,o)=>e.targetTimeMs-o.targetTimeMs);for(let e of this.cu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Vu()})}gu(t){this.Iu.push(t)}Ru(t){let e=this.cu.indexOf(t);this.cu.splice(e,1)}};var e5=class extends Y5{constructor(t,e,o,c){super(t,e,o,c),this.type="firestore",this._queue=function(){return new Cn}(),this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$h(this),this._firestoreClient.terminate()}};function qh(s,t){let e=typeof s=="object"?s:mi(),o=typeof s=="string"?s:t||"(default)",c=ui(e,"firestore").getImmediate({identifier:o});if(!c._initialized){let r=Ja("firestore");r&&xm(c,...r)}return c}function Gh(s){return s._firestoreClient||$h(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function $h(s){var t,e,o;let c=s._freezeSettings(),r=function(a,h,v,w){return new rr(a,h,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Zh(w.experimentalLongPollingOptions),w.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,c);s._firestoreClient=new Mn(s._authCredentials,s._appCheckCredentials,s._queue,r),!((e=c.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((o=c.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}var b4=class s{constructor(t){this._byteString=t}static fromBase64String(t){try{return new s(e2.fromBase64String(t))}catch(e){throw new N(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new s(e2.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var J5=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new N(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new d2(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var k4=class{constructor(t){this._methodName=t}};var E4=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new N(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new N(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return v1(this._lat,t._lat)||v1(this._long,t._long)}};var Mm=/^__.*__$/,Vn=class{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return this.fieldMask!==null?new G2(t,this.data,this.fieldMask,e,this.fieldTransforms):new X0(t,this.data,e,this.fieldTransforms)}},Js=class{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return new G2(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function Wh(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Hn=class s{constructor(t,e,o,c,r,n){this.settings=t,this.databaseId=e,this.serializer=o,this.ignoreUndefinedProperties=c,r===void 0&&this.pu(),this.fieldTransforms=r||[],this.fieldMask=n||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(t){return new s(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(t){var e;let o=(e=this.path)===null||e===void 0?void 0:e.child(t),c=this.wu({path:o,bu:!1});return c.Du(t),c}Cu(t){var e;let o=(e=this.path)===null||e===void 0?void 0:e.child(t),c=this.wu({path:o,bu:!1});return c.pu(),c}vu(t){return this.wu({path:void 0,bu:!0})}Fu(t){return t3(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Du(this.path.get(t))}Du(t){if(t.length===0)throw this.Fu("Document fields must not be empty");if(Wh(this.yu)&&Mm.test(t))throw this.Fu('Document fields cannot begin and end with "__"')}},Ln=class{constructor(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=o||r3(t)}Ou(t,e,o,c=!1){return new Hn({yu:t,methodName:e,xu:o,path:d2.emptyPath(),bu:!1,Mu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Kh(s){let t=s._freezeSettings(),e=r3(s._databaseId);return new Ln(s._databaseId,!!t.ignoreUndefinedProperties,e)}function Cm(s,t,e,o,c,r={}){let n=s.Ou(r.merge||r.mergeFields?2:0,t,e,c);Wn("Data must be an object, but it was:",n,o);let a=Qh(o,n),h,v;if(r.merge)h=new x2(n.fieldMask),v=n.fieldTransforms;else if(r.mergeFields){let w=[];for(let u of r.mergeFields){let z=yn(t,u,e);if(!n.contains(z))throw new N(b.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);Jh(w,z)||w.push(z)}h=new x2(w),v=n.fieldTransforms.filter(u=>h.covers(u.field))}else h=null,v=n.fieldTransforms;return new Vn(new w2(a),h,v)}var Xs=class s extends k4{_toFieldTransform(t){if(t.yu!==2)throw t.yu===1?t.Fu(`${this._methodName}() can only appear at the top level of your update data`):t.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof s}};function Vm(s,t,e,o){let c=s.Ou(1,t,e);Wn("Data must be an object, but it was:",c,o);let r=[],n=w2.empty();s5(o,(h,v)=>{let w=Kn(t,h,e);v=c0(v);let u=c.Cu(w);if(v instanceof Xs)r.push(w);else{let z=a3(v,u);z!=null&&(r.push(w),n.set(w,z))}});let a=new x2(r);return new Js(n,a,c.fieldTransforms)}function Hm(s,t,e,o,c,r){let n=s.Ou(1,t,e),a=[yn(t,o,e)],h=[c];if(r.length%2!=0)throw new N(b.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<r.length;z+=2)a.push(yn(t,r[z])),h.push(r[z+1]);let v=[],w=w2.empty();for(let z=a.length-1;z>=0;--z)if(!Jh(v,a[z])){let y=a[z],A=h[z];A=c0(A);let R=n.Cu(y);if(A instanceof Xs)v.push(y);else{let B=a3(A,R);B!=null&&(v.push(y),w.set(y,B))}}let u=new x2(v);return new Js(w,u,n.fieldTransforms)}function a3(s,t){if(Yh(s=c0(s)))return Wn("Unsupported field value:",t,s),Qh(s,t);if(s instanceof k4)return function(o,c){if(!Wh(c.yu))throw c.Fu(`${o._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Fu(`${o._methodName}() is not currently supported inside arrays`);let r=o._toFieldTransform(c);r&&c.fieldTransforms.push(r)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.bu&&t.yu!==4)throw t.Fu("Nested arrays are not supported");return function(o,c){let r=[],n=0;for(let a of o){let h=a3(a,c.vu(n));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),n++}return{arrayValue:{values:r}}}(s,t)}return function(o,c){if((o=c0(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return np(c.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){let r=q1.fromDate(o);return{timestampValue:Ps(c.serializer,r)}}if(o instanceof q1){let r=new q1(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ps(c.serializer,r)}}if(o instanceof E4)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof b4)return{bytesValue:Mh(c.serializer,o._byteString)};if(o instanceof M2){let r=c.databaseId,n=o.firestore._databaseId;if(!n.isEqual(r))throw c.Fu(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Pn(o.firestore._databaseId||c.databaseId,o._key.path)}}throw c.Fu(`Unsupported field value: ${Gn(o)}`)}(s,t)}function Qh(s,t){let e={};return Ji(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):s5(s,(o,c)=>{let r=a3(c,t.Su(o));r!=null&&(e[o]=r)}),{mapValue:{fields:e}}}function Yh(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof q1||s instanceof E4||s instanceof b4||s instanceof M2||s instanceof k4)}function Wn(s,t,e){if(!Yh(e)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(e)){let o=Gn(e);throw o==="an object"?t.Fu(s+" a custom object"):t.Fu(s+" "+o)}}function yn(s,t,e){if((t=c0(t))instanceof J5)return t._internalPath;if(typeof t=="string")return Kn(s,t);throw t3("Field path arguments must be of type string or ",s,!1,void 0,e)}var Lm=new RegExp("[~\\*/\\[\\]]");function Kn(s,t,e){if(t.search(Lm)>=0)throw t3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new J5(...t.split("."))._internalPath}catch{throw t3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function t3(s,t,e,o,c){let r=o&&!o.isEmpty(),n=c!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let h="";return(r||n)&&(h+=" (found",r&&(h+=` in field ${o}`),n&&(h+=` in document ${c}`),h+=")"),new N(b.INVALID_ARGUMENT,a+s+h)}function Jh(s,t){return s.some(e=>e.isEqual(t))}var e3=class{constructor(t,e,o,c,r){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=c,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new M2(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Bn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(Xh("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Bn=class extends e3{data(){return super.data()}};function Xh(s,t){return typeof t=="string"?Kn(s,t):t instanceof J5?t._internalPath:t._delegate._internalPath}function ym(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new N(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _n=class{convertValue(t,e="none"){switch(Q0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return L1(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(_0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw G()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let o={};return s5(t,(c,r)=>{o[c]=this.convertValue(r,e)}),o}convertGeoPoint(t){return new E4(L1(t.latitude),L1(t.longitude))}convertArray(t,e){return(t.values||[]).map(o=>this.convertValue(o,e))}convertServerTimestamp(t,e){switch(e){case"previous":let o=En(t);return o==null?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(L4(t));default:return null}}convertTimestamp(t){let e=i0(t);return new q1(e.seconds,e.nanos)}convertDocumentKey(t,e){let o=y1.fromString(t);f1(Bh(o));let c=new bs(o.get(1),o.get(3)),r=new j(o.popFirst(5));return c.isEqual(e)||a0(`Document ${r} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}};function Bm(s,t,e){let o;return o=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,o}var I5=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},An=class extends e3{constructor(t,e,o,c,r,n){super(t,e,o,c,n),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new P5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let o=this._document.data.field(Xh("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,e.serverTimestamps)}}},P5=class extends An{data(t={}){return super.data(t)}},Sn=class{constructor(t,e,o,c){this._firestore=t,this._userDataWriter=e,this._snapshot=c,this.metadata=new I5(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(o=>{t.call(e,new P5(this._firestore,this._userDataWriter,o.key,o,new I5(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new N(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(c,r){if(c._snapshot.oldDocs.isEmpty()){let n=0;return c._snapshot.docChanges.map(a=>{let h=new P5(c._firestore,c._userDataWriter,a.doc.key,a.doc,new I5(c._snapshot.mutatedKeys.has(a.doc.key),c._snapshot.fromCache),c.query.converter);return a.doc,{type:"added",doc:h,oldIndex:-1,newIndex:n++}})}{let n=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{let h=new P5(c._firestore,c._userDataWriter,a.doc.key,a.doc,new I5(c._snapshot.mutatedKeys.has(a.doc.key),c._snapshot.fromCache),c.query.converter),v=-1,w=-1;return a.type!==0&&(v=n.indexOf(a.doc.key),n=n.delete(a.doc.key)),a.type!==1&&(n=n.add(a.doc),w=n.indexOf(a.doc.key)),{type:_m(a.type),doc:h,oldIndex:v,newIndex:w}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function _m(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}var Rn=class extends _n{constructor(t){super(),this.firestore=t}convertBytes(t){return new b4(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new M2(this.firestore,null,e)}};function t6(s){s=t5(s,Ys);let t=t5(s.firestore,e5),e=Gh(t),o=new Rn(t);return ym(s._query),fm(e,s._query).then(c=>new Sn(t,o,s,c))}function Qn(s,t,e,...o){s=t5(s,M2);let c=t5(s.firestore,e5),r=Kh(c),n;return n=typeof(t=c0(t))=="string"||t instanceof J5?Hm(r,"updateDoc",s._key,t,e,o):Vm(r,"updateDoc",s._key,t),Jn(c,[n.toMutation(s._key,l0.exists(!0))])}function e6(s){return Jn(t5(s.firestore,e5),[new B4(s._key,l0.none())])}function Yn(s,t){let e=t5(s.firestore,e5),o=O4(s),c=Bm(s.converter,t);return Jn(e,[Cm(Kh(s.firestore),"addDoc",o._key,c,s.converter!==null,{}).toMutation(o._key,l0.exists(!1))]).then(()=>o)}function Jn(s,t){return function(o,c){let r=new N2;return o.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return nm(yield pm(o),c,r)})),r.promise}(Gh(s),t)}(function(t,e=!0){(function(c){X5=c})(pi),u4(new r0("firestore",(o,{instanceIdentifier:c,options:r})=>{let n=o.getProvider("app").getImmediate(),a=new e5(new Jc(o.getProvider("auth-internal")),new sr(o.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new N(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bs(v.options.projectId,w)}(n,c),n);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),L0(Ci,"4.6.5",t),L0(Ci,"4.6.5","esm2017")})();var Am="firebase",Sm="10.12.5";L0(Am,Sm,"app");var s6={production:!0,firebaseConfig:{apiKey:"AIzaSyBZrN9H_D5R4cjpxckizldO0t9sJtB47DA",authDomain:"keepynotes-1d3e0.firebaseapp.com",projectId:"keepynotes-1d3e0",storageBucket:"keepynotes-1d3e0",messagingSenderId:"keepynotes-1d3e0.appspot.com",appId:"1:349075250932:web:158e05b11c8c46a63048a1",measurementId:"G-SC61C50XES"}};var Rm=Pc(s6.firebaseConfig),N4=qh(Rm),R0={addNote:bm,loadNotes:km,removeNote:Em,updateNote:Tm,addNoteWithAutoId:Im,updateNoteId:Dm},Xn="notes";var o6=$n(N4,Xn);function bm(s){return S(this,null,function*(){try{return(yield Yn(o6,s)).id}catch(t){console.error("Error adding note: ",t)}})}function km(){return S(this,null,function*(){try{let t=(yield t6(o6)).docs.map(e=>l1(k({},e.data()),{_id:e.id}));return console.log("adjustedNotes",t),t.sort((e,o)=>o.timestamp-e.timestamp)}catch(s){return console.error("Error loading notes: ",s),[]}})}function Em(s){return S(this,null,function*(){try{let t=O4(N4,Xn,s);yield e6(t)}catch(t){console.error("Error removing note: ",t)}})}function Tm(s,t){return S(this,null,function*(){try{let e=O4(N4,Xn,s);yield Qn(e,t)}catch(e){console.error("Error updating note: ",e)}})}function Im(s){let t=$n(N4,"notes");return Yn(t,s)}function Dm(s,t){let e=O4(N4,"notes",s);return Qn(e,{_id:e.id})}function F4(s,t){return function(){return s.apply(t,arguments)}}var{toString:Pm}=Object.prototype,{getPrototypeOf:sl}=Object,h3=(s=>t=>{let e=Pm.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),S2=s=>(s=s.toLowerCase(),t=>h3(t)===s),v3=s=>t=>typeof t===s,{isArray:et}=Array,j4=v3("undefined");function Om(s){return s!==null&&!j4(s)&&s.constructor!==null&&!j4(s.constructor)&&u2(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}var n6=S2("ArrayBuffer");function Nm(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&n6(s.buffer),t}var Fm=v3("string"),u2=v3("function"),l6=v3("number"),g3=s=>s!==null&&typeof s=="object",jm=s=>s===!0||s===!1,i3=s=>{if(h3(s)!=="object")return!1;let t=sl(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Zm=S2("Date"),Um=S2("File"),qm=S2("Blob"),Gm=S2("FileList"),$m=s=>g3(s)&&u2(s.pipe),Wm=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||u2(s.append)&&((t=h3(s))==="formdata"||t==="object"&&u2(s.toString)&&s.toString()==="[object FormData]"))},Km=S2("URLSearchParams"),[Qm,Ym,Jm,Xm]=["ReadableStream","Request","Response","Headers"].map(S2),tf=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Z4(s,t,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let o,c;if(typeof s!="object"&&(s=[s]),et(s))for(o=0,c=s.length;o<c;o++)t.call(null,s[o],o,s);else{let r=e?Object.getOwnPropertyNames(s):Object.keys(s),n=r.length,a;for(o=0;o<n;o++)a=r[o],t.call(null,s[a],a,s)}}function a6(s,t){t=t.toLowerCase();let e=Object.keys(s),o=e.length,c;for(;o-- >0;)if(c=e[o],t===c.toLowerCase())return c;return null}var c5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,i6=s=>!j4(s)&&s!==c5;function el(){let{caseless:s}=i6(this)&&this||{},t={},e=(o,c)=>{let r=s&&a6(t,c)||c;i3(t[r])&&i3(o)?t[r]=el(t[r],o):i3(o)?t[r]=el({},o):et(o)?t[r]=o.slice():t[r]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&Z4(arguments[o],e);return t}var ef=(s,t,e,{allOwnKeys:o}={})=>(Z4(t,(c,r)=>{e&&u2(c)?s[r]=F4(c,e):s[r]=c},{allOwnKeys:o}),s),sf=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),of=(s,t,e,o)=>{s.prototype=Object.create(t.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),e&&Object.assign(s.prototype,e)},cf=(s,t,e,o)=>{let c,r,n,a={};if(t=t||{},s==null)return t;do{for(c=Object.getOwnPropertyNames(s),r=c.length;r-- >0;)n=c[r],(!o||o(n,s,t))&&!a[n]&&(t[n]=s[n],a[n]=!0);s=e!==!1&&sl(s)}while(s&&(!e||e(s,t))&&s!==Object.prototype);return t},rf=(s,t,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=t.length;let o=s.indexOf(t,e);return o!==-1&&o===e},nf=s=>{if(!s)return null;if(et(s))return s;let t=s.length;if(!l6(t))return null;let e=new Array(t);for(;t-- >0;)e[t]=s[t];return e},lf=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&sl(Uint8Array)),af=(s,t)=>{let o=(s&&s[Symbol.iterator]).call(s),c;for(;(c=o.next())&&!c.done;){let r=c.value;t.call(s,r[0],r[1])}},hf=(s,t)=>{let e,o=[];for(;(e=s.exec(t))!==null;)o.push(e);return o},vf=S2("HTMLFormElement"),gf=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,o,c){return o.toUpperCase()+c}),c6=(({hasOwnProperty:s})=>(t,e)=>s.call(t,e))(Object.prototype),wf=S2("RegExp"),h6=(s,t)=>{let e=Object.getOwnPropertyDescriptors(s),o={};Z4(e,(c,r)=>{let n;(n=t(c,r,s))!==!1&&(o[r]=n||c)}),Object.defineProperties(s,o)},df=s=>{h6(s,(t,e)=>{if(u2(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;let o=s[e];if(u2(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},uf=(s,t)=>{let e={},o=c=>{c.forEach(r=>{e[r]=!0})};return et(s)?o(s):o(String(s).split(t)),e},pf=()=>{},mf=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t,tl="abcdefghijklmnopqrstuvwxyz",r6="0123456789",v6={DIGIT:r6,ALPHA:tl,ALPHA_DIGIT:tl+tl.toUpperCase()+r6},ff=(s=16,t=v6.ALPHA_DIGIT)=>{let e="",{length:o}=t;for(;s--;)e+=t[Math.random()*o|0];return e};function zf(s){return!!(s&&u2(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}var xf=s=>{let t=new Array(10),e=(o,c)=>{if(g3(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[c]=o;let r=et(o)?[]:{};return Z4(o,(n,a)=>{let h=e(n,c+1);!j4(h)&&(r[a]=h)}),t[c]=void 0,r}}return o};return e(s,0)},Mf=S2("AsyncFunction"),Cf=s=>s&&(g3(s)||u2(s))&&u2(s.then)&&u2(s.catch),g6=((s,t)=>s?setImmediate:t?((e,o)=>(c5.addEventListener("message",({source:c,data:r})=>{c===c5&&r===e&&o.length&&o.shift()()},!1),c=>{o.push(c),c5.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",u2(c5.postMessage)),Vf=typeof queueMicrotask<"u"?queueMicrotask.bind(c5):typeof process<"u"&&process.nextTick||g6,L={isArray:et,isArrayBuffer:n6,isBuffer:Om,isFormData:Wm,isArrayBufferView:Nm,isString:Fm,isNumber:l6,isBoolean:jm,isObject:g3,isPlainObject:i3,isReadableStream:Qm,isRequest:Ym,isResponse:Jm,isHeaders:Xm,isUndefined:j4,isDate:Zm,isFile:Um,isBlob:qm,isRegExp:wf,isFunction:u2,isStream:$m,isURLSearchParams:Km,isTypedArray:lf,isFileList:Gm,forEach:Z4,merge:el,extend:ef,trim:tf,stripBOM:sf,inherits:of,toFlatObject:cf,kindOf:h3,kindOfTest:S2,endsWith:rf,toArray:nf,forEachEntry:af,matchAll:hf,isHTMLForm:vf,hasOwnProperty:c6,hasOwnProp:c6,reduceDescriptors:h6,freezeMethods:df,toObjectSet:uf,toCamelCase:gf,noop:pf,toFiniteNumber:mf,findKey:a6,global:c5,isContextDefined:i6,ALPHABET:v6,generateString:ff,isSpecCompliantForm:zf,toJSONObject:xf,isAsyncFn:Mf,isThenable:Cf,setImmediate:g6,asap:Vf};function st(s,t,e,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),o&&(this.request=o),c&&(this.response=c)}L.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var w6=st.prototype,d6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{d6[s]={value:s}});Object.defineProperties(st,d6);Object.defineProperty(w6,"isAxiosError",{value:!0});st.from=(s,t,e,o,c,r)=>{let n=Object.create(w6);return L.toFlatObject(s,n,function(h){return h!==Error.prototype},a=>a!=="isAxiosError"),st.call(n,s.message,t,e,o,c),n.cause=s,n.name=s.name,r&&Object.assign(n,r),n};var $=st;var w3=null;function ol(s){return L.isPlainObject(s)||L.isArray(s)}function p6(s){return L.endsWith(s,"[]")?s.slice(0,-2):s}function u6(s,t,e){return s?s.concat(t).map(function(c,r){return c=p6(c),!e&&r?"["+c+"]":c}).join(e?".":""):t}function Hf(s){return L.isArray(s)&&!s.some(ol)}var Lf=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function yf(s,t,e){if(!L.isObject(s))throw new TypeError("target must be an object");t=t||new(w3||FormData),e=L.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,B){return!L.isUndefined(B[R])});let o=e.metaTokens,c=e.visitor||w,r=e.dots,n=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(c))throw new TypeError("visitor must be a function");function v(A){if(A===null)return"";if(L.isDate(A))return A.toISOString();if(!h&&L.isBlob(A))throw new $("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(A)||L.isTypedArray(A)?h&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function w(A,R,B){let O=A;if(A&&!B&&typeof A=="object"){if(L.endsWith(R,"{}"))R=o?R:R.slice(0,-2),A=JSON.stringify(A);else if(L.isArray(A)&&Hf(A)||(L.isFileList(A)||L.endsWith(R,"[]"))&&(O=L.toArray(A)))return R=p6(R),O.forEach(function(D,o1){!(L.isUndefined(D)||D===null)&&t.append(n===!0?u6([R],o1,r):n===null?R:R+"[]",v(D))}),!1}return ol(A)?!0:(t.append(u6(B,R,r),v(A)),!1)}let u=[],z=Object.assign(Lf,{defaultVisitor:w,convertValue:v,isVisitable:ol});function y(A,R){if(!L.isUndefined(A)){if(u.indexOf(A)!==-1)throw Error("Circular reference detected in "+R.join("."));u.push(A),L.forEach(A,function(O,F){(!(L.isUndefined(O)||O===null)&&c.call(t,O,L.isString(F)?F.trim():F,R,z))===!0&&y(O,R?R.concat(F):[F])}),u.pop()}}if(!L.isObject(s))throw new TypeError("data must be an object");return y(s),t}var b0=yf;function m6(s){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function f6(s,t){this._pairs=[],s&&b0(s,this,t)}var z6=f6.prototype;z6.append=function(t,e){this._pairs.push([t,e])};z6.toString=function(t){let e=t?function(o){return t.call(this,o,m6)}:m6;return this._pairs.map(function(c){return e(c[0])+"="+e(c[1])},"").join("&")};var d3=f6;function Bf(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function U4(s,t,e){if(!t)return s;let o=e&&e.encode||Bf,c=e&&e.serialize,r;if(c?r=c(t,e):r=L.isURLSearchParams(t)?t.toString():new d3(t,e).toString(o),r){let n=s.indexOf("#");n!==-1&&(s=s.slice(0,n)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}var cl=class{constructor(){this.handlers=[]}use(t,e,o){return this.handlers.push({fulfilled:t,rejected:e,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(o){o!==null&&t(o)})}},rl=cl;var u3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var x6=typeof URLSearchParams<"u"?URLSearchParams:d3;var M6=typeof FormData<"u"?FormData:null;var C6=typeof Blob<"u"?Blob:null;var V6={isBrowser:!0,classes:{URLSearchParams:x6,FormData:M6,Blob:C6},protocols:["http","https","file","blob","url","data"]};var ll={};Rv(ll,{hasBrowserEnv:()=>nl,hasStandardBrowserEnv:()=>_f,hasStandardBrowserWebWorkerEnv:()=>Af,origin:()=>Sf});var nl=typeof window<"u"&&typeof document<"u",_f=(s=>nl&&["ReactNative","NativeScript","NS"].indexOf(s)<0)(typeof navigator<"u"&&navigator.product),Af=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Sf=nl&&window.location.href||"http://localhost";var N1=k(k({},ll),V6);function al(s,t){return b0(s,new N1.classes.URLSearchParams,Object.assign({visitor:function(e,o,c,r){return N1.isNode&&L.isBuffer(e)?(this.append(o,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Rf(s){return L.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bf(s){let t={},e=Object.keys(s),o,c=e.length,r;for(o=0;o<c;o++)r=e[o],t[r]=s[r];return t}function kf(s){function t(e,o,c,r){let n=e[r++];if(n==="__proto__")return!0;let a=Number.isFinite(+n),h=r>=e.length;return n=!n&&L.isArray(c)?c.length:n,h?(L.hasOwnProp(c,n)?c[n]=[c[n],o]:c[n]=o,!a):((!c[n]||!L.isObject(c[n]))&&(c[n]=[]),t(e,o,c[n],r)&&L.isArray(c[n])&&(c[n]=bf(c[n])),!a)}if(L.isFormData(s)&&L.isFunction(s.entries)){let e={};return L.forEachEntry(s,(o,c)=>{t(Rf(o),c,e,0)}),e}return null}var p3=kf;function Ef(s,t,e){if(L.isString(s))try{return(t||JSON.parse)(s),L.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(e||JSON.stringify)(s)}var il={transitional:u3,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){let o=e.getContentType()||"",c=o.indexOf("application/json")>-1,r=L.isObject(t);if(r&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return c?JSON.stringify(p3(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t)||L.isReadableStream(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return al(t,this.formSerializer).toString();if((a=L.isFileList(t))||o.indexOf("multipart/form-data")>-1){let h=this.env&&this.env.FormData;return b0(a?{"files[]":t}:t,h&&new h,this.formSerializer)}}return r||c?(e.setContentType("application/json",!1),Ef(t)):t}],transformResponse:[function(t){let e=this.transitional||il.transitional,o=e&&e.forcedJSONParsing,c=this.responseType==="json";if(L.isResponse(t)||L.isReadableStream(t))return t;if(t&&L.isString(t)&&(o&&!this.responseType||c)){let n=!(e&&e.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(a){if(n)throw a.name==="SyntaxError"?$.from(a,$.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:N1.classes.FormData,Blob:N1.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],s=>{il.headers[s]={}});var ot=il;var Tf=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),H6=s=>{let t={},e,o,c;return s&&s.split(`
`).forEach(function(n){c=n.indexOf(":"),e=n.substring(0,c).trim().toLowerCase(),o=n.substring(c+1).trim(),!(!e||t[e]&&Tf[e])&&(e==="set-cookie"?t[e]?t[e].push(o):t[e]=[o]:t[e]=t[e]?t[e]+", "+o:o)}),t};var L6=Symbol("internals");function q4(s){return s&&String(s).trim().toLowerCase()}function m3(s){return s===!1||s==null?s:L.isArray(s)?s.map(m3):String(s)}function If(s){let t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,o;for(;o=e.exec(s);)t[o[1]]=o[2];return t}var Df=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function hl(s,t,e,o,c){if(L.isFunction(o))return o.call(this,t,e);if(c&&(t=e),!!L.isString(t)){if(L.isString(o))return t.indexOf(o)!==-1;if(L.isRegExp(o))return o.test(t)}}function Pf(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,o)=>e.toUpperCase()+o)}function Of(s,t){let e=L.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+e,{value:function(c,r,n){return this[o].call(this,t,c,r,n)},configurable:!0})})}var ct=class{constructor(t){t&&this.set(t)}set(t,e,o){let c=this;function r(a,h,v){let w=q4(h);if(!w)throw new Error("header name must be a non-empty string");let u=L.findKey(c,w);(!u||c[u]===void 0||v===!0||v===void 0&&c[u]!==!1)&&(c[u||h]=m3(a))}let n=(a,h)=>L.forEach(a,(v,w)=>r(v,w,h));if(L.isPlainObject(t)||t instanceof this.constructor)n(t,e);else if(L.isString(t)&&(t=t.trim())&&!Df(t))n(H6(t),e);else if(L.isHeaders(t))for(let[a,h]of t.entries())r(h,a,o);else t!=null&&r(e,t,o);return this}get(t,e){if(t=q4(t),t){let o=L.findKey(this,t);if(o){let c=this[o];if(!e)return c;if(e===!0)return If(c);if(L.isFunction(e))return e.call(this,c,o);if(L.isRegExp(e))return e.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=q4(t),t){let o=L.findKey(this,t);return!!(o&&this[o]!==void 0&&(!e||hl(this,this[o],o,e)))}return!1}delete(t,e){let o=this,c=!1;function r(n){if(n=q4(n),n){let a=L.findKey(o,n);a&&(!e||hl(o,o[a],a,e))&&(delete o[a],c=!0)}}return L.isArray(t)?t.forEach(r):r(t),c}clear(t){let e=Object.keys(this),o=e.length,c=!1;for(;o--;){let r=e[o];(!t||hl(this,this[r],r,t,!0))&&(delete this[r],c=!0)}return c}normalize(t){let e=this,o={};return L.forEach(this,(c,r)=>{let n=L.findKey(o,r);if(n){e[n]=m3(c),delete e[r];return}let a=t?Pf(r):String(r).trim();a!==r&&delete e[r],e[a]=m3(c),o[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let e=Object.create(null);return L.forEach(this,(o,c)=>{o!=null&&o!==!1&&(e[c]=t&&L.isArray(o)?o.join(", "):o)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){let o=new this(t);return e.forEach(c=>o.set(c)),o}static accessor(t){let o=(this[L6]=this[L6]={accessors:{}}).accessors,c=this.prototype;function r(n){let a=q4(n);o[a]||(Of(c,n),o[a]=!0)}return L.isArray(t)?t.forEach(r):r(t),this}};ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(ct.prototype,({value:s},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(o){this[e]=o}}});L.freezeMethods(ct);var T1=ct;function G4(s,t){let e=this||ot,o=t||e,c=T1.from(o.headers),r=o.data;return L.forEach(s,function(a){r=a.call(e,r,c.normalize(),t?t.status:void 0)}),c.normalize(),r}function $4(s){return!!(s&&s.__CANCEL__)}function y6(s,t,e){$.call(this,s??"canceled",$.ERR_CANCELED,t,e),this.name="CanceledError"}L.inherits(y6,$,{__CANCEL__:!0});var $2=y6;function W4(s,t,e){let o=e.config.validateStatus;!e.status||!o||o(e.status)?s(e):t(new $("Request failed with status code "+e.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function vl(s){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function Nf(s,t){s=s||10;let e=new Array(s),o=new Array(s),c=0,r=0,n;return t=t!==void 0?t:1e3,function(h){let v=Date.now(),w=o[r];n||(n=v),e[c]=h,o[c]=v;let u=r,z=0;for(;u!==c;)z+=e[u++],u=u%s;if(c=(c+1)%s,c===r&&(r=(r+1)%s),v-n<t)return;let y=w&&v-w;return y?Math.round(z*1e3/y):void 0}}var B6=Nf;function Ff(s,t){let e=0,o=1e3/t,c,r,n=(v,w=Date.now())=>{e=w,c=null,r&&(clearTimeout(r),r=null),s.apply(null,v)};return[(...v)=>{let w=Date.now(),u=w-e;u>=o?n(v,w):(c=v,r||(r=setTimeout(()=>{r=null,n(c)},o-u)))},()=>c&&n(c)]}var _6=Ff;var rt=(s,t,e=3)=>{let o=0,c=B6(50,250);return _6(r=>{let n=r.loaded,a=r.lengthComputable?r.total:void 0,h=n-o,v=c(h),w=n<=a;o=n;let u={loaded:n,total:a,progress:a?n/a:void 0,bytes:h,rate:v||void 0,estimated:v&&a&&w?(a-n)/v:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};s(u)},e)},gl=(s,t)=>{let e=s!=null;return[o=>t[0]({lengthComputable:e,total:s,loaded:o}),t[1]]},wl=s=>(...t)=>L.asap(()=>s(...t));var A6=N1.hasStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),o;function c(r){let n=r;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return o=c(window.location.href),function(n){let a=L.isString(n)?c(n):n;return a.protocol===o.protocol&&a.host===o.host}}():function(){return function(){return!0}}();var S6=N1.hasStandardBrowserEnv?{write(s,t,e,o,c,r){let n=[s+"="+encodeURIComponent(t)];L.isNumber(e)&&n.push("expires="+new Date(e).toGMTString()),L.isString(o)&&n.push("path="+o),L.isString(c)&&n.push("domain="+c),r===!0&&n.push("secure"),document.cookie=n.join("; ")},read(s){let t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dl(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function ul(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function K4(s,t){return s&&!dl(t)?ul(s,t):t}var R6=s=>s instanceof T1?k({},s):s;function R2(s,t){t=t||{};let e={};function o(v,w,u){return L.isPlainObject(v)&&L.isPlainObject(w)?L.merge.call({caseless:u},v,w):L.isPlainObject(w)?L.merge({},w):L.isArray(w)?w.slice():w}function c(v,w,u){if(L.isUndefined(w)){if(!L.isUndefined(v))return o(void 0,v,u)}else return o(v,w,u)}function r(v,w){if(!L.isUndefined(w))return o(void 0,w)}function n(v,w){if(L.isUndefined(w)){if(!L.isUndefined(v))return o(void 0,v)}else return o(void 0,w)}function a(v,w,u){if(u in t)return o(v,w);if(u in s)return o(void 0,v)}let h={url:r,method:r,data:r,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:a,headers:(v,w)=>c(R6(v),R6(w),!0)};return L.forEach(Object.keys(Object.assign({},s,t)),function(w){let u=h[w]||c,z=u(s[w],t[w],w);L.isUndefined(z)&&u!==a||(e[w]=z)}),e}var f3=s=>{let t=R2({},s),{data:e,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:r,headers:n,auth:a}=t;t.headers=n=T1.from(n),t.url=U4(K4(t.baseURL,t.url),s.params,s.paramsSerializer),a&&n.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let h;if(L.isFormData(e)){if(N1.hasStandardBrowserEnv||N1.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((h=n.getContentType())!==!1){let[v,...w]=h?h.split(";").map(u=>u.trim()).filter(Boolean):[];n.setContentType([v||"multipart/form-data",...w].join("; "))}}if(N1.hasStandardBrowserEnv&&(o&&L.isFunction(o)&&(o=o(t)),o||o!==!1&&A6(t.url))){let v=c&&r&&S6.read(r);v&&n.set(c,v)}return t};var jf=typeof XMLHttpRequest<"u",b6=jf&&function(s){return new Promise(function(e,o){let c=f3(s),r=c.data,n=T1.from(c.headers).normalize(),{responseType:a,onUploadProgress:h,onDownloadProgress:v}=c,w,u,z,y,A;function R(){y&&y(),A&&A(),c.cancelToken&&c.cancelToken.unsubscribe(w),c.signal&&c.signal.removeEventListener("abort",w)}let B=new XMLHttpRequest;B.open(c.method.toUpperCase(),c.url,!0),B.timeout=c.timeout;function O(){if(!B)return;let D=T1.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),_1={data:!a||a==="text"||a==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:D,config:s,request:B};W4(function(M){e(M),R()},function(M){o(M),R()},_1),B=null}"onloadend"in B?B.onloadend=O:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(O)},B.onabort=function(){B&&(o(new $("Request aborted",$.ECONNABORTED,s,B)),B=null)},B.onerror=function(){o(new $("Network Error",$.ERR_NETWORK,s,B)),B=null},B.ontimeout=function(){let o1=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",_1=c.transitional||u3;c.timeoutErrorMessage&&(o1=c.timeoutErrorMessage),o(new $(o1,_1.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,s,B)),B=null},r===void 0&&n.setContentType(null),"setRequestHeader"in B&&L.forEach(n.toJSON(),function(o1,_1){B.setRequestHeader(_1,o1)}),L.isUndefined(c.withCredentials)||(B.withCredentials=!!c.withCredentials),a&&a!=="json"&&(B.responseType=c.responseType),v&&([z,A]=rt(v,!0),B.addEventListener("progress",z)),h&&B.upload&&([u,y]=rt(h),B.upload.addEventListener("progress",u),B.upload.addEventListener("loadend",y)),(c.cancelToken||c.signal)&&(w=D=>{B&&(o(!D||D.type?new $2(null,s,B):D),B.abort(),B=null)},c.cancelToken&&c.cancelToken.subscribe(w),c.signal&&(c.signal.aborted?w():c.signal.addEventListener("abort",w)));let F=vl(c.url);if(F&&N1.protocols.indexOf(F)===-1){o(new $("Unsupported protocol "+F+":",$.ERR_BAD_REQUEST,s));return}B.send(r||null)})};var Zf=(s,t)=>{let e=new AbortController,o,c=function(h){if(!o){o=!0,n();let v=h instanceof Error?h:this.reason;e.abort(v instanceof $?v:new $2(v instanceof Error?v.message:v))}},r=t&&setTimeout(()=>{c(new $(`timeout ${t} of ms exceeded`,$.ETIMEDOUT))},t),n=()=>{s&&(r&&clearTimeout(r),r=null,s.forEach(h=>{h&&(h.removeEventListener?h.removeEventListener("abort",c):h.unsubscribe(c))}),s=null)};s.forEach(h=>h&&h.addEventListener&&h.addEventListener("abort",c));let{signal:a}=e;return a.unsubscribe=n,[a,()=>{r&&clearTimeout(r),r=null}]},k6=Zf;var Uf=function*(s,t){let e=s.byteLength;if(!t||e<t){yield s;return}let o=0,c;for(;o<e;)c=o+t,yield s.slice(o,c),o=c},qf=function(s,t,e){return W7(this,null,function*(){try{for(var o=Q7(s),c,r,n;c=!(r=yield new Ce(o.next())).done;c=!1){let a=r.value;yield*K7(Uf(ArrayBuffer.isView(a)?a:yield new Ce(e(String(a))),t))}}catch{n=[r]}finally{try{c&&(r=o.return)&&(yield new Ce(r.call(o)))}finally{if(n)throw n[0]}}})},pl=(s,t,e,o,c)=>{let r=qf(s,t,c),n=0,a,h=w=>{a||(a=!0,o&&o(w))};return new ReadableStream({pull(w){return S(this,null,function*(){try{let{done:u,value:z}=yield r.next();if(u){h(),w.close();return}let y=z.byteLength;if(e){let A=n+=y;e(A)}w.enqueue(new Uint8Array(z))}catch(u){throw h(u),u}})},cancel(w){return h(w),r.return()}},{highWaterMark:2})};var x3=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",T6=x3&&typeof ReadableStream=="function",ml=x3&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):s=>S(void 0,null,function*(){return new Uint8Array(yield new Response(s).arrayBuffer())})),I6=(s,...t)=>{try{return!!s(...t)}catch{return!1}},Gf=T6&&I6(()=>{let s=!1,t=new Request(N1.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),E6=64*1024,fl=T6&&I6(()=>L.isReadableStream(new Response("").body)),z3={stream:fl&&(s=>s.body)};x3&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!z3[t]&&(z3[t]=L.isFunction(s[t])?e=>e[t]():(e,o)=>{throw new $(`Response type '${t}' is not supported`,$.ERR_NOT_SUPPORT,o)})})})(new Response);var $f=s=>S(void 0,null,function*(){if(s==null)return 0;if(L.isBlob(s))return s.size;if(L.isSpecCompliantForm(s))return(yield new Request(s).arrayBuffer()).byteLength;if(L.isArrayBufferView(s)||L.isArrayBuffer(s))return s.byteLength;if(L.isURLSearchParams(s)&&(s=s+""),L.isString(s))return(yield ml(s)).byteLength}),Wf=(s,t)=>S(void 0,null,function*(){let e=L.toFiniteNumber(s.getContentLength());return e??$f(t)}),D6=x3&&(s=>S(void 0,null,function*(){let{url:t,method:e,data:o,signal:c,cancelToken:r,timeout:n,onDownloadProgress:a,onUploadProgress:h,responseType:v,headers:w,withCredentials:u="same-origin",fetchOptions:z}=f3(s);v=v?(v+"").toLowerCase():"text";let[y,A]=c||r||n?k6([c,r],n):[],R,B,O=()=>{!R&&setTimeout(()=>{y&&y.unsubscribe()}),R=!0},F;try{if(h&&Gf&&e!=="get"&&e!=="head"&&(F=yield Wf(w,o))!==0){let t1=new Request(t,{method:"POST",body:o,duplex:"half"}),M;if(L.isFormData(o)&&(M=t1.headers.get("content-type"))&&w.setContentType(M),t1.body){let[p,m]=gl(F,rt(wl(h)));o=pl(t1.body,E6,p,m,ml)}}L.isString(u)||(u=u?"include":"omit"),B=new Request(t,l1(k({},z),{signal:y,method:e.toUpperCase(),headers:w.normalize().toJSON(),body:o,duplex:"half",credentials:u}));let D=yield fetch(B),o1=fl&&(v==="stream"||v==="response");if(fl&&(a||o1)){let t1={};["status","statusText","headers"].forEach(x=>{t1[x]=D[x]});let M=L.toFiniteNumber(D.headers.get("content-length")),[p,m]=a&&gl(M,rt(wl(a),!0))||[];D=new Response(pl(D.body,E6,p,()=>{m&&m(),o1&&O()},ml),t1)}v=v||"text";let _1=yield z3[L.findKey(z3,v)||"text"](D,s);return!o1&&O(),A&&A(),yield new Promise((t1,M)=>{W4(t1,M,{data:_1,headers:T1.from(D.headers),status:D.status,statusText:D.statusText,config:s,request:B})})}catch(D){throw O(),D&&D.name==="TypeError"&&/fetch/i.test(D.message)?Object.assign(new $("Network Error",$.ERR_NETWORK,s,B),{cause:D.cause||D}):$.from(D,D&&D.code,s,B)}}));var zl={http:w3,xhr:b6,fetch:D6};L.forEach(zl,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});var P6=s=>`- ${s}`,Kf=s=>L.isFunction(s)||s===null||s===!1,M3={getAdapter:s=>{s=L.isArray(s)?s:[s];let{length:t}=s,e,o,c={};for(let r=0;r<t;r++){e=s[r];let n;if(o=e,!Kf(e)&&(o=zl[(n=String(e)).toLowerCase()],o===void 0))throw new $(`Unknown adapter '${n}'`);if(o)break;c[n||"#"+r]=o}if(!o){let r=Object.entries(c).map(([a,h])=>`adapter ${a} `+(h===!1?"is not supported by the environment":"is not available in the build")),n=t?r.length>1?`since :
`+r.map(P6).join(`
`):" "+P6(r[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o},adapters:zl};function xl(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new $2(null,s)}function C3(s){return xl(s),s.headers=T1.from(s.headers),s.data=G4.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),M3.getAdapter(s.adapter||ot.adapter)(s).then(function(o){return xl(s),o.data=G4.call(s,s.transformResponse,o),o.headers=T1.from(o.headers),o},function(o){return $4(o)||(xl(s),o&&o.response&&(o.response.data=G4.call(s,s.transformResponse,o.response),o.response.headers=T1.from(o.response.headers))),Promise.reject(o)})}var V3="1.7.3";var Ml={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Ml[s]=function(o){return typeof o===s||"a"+(t<1?"n ":" ")+s}});var O6={};Ml.transitional=function(t,e,o){function c(r,n){return"[Axios v"+V3+"] Transitional option '"+r+"'"+n+(o?". "+o:"")}return(r,n,a)=>{if(t===!1)throw new $(c(n," has been removed"+(e?" in "+e:"")),$.ERR_DEPRECATED);return e&&!O6[n]&&(O6[n]=!0,console.warn(c(n," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,n,a):!0}};function Qf(s,t,e){if(typeof s!="object")throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);let o=Object.keys(s),c=o.length;for(;c-- >0;){let r=o[c],n=t[r];if(n){let a=s[r],h=a===void 0||n(a,r,s);if(h!==!0)throw new $("option "+r+" must be "+h,$.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new $("Unknown option "+r,$.ERR_BAD_OPTION)}}var H3={assertOptions:Qf,validators:Ml};var k0=H3.validators,nt=class{constructor(t){this.defaults=t,this.interceptors={request:new rl,response:new rl}}request(t,e){return S(this,null,function*(){try{return yield this._request(t,e)}catch(o){if(o instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;let r=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}})}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=R2(this.defaults,e);let{transitional:o,paramsSerializer:c,headers:r}=e;o!==void 0&&H3.assertOptions(o,{silentJSONParsing:k0.transitional(k0.boolean),forcedJSONParsing:k0.transitional(k0.boolean),clarifyTimeoutError:k0.transitional(k0.boolean)},!1),c!=null&&(L.isFunction(c)?e.paramsSerializer={serialize:c}:H3.assertOptions(c,{encode:k0.function,serialize:k0.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let n=r&&L.merge(r.common,r[e.method]);r&&L.forEach(["delete","get","head","post","put","patch","common"],A=>{delete r[A]}),e.headers=T1.concat(n,r);let a=[],h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(e)===!1||(h=h&&R.synchronous,a.unshift(R.fulfilled,R.rejected))});let v=[];this.interceptors.response.forEach(function(R){v.push(R.fulfilled,R.rejected)});let w,u=0,z;if(!h){let A=[C3.bind(this),void 0];for(A.unshift.apply(A,a),A.push.apply(A,v),z=A.length,w=Promise.resolve(e);u<z;)w=w.then(A[u++],A[u++]);return w}z=a.length;let y=e;for(u=0;u<z;){let A=a[u++],R=a[u++];try{y=A(y)}catch(B){R.call(this,B);break}}try{w=C3.call(this,y)}catch(A){return Promise.reject(A)}for(u=0,z=v.length;u<z;)w=w.then(v[u++],v[u++]);return w}getUri(t){t=R2(this.defaults,t);let e=K4(t.baseURL,t.url);return U4(e,t.params,t.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(t){nt.prototype[t]=function(e,o){return this.request(R2(o||{},{method:t,url:e,data:(o||{}).data}))}});L.forEach(["post","put","patch"],function(t){function e(o){return function(r,n,a){return this.request(R2(a||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}nt.prototype[t]=e(),nt.prototype[t+"Form"]=e(!0)});var Q4=nt;var Cl=class s{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});let o=this;this.promise.then(c=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](c);o._listeners=null}),this.promise.then=c=>{let r,n=new Promise(a=>{o.subscribe(a),r=a}).then(c);return n.cancel=function(){o.unsubscribe(r)},n},t(function(r,n,a){o.reason||(o.reason=new $2(r,n,a),e(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new s(function(c){t=c}),cancel:t}}},N6=Cl;function Vl(s){return function(e){return s.apply(null,e)}}function Hl(s){return L.isObject(s)&&s.isAxiosError===!0}var Ll={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ll).forEach(([s,t])=>{Ll[t]=s});var F6=Ll;function j6(s){let t=new Q4(s),e=F4(Q4.prototype.request,t);return L.extend(e,Q4.prototype,t,{allOwnKeys:!0}),L.extend(e,t,null,{allOwnKeys:!0}),e.create=function(c){return j6(R2(s,c))},e}var R1=j6(ot);R1.Axios=Q4;R1.CanceledError=$2;R1.CancelToken=N6;R1.isCancel=$4;R1.VERSION=V3;R1.toFormData=b0;R1.AxiosError=$;R1.Cancel=R1.CanceledError;R1.all=function(t){return Promise.all(t)};R1.spread=Vl;R1.isAxiosError=Hl;R1.mergeConfig=R2;R1.AxiosHeaders=T1;R1.formToJSON=s=>p3(L.isHTMLForm(s)?new FormData(s):s);R1.getAdapter=M3.getAdapter;R1.HttpStatusCode=F6;R1.default=R1;var L3=R1;var{Axios:UL,AxiosError:qL,CanceledError:GL,isCancel:$L,CancelToken:WL,VERSION:KL,all:QL,Cancel:YL,isAxiosError:JL,spread:XL,toFormData:ty,AxiosHeaders:ey,HttpStatusCode:sy,formToJSON:oy,getAdapter:cy,mergeConfig:ry}=L3;var Z6={fetchPhotoFromUnsplash:Jf},Yf="3yF4Mw1jz_x9aL142pO5a4nXm_a3xc6Nu_BYEEIxQNA";function Jf(s=1,t){return S(this,null,function*(){try{return(yield L3.get("https://api.unsplash.com/photos/random",{params:{query:t,per_page:s},headers:{Authorization:`Client-ID ${Yf}`}})).data.urls.regular}catch(e){return console.error("Error fetching photos:",e),[]}})}function lt(s,t){return s=Math.ceil(s),t=Math.floor(t),Math.floor(Math.random()*(t-s+1))+s}function y3(s="n-"){let t=lt(1e4,1e8);return`${s}${t}`}function U6(s){let t=["The cat","A dog","My friend","An artist","The teacher"],e=["jumps","runs","paints","writes","reads"],o=["a book","a picture","a letter","an email","a song"],c=["quickly","slowly","happily","sadly","eagerly"],r=[];for(let n=0;n<s;n++){let a=t[Math.floor(Math.random()*t.length)],h=e[Math.floor(Math.random()*e.length)],v=o[Math.floor(Math.random()*o.length)],w=c[Math.floor(Math.random()*c.length)];r.push(`${a} ${h} ${v} ${w}.`)}return r.join(" ")}var q6={getDemoNotes:Xf,getDemoNote:G6},yl=["white","pink","lightcoral","lightskyblue","lightsteelblue","lightseagreen"];var Bl=["linear-gradient(0deg, #D9AFD9 0%, #97D9E1 100%)","linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%)","linear-gradient(62deg, #FBAB7E 0%, #F7CE68 100%)","linear-gradient(45deg, #FBDA61 0%, #FF5ACD 100%)","linear-gradient(180deg, #A9C9FF 0%, #FFBBEC 100%)","linear-gradient(0deg, #08AEEA 0%, #2AF598 100%)"];function Xf(s=10){return S(this,null,function*(){let t=[];for(let e=0;e<s;e++)t.push(yield G6());return t})}function G6(){return S(this,null,function*(){let s=lt(0,5),t=["Meeting","Shopping","Project","Workout Plan","Recipe"],e=["txt","todo","img"],o=t[Math.floor(Math.random()*t.length)],c=Date.now()-lt(1e5,1e8),r=e[Math.floor(Math.random()*e.length)],n=W6(new Date(c)),a=s%2===0?yl[s]:Bl[s],h={_id:"",title:o,type:r,createdAt:n,color:a,timestamp:Date.now()};h=yield tz(h);let v=yield R0.addNoteWithAutoId(h);return h._id=v.id,yield R0.updateNoteId(v.id,h._id),h})}function tz(s){return S(this,null,function*(){switch(s.type){case"todo":s.todos=ez(lt(3,5));break;case"img":s.imgUrl=yield sz(s.title);break;case"txt":default:s.txt=U6(5);break}return s})}function ez(s){let t=["Buy groceries","Finish report","Call the bank","Schedule appointment","Clean the house","Prepare presentation","Read a book","Exercise","Plan the trip","Pay bills"],e=[];for(let o=0;o<s;o++){let c=t[Math.floor(Math.random()*t.length)],r={_id:y3("t-"),createdAt:new Date(Date.now()),content:c,isDone:!!lt(0,1)};e.push(r)}return e}function sz(s){return Z6.fetchPhotoFromUnsplash(1,s)}function $6(s="Title...",t="Description...",e="txt"){return{_id:"",title:s,txt:t,type:e,createdAt:W6(new Date),color:"#FFF",timestamp:new Date(Date.now())}}function W6(s){let t=s.getHours().toString().padStart(2,"0"),e=s.getMinutes().toString().padStart(2,"0"),o=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0");return`${t}:${e} ${o}/${c}`}var oz=s=>({show:s}),K6=s=>({background:s}),Q6=s=>({selected:s});function cz(s,t){if(s&1){let e=c2();Z(0,"div",2),i1("click",function(c){let r=Z1(e).$implicit,n=h1();return U1(n.handleSelectColor(c,r))}),U()}if(s&2){let e=t.$implicit,o=h1();Tt(f2(4,K6,e)),k2(f2(6,Q6,e===o.activeColor))}}function rz(s,t){if(s&1){let e=c2();Z(0,"div",2),i1("click",function(c){let r=Z1(e).$implicit,n=h1();return U1(n.handleSelectColor(c,r))}),U()}if(s&2){let e=t.$implicit,o=h1();Tt(f2(4,K6,e)),k2(f2(6,Q6,e===o.activeColor))}}var Y6=(()=>{class s{noteId;noteColor;selectedNote;isColorPickerOpen;selectedColor=new b1;activeColor=D2;colors=yl;gradients=Bl;ngOnInit(){this.activeColor=this.noteColor}handleSelectColor(e,o){e.stopPropagation(),e.preventDefault(),this.activeColor=o,this.selectedColor.emit({noteId:this.noteId,type:ps,data:o})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["color-picker"]],inputs:{noteId:"noteId",noteColor:"noteColor",selectedNote:"selectedNote",isColorPickerOpen:"isColorPickerOpen"},outputs:{selectedColor:"selectedColor"},standalone:!0,features:[d1],decls:5,vars:4,consts:[[1,"color-picker-container"],[1,"color-item",3,"style","class"],[1,"color-item",3,"click"]],template:function(o,c){o&1&&(Z(0,"article",0),a2(1,cz,1,8,"div",1,X2),a2(3,rz,1,8,"div",1,X2),U()),o&2&&(k2(f2(2,oz,c.isColorPickerOpen&&c.selectedNote._id===c.noteId)),K(),i2(c.colors),K(2),i2(c.gradients))},styles:[".color-picker-container[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:39px;display:grid;gap:4px;padding:5px 15px;border-radius:30px;grid-template-columns:repeat(6,1fr);pointer-events:none;opacity:0;box-shadow:#0000000d 0 0 0 1px}.color-picker-container.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1;background:#ffffff73}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px;border-radius:50%;width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{cursor:pointer}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(85%)}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%], .color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{outline:2px solid rgba(0,0,0,.452)}"]})}return s})();var J6=(()=>{class s{el;renderer;noteId;constructor(e,o){this.el=e,this.renderer=o}onMouseOver(){this.renderer.addClass(this.el.nativeElement,"hovered")}onMouseOut(){this.renderer.removeClass(this.el.nativeElement,"hovered")}static \u0275fac=function(o){return new(o||s)(w1(m2),w1(Te))};static \u0275dir=L2({type:s,selectors:[["","noteHover",""]],hostBindings:function(o,c){o&1&&i1("mouseover",function(){return c.onMouseOver()})("mouseout",function(){return c.onMouseOut()})},inputs:{noteId:[b2.None,"noteHover","noteId"]},standalone:!0})}return s})();var nz=new s1(""),lz=new s1("");function o8(s){return s!=null}function c8(s){return Oe(s)?Q1(s):s}function r8(s){let t={};return s.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function n8(s,t){return t.map(e=>e(s))}function az(s){return!s.validate}function l8(s){return s.map(t=>az(t)?t:e=>t.validate(e))}function iz(s){if(!s)return null;let t=s.filter(o8);return t.length==0?null:function(e){return r8(n8(e,t))}}function bl(s){return s!=null?iz(l8(s)):null}function hz(s){if(!s)return null;let t=s.filter(o8);return t.length==0?null:function(e){let o=n8(e,t).map(c8);return e9(o).pipe(a1(r8))}}function kl(s){return s!=null?hz(l8(s)):null}function X6(s,t){return s===null?[t]:Array.isArray(s)?[...s,t]:[s,t]}function vz(s){return s._rawValidators}function gz(s){return s._rawAsyncValidators}function _l(s){return s?Array.isArray(s)?s:[s]:[]}function _3(s,t){return Array.isArray(s)?s.includes(t):s===t}function t8(s,t){let e=_l(t);return _l(s).forEach(c=>{_3(e,c)||e.push(c)}),e}function e8(s,t){return _l(t).filter(e=>!_3(s,e))}var Al=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=bl(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},te=class extends Al{get formDirective(){return null}get path(){return null}};var Sl=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},wz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Py=l1(k({},wz),{"[class.ng-submitted]":"isSubmitted"});var S3=(()=>{let t=class t extends Sl{constructor(o){super(o)}};t.\u0275fac=function(c){return new(c||t)(w1(te,10))},t.\u0275dir=L2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(c,r){c&2&&m5("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[mo]});let s=t;return s})();var Y4="VALID",B3="INVALID",at="PENDING",J4="DISABLED";function dz(s){return(El(s)?s.validators:s)||null}function uz(s){return Array.isArray(s)?bl(s):s||null}function pz(s,t){return(El(t)?t.asyncValidators:s)||null}function mz(s){return Array.isArray(s)?kl(s):s||null}function El(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}function fz(s,t,e){let o=s.controls;if(!(t?Object.keys(o):o).length)throw new x1(1e3,"");if(!o[e])throw new x1(1001,"")}function zz(s,t,e){s._forEachChild((o,c)=>{if(e[c]===void 0)throw new x1(1002,"")})}var Rl=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Y4}get invalid(){return this.status===B3}get pending(){return this.status==at}get disabled(){return this.status===J4}get enabled(){return this.status!==J4}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(t8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(t8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(e8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(e8(t,this._rawAsyncValidators))}hasValidator(t){return _3(this._rawValidators,t)}hasAsyncValidator(t){return _3(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=at,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=J4,this.errors=null,this._forEachChild(o=>{o.disable(l1(k({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(l1(k({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Y4,this._forEachChild(o=>{o.enable(l1(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(l1(k({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Y4||this.status===at)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?J4:Y4}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=at,this._hasOwnPendingAsyncValidator=!0;let e=c8(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((o,c)=>o&&o._find(c),this)}getError(t,e){let o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new b1,this.statusChanges=new b1}_calculateStatus(){return this._allControlsDisabled()?J4:this.errors?B3:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(at)?at:this._anyControlsHaveStatus(B3)?B3:Y4}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){El(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=uz(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=mz(this._rawAsyncValidators)}},A3=class extends Rl{constructor(t,e,o){super(dz(e),pz(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){zz(this,!0,t),Object.keys(t).forEach(o=>{fz(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(o=>{let c=this.controls[o];c&&c.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,c)=>{o.reset(t?t[c]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>o._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,o,c)=>((o.enabled||this.disabled)&&(e[c]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((c,r)=>{o=e(o,c,r)}),o}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var a8=new s1("CallSetDisabledState",{providedIn:"root",factory:()=>Tl}),Tl="always";function xz(s,t,e=Tl){i8(s,t),t.valueAccessor.writeValue(s.value),(s.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(s.disabled),Cz(s,t),Hz(s,t),Vz(s,t),Mz(s,t)}function s8(s,t){s.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Mz(s,t){if(t.valueAccessor.setDisabledState){let e=o=>{t.valueAccessor.setDisabledState(o)};s.registerOnDisabledChange(e),t._registerOnDestroy(()=>{s._unregisterOnDisabledChange(e)})}}function i8(s,t){let e=vz(s);t.validator!==null?s.setValidators(X6(e,t.validator)):typeof e=="function"&&s.setValidators([e]);let o=gz(s);t.asyncValidator!==null?s.setAsyncValidators(X6(o,t.asyncValidator)):typeof o=="function"&&s.setAsyncValidators([o]);let c=()=>s.updateValueAndValidity();s8(t._rawValidators,c),s8(t._rawAsyncValidators,c)}function Cz(s,t){t.valueAccessor.registerOnChange(e=>{s._pendingValue=e,s._pendingChange=!0,s._pendingDirty=!0,s.updateOn==="change"&&h8(s,t)})}function Vz(s,t){t.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,s.updateOn==="blur"&&s._pendingChange&&h8(s,t),s.updateOn!=="submit"&&s.markAsTouched()})}function h8(s,t){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function Hz(s,t){let e=(o,c)=>{t.valueAccessor.writeValue(o),c&&t.viewToModelUpdate(o)};s.registerOnChange(e),t._registerOnDestroy(()=>{s._unregisterOnChange(e)})}function Lz(s,t){s==null,i8(s,t)}function yz(s,t){s._syncPendingControls(),t.forEach(e=>{let o=e.control;o.updateOn==="submit"&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}var Bz={provide:te,useExisting:n9(()=>ee)},X4=Promise.resolve(),ee=(()=>{let t=class t extends te{constructor(o,c,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new b1,this.form=new A3({},bl(o),kl(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(o){X4.then(()=>{let c=this._findContainer(o.path);o.control=c.registerControl(o.name,o.control),xz(o.control,o,this.callSetDisabledState),o.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(o)})}getControl(o){return this.form.get(o.path)}removeControl(o){X4.then(()=>{let c=this._findContainer(o.path);c&&c.removeControl(o.name),this._directives.delete(o)})}addFormGroup(o){X4.then(()=>{let c=this._findContainer(o.path),r=new A3({});Lz(r,o),c.registerControl(o.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(o){X4.then(()=>{let c=this._findContainer(o.path);c&&c.removeControl(o.name)})}getFormGroup(o){return this.form.get(o.path)}updateModel(o,c){X4.then(()=>{this.form.get(o.path).setValue(c)})}setValue(o){this.control.setValue(o)}onSubmit(o){return this.submitted=!0,yz(this.form,this._directives),this.ngSubmit.emit(o),o?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(o=void 0){this.form.reset(o),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(o){return o.pop(),o.length?this.form.get(o):this.form}};t.\u0275fac=function(c){return new(c||t)(w1(nz,10),w1(lz,10),w1(a8,8))},t.\u0275dir=L2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(c,r){c&1&&i1("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[b2.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E2([Bz]),mo]});let s=t;return s})();var R3=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=L2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let s=t;return s})();var _z=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=J1({type:t}),t.\u0275inj=Y1({});let s=t;return s})();var b3=(()=>{let t=class t{static withConfig(o){return{ngModule:t,providers:[{provide:a8,useValue:o.callSetDisabledState??Tl}]}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=J1({type:t}),t.\u0275inj=Y1({imports:[_z]});let s=t;return s})();var g8=(()=>{class s{title;description;isEditorActive;noteToAdd;addNote=new b1;ngOnInit(){this.title=D2,this.description=D2,this.isEditorActive=!1}setTitle(e){this.title=e.target.value}setDescription(e){this.description=e.target.value}resetEditor(){this.title=D2,this.description=D2}handleAddNote(e){if(e.preventDefault(),!this.title)throw new Error("Title is required!");let o=$6(this.title,this.description);this.addNote.emit({noteId:D2,type:us,data:o}),this.resetEditor()}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["add-note"]],outputs:{addNote:"addNote"},standalone:!0,features:[d1],decls:5,vars:2,consts:[[1,"add-note-container",3,"submit"],["type","text","placeholder","Title...",3,"input","value"],["placeholder","How are you today...",3,"input","value"]],template:function(o,c){o&1&&(Z(0,"form",0),i1("submit",function(n){return c.handleAddNote(n)}),Z(1,"input",1),i1("input",function(n){return c.setTitle(n)}),U(),Z(2,"textarea",2),i1("input",function(n){return c.setDescription(n)}),U(),Z(3,"button"),H1(4,"Keep"),U()()),o&2&&(K(),m1("value",c.title||null),K(),m1("value",c.description||null))},dependencies:[b3,R3,S3,ee],styles:[".add-note-container[_ngcontent-%COMP%]{outline:1px solid #585858;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:relative;border-radius:5px;color:#fff;display:grid;margin:auto;min-width:20%;max-width:600px;height:fit-content;margin-block-end:20px;margin-block-start:10px}.add-note-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-size:24px;font-weight:500}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#3b3e41;padding:15px 0 10px 10px;border-radius:5px 5px 0 0;transition:.2s background-color ease-in;font-weight:600;font-size:1.2em;color:#fff}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#000;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0 0 5px 5px;background-color:#3b3e41;color:#fff;transition:.2s background-color ease-in;padding-inline-start:10px;padding-block-start:10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;resize:none;height:100px;border:none;font-size:1em}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:16px;font-weight:400}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{color:#000;outline:none;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;outline:1px solid rgba(255,255,255,.123);padding:5px 30px;background-color:#333;color:#c3c3c3;justify-self:start;cursor:pointer;border:none;font-size:1rem;width:50px;height:auto;display:flex;align-items:center;justify-content:center;border-radius:5px}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;opacity:.7;background-color:#fff}"]})}return s})();var Il;try{Il=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Il=!1}var oe=(()=>{let t=class t{constructor(o){this._platformId=o,this.isBrowser=this._platformId?y9(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Il)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(c){return new(c||t)(Q(Y2))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var se;function Az(){if(se==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>se=!0}))}finally{se=se||!1}return se}function Dl(s){return Az()?s:!!s.capture}function w8(s){return s.composedPath?s.composedPath()[0]:s.target}function d8(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Pl(s){return Array.isArray(s)?s:[s]}function Ol(s){return s instanceof m2?s.nativeElement:s}var p8=new Set,r5,Sz=(()=>{let t=class t{constructor(o,c){this._platform=o,this._nonce=c,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):bz}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&Rz(o,this._nonce),this._matchMedia(o)}};t.\u0275fac=function(c){return new(c||t)(Q(oe),Q(kt,8))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Rz(s,t){if(!p8.has(s))try{r5||(r5=document.createElement("style"),t&&r5.setAttribute("nonce",t),r5.setAttribute("type","text/css"),document.head.appendChild(r5)),r5.sheet&&(r5.sheet.insertRule(`@media ${s} {body{ }}`,0),p8.add(s))}catch(e){console.error(e)}}function bz(s){return{matches:s==="all"||s==="",media:s,addListener:()=>{},removeListener:()=>{}}}var f8=(()=>{let t=class t{constructor(o,c){this._mediaMatcher=o,this._zone=c,this._queries=new Map,this._destroySubject=new H2}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return m8(Pl(o)).some(r=>this._registerQuery(r).mql.matches)}observe(o){let r=m8(Pl(o)).map(a=>this._registerQuery(a).observable),n=v5(r);return n=He(n.pipe(m0(1)),n.pipe(r9(1),Le(0))),n.pipe(a1(a=>{let h={matches:!1,breakpoints:{}};return a.forEach(({matches:v,query:w})=>{h.matches=h.matches||v,h.breakpoints[w]=v}),h}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let c=this._mediaMatcher.matchMedia(o),n={observable:new ro(a=>{let h=v=>this._zone.run(()=>a.next(v));return c.addListener(h),()=>{c.removeListener(h)}}).pipe(ye(c),a1(({matches:a})=>({query:o,matches:a})),Be(this._destroySubject)),mql:c};return this._queries.set(o,n),n}};t.\u0275fac=function(c){return new(c||t)(Q(Sz),Q(k1))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function m8(s){return s.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function M8(s){return s.buttons===0||s.detail===0}function C8(s){let t=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var n5=function(s){return s[s.NONE=0]="NONE",s[s.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",s[s.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",s}(n5||{}),z8="cdk-high-contrast-black-on-white",x8="cdk-high-contrast-white-on-black",Nl="cdk-high-contrast-active",V8=(()=>{let t=class t{constructor(o,c){this._platform=o,this._document=c,this._breakpointSubscription=I(f8).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return n5.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let c=this._document.defaultView||window,r=c&&c.getComputedStyle?c.getComputedStyle(o):null,n=(r&&r.backgroundColor||"").replace(/ /g,"");switch(o.remove(),n){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return n5.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return n5.BLACK_ON_WHITE}return n5.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(Nl,z8,x8),this._hasCheckedHighContrastMode=!0;let c=this.getHighContrastMode();c===n5.BLACK_ON_WHITE?o.add(Nl,z8):c===n5.WHITE_ON_BLACK&&o.add(Nl,x8)}}};t.\u0275fac=function(c){return new(c||t)(Q(oe),Q(D1))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var Fl=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=J1({type:t}),t.\u0275inj=Y1({});let s=t;return s})();function Tz(){return!0}var Iz=new s1("mat-sanity-checks",{providedIn:"root",factory:Tz}),S8=(()=>{let t=class t{constructor(o,c,r){this._sanityChecks=c,this._document=r,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return d8()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};t.\u0275fac=function(c){return new(c||t)(Q(V8),Q(Iz,8),Q(D1))},t.\u0275mod=J1({type:t}),t.\u0275inj=Y1({imports:[Fl,Fl]});let s=t;return s})();var C2=function(s){return s[s.FADING_IN=0]="FADING_IN",s[s.VISIBLE=1]="VISIBLE",s[s.FADING_OUT=2]="FADING_OUT",s[s.HIDDEN=3]="HIDDEN",s}(C2||{}),jl=class{constructor(t,e,o,c=!1){this._renderer=t,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=c,this.state=C2.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},H8=Dl({passive:!0,capture:!0}),Zl=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=w8(t);e&&this._events.get(t.type)?.forEach((o,c)=>{(c===e||c.contains(e))&&o.forEach(r=>r.handleEvent(t))})}}addHandler(t,e,o,c){let r=this._events.get(e);if(r){let n=r.get(o);n?n.add(c):r.set(o,new Set([c]))}else this._events.set(e,new Map([[o,new Set([c])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,H8)})}removeHandler(t,e,o){let c=this._events.get(t);if(!c)return;let r=c.get(e);r&&(r.delete(o),r.size===0&&c.delete(e),c.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,H8)))}},L8={enterDuration:225,exitDuration:150},Dz=800,y8=Dl({passive:!0,capture:!0}),B8=["mousedown","touchstart"],_8=["mouseup","mouseleave","touchend","touchcancel"],ce=class ce{constructor(t,e,o,c){this._target=t,this._ngZone=e,this._platform=c,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,c.isBrowser&&(this._containerElement=Ol(o))}fadeInRipple(t,e,o={}){let c=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=k(k({},L8),o.animation);o.centered&&(t=c.left+c.width/2,e=c.top+c.height/2);let n=o.radius||Pz(t,e,c),a=t-c.left,h=e-c.top,v=r.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=`${a-n}px`,w.style.top=`${h-n}px`,w.style.height=`${n*2}px`,w.style.width=`${n*2}px`,o.color!=null&&(w.style.backgroundColor=o.color),w.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(w);let u=window.getComputedStyle(w),z=u.transitionProperty,y=u.transitionDuration,A=z==="none"||y==="0s"||y==="0s, 0s"||c.width===0&&c.height===0,R=new jl(this,w,o,A);w.style.transform="scale3d(1, 1, 1)",R.state=C2.FADING_IN,o.persistent||(this._mostRecentTransientRipple=R);let B=null;return!A&&(v||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let O=()=>this._finishRippleTransition(R),F=()=>this._destroyRipple(R);w.addEventListener("transitionend",O),w.addEventListener("transitioncancel",F),B={onTransitionEnd:O,onTransitionCancel:F}}),this._activeRipples.set(R,B),(A||!v)&&this._finishRippleTransition(R),R}fadeOutRipple(t){if(t.state===C2.FADING_OUT||t.state===C2.HIDDEN)return;let e=t.element,o=k(k({},L8),t.config.animation);e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",t.state=C2.FADING_OUT,(t._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Ol(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,B8.forEach(o=>{ce._eventManager.addHandler(this._ngZone,o,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{_8.forEach(e=>{this._triggerElement.addEventListener(e,this,y8)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===C2.FADING_IN?this._startFadeOutTransition(t):t.state===C2.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:o}=t.config;t.state=C2.VISIBLE,!o&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=C2.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=M8(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Dz;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!C8(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===C2.VISIBLE||t.config.terminateOnPointerUp&&t.state===C2.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(B8.forEach(e=>ce._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(_8.forEach(e=>t.removeEventListener(e,this,y8)),this._pointerUpEventsRegistered=!1))}};ce._eventManager=new Zl;var A8=ce;function Pz(s,t,e){let o=Math.max(Math.abs(s-e.left),Math.abs(s-e.right)),c=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+c*c)}var R8=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=J1({type:t}),t.\u0275inj=Y1({imports:[h2,S8]});let s=t;return s})();var b8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["loader"]],standalone:!0,features:[d1],decls:4,vars:0,consts:[[1,"loader-container"],[1,"loader-item","item-1"],[1,"loader-item","item-2"],[1,"loader-item","item-3"]],template:function(o,c){o&1&&(Z(0,"article",0),C1(1,"div",1)(2,"div",2)(3,"div",3),U())},dependencies:[R8],styles:[".loader-container[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;margin-top:5vw}.loader-container[_ngcontent-%COMP%]   .loader-item[_ngcontent-%COMP%]{transition:scale .2s ease-in-out;width:50px;height:50px;background-color:#5c6166;border-radius:50%}.loader-container[_ngcontent-%COMP%]   .loader-item.item-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite}.loader-container[_ngcontent-%COMP%]   .loader-item.item-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite;animation-delay:.2s}.loader-container[_ngcontent-%COMP%]   .loader-item.item-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite;animation-delay:.4s}@keyframes _ngcontent-%COMP%_blow{20%{scale:1}50%{scale:1.2}80%{scale:1}}"]})}return s})();function Oz(s,t){return this.note.todos}function Nz(s,t){if(s&1&&(Z(0,"p"),H1(1),U()),s&2){let e=h1();K(),_2(e.note.txt)}}function Fz(s,t){if(s&1){let e=c2();Z(0,"li",2)(1,"p"),H1(2),U(),Z(3,"input",3),i1("change",function(){let c=Z1(e).$implicit,r=h1(2);return U1(r.toggleIsDone(c._id))}),U()()}if(s&2){let e=t.$implicit;K(),k2(e.isDone?"done":"active"),K(),_2(e.content),K(),m1("checked",e.isDone)}}function jz(s,t){if(s&1){let e=c2();Z(0,"ul",1),i1("click",function(c){Z1(e);let r=h1();return U1(r.handleEventClick(c))}),a2(1,Fz,4,4,"li",2,Oz,!0),U()}if(s&2){let e=h1();K(),i2(e.note.todos)}}function Zz(s,t){if(s&1&&C1(0,"img",4),s&2){let e=h1();m1("src",e.note.imgUrl,be)}}var k8=(()=>{class s{note;toggleIsDone(e){let o=this.note.todos?.find(c=>c._id===e);o.isDone=!o.isDone}handleEventClick(e){e.stopPropagation()}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["dynamic-note"]],inputs:{note:"note"},standalone:!0,features:[d1],decls:7,vars:3,consts:[[2,"position","absolute","bottom","6.5px","right","5px","color","#333"],[1,"todos-container","flex","flex-col",3,"click"],[1,"todo-item"],["type","checkbox",3,"change","checked"],["alt","img",3,"src"]],template:function(o,c){if(o&1&&(Z(0,"h2"),H1(1),U(),J2(2,Nz,2,1)(3,jz,3,0)(4,Zz,1,1),Z(5,"p",0),H1(6),U()),o&2){let r;K(),_2(c.note.title),K(),B2(2,(r=c.note.type)==="txt"?2:r==="todo"?3:r==="img"?4:-1),K(4),_2(c.note.createdAt)}},dependencies:[h2],styles:['@charset "UTF-8";img[_ngcontent-%COMP%]{margin-block-start:10px;width:100%;border-radius:5px;object-fit:cover;max-height:220px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}.todos-container[_ngcontent-%COMP%]{border-radius:5px;margin-block-start:10px;margin-block-end:10px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;padding:5px;background-color:#ffffff4b;display:grid;gap:5px}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{text-decoration:line-through}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:25px;margin-inline-end:5px}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}']})}return s})();var E0=(()=>{class s{notesSubject=new j1([]);loadingSubject=new j1(!1);notes$=this.notesSubject.asObservable();loading$=this.loadingSubject.asObservable();originalNotes=[];loadNotes(){return S(this,null,function*(){this.loadingSubject.next(!0);try{let e=yield R0.loadNotes();if(!e.length){this.setNotes(yield q6.getDemoNotes(10));return}this.setNotes(e)}catch(e){console.error("Error loading notes: ",e)}finally{this.loadingSubject.next(!1)}})}getNoteById(e){return this.notesSubject.value.find(o=>e===o._id)}setNotes(e){this.notesSubject.next(e),this.originalNotes=[...e]}addNote(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{let o=yield R0.addNote(e),c=[...this.notesSubject.value];e._id=o,c.unshift(k({},e)),this.notesSubject.next(c),this.originalNotes.unshift(e)}catch(o){console.error("Error adding note: ",o)}finally{this.loadingSubject.next(!1)}})}updateNote(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{yield R0.updateNote(e._id,e);let o=[...this.notesSubject.value],c=o.findIndex(n=>n._id===e._id);o[c]=k({},e),this.notesSubject.next(o);let r=this.originalNotes.findIndex(n=>n._id===e._id);this.originalNotes[r]=k({},e)}catch(o){console.error("Error updating note: ",o)}finally{this.loadingSubject.next(!1)}})}removeNoteById(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{yield R0.removeNote(e);let o=this.notesSubject.value.filter(c=>c._id!==e);this.notesSubject.next(o),this.originalNotes=this.originalNotes.filter(c=>c._id!==e)}catch(o){console.error("Error removing note: ",o)}finally{this.loadingSubject.next(!1)}})}filterNotes(e){this.loadingSubject.next(!0);let o=e.toLowerCase(),c=this.originalNotes.filter(r=>r.title.toLowerCase().includes(o));this.notesSubject.next(c),setTimeout(()=>{this.loadingSubject.next(!1)},500)}getFilteredNotes(e){return this.originalNotes.filter(o=>o.title.toLowerCase().startsWith(e.toLowerCase()))}static \u0275fac=function(o){return new(o||s)};static \u0275prov=J({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Uz=s=>({background:s});function qz(s,t){if(s&1){let e=c2();Z(0,"div",3),i1("click",function(){let c=Z1(e).$implicit,r=h1(2);return U1(r.displayNoteEditor(c._id))}),C1(1,"dynamic-note",4),Z(2,"note-bottom-actions",5),i1("noteAction",function(c){Z1(e);let r=h1(2);return U1(r.onNoteAction(c))}),U(),Z(3,"color-picker",6),i1("selectedColor",function(c){Z1(e);let r=h1(2);return U1(r.onNoteAction(c))}),U()()}if(s&2){let e=t.$implicit,o=h1(2);m5("fly-animation",(o.selectedNote==null?null:o.selectedNote._id)===e._id),m1("ngStyle",f2(9,Uz,e.color)),K(),m1("note",e),K(),m1("noteId",e._id),K(),m1("noteId",e._id)("noteColor",e.color)("selectedNote",o.selectedNote)("isColorPickerOpen",o.isColorPickerOpen)}}function Gz(s,t){if(s&1&&(Z(0,"section",1),a2(1,qz,4,11,"div",2,X2),U(),C1(3,"router-outlet")),s&2){let e=h1();K(),i2(e.notes)}}function $z(s,t){s&1&&C1(0,"loader")}var T8=(()=>{class s{notesService;router;cdr;notes;selectedNote;isColorPickerOpen;colorPickerTimeout;isLoadingNotes=!1;subscription;constructor(e,o,c){this.notesService=e,this.router=o,this.cdr=c}ngOnInit(){return S(this,null,function*(){this.isLoadingNotes=!0,this.subscription=this.notesService.notes$.subscribe(e=>{this.notes=e,this.isLoadingNotes=!1,this.cdr.markForCheck()}),yield this.notesService.loadNotes()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getNoteIdxById(e){return this.notes.findIndex(o=>o._id===e)}addUpdateNote(e,o){return S(this,null,function*(){e?yield this.notesService.updateNote(k({},o)):yield this.notesService.addNote(k({},o))})}removeNote(e){return S(this,null,function*(){yield this.notesService.removeNoteById(e)})}duplicateNote(e){return S(this,null,function*(){let o=this.notesService.getNoteById(e);if(!o)return;let c=l1(k({},o),{_id:y3()});yield this.notesService.addNote(c)})}paintNote(e,o){return S(this,null,function*(){let c=this.notesService.getNoteById(o);c&&(yield this.notesService.updateNote(l1(k({},c),{color:e})))})}toggleColorPicker(){this.isColorPickerOpen=!this.isColorPickerOpen,this.isColorPickerOpen&&setTimeout(()=>{this.isColorPickerOpen=!1},2500)}displayNoteEditor(e){this.router.navigate(["notes",e])}onNoteAction(e){return S(this,null,function*(){switch(this.selectedNote=e.noteId?this.notes[this.getNoteIdxById(e.noteId)]:null,e.type){case us:yield this.addUpdateNote(e.noteId,e.data);break;case $a:yield this.removeNote(e.noteId);break;case Wa:yield this.duplicateNote(e.noteId);break;case ps:e.data?yield this.paintNote(e.data,e.noteId):this.toggleColorPicker();break}})}static \u0275fac=function(o){return new(o||s)(w1(E0),w1(r2),w1(t0))};static \u0275cmp=g1({type:s,selectors:[["note-index"]],standalone:!0,features:[d1],decls:3,vars:2,consts:[[3,"addNote"],[1,"notes-layout"],["noteHover","",1,"note-preview",2,"position","relative",3,"ngStyle","fly-animation"],["noteHover","",1,"note-preview",2,"position","relative",3,"click","ngStyle"],[3,"note"],[1,"icons-container",3,"noteAction","noteId"],[3,"selectedColor","noteId","noteColor","selectedNote","isColorPickerOpen"]],template:function(o,c){o&1&&(Z(0,"add-note",0),i1("addNote",function(n){return c.onNoteAction(n)}),U(),J2(1,Gz,4,0)(2,$z,1,0,"loader")),o&2&&(K(),B2(1,c.isLoadingNotes?-1:1),K(),B2(2,c.notes.length?-1:2))},dependencies:[k8,b8,h2,V9,Ga,Y6,g8,J6,B5,l4],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{transition:all .4s;height:39px;padding:10px;display:grid;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]{position:relative;break-inside:avoid;display:flex;flex-direction:column;padding:10px 10px 40px;border-radius:5px;scale:1;transition:filter .3s,transform .3s,scale .2s}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]:before{background-color:linear-gradient(#333,#fff)}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.1;position:absolute;right:0;top:0;width:30px;height:30px;transition:opacity .4s;border:none;background-color:transparent}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00000052;color:#fff;opacity:1;border-radius:0 5px;cursor:pointer}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{position:absolute;bottom:2px;display:flex;transition:opacity .2s ease-in;gap:10px;width:100%;left:0;padding:5px 0;align-items:center;justify-content:center;background-color:#ffffff2c;border-top:1px solid rgba(0,0,0,.267);opacity:0}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   .icons-container.hovered[_ngcontent-%COMP%]{opacity:1}.note-preview.hovered[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{opacity:1}.notes-layout[_ngcontent-%COMP%]{padding-inline:5px;columns:300px auto;column-gap:10px}.notes-layout[_ngcontent-%COMP%]   .note-preview[_ngcontent-%COMP%]{margin-block-end:10px}@media (max-width: 800px){.notes-layout[_ngcontent-%COMP%]{padding:0}}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{transition:all .4s;height:39px;padding:10px;display:grid;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"],changeDetection:0})}return s})();var I8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["App-labels-editor"]],standalone:!0,features:[d1],decls:2,vars:0,template:function(o,c){o&1&&(Z(0,"p"),H1(1,"labels-editor works!"),U())},styles:["p[_ngcontent-%COMP%]{color:#fff}"]})}return s})();var D8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=g1({type:s,selectors:[["app-bin"]],standalone:!0,features:[d1],decls:2,vars:0,template:function(o,c){o&1&&(Z(0,"p"),H1(1,"bin works!"),U())},dependencies:[h2],styles:["p[_ngcontent-%COMP%]{color:#fff}"],changeDetection:0})}return s})();function Wz(s,t){return this.noteToEdit==null?null:this.noteToEdit.todos}var Kz=s=>({background:s});function Qz(s,t){if(s&1&&(Z(0,"textarea",3),H1(1," "),U()),s&2){let e=h1(2);m1("value",e.noteToEdit==null?null:e.noteToEdit.txt)}}function Yz(s,t){if(s&1&&C1(0,"img",4),s&2){let e=h1(2);m1("src",e.noteToEdit==null?null:e.noteToEdit.imgUrl,be)}}function Jz(s,t){if(s&1&&(Z(0,"li",7)(1,"p",8),H1(2),U(),C1(3,"input",9),U()),s&2){let e=t.$implicit;K(),k2(e.isDone?"done":"active"),K(),_2(e.content),K(),m1("checked",e.isDone)}}function Xz(s,t){if(s&1&&(Z(0,"div",5)(1,"ul",6),a2(2,Jz,4,4,"li",7,Wz,!0),U()()),s&2){let e=h1(2);K(2),i2(e.noteToEdit==null?null:e.noteToEdit.todos)}}function tx(s,t){if(s&1){let e=c2();Z(0,"div",0),i1("click",function(){Z1(e);let c=h1();return U1(c.closeDialog())}),U(),Z(1,"dialog")(2,"form",1),i1("submit",function(c){Z1(e);let r=h1();return U1(r.onUpdateNote(c))}),C1(3,"input",2),J2(4,Qz,2,1,"textarea",3)(5,Yz,1,1,"img",4)(6,Xz,4,0,"div",5),Z(7,"button"),H1(8,"Keep"),U()()()}if(s&2){let e=h1();K(2),Tt(f2(6,Kz,e.noteToEdit==null?null:e.noteToEdit.color)),K(),m1("value",e.noteToEdit==null?null:e.noteToEdit.title),K(),B2(4,(e.noteToEdit==null?null:e.noteToEdit.type)==="txt"?4:-1),K(),B2(5,(e.noteToEdit==null?null:e.noteToEdit.type)==="img"?5:-1),K(),B2(6,(e.noteToEdit==null?null:e.noteToEdit.type)==="todo"?6:-1)}}var P8=(()=>{class s{route;router;noteService;noteToEdit;noteId;constructor(e,o,c){this.route=e,this.router=o,this.noteService=c}ngOnInit(){return S(this,null,function*(){try{this.route.paramMap.subscribe(e=>{this.noteId=e.get("noteId"),this.noteToEdit=this.noteService.getNoteById(this.noteId),this.noteToEdit||this.router.navigate(["notes"])})}catch(e){console.log(e)}})}onUpdateNote(e){if(e.preventDefault(),!this.noteToEdit)return;let o=e.target,c=o.elements.namedItem("title"),r=o.elements.namedItem("txt");this.noteToEdit.title=c.value,this.noteToEdit.txt=r.value,this.noteService.updateNote(this.noteToEdit),this.router.navigate(["notes"])}closeDialog(){this.router.navigate(["notes"])}static \u0275fac=function(o){return new(o||s)(w1(s0),w1(r2),w1(E0))};static \u0275cmp=g1({type:s,selectors:[["App-note-details"]],standalone:!0,features:[d1],decls:1,vars:1,consts:[[1,"backdrop",3,"click"],[1,"add-note-container",3,"submit"],["type","text","placeholder","Title...","name","title",3,"value"],["placeholder"," How are you today...","name","txt",3,"value"],[2,"height","auto","width","100%","object-fit","cover","border-radius","0px",3,"src"],[1,"todos-layout"],[1,"todos-container","flex","flex-col"],[1,"todo-item"],["contenteditable","true"],["type","checkbox",3,"checked"]],template:function(o,c){o&1&&J2(0,tx,9,8),o&2&&B2(0,c.noteId?0:-1)},dependencies:[b3,R3,S3,ee,B5],styles:[".add-note-container[_ngcontent-%COMP%]{outline:1px solid #585858;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:relative;border-radius:5px;color:#fff;display:grid;margin:auto;min-width:20%;max-width:600px;height:fit-content;margin-block-end:20px;margin-block-start:10px}.add-note-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-size:24px;font-weight:500}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#3b3e41;padding:15px 0 10px 10px;border-radius:5px 5px 0 0;transition:.2s background-color ease-in;font-weight:600;font-size:1.2em;color:#fff}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#000;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0 0 5px 5px;background-color:#3b3e41;color:#fff;transition:.2s background-color ease-in;padding-inline-start:10px;padding-block-start:10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;resize:none;height:100px;border:none;font-size:1em}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:16px;font-weight:400}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{color:#000;outline:none;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;outline:1px solid rgba(255,255,255,.123);padding:5px 30px;background-color:#333;color:#c3c3c3;justify-self:start;cursor:pointer;border:none;font-size:1rem;width:50px;height:auto;display:flex;align-items:center;justify-content:center;border-radius:5px}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;opacity:.7;background-color:#fff}",'@charset "UTF-8";img[_ngcontent-%COMP%]{margin-block-start:10px;width:100%;border-radius:5px;object-fit:cover;max-height:220px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}.todos-container[_ngcontent-%COMP%]{border-radius:5px;margin-block-start:10px;margin-block-end:10px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;padding:5px;background-color:#ffffff4b;display:grid;gap:5px}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{text-decoration:line-through}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:25px;margin-inline-end:5px}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}','@charset "UTF-8";dialog[_ngcontent-%COMP%]{height:fit-content;z-index:20;inset:0;margin:auto;position:fixed;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;color:#000}dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{outline:1px black solid}dialog[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:gray}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]{height:fit-content;min-width:450px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:fit-content;color:#000;padding:10px;min-height:200px;font-size:20px;font-weight:400;background-color:transparent}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;font-size:28px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000;background-color:transparent}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder, dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#333}.todos-layout[_ngcontent-%COMP%]{padding-inline:10px;color:#000;position:relative;padding-block-end:50px}.todos-layout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:focus{outline:none;border:none}.todos-layout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}.todos-layout[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}.todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30px}.todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;grid-column:2;margin:0;transition:background-color .3s,border-color .3s;transform:translateY(-10px)}.todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;font-size:15px;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s;grid-column:2;margin:0;transform:translateY(-10px)}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;transition:.2s ease;background:#00000080;z-index:10}@media (max-width: 800px){dialog[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   .add-note-container[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   textarea[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]{padding-bottom:10%;min-height:30vh;width:100vw;overflow:unset}dialog[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   .add-note-container[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]{border-radius:0}}']})}return s})();var O8=[{path:"labels",component:I8},{path:"notes",component:T8,children:[{path:":noteId",component:P8}]},{path:"bin",component:D8},{path:D2,redirectTo:"/notes",pathMatch:"full"},{path:"**",redirectTo:"/notes"}];var ex="@",sx=(()=>{let t=class t{constructor(o,c,r,n,a){this.doc=o,this.delegate=c,this.zone=r,this.animationType=n,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=I(v9,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-J5PK4NT7.js")).catch(c=>{throw new x1(5300,!1)}).then(({\u0275createEngine:c,\u0275AnimationRendererFactory:r})=>{this._engine=c(this.animationType,this.doc,this.scheduler);let n=new r(this.delegate,this._engine,this.zone);return this.delegate=n,n})}createRenderer(o,c){let r=this.delegate.createRenderer(o,c);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let n=new Ul(r);return c?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let h=a.createRenderer(o,c);n.use(h)}).catch(a=>{n.use(r)}),n}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(c){ke()},t.\u0275prov=J({token:t,factory:t.\u0275fac});let s=t;return s})(),Ul=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,o,c){this.delegate.insertBefore(t,e,o,c)}removeChild(t,e,o){this.delegate.removeChild(t,e,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,c){this.delegate.setAttribute(t,e,o,c)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,c){this.delegate.setStyle(t,e,o,c)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){this.shouldReplay(e)&&this.replay.push(c=>c.setProperty(t,e,o)),this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.shouldReplay(e)&&this.replay.push(c=>c.listen(t,e,o)),this.delegate.listen(t,e,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(ex)}};function N8(s="animations"){return Ie("NgAsyncAnimations"),z0([{provide:Ee,useFactory:(t,e,o)=>new sx(t,e,o,s),deps:[D1,Ge,k1]},{provide:uo,useValue:s==="noop"?"NoopAnimations":"BrowserAnimations"}])}var F8={providers:[Ia(O8),$9(),N8("noop")]};var j8='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"></path></svg>';var Z8='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>';var it=(()=>{class s{menuOpenSubject=new j1(!0);menuOpen$=this.menuOpenSubject.asObservable();toggleMenu(){this.menuOpenSubject.next(!this.menuOpenSubject.value)}static \u0275fac=function(o){return new(o||s)};static \u0275prov=J({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var U8=(()=>{class s{menuService;noteService;searchTerm$=new H2;loggedInUser={username:""};isMenuOpen=!0;toggleMenuClick=new b1;constructor(e,o){this.menuService=e,this.noteService=o,this.searchTerm$.pipe(Le(500)).subscribe(c=>this.noteService.filterNotes(c))}handleToggleMenu(){this.menuService.toggleMenu()}onSearchNotes(e){let o=e.target.value;this.searchTerm$.next(o)}static \u0275fac=function(o){return new(o||s)(w1(it),w1(E0))};static \u0275cmp=g1({type:s,selectors:[["navbar"]],outputs:{toggleMenuClick:"toggleMenuClick"},standalone:!0,features:[E2([],[_5({heroBars4:j8,heroUserCircle:Z8})]),d1],decls:6,vars:1,consts:[["name","heroBars4",1,"hamburger-svg",3,"click"],["type","text","placeholder","Search note...",1,"header-input",3,"input"],[2,"display","flex","align-items","center","gap","5px"],[2,"font-size","15px"],["name","heroUserCircle",1,"hamburger-svg"]],template:function(o,c){o&1&&(Z(0,"ng-icon",0),i1("click",function(){return c.handleToggleMenu()}),U(),Z(1,"input",1),i1("input",function(n){return c.onSearchNotes(n)}),U(),Z(2,"div",2)(3,"p",3),H1(4),U(),C1(5,"ng-icon",4),U()),o&2&&(K(4),_2(c.loggedInUser.username))},dependencies:[A5],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{transition:all .4s;height:39px;padding:10px;display:grid;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}.header-input[_ngcontent-%COMP%]{color:#fff;outline:1px solid rgba(255,255,255,.2);transition:.2s ease-in;width:40%;min-width:418px;padding:15px 10px;font-size:1rem;background-color:#7788992d;border-radius:5px}.header-input[_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-weight:100}.header-input[_ngcontent-%COMP%]:focus{color:#000;background-color:#ffffffb6}.header-input[_ngcontent-%COMP%]:focus::placeholder{font-weight:100}.hamburger-svg[_ngcontent-%COMP%]{font-size:30px}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{transition:all .4s;height:39px;padding:10px;display:grid;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"]})}return s})();var q8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z"></path><path fill-rule="evenodd" d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.133 2.845a.75.75 0 0 1 1.06 0l1.72 1.72 1.72-1.72a.75.75 0 1 1 1.06 1.06l-1.72 1.72 1.72 1.72a.75.75 0 1 1-1.06 1.06L12 15.685l-1.72 1.72a.75.75 0 1 1-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg>';var G8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M11.097 1.515a.75.75 0 0 1 .589.882L10.666 7.5h4.47l1.079-5.397a.75.75 0 1 1 1.47.294L16.665 7.5h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.2 6h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103h-4.47l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103H3.75a.75.75 0 0 1 0-1.5h3.885l1.2-6H5.25a.75.75 0 0 1 0-1.5h3.885l1.08-5.397a.75.75 0 0 1 .882-.588ZM10.365 9l-1.2 6h4.47l1.2-6h-4.47Z" clip-rule="evenodd"></path></svg>';var $8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"></path></svg>';var ox=s=>({selected:s});function cx(s,t){if(s&1){let e=c2();Z(0,"div",1),i1("click",function(){let c=Z1(e).$implicit,r=h1();return U1(r.handleRouteSelect(c.route))}),Z(1,"p"),H1(2),U(),C1(3,"ng-icon",2),U()}if(s&2){let e=t.$implicit,o=h1();m1("ngClass",f2(3,ox,o.selectedRoute===e.route)),K(2),_2(e.label),K(),m1("name",e.svg)}}var W8=(()=>{class s{router;menuService;notesService;noteRef;isMenuOpen=!0;notesLength=0;selectedRoute="notes";links=[{label:"Notes",svg:"heroPencilSolid",route:"notes"},{label:"Labels",svg:"heroHashtagSolid",route:"labels"},{label:"Bin",svg:"heroArchiveBoxXMarkSolid",route:"bin"}];constructor(e,o,c,r){this.router=e,this.menuService=o,this.notesService=c,this.noteRef=r}ngOnInit(){this.notesService.notes$.subscribe(e=>{this.notesLength=e.length,this.links[0].label=`Notes (${this.notesLength})`,this.noteRef.markForCheck()})}handleRouteSelect(e){this.selectedRoute=e,this.router.navigate([e])}static \u0275fac=function(o){return new(o||s)(w1(r2),w1(it),w1(E0),w1(t0))};static \u0275cmp=g1({type:s,selectors:[["sidebar"]],inputs:{isMenuOpen:"isMenuOpen"},standalone:!0,features:[E2([],[_5({heroPencilSolid:$8,heroHashtagSolid:G8,heroArchiveBoxXMarkSolid:q8})]),d1],decls:2,vars:0,consts:[[1,"sidebar-link",3,"ngClass"],[1,"sidebar-link",3,"click","ngClass"],[3,"name"]],template:function(o,c){o&1&&a2(0,cx,4,5,"div",0,X2),o&2&&i2(c.links)},dependencies:[h2,Fe,A5],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{transition:all .4s;height:39px;padding:10px;display:grid;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"],changeDetection:0})}return s})();var K8=(s,t)=>({open:s,closed:t}),rx=(s,t)=>({"open-index":s,"closed-index":t}),Q8=(()=>{class s{menuService;title="Google Keep";constructor(e){this.menuService=e}static \u0275fac=function(o){return new(o||s)(w1(it))};static \u0275cmp=g1({type:s,selectors:[["app-root"]],standalone:!0,features:[d1],decls:12,vars:24,consts:[[1,"app-container","main-layout"],[1,"navbar",3,"ngClass"],[1,"note-index","content-container",3,"ngClass"],[1,"sidebar",3,"ngClass"]],template:function(o,c){o&1&&(Z(0,"main",0)(1,"navbar",1),N0(2,"async"),N0(3,"async"),H1(4," >"),U(),Z(5,"main",2),N0(6,"async"),N0(7,"async"),C1(8,"router-outlet"),U(),C1(9,"sidebar",3),N0(10,"async"),N0(11,"async"),U()),o&2&&(K(),m1("ngClass",De(15,K8,F0(2,3,c.menuService.menuOpen$),!F0(3,5,c.menuService.menuOpen$))),K(4),m1("ngClass",De(18,rx,F0(6,7,c.menuService.menuOpen$),!F0(7,9,c.menuService.menuOpen$))),K(4),m1("ngClass",De(21,K8,F0(10,11,c.menuService.menuOpen$),!F0(11,13,c.menuService.menuOpen$))))},dependencies:[h2,Fe,H9,U8,W8,B5,l4],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{transition:all .4s;height:39px;padding:10px;display:grid;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"]})}return s})();q9(Q8,F8).catch(s=>console.error(s));
