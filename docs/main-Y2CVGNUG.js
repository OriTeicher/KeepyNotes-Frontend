import{$ as fo,$a as $1,A as wo,Aa as Dt,Ab as L9,B as Re,Ba as De,Bb as _o,C as uo,Ca as x5,Cb as y9,D as i9,Da as Ot,Db as B9,E as m0,Ea as q,Eb as N1,F as p5,Fa as i1,Fb as _9,G as j0,Ga as Oe,Gb as Ao,H as be,Ha as z9,Hb as A9,I as po,Ia as Ne,Ib as S9,J as f0,Ja as Fe,Jb as jt,K as h9,Ka as je,Kb as So,L as Tt,La as I1,Lb as Ge,M as z0,Ma as Mo,Mb as R9,N as mo,Na as x9,Nb as b9,O as v9,Oa as Co,Ob as d2,P as g9,Pa as M5,Pb as k9,Q as d9,Qa as M9,Qb as E9,R as ke,Ra as Vo,Rb as Zt,S as z2,Sa as Ho,Sb as T9,T as Ee,Ta as g2,Tb as I9,U as O1,Ua as g1,V as C1,Va as M0,W as w9,Wa as Z0,X,Xa as M2,Y as t2,Ya as l2,Z as u9,Za as Lo,_ as c1,_a as R2,a as k,aa as Y,ab as G1,b as h1,ba as I,bb as N,c as e9,ca as It,cb as F,d as jv,da as Te,db as H1,e as S,ea as Pt,eb as B1,f as Ae,fa as T2,fb as e1,g as s9,ga as w1,gb as G,h as o9,ha as e2,hb as yo,i as c9,ia as A2,ib as L1,j as r9,ja as x0,jb as X2,k as n9,ka as p9,kb as C2,l as ho,la as m5,lb as u1,m as vo,ma as S2,mb as a2,n as go,na as f5,nb as Ze,o as _2,oa as m1,ob as U0,p as q1,pa as f1,pb as q0,q as p0,qa as Ie,qb as Ue,r as X1,ra as z5,rb as qe,s as $,sa as zo,sb as Bo,t as Et,ta as x2,tb as Nt,u as Se,ua as T1,ub as Ft,v as l9,va as m9,vb as C9,w as a9,wa as Pe,wb as $e,x as v1,xa as f9,xb as t0,y as u5,ya as J2,yb as V9,z as v2,za as xo,zb as H9}from"./chunk-4MYTKO2T.js";var Ke=class s{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let o=e.indexOf(":");if(o>0){let c=e.slice(0,o),r=c.toLowerCase(),n=e.slice(o+1).trim();this.maybeSetNormalizedName(c,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,o)=>{this.setHeaderEntries(o,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,o])=>{this.setHeaderEntries(e,o)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new s;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof s?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(t.name,e);let c=(t.op==="a"?this.headers.get(e):void 0)||[];c.push(...o),this.headers.set(e,c);break;case"d":let r=t.value;if(!r)this.headers.delete(e),this.normalizedNames.delete(e);else{let n=this.headers.get(e);if(!n)return;n=n.filter(a=>r.indexOf(a)===-1),n.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,n)}break}}setHeaderEntries(t,e){let o=(Array.isArray(e)?e:[e]).map(r=>r.toString()),c=t.toLowerCase();this.headers.set(c,o),this.maybeSetNormalizedName(t,c)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var U9=function(s){return s[s.Sent=0]="Sent",s[s.UploadProgress=1]="UploadProgress",s[s.ResponseHeader=2]="ResponseHeader",s[s.DownloadProgress=3]="DownloadProgress",s[s.Response=4]="Response",s[s.User=5]="User",s}(U9||{}),Ro=class{constructor(t,e=q9.Ok,o="OK"){this.headers=t.headers||new Ke,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Qe=class s extends Ro{constructor(t={}){super(t),this.type=U9.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new s({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var q9=function(s){return s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Processing=102]="Processing",s[s.EarlyHints=103]="EarlyHints",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultiStatus=207]="MultiStatus",s[s.AlreadyReported=208]="AlreadyReported",s[s.ImUsed=226]="ImUsed",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.Unused=306]="Unused",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.PayloadTooLarge=413]="PayloadTooLarge",s[s.UriTooLong=414]="UriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RangeNotSatisfiable=416]="RangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.MisdirectedRequest=421]="MisdirectedRequest",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.Locked=423]="Locked",s[s.FailedDependency=424]="FailedDependency",s[s.TooEarly=425]="TooEarly",s[s.UpgradeRequired=426]="UpgradeRequired",s[s.PreconditionRequired=428]="PreconditionRequired",s[s.TooManyRequests=429]="TooManyRequests",s[s.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",s[s.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported",s[s.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",s[s.InsufficientStorage=507]="InsufficientStorage",s[s.LoopDetected=508]="LoopDetected",s[s.NotExtended=510]="NotExtended",s[s.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",s}(q9||{});var qv=new c1("");var P9="b",D9="h",O9="s",N9="st",F9="u",j9="rt",We=new c1(""),$v=["GET","HEAD"];function Gv(s,t){let u=I(We),{isCacheActive:e}=u,o=e9(u,["isCacheActive"]),{transferCache:c,method:r}=s;if(!e||r==="POST"&&!o.includePostRequests&&!c||r!=="POST"&&!$v.includes(r)||c===!1||o.filter?.(s)===!1)return t(s);let n=I(De),a=Kv(s),h=n.get(a,null),v=o.includeHeaders;if(typeof c=="object"&&c.includeHeaders&&(v=c.includeHeaders),h){let{[P9]:z,[j9]:y,[D9]:A,[O9]:R,[N9]:B,[F9]:O}=h,Z=z;switch(y){case"arraybuffer":Z=new TextEncoder().encode(z).buffer;break;case"blob":Z=new Blob([z]);break}let P=new Ke(A);return $(new Qe({body:Z,headers:P,status:R,statusText:B,url:O}))}let d=Zt(I(J2));return t(s).pipe(O1(z=>{z instanceof Qe&&d&&n.set(a,{[P9]:z.body,[D9]:Wv(z.headers,v),[O9]:z.status,[N9]:z.statusText,[F9]:z.url||"",[j9]:s.responseType})}))}function Wv(s,t){if(!t)return{};let e={};for(let o of t){let c=s.getAll(o);c!==null&&(e[o]=c)}return e}function Z9(s){return[...s.keys()].sort().map(t=>`${t}=${s.getAll(t)}`).join("&")}function Kv(s){let{params:t,method:e,responseType:o,url:c}=s,r=Z9(t),n=s.serializeBody();n instanceof URLSearchParams?n=Z9(n):typeof n!="string"&&(n="");let a=[e,o,c,n,r].join("|"),h=Qv(a);return h}function Qv(s){let t=0;for(let e of s)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function $9(s){return[{provide:We,useFactory:()=>(je("NgHttpTransferCache"),k({isCacheActive:!0},s))},{provide:qv,useValue:Gv,multi:!0,deps:[De,We]},{provide:Nt,multi:!0,useFactory:()=>{let t=I(Ft),e=I(We);return()=>{C9(t).then(()=>{e.isCacheActive=!1})}}}]}var Eo=class extends B9{constructor(){super(...arguments),this.supportsDOMEvents=!0}},To=class s extends Eo{static makeCurrent(){y9(new s)}onAndCancel(t,e,o){return t.addEventListener(e,o),()=>{t.removeEventListener(e,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Jv();return e==null?null:Xv(e)}resetBaseElement(){Ut=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return So(document.cookie,t)}},Ut=null;function Jv(){return Ut=Ut||document.querySelector("base"),Ut?Ut.getAttribute("href"):null}function Xv(s){return new URL(s,document.baseURI).pathname}var tg=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})(),Io=new c1(""),K9=(()=>{let t=class t{constructor(o,c){this._zone=c,this._eventNameToPlugin=new Map,o.forEach(r=>{r.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,c,r){return this._findPluginFor(c).addEventListener(o,c,r)}getZone(){return this._zone}_findPluginFor(o){let c=this._eventNameToPlugin.get(o);if(c)return c;if(c=this._plugins.find(n=>n.supports(o)),!c)throw new C1(5101,!1);return this._eventNameToPlugin.set(o,c),c}};t.\u0275fac=function(c){return new(c||t)(Y(Io),Y(I1))},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})(),Ye=class{constructor(t){this._doc=t}},bo="ng-app-id",Q9=(()=>{let t=class t{constructor(o,c,r,n={}){this.doc=o,this.appId=c,this.nonce=r,this.platformId=n,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zt(n),this.resetHostNodes()}addStyles(o){for(let c of o)this.changeUsageCount(c,1)===1&&this.onStyleAdded(c)}removeStyles(o){for(let c of o)this.changeUsageCount(c,-1)<=0&&this.onStyleRemoved(c)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(c=>c.remove()),o.clear());for(let c of this.getAllStyles())this.onStyleRemoved(c);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let c of this.getAllStyles())this.addStyleToHost(o,c)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let c of this.hostNodes)this.addStyleToHost(c,o)}onStyleRemoved(o){let c=this.styleRef;c.get(o)?.elements?.forEach(r=>r.remove()),c.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${bo}="${this.appId}"]`);if(o?.length){let c=new Map;return o.forEach(r=>{r.textContent!=null&&c.set(r.textContent,r)}),c}return null}changeUsageCount(o,c){let r=this.styleRef;if(r.has(o)){let n=r.get(o);return n.usage+=c,n.usage}return r.set(o,{usage:c,elements:[]}),c}getStyleElement(o,c){let r=this.styleNodesInDOM,n=r?.get(c);if(n?.parentNode===o)return r.delete(c),n.removeAttribute(bo),n;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=c,this.platformIsServer&&a.setAttribute(bo,this.appId),o.appendChild(a),a}}addStyleToHost(o,c){let r=this.getStyleElement(o,c),n=this.styleRef,a=n.get(c)?.elements;a?a.push(r):n.set(c,{elements:[r],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};t.\u0275fac=function(c){return new(c||t)(Y(N1),Y(Pe),Y(Dt,8),Y(J2))},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})(),ko={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},No=/%COMP%/g,Y9="%COMP%",eg=`_nghost-${Y9}`,sg=`_ngcontent-${Y9}`,og=!0,cg=new c1("",{providedIn:"root",factory:()=>og});function rg(s){return sg.replace(No,s)}function ng(s){return eg.replace(No,s)}function J9(s,t){return t.map(e=>e.replace(No,s))}var Je=(()=>{let t=class t{constructor(o,c,r,n,a,h,v,d=null){this.eventManager=o,this.sharedStylesHost=c,this.appId=r,this.removeStylesOnCompDestroy=n,this.doc=a,this.platformId=h,this.ngZone=v,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Zt(h),this.defaultRenderer=new qt(o,a,v,this.platformIsServer)}createRenderer(o,c){if(!o||!c)return this.defaultRenderer;this.platformIsServer&&c.encapsulation===Pt.ShadowDom&&(c=h1(k({},c),{encapsulation:Pt.Emulated}));let r=this.getOrCreateRenderer(o,c);return r instanceof Xe?r.applyToHost(o):r instanceof $t&&r.applyStyles(),r}getOrCreateRenderer(o,c){let r=this.rendererByCompId,n=r.get(c.id);if(!n){let a=this.doc,h=this.ngZone,v=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,z=this.platformIsServer;switch(c.encapsulation){case Pt.Emulated:n=new Xe(v,d,c,this.appId,u,a,h,z);break;case Pt.ShadowDom:return new Po(v,d,o,c,a,h,this.nonce,z);default:n=new $t(v,d,c,u,a,h,z);break}r.set(c.id,n)}return n}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(c){return new(c||t)(Y(K9),Y(Q9),Y(Pe),Y(cg),Y(N1),Y(J2),Y(I1),Y(Dt))},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})(),qt=class{constructor(t,e,o,c){this.eventManager=t,this.doc=e,this.ngZone=o,this.platformIsServer=c,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(ko[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(G9(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(G9(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o=typeof t=="string"?this.doc.querySelector(t):t;if(!o)throw new C1(-5104,!1);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,c){if(c){e=c+":"+e;let r=ko[c];r?t.setAttributeNS(r,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){let c=ko[o];c?t.removeAttributeNS(c,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,c){c&(Ot.DashCase|Ot.Important)?t.style.setProperty(e,o,c&Ot.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&Ot.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t!=null&&(t[e]=o)}setValue(t,e){t.nodeValue=e}listen(t,e,o){if(typeof t=="string"&&(t=_o().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(o))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function G9(s){return s.tagName==="TEMPLATE"&&s.content!==void 0}var Po=class extends qt{constructor(t,e,o,c,r,n,a,h){super(t,r,n,h),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let v=J9(c.id,c.styles);for(let d of v){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$t=class extends qt{constructor(t,e,o,c,r,n,a,h){super(t,r,n,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=c,this.styles=h?J9(h,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xe=class extends $t{constructor(t,e,o,c,r,n,a,h){let v=c+"-"+o.id;super(t,e,o,r,n,a,h,v),this.contentAttr=rg(v),this.hostAttr=ng(v)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}},lg=(()=>{let t=class t extends Ye{constructor(o){super(o)}supports(o){return!0}addEventListener(o,c,r){return o.addEventListener(c,r,!1),()=>this.removeEventListener(o,c,r)}removeEventListener(o,c,r){return o.removeEventListener(c,r)}};t.\u0275fac=function(c){return new(c||t)(Y(N1))},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})(),W9=["alt","control","meta","shift"],ag={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ig={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey},hg=(()=>{let t=class t extends Ye{constructor(o){super(o)}supports(o){return t.parseEventName(o)!=null}addEventListener(o,c,r){let n=t.parseEventName(c),a=t.eventCallback(n.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_o().onAndCancel(o,n.domEventName,a))}static parseEventName(o){let c=o.toLowerCase().split("."),r=c.shift();if(c.length===0||!(r==="keydown"||r==="keyup"))return null;let n=t._normalizeKey(c.pop()),a="",h=c.indexOf("code");if(h>-1&&(c.splice(h,1),a="code."),W9.forEach(d=>{let u=c.indexOf(d);u>-1&&(c.splice(u,1),a+=d+".")}),a+=n,c.length!=0||n.length===0)return null;let v={};return v.domEventName=r,v.fullKey=a,v}static matchEventFullKeyCode(o,c){let r=ag[o.key]||o.key,n="";return c.indexOf("code.")>-1&&(r=o.code,n="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),W9.forEach(a=>{if(a!==r){let h=ig[a];h(o)&&(n+=a+".")}}),n+=r,n===c)}static eventCallback(o,c,r){return n=>{t.matchEventFullKeyCode(n,o)&&r.runGuarded(()=>c(n))}}static _normalizeKey(o){return o==="esc"?"escape":o}};t.\u0275fac=function(c){return new(c||t)(Y(N1))},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})();function X9(s,t){return V9(k({rootComponent:s},vg(t)))}function vg(s){return{appProviders:[...pg,...s?.providers??[]],platformProviders:ug}}function gg(){To.makeCurrent()}function dg(){return new zo}function wg(){return m9(document),document}var ug=[{provide:J2,useValue:k9},{provide:f9,useValue:gg,multi:!0},{provide:N1,useFactory:wg,deps:[]}];var pg=[{provide:p9,useValue:"root"},{provide:zo,useFactory:dg,deps:[]},{provide:Io,useClass:lg,multi:!0,deps:[N1,I1,J2]},{provide:Io,useClass:hg,multi:!0,deps:[N1]},Je,Q9,K9,{provide:Ne,useExisting:Je},{provide:I9,useClass:tg,deps:[]},[]];var ta=(()=>{let t=class t{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};t.\u0275fac=function(c){return new(c||t)(Y(N1))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var Do=function(s){return s[s.NoHttpTransferCache=0]="NoHttpTransferCache",s[s.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",s}(Do||{});function ea(...s){let t=[],e=new Set,o=e.has(Do.HttpTransferCacheOptions);for(let{\u0275providers:c,\u0275kind:r}of s)e.add(r),c.length&&t.push(c);return x0([[],H9(),e.has(Do.NoHttpTransferCache)||o?[]:$9({}),t])}var t1="primary",a4=Symbol("RouteTitle"),qo=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function y5(s){return new qo(s)}function fg(s,t,e){let o=e.path.split("/");if(o.length>s.length||e.pathMatch==="full"&&(t.hasChildren()||o.length<s.length))return null;let c={};for(let r=0;r<o.length;r++){let n=o[r],a=s[r];if(n.startsWith(":"))c[n.substring(1)]=a;else if(n!==a.path)return null}return{consumed:s.slice(0,o.length),posParams:c}}function zg(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;++e)if(!I2(s[e],t[e]))return!1;return!0}function I2(s,t){let e=s?$o(s):void 0,o=t?$o(t):void 0;if(!e||!o||e.length!=o.length)return!1;let c;for(let r=0;r<e.length;r++)if(c=e[r],!ga(s[c],t[c]))return!1;return!0}function $o(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function ga(s,t){if(Array.isArray(s)&&Array.isArray(t)){if(s.length!==t.length)return!1;let e=[...s].sort(),o=[...t].sort();return e.every((c,r)=>o[r]===c)}else return s===t}function da(s){return s.length>0?s[s.length-1]:null}function L0(s){return Se(s)?s:qe(s)?X1(Promise.resolve(s)):$(s)}var xg={exact:ua,subset:pa},wa={exact:Mg,subset:Cg,ignored:()=>!0};function sa(s,t,e){return xg[e.paths](s.root,t.root,e.matrixParams)&&wa[e.queryParams](s.queryParams,t.queryParams)&&!(e.fragment==="exact"&&s.fragment!==t.fragment)}function Mg(s,t){return I2(s,t)}function ua(s,t,e){if(!G0(s.segments,t.segments)||!ss(s.segments,t.segments,e)||s.numberOfChildren!==t.numberOfChildren)return!1;for(let o in t.children)if(!s.children[o]||!ua(s.children[o],t.children[o],e))return!1;return!0}function Cg(s,t){return Object.keys(t).length<=Object.keys(s).length&&Object.keys(t).every(e=>ga(s[e],t[e]))}function pa(s,t,e){return ma(s,t,t.segments,e)}function ma(s,t,e,o){if(s.segments.length>e.length){let c=s.segments.slice(0,e.length);return!(!G0(c,e)||t.hasChildren()||!ss(c,e,o))}else if(s.segments.length===e.length){if(!G0(s.segments,e)||!ss(s.segments,e,o))return!1;for(let c in t.children)if(!s.children[c]||!pa(s.children[c],t.children[c],o))return!1;return!0}else{let c=e.slice(0,s.segments.length),r=e.slice(s.segments.length);return!G0(s.segments,c)||!ss(s.segments,c,o)||!s.children[t1]?!1:ma(s.children[t1],t,r,o)}}function ss(s,t,e){return t.every((o,c)=>wa[e](s[c].parameters,o.parameters))}var C0=class{constructor(t=new p1([],{}),e={},o=null){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap??=y5(this.queryParams),this._queryParamMap}toString(){return Lg.serialize(this)}},p1=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return os(this)}},$0=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=y5(this.parameters),this._parameterMap}toString(){return za(this)}};function Vg(s,t){return G0(s,t)&&s.every((e,o)=>I2(e.parameters,t[o].parameters))}function G0(s,t){return s.length!==t.length?!1:s.every((e,o)=>e.path===t[o].path)}function Hg(s,t){let e=[];return Object.entries(s.children).forEach(([o,c])=>{o===t1&&(e=e.concat(t(c,o)))}),Object.entries(s.children).forEach(([o,c])=>{o!==t1&&(e=e.concat(t(c,o)))}),e}var i4=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:()=>new Xt,providedIn:"root"});let s=t;return s})(),Xt=class{parse(t){let e=new Wo(t);return new C0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Gt(t.root,!0)}`,o=_g(t.queryParams),c=typeof t.fragment=="string"?`#${yg(t.fragment)}`:"";return`${e}${o}${c}`}},Lg=new Xt;function os(s){return s.segments.map(t=>za(t)).join("/")}function Gt(s,t){if(!s.hasChildren())return os(s);if(t){let e=s.children[t1]?Gt(s.children[t1],!1):"",o=[];return Object.entries(s.children).forEach(([c,r])=>{c!==t1&&o.push(`${c}:${Gt(r,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}else{let e=Hg(s,(o,c)=>c===t1?[Gt(s.children[t1],!1)]:[`${c}:${Gt(o,!1)}`]);return Object.keys(s.children).length===1&&s.children[t1]!=null?`${os(s)}/${e[0]}`:`${os(s)}/(${e.join("//")})`}}function fa(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ts(s){return fa(s).replace(/%3B/gi,";")}function yg(s){return encodeURI(s)}function Go(s){return fa(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cs(s){return decodeURIComponent(s)}function oa(s){return cs(s.replace(/\+/g,"%20"))}function za(s){return`${Go(s.path)}${Bg(s.parameters)}`}function Bg(s){return Object.entries(s).map(([t,e])=>`;${Go(t)}=${Go(e)}`).join("")}function _g(s){let t=Object.entries(s).map(([e,o])=>Array.isArray(o)?o.map(c=>`${ts(e)}=${ts(c)}`).join("&"):`${ts(e)}=${ts(o)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Ag=/^[^\/()?;#]+/;function Fo(s){let t=s.match(Ag);return t?t[0]:""}var Sg=/^[^\/()?;=#]+/;function Rg(s){let t=s.match(Sg);return t?t[0]:""}var bg=/^[^=?&#]+/;function kg(s){let t=s.match(bg);return t?t[0]:""}var Eg=/^[^&#]+/;function Tg(s){let t=s.match(Eg);return t?t[0]:""}var Wo=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new p1([],{}):new p1([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[t1]=new p1(t,e)),o}parseSegment(){let t=Fo(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new C1(4009,!1);return this.capture(t),new $0(cs(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Rg(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let c=Fo(this.remaining);c&&(o=c,this.capture(o))}t[cs(e)]=cs(o)}parseQueryParam(t){let e=kg(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){let n=Tg(this.remaining);n&&(o=n,this.capture(o))}let c=oa(e),r=oa(o);if(t.hasOwnProperty(c)){let n=t[c];Array.isArray(n)||(n=[n],t[c]=n),n.push(r)}else t[c]=r}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Fo(this.remaining),c=this.remaining[o.length];if(c!=="/"&&c!==")"&&c!==";")throw new C1(4010,!1);let r;o.indexOf(":")>-1?(r=o.slice(0,o.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=t1);let n=this.parseChildren();e[r]=Object.keys(n).length===1?n[t1]:new p1([],n),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new C1(4011,!1)}};function xa(s){return s.segments.length>0?new p1([],{[t1]:s}):s}function Ma(s){let t={};for(let[o,c]of Object.entries(s.children)){let r=Ma(c);if(o===t1&&r.segments.length===0&&r.hasChildren())for(let[n,a]of Object.entries(r.children))t[n]=a;else(r.segments.length>0||r.hasChildren())&&(t[o]=r)}let e=new p1(s.segments,t);return Ig(e)}function Ig(s){if(s.numberOfChildren===1&&s.children[t1]){let t=s.children[t1];return new p1(s.segments.concat(t.segments),t.children)}return s}function B5(s){return s instanceof C0}function Pg(s,t,e=null,o=null){let c=Ca(s);return Va(c,t,e,o)}function Ca(s){let t;function e(r){let n={};for(let h of r.children){let v=e(h);n[h.outlet]=v}let a=new p1(r.url,n);return r===s&&(t=a),a}let o=e(s.root),c=xa(o);return t??c}function Va(s,t,e,o){let c=s;for(;c.parent;)c=c.parent;if(t.length===0)return jo(c,c,c,e,o);let r=Dg(t);if(r.toRoot())return jo(c,c,new p1([],{}),e,o);let n=Og(r,c,s),a=n.processChildren?Qt(n.segmentGroup,n.index,r.commands):La(n.segmentGroup,n.index,r.commands);return jo(c,n.segmentGroup,a,e,o)}function rs(s){return typeof s=="object"&&s!=null&&!s.outlets&&!s.segmentPath}function t4(s){return typeof s=="object"&&s!=null&&s.outlets}function jo(s,t,e,o,c){let r={};o&&Object.entries(o).forEach(([h,v])=>{r[h]=Array.isArray(v)?v.map(d=>`${d}`):`${v}`});let n;s===t?n=e:n=Ha(s,t,e);let a=xa(Ma(n));return new C0(a,r,c)}function Ha(s,t,e){let o={};return Object.entries(s.children).forEach(([c,r])=>{r===t?o[c]=e:o[c]=Ha(r,t,e)}),new p1(s.segments,o)}var ns=class{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&rs(o[0]))throw new C1(4003,!1);let c=o.find(t4);if(c&&c!==da(o))throw new C1(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Dg(s){if(typeof s[0]=="string"&&s.length===1&&s[0]==="/")return new ns(!0,0,s);let t=0,e=!1,o=s.reduce((c,r,n)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([h,v])=>{a[h]=typeof v=="string"?v.split("/"):v}),[...c,{outlets:a}]}if(r.segmentPath)return[...c,r.segmentPath]}return typeof r!="string"?[...c,r]:n===0?(r.split("/").forEach((a,h)=>{h==0&&a==="."||(h==0&&a===""?e=!0:a===".."?t++:a!=""&&c.push(a))}),c):[...c,r]},[]);return new ns(e,t,o)}var H5=class{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}};function Og(s,t,e){if(s.isAbsolute)return new H5(t,!0,0);if(!e)return new H5(t,!1,NaN);if(e.parent===null)return new H5(e,!0,0);let o=rs(s.commands[0])?0:1,c=e.segments.length-1+o;return Ng(e,c,s.numberOfDoubleDots)}function Ng(s,t,e){let o=s,c=t,r=e;for(;r>c;){if(r-=c,o=o.parent,!o)throw new C1(4005,!1);c=o.segments.length}return new H5(o,!1,c-r)}function Fg(s){return t4(s[0])?s[0].outlets:{[t1]:s}}function La(s,t,e){if(s??=new p1([],{}),s.segments.length===0&&s.hasChildren())return Qt(s,t,e);let o=jg(s,t,e),c=e.slice(o.commandIndex);if(o.match&&o.pathIndex<s.segments.length){let r=new p1(s.segments.slice(0,o.pathIndex),{});return r.children[t1]=new p1(s.segments.slice(o.pathIndex),s.children),Qt(r,0,c)}else return o.match&&c.length===0?new p1(s.segments,{}):o.match&&!s.hasChildren()?Ko(s,t,e):o.match?Qt(s,0,c):Ko(s,t,e)}function Qt(s,t,e){if(e.length===0)return new p1(s.segments,{});{let o=Fg(e),c={};if(Object.keys(o).some(r=>r!==t1)&&s.children[t1]&&s.numberOfChildren===1&&s.children[t1].segments.length===0){let r=Qt(s.children[t1],t,e);return new p1(s.segments,r.children)}return Object.entries(o).forEach(([r,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(c[r]=La(s.children[r],t,n))}),Object.entries(s.children).forEach(([r,n])=>{o[r]===void 0&&(c[r]=n)}),new p1(s.segments,c)}}function jg(s,t,e){let o=0,c=t,r={match:!1,pathIndex:0,commandIndex:0};for(;c<s.segments.length;){if(o>=e.length)return r;let n=s.segments[c],a=e[o];if(t4(a))break;let h=`${a}`,v=o<e.length-1?e[o+1]:null;if(c>0&&h===void 0)break;if(h&&v&&typeof v=="object"&&v.outlets===void 0){if(!ra(h,v,n))return r;o+=2}else{if(!ra(h,{},n))return r;o++}c++}return{match:!0,pathIndex:c,commandIndex:o}}function Ko(s,t,e){let o=s.segments.slice(0,t),c=0;for(;c<e.length;){let r=e[c];if(t4(r)){let h=Zg(r.outlets);return new p1(o,h)}if(c===0&&rs(e[0])){let h=s.segments[t];o.push(new $0(h.path,ca(e[0]))),c++;continue}let n=t4(r)?r.outlets[t1]:`${r}`,a=c<e.length-1?e[c+1]:null;n&&a&&rs(a)?(o.push(new $0(n,ca(a))),c+=2):(o.push(new $0(n,{})),c++)}return new p1(o,{})}function Zg(s){let t={};return Object.entries(s).forEach(([e,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(t[e]=Ko(new p1([],{}),0,o))}),t}function ca(s){let t={};return Object.entries(s).forEach(([e,o])=>t[e]=`${o}`),t}function ra(s,t,e){return s==e.path&&I2(t,e.parameters)}var Yt="imperative",F1=function(s){return s[s.NavigationStart=0]="NavigationStart",s[s.NavigationEnd=1]="NavigationEnd",s[s.NavigationCancel=2]="NavigationCancel",s[s.NavigationError=3]="NavigationError",s[s.RoutesRecognized=4]="RoutesRecognized",s[s.ResolveStart=5]="ResolveStart",s[s.ResolveEnd=6]="ResolveEnd",s[s.GuardsCheckStart=7]="GuardsCheckStart",s[s.GuardsCheckEnd=8]="GuardsCheckEnd",s[s.RouteConfigLoadStart=9]="RouteConfigLoadStart",s[s.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",s[s.ChildActivationStart=11]="ChildActivationStart",s[s.ChildActivationEnd=12]="ChildActivationEnd",s[s.ActivationStart=13]="ActivationStart",s[s.ActivationEnd=14]="ActivationEnd",s[s.Scroll=15]="Scroll",s[s.NavigationSkipped=16]="NavigationSkipped",s}(F1||{}),V2=class{constructor(t,e){this.id=t,this.url=e}},_5=class extends V2{constructor(t,e,o="imperative",c=null){super(t,e),this.type=F1.NavigationStart,this.navigationTrigger=o,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},e0=class extends V2{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o,this.type=F1.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},u2=function(s){return s[s.Redirect=0]="Redirect",s[s.SupersededByNewNavigation=1]="SupersededByNewNavigation",s[s.NoDataFromResolver=2]="NoDataFromResolver",s[s.GuardRejected=3]="GuardRejected",s}(u2||{}),ls=function(s){return s[s.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",s[s.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",s}(ls||{}),V0=class extends V2{constructor(t,e,o,c){super(t,e),this.reason=o,this.code=c,this.type=F1.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},H0=class extends V2{constructor(t,e,o,c){super(t,e),this.reason=o,this.code=c,this.type=F1.NavigationSkipped}},e4=class extends V2{constructor(t,e,o,c){super(t,e),this.error=o,this.target=c,this.type=F1.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},as=class extends V2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qo=class extends V2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yo=class extends V2{constructor(t,e,o,c,r){super(t,e),this.urlAfterRedirects=o,this.state=c,this.shouldActivate=r,this.type=F1.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jo=class extends V2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xo=class extends V2{constructor(t,e,o,c){super(t,e),this.urlAfterRedirects=o,this.state=c,this.type=F1.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tc=class{constructor(t){this.route=t,this.type=F1.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ec=class{constructor(t){this.route=t,this.type=F1.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sc=class{constructor(t){this.snapshot=t,this.type=F1.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oc=class{constructor(t){this.snapshot=t,this.type=F1.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cc=class{constructor(t){this.snapshot=t,this.type=F1.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rc=class{constructor(t){this.snapshot=t,this.type=F1.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},is=class{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o,this.type=F1.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},s4=class{},o4=class{constructor(t){this.url=t}};var nc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new h4,this.attachRef=null}},h4=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(o,c){let r=this.getOrCreateContext(o);r.outlet=c,this.contexts.set(o,r)}onChildOutletDestroyed(o){let c=this.getContext(o);c&&(c.outlet=null,c.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let c=this.getContext(o);return c||(c=new nc,this.contexts.set(o,c)),c}getContext(o){return this.contexts.get(o)||null}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),hs=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=lc(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){let e=lc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=ac(t,this._root);return e.length<2?[]:e[e.length-2].children.map(c=>c.value).filter(c=>c!==t)}pathFromRoot(t){return ac(t,this._root).map(e=>e.value)}};function lc(s,t){if(s===t.value)return t;for(let e of t.children){let o=lc(s,e);if(o)return o}return null}function ac(s,t){if(s===t.value)return[t];for(let e of t.children){let o=ac(s,e);if(o.length)return o.unshift(t),o}return[]}var w2=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function V5(s){let t={};return s&&s.children.forEach(e=>t[e.value.outlet]=e),t}var vs=class extends hs{constructor(t,e){super(t),this.snapshot=e,fc(this,t)}toString(){return this.snapshot.toString()}};function ya(s){let t=Ug(s),e=new q1([new $0("",{})]),o=new q1({}),c=new q1({}),r=new q1({}),n=new q1(""),a=new s0(e,o,r,n,c,t1,s,t.root);return a.snapshot=t.root,new vs(new w2(a,[]),t)}function Ug(s){let t={},e={},o={},c="",r=new c4([],t,o,c,e,t1,s,null,{});return new gs("",new w2(r,[]))}var s0=class{constructor(t,e,o,c,r,n,a,h){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=o,this.fragmentSubject=c,this.dataSubject=r,this.outlet=n,this.component=a,this._futureSnapshot=h,this.title=this.dataSubject?.pipe(v1(v=>v[a4]))??$(void 0),this.url=t,this.params=e,this.queryParams=o,this.fragment=c,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(v1(t=>y5(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(v1(t=>y5(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mc(s,t,e="emptyOnly"){let o,{routeConfig:c}=s;return t!==null&&(e==="always"||c?.path===""||!t.component&&!t.routeConfig?.loadComponent)?o={params:k(k({},t.params),s.params),data:k(k({},t.data),s.data),resolve:k(k(k(k({},s.data),t.data),c?.data),s._resolvedData)}:o={params:k({},s.params),data:k({},s.data),resolve:k(k({},s.data),s._resolvedData??{})},c&&_a(c)&&(o.resolve[a4]=c.title),o}var c4=class{get title(){return this.data?.[a4]}constructor(t,e,o,c,r,n,a,h,v){this.url=t,this.params=e,this.queryParams=o,this.fragment=c,this.data=r,this.outlet=n,this.component=a,this.routeConfig=h,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=y5(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=y5(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(o=>o.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},gs=class extends hs{constructor(t,e){super(e),this.url=t,fc(this,e)}toString(){return Ba(this._root)}};function fc(s,t){t.value._routerState=s,t.children.forEach(e=>fc(s,e))}function Ba(s){let t=s.children.length>0?` { ${s.children.map(Ba).join(", ")} } `:"";return`${s.value}${t}`}function Zo(s){if(s.snapshot){let t=s.snapshot,e=s._futureSnapshot;s.snapshot=e,I2(t.queryParams,e.queryParams)||s.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&s.fragmentSubject.next(e.fragment),I2(t.params,e.params)||s.paramsSubject.next(e.params),zg(t.url,e.url)||s.urlSubject.next(e.url),I2(t.data,e.data)||s.dataSubject.next(e.data)}else s.snapshot=s._futureSnapshot,s.dataSubject.next(s._futureSnapshot.data)}function ic(s,t){let e=I2(s.params,t.params)&&Vg(s.url,t.url),o=!s.parent!=!t.parent;return e&&!o&&(!s.parent||ic(s.parent,t.parent))}function _a(s){return typeof s.title=="string"||s.title===null}var v4=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=t1,this.activateEvents=new T1,this.deactivateEvents=new T1,this.attachEvents=new T1,this.detachEvents=new T1,this.parentContexts=I(h4),this.location=I(x9),this.changeDetector=I(t0),this.environmentInjector=I(m5),this.inputBinder=I(fs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:c,previousValue:r}=o.name;if(c)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C1(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C1(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C1(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,c){this.activated=o,this._activatedRoute=c,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,c){if(this.isActivated)throw new C1(4013,!1);this._activatedRoute=o;let r=this.location,a=o.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,v=new hc(o,h,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:v,environmentInjector:c??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=A2({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f5]});let s=t;return s})(),hc=class s{__ngOutletInjector(t){return new s(this.route,this.childContexts,t)}constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===s0?this.route:t===h4?this.childContexts:this.parent.get(t,e)}},fs=new c1(""),na=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){let{activatedRoute:c}=o,r=u5([c.queryParams,c.params,c.data]).pipe(z2(([n,a,h],v)=>(h=k(k(k({},n),a),h),v===0?$(h):Promise.resolve(h)))).subscribe(n=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==c||c.component===null){this.unsubscribeFromRouteData(o);return}let a=L9(c.component);if(!a){this.unsubscribeFromRouteData(o);return}for(let{templateName:h}of a.inputs)o.activatedComponentRef.setInput(h,n[h])});this.outletDataSubscriptions.set(o,r)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})();function qg(s,t,e){let o=r4(s,t._root,e?e._root:void 0);return new vs(o,t)}function r4(s,t,e){if(e&&s.shouldReuseRoute(t.value,e.value.snapshot)){let o=e.value;o._futureSnapshot=t.value;let c=$g(s,t,e);return new w2(o,c)}else{if(s.shouldAttach(t.value)){let r=s.retrieve(t.value);if(r!==null){let n=r.route;return n.value._futureSnapshot=t.value,n.children=t.children.map(a=>r4(s,a)),n}}let o=Gg(t.value),c=t.children.map(r=>r4(s,r));return new w2(o,c)}}function $g(s,t,e){return t.children.map(o=>{for(let c of e.children)if(s.shouldReuseRoute(o.value,c.value.snapshot))return r4(s,o,c);return r4(s,o)})}function Gg(s){return new s0(new q1(s.url),new q1(s.params),new q1(s.queryParams),new q1(s.fragment),new q1(s.data),s.outlet,s.component,s)}var Aa="ngNavigationCancelingError";function Sa(s,t){let{redirectTo:e,navigationBehaviorOptions:o}=B5(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,c=Ra(!1,u2.Redirect);return c.url=e,c.navigationBehaviorOptions=o,c}function Ra(s,t){let e=new Error(`NavigationCancelingError: ${s||""}`);return e[Aa]=!0,e.cancellationCode=t,e}function Wg(s){return ba(s)&&B5(s.url)}function ba(s){return!!s&&s[Aa]}var Kg=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=w1({type:t,selectors:[["ng-component"]],standalone:!0,features:[u1],decls:1,vars:0,template:function(c,r){c&1&&H1(0,"router-outlet")},dependencies:[v4],encapsulation:2});let s=t;return s})();function Qg(s,t){return s.providers&&!s._injector&&(s._injector=Vo(s.providers,t,`Route: ${s.path}`)),s._injector??t}function zc(s){let t=s.children&&s.children.map(zc),e=t?h1(k({},s),{children:t}):k({},s);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==t1&&(e.component=Kg),e}function P2(s){return s.outlet||t1}function Yg(s,t){let e=s.filter(o=>P2(o)===t);return e.push(...s.filter(o=>P2(o)!==t)),e}function g4(s){if(!s)return null;if(s.routeConfig?._injector)return s.routeConfig._injector;for(let t=s.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Jg=(s,t,e,o)=>v1(c=>(new vc(t,c.targetRouterState,c.currentRouterState,e,o).activate(s),c)),vc=class{constructor(t,e,o,c,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=c,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),Zo(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){let c=V5(e);t.children.forEach(r=>{let n=r.value.outlet;this.deactivateRoutes(r,c[n],o),delete c[n]}),Object.values(c).forEach(r=>{this.deactivateRouteAndItsChildren(r,o)})}deactivateRoutes(t,e,o){let c=t.value,r=e?e.value:null;if(c===r)if(c.component){let n=o.getContext(c.outlet);n&&this.deactivateChildRoutes(t,e,n.children)}else this.deactivateChildRoutes(t,e,o);else r&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let o=e.getContext(t.value.outlet),c=o&&t.value.component?o.children:e,r=V5(t);for(let n of Object.values(r))this.deactivateRouteAndItsChildren(n,c);if(o&&o.outlet){let n=o.outlet.detach(),a=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:n,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let o=e.getContext(t.value.outlet),c=o&&t.value.component?o.children:e,r=V5(t);for(let n of Object.values(r))this.deactivateRouteAndItsChildren(n,c);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(t,e,o){let c=V5(e);t.children.forEach(r=>{this.activateRoutes(r,c[r.value.outlet],o),this.forwardEvent(new rc(r.value.snapshot))}),t.children.length&&this.forwardEvent(new oc(t.value.snapshot))}activateRoutes(t,e,o){let c=t.value,r=e?e.value:null;if(Zo(c),c===r)if(c.component){let n=o.getOrCreateContext(c.outlet);this.activateChildRoutes(t,e,n.children)}else this.activateChildRoutes(t,e,o);else if(c.component){let n=o.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){let a=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),n.children.onOutletReAttached(a.contexts),n.attachRef=a.componentRef,n.route=a.route.value,n.outlet&&n.outlet.attach(a.componentRef,a.route.value),Zo(a.route.value),this.activateChildRoutes(t,null,n.children)}else{let a=g4(c.snapshot);n.attachRef=null,n.route=c,n.injector=a,n.outlet&&n.outlet.activateWith(c,n.injector),this.activateChildRoutes(t,null,n.children)}}else this.activateChildRoutes(t,null,o)}},ds=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},L5=class{constructor(t,e){this.component=t,this.route=e}};function Xg(s,t,e){let o=s._root,c=t?t._root:null;return Wt(o,c,e,[o.value])}function td(s){let t=s.routeConfig?s.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:s,guards:t}}function S5(s,t){let e=Symbol(),o=t.get(s,e);return o===e?typeof s=="function"&&!u9(s)?s:t.get(s):o}function Wt(s,t,e,o,c={canDeactivateChecks:[],canActivateChecks:[]}){let r=V5(t);return s.children.forEach(n=>{ed(n,r[n.value.outlet],e,o.concat([n.value]),c),delete r[n.value.outlet]}),Object.entries(r).forEach(([n,a])=>Jt(a,e.getContext(n),c)),c}function ed(s,t,e,o,c={canDeactivateChecks:[],canActivateChecks:[]}){let r=s.value,n=t?t.value:null,a=e?e.getContext(s.value.outlet):null;if(n&&r.routeConfig===n.routeConfig){let h=sd(n,r,r.routeConfig.runGuardsAndResolvers);h?c.canActivateChecks.push(new ds(o)):(r.data=n.data,r._resolvedData=n._resolvedData),r.component?Wt(s,t,a?a.children:null,o,c):Wt(s,t,e,o,c),h&&a&&a.outlet&&a.outlet.isActivated&&c.canDeactivateChecks.push(new L5(a.outlet.component,n))}else n&&Jt(t,a,c),c.canActivateChecks.push(new ds(o)),r.component?Wt(s,null,a?a.children:null,o,c):Wt(s,null,e,o,c);return c}function sd(s,t,e){if(typeof e=="function")return e(s,t);switch(e){case"pathParamsChange":return!G0(s.url,t.url);case"pathParamsOrQueryParamsChange":return!G0(s.url,t.url)||!I2(s.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ic(s,t)||!I2(s.queryParams,t.queryParams);case"paramsChange":default:return!ic(s,t)}}function Jt(s,t,e){let o=V5(s),c=s.value;Object.entries(o).forEach(([r,n])=>{c.component?t?Jt(n,t.children.getContext(r),e):Jt(n,null,e):Jt(n,t,e)}),c.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new L5(t.outlet.component,c)):e.canDeactivateChecks.push(new L5(null,c)):e.canDeactivateChecks.push(new L5(null,c))}function d4(s){return typeof s=="function"}function od(s){return typeof s=="boolean"}function cd(s){return s&&d4(s.canLoad)}function rd(s){return s&&d4(s.canActivate)}function nd(s){return s&&d4(s.canActivateChild)}function ld(s){return s&&d4(s.canDeactivate)}function ad(s){return s&&d4(s.canMatch)}function ka(s){return s instanceof l9||s?.name==="EmptyError"}var es=Symbol("INITIAL_VALUE");function A5(){return z2(s=>u5(s.map(t=>t.pipe(f0(1),ke(es)))).pipe(v1(t=>{for(let e of t)if(e!==!0){if(e===es)return es;if(e===!1||e instanceof C0)return e}return!0}),m0(t=>t!==es),f0(1)))}function id(s,t){return v2(e=>{let{targetSnapshot:o,currentSnapshot:c,guards:{canActivateChecks:r,canDeactivateChecks:n}}=e;return n.length===0&&r.length===0?$(h1(k({},e),{guardsResult:!0})):hd(n,o,c,s).pipe(v2(a=>a&&od(a)?vd(o,r,s,t):$(a)),v1(a=>h1(k({},e),{guardsResult:a})))})}function hd(s,t,e,o){return X1(s).pipe(v2(c=>pd(c.component,c.route,e,t,o)),z0(c=>c!==!0,!0))}function vd(s,t,e,o){return X1(t).pipe(j0(c=>Re(dd(c.route.parent,o),gd(c.route,o),ud(s,c.path,e),wd(s,c.route,e))),z0(c=>c!==!0,!0))}function gd(s,t){return s!==null&&t&&t(new cc(s)),$(!0)}function dd(s,t){return s!==null&&t&&t(new sc(s)),$(!0)}function wd(s,t,e){let o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||o.length===0)return $(!0);let c=o.map(r=>uo(()=>{let n=g4(t)??e,a=S5(r,n),h=rd(a)?a.canActivate(t,s):S2(n,()=>a(t,s));return L0(h).pipe(z0())}));return $(c).pipe(A5())}function ud(s,t,e){let o=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(n=>td(n)).filter(n=>n!==null).map(n=>uo(()=>{let a=n.guards.map(h=>{let v=g4(n.node)??e,d=S5(h,v),u=nd(d)?d.canActivateChild(o,s):S2(v,()=>d(o,s));return L0(u).pipe(z0())});return $(a).pipe(A5())}));return $(r).pipe(A5())}function pd(s,t,e,o,c){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return $(!0);let n=r.map(a=>{let h=g4(t)??c,v=S5(a,h),d=ld(v)?v.canDeactivate(s,t,e,o):S2(h,()=>v(s,t,e,o));return L0(d).pipe(z0())});return $(n).pipe(A5())}function md(s,t,e,o){let c=t.canLoad;if(c===void 0||c.length===0)return $(!0);let r=c.map(n=>{let a=S5(n,s),h=cd(a)?a.canLoad(t,e):S2(s,()=>a(t,e));return L0(h)});return $(r).pipe(A5(),Ea(o))}function Ea(s){return n9(O1(t=>{if(B5(t))throw Sa(s,t)}),v1(t=>t===!0))}function fd(s,t,e,o){let c=t.canMatch;if(!c||c.length===0)return $(!0);let r=c.map(n=>{let a=S5(n,s),h=ad(a)?a.canMatch(t,e):S2(s,()=>a(t,e));return L0(h)});return $(r).pipe(A5(),Ea(o))}var n4=class{constructor(t){this.segmentGroup=t||null}},ws=class extends Error{constructor(t){super(),this.urlTree=t}};function C5(s){return Et(new n4(s))}function zd(s){return Et(new C1(4e3,!1))}function xd(s){return Et(Ra(!1,u2.GuardRejected))}var gc=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let o=[],c=e.root;for(;;){if(o=o.concat(c.segments),c.numberOfChildren===0)return $(o);if(c.numberOfChildren>1||!c.children[t1])return zd(t.redirectTo);c=c.children[t1]}}applyRedirectCommands(t,e,o){let c=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,o);if(e.startsWith("/"))throw new ws(c);return c}applyRedirectCreateUrlTree(t,e,o,c){let r=this.createSegmentGroup(t,e.root,o,c);return new C0(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let o={};return Object.entries(t).forEach(([c,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);o[c]=e[a]}else o[c]=r}),o}createSegmentGroup(t,e,o,c){let r=this.createSegments(t,e.segments,o,c),n={};return Object.entries(e.children).forEach(([a,h])=>{n[a]=this.createSegmentGroup(t,h,o,c)}),new p1(r,n)}createSegments(t,e,o,c){return e.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,c):this.findOrReturn(r,o))}findPosParam(t,e,o){let c=o[e.path.substring(1)];if(!c)throw new C1(4001,!1);return c}findOrReturn(t,e){let o=0;for(let c of e){if(c.path===t.path)return e.splice(o),c;o++}return t}},dc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Md(s,t,e,o,c){let r=xc(s,t,e);return r.matched?(o=Qg(t,o),fd(o,t,e,c).pipe(v1(n=>n===!0?r:k({},dc)))):$(r)}function xc(s,t,e){if(t.path==="**")return Cd(e);if(t.path==="")return t.pathMatch==="full"&&(s.hasChildren()||e.length>0)?k({},dc):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let c=(t.matcher||fg)(e,s,t);if(!c)return k({},dc);let r={};Object.entries(c.posParams??{}).forEach(([a,h])=>{r[a]=h.path});let n=c.consumed.length>0?k(k({},r),c.consumed[c.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:c.consumed,remainingSegments:e.slice(c.consumed.length),parameters:n,positionalParamSegments:c.posParams??{}}}function Cd(s){return{matched:!0,parameters:s.length>0?da(s).parameters:{},consumedSegments:s,remainingSegments:[],positionalParamSegments:{}}}function la(s,t,e,o){return e.length>0&&Ld(s,e,o)?{segmentGroup:new p1(t,Hd(o,new p1(e,s.children))),slicedSegments:[]}:e.length===0&&yd(s,e,o)?{segmentGroup:new p1(s.segments,Vd(s,e,o,s.children)),slicedSegments:e}:{segmentGroup:new p1(s.segments,s.children),slicedSegments:e}}function Vd(s,t,e,o){let c={};for(let r of e)if(zs(s,t,r)&&!o[P2(r)]){let n=new p1([],{});c[P2(r)]=n}return k(k({},o),c)}function Hd(s,t){let e={};e[t1]=t;for(let o of s)if(o.path===""&&P2(o)!==t1){let c=new p1([],{});e[P2(o)]=c}return e}function Ld(s,t,e){return e.some(o=>zs(s,t,o)&&P2(o)!==t1)}function yd(s,t,e){return e.some(o=>zs(s,t,o))}function zs(s,t,e){return(s.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Bd(s,t,e,o){return P2(s)!==o&&(o===t1||!zs(t,e,s))?!1:xc(t,s,e).matched}function _d(s,t,e){return t.length===0&&!s.children[e]}var wc=class{};function Ad(s,t,e,o,c,r,n="emptyOnly"){return new uc(s,t,e,o,c,n,r).recognize()}var Sd=31,uc=class{constructor(t,e,o,c,r,n,a){this.injector=t,this.configLoader=e,this.rootComponentType=o,this.config=c,this.urlTree=r,this.paramsInheritanceStrategy=n,this.urlSerializer=a,this.applyRedirects=new gc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new C1(4002,`'${t.segmentGroup}'`)}recognize(){let t=la(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(v1(e=>{let o=new c4([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,{},t1,this.rootComponentType,null,{}),c=new w2(o,e),r=new gs("",c),n=Pg(o,[],this.urlTree.queryParams,this.urlTree.fragment);return n.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(n),this.inheritParamsAndData(r._root,null),{state:r,tree:n}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,t1).pipe(p5(o=>{if(o instanceof ws)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof n4?this.noMatchError(o):o}))}inheritParamsAndData(t,e){let o=t.value,c=mc(o,e,this.paramsInheritanceStrategy);o.params=Object.freeze(c.params),o.data=Object.freeze(c.data),t.children.forEach(r=>this.inheritParamsAndData(r,o))}processSegmentGroup(t,e,o,c){return o.segments.length===0&&o.hasChildren()?this.processChildren(t,e,o):this.processSegment(t,e,o,o.segments,c,!0).pipe(v1(r=>r instanceof w2?[r]:[]))}processChildren(t,e,o){let c=[];for(let r of Object.keys(o.children))r==="primary"?c.unshift(r):c.push(r);return X1(c).pipe(j0(r=>{let n=o.children[r],a=Yg(e,r);return this.processSegmentGroup(t,a,n,r)}),g9((r,n)=>(r.push(...n),r)),po(null),v9(),v2(r=>{if(r===null)return C5(o);let n=Ta(r);return Rd(n),$(n)}))}processSegment(t,e,o,c,r,n){return X1(e).pipe(j0(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,o,c,r,n).pipe(p5(h=>{if(h instanceof n4)return $(null);throw h}))),z0(a=>!!a),p5(a=>{if(ka(a))return _d(o,c,r)?$(new wc):C5(o);throw a}))}processSegmentAgainstRoute(t,e,o,c,r,n,a){return Bd(o,c,r,n)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(t,c,o,r,n):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,c,e,o,r,n):C5(c):C5(c)}expandSegmentAgainstRouteUsingRedirect(t,e,o,c,r,n){let{matched:a,consumedSegments:h,positionalParamSegments:v,remainingSegments:d}=xc(e,c,r);if(!a)return C5(e);c.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Sd&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(h,c.redirectTo,v);return this.applyRedirects.lineralizeSegments(c,u).pipe(v2(z=>this.processSegment(t,o,e,z.concat(d),n,!1)))}matchSegmentAgainstRoute(t,e,o,c,r){let n=Md(e,o,c,t,this.urlSerializer);return o.path==="**"&&(e.children={}),n.pipe(z2(a=>a.matched?(t=o._injector??t,this.getChildConfig(t,o,c).pipe(z2(({routes:h})=>{let v=o._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:z}=a,y=new c4(d,z,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,kd(o),P2(o),o.component??o._loadedComponent??null,o,Ed(o)),{segmentGroup:A,slicedSegments:R}=la(e,d,u,h);if(R.length===0&&A.hasChildren())return this.processChildren(v,h,A).pipe(v1(O=>O===null?null:new w2(y,O)));if(h.length===0&&R.length===0)return $(new w2(y,[]));let B=P2(o)===r;return this.processSegment(v,h,A,R,B?t1:r,!0).pipe(v1(O=>new w2(y,O instanceof w2?[O]:[])))}))):C5(e)))}getChildConfig(t,e,o){return e.children?$({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?$({routes:e._loadedRoutes,injector:e._loadedInjector}):md(t,e,o,this.urlSerializer).pipe(v2(c=>c?this.configLoader.loadChildren(t,e).pipe(O1(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):xd(e))):$({routes:[],injector:t})}};function Rd(s){s.sort((t,e)=>t.value.outlet===t1?-1:e.value.outlet===t1?1:t.value.outlet.localeCompare(e.value.outlet))}function bd(s){let t=s.value.routeConfig;return t&&t.path===""}function Ta(s){let t=[],e=new Set;for(let o of s){if(!bd(o)){t.push(o);continue}let c=t.find(r=>o.value.routeConfig===r.value.routeConfig);c!==void 0?(c.children.push(...o.children),e.add(c)):t.push(o)}for(let o of e){let c=Ta(o.children);t.push(new w2(o.value,c))}return t.filter(o=>!e.has(o))}function kd(s){return s.data||{}}function Ed(s){return s.resolve||{}}function Td(s,t,e,o,c,r){return v2(n=>Ad(s,t,e,o,n.extractedUrl,c,r).pipe(v1(({state:a,tree:h})=>h1(k({},n),{targetSnapshot:a,urlAfterRedirects:h}))))}function Id(s,t){return v2(e=>{let{targetSnapshot:o,guards:{canActivateChecks:c}}=e;if(!c.length)return $(e);let r=new Set(c.map(h=>h.route)),n=new Set;for(let h of r)if(!n.has(h))for(let v of Ia(h))n.add(v);let a=0;return X1(n).pipe(j0(h=>r.has(h)?Pd(h,o,s,t):(h.data=mc(h,h.parent,s).resolve,$(void 0))),O1(()=>a++),mo(1),v2(h=>a===n.size?$(e):p0))})}function Ia(s){let t=s.children.map(e=>Ia(e)).flat();return[s,...t]}function Pd(s,t,e,o){let c=s.routeConfig,r=s._resolve;return c?.title!==void 0&&!_a(c)&&(r[a4]=c.title),Dd(r,s,t,o).pipe(v1(n=>(s._resolvedData=n,s.data=mc(s,s.parent,e).resolve,null)))}function Dd(s,t,e,o){let c=$o(s);if(c.length===0)return $({});let r={};return X1(c).pipe(v2(n=>Od(s[n],t,e,o).pipe(z0(),O1(a=>{r[n]=a}))),mo(1),h9(r),p5(n=>ka(n)?p0:Et(n)))}function Od(s,t,e,o){let c=g4(t)??o,r=S5(s,c),n=r.resolve?r.resolve(t,e):S2(c,()=>r(t,e));return L0(n)}function Uo(s){return z2(t=>{let e=s(t);return e?X1(e).pipe(v1(()=>t)):$(t)})}var Pa=(()=>{let t=class t{buildTitle(o){let c,r=o.root;for(;r!==void 0;)c=this.getResolvedTitleForRoute(r)??c,r=r.children.find(n=>n.outlet===t1);return c}getResolvedTitleForRoute(o){return o.data[a4]}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:()=>I(Nd),providedIn:"root"});let s=t;return s})(),Nd=(()=>{let t=class t extends Pa{constructor(o){super(),this.title=o}updateTitle(o){let c=this.buildTitle(o);c!==void 0&&this.title.setTitle(c)}};t.\u0275fac=function(c){return new(c||t)(Y(ta))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),w4=new c1("",{providedIn:"root",factory:()=>({})}),l4=new c1(""),Mc=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I($e)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return $(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let c=L0(o.loadComponent()).pipe(v1(Da),O1(n=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=n}),Tt(()=>{this.componentLoaders.delete(o)})),r=new go(c,()=>new _2).pipe(vo());return this.componentLoaders.set(o,r),r}loadChildren(o,c){if(this.childrenLoaders.get(c))return this.childrenLoaders.get(c);if(c._loadedRoutes)return $({routes:c._loadedRoutes,injector:c._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(c);let n=Fd(c,this.compiler,o,this.onLoadEndListener).pipe(Tt(()=>{this.childrenLoaders.delete(c)})),a=new go(n,()=>new _2).pipe(vo());return this.childrenLoaders.set(c,a),a}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Fd(s,t,e,o){return L0(s.loadChildren()).pipe(v1(Da),v2(c=>c instanceof M9||Array.isArray(c)?$(c):X1(t.compileModuleAsync(c))),v1(c=>{o&&o(s);let r,n,a=!1;return Array.isArray(c)?(n=c,a=!0):(r=c.create(e).injector,n=r.get(l4,[],{optional:!0,self:!0}).flat()),{routes:n.map(zc),injector:r}}))}function jd(s){return s&&typeof s=="object"&&"default"in s}function Da(s){return jd(s)?s.default:s}var Cc=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:()=>I(Zd),providedIn:"root"});let s=t;return s})(),Zd=(()=>{let t=class t{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,c){return o}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Oa=new c1(""),Na=new c1("");function Ud(s,t,e){let o=s.get(Na),c=s.get(N1);return s.get(I1).runOutsideAngular(()=>{if(!c.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(v=>setTimeout(v));let r,n=new Promise(v=>{r=v}),a=c.startViewTransition(()=>(r(),qd(s))),{onViewTransitionCreated:h}=o;return h&&S2(s,()=>h({transition:a,from:t,to:e})),n})}function qd(s){return new Promise(t=>{Mo(t,{injector:s})})}var Vc=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _2,this.transitionAbortSubject=new _2,this.configLoader=I(Mc),this.environmentInjector=I(m5),this.urlSerializer=I(i4),this.rootContexts=I(h4),this.location=I(jt),this.inputBindingEnabled=I(fs,{optional:!0})!==null,this.titleStrategy=I(Pa),this.options=I(w4,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(Cc),this.createViewTransition=I(Oa,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let o=r=>this.events.next(new tc(r)),c=r=>this.events.next(new ec(r));this.configLoader.onLoadEndListener=c,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let c=++this.navigationId;this.transitions?.next(h1(k(k({},this.transitions.value),o),{id:c}))}setupNavigations(o,c,r){return this.transitions=new q1({id:0,currentUrlTree:c,currentRawUrl:c,extractedUrl:this.urlHandlingStrategy.extract(c),urlAfterRedirects:this.urlHandlingStrategy.extract(c),rawUrl:c,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yt,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(m0(n=>n.id!==0),v1(n=>h1(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),z2(n=>{let a=!1,h=!1;return $(n).pipe(z2(v=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",u2.SupersededByNewNavigation),p0;this.currentTransition=n,this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?h1(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=v.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!d&&u!=="reload"){let z="";return this.events.next(new H0(v.id,this.urlSerializer.serialize(v.rawUrl),z,ls.IgnoredSameUrlNavigation)),v.resolve(null),p0}if(this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return $(v).pipe(z2(z=>{let y=this.transitions?.getValue();return this.events.next(new _5(z.id,this.urlSerializer.serialize(z.extractedUrl),z.source,z.restoredState)),y!==this.transitions?.getValue()?p0:Promise.resolve(z)}),Td(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),O1(z=>{n.targetSnapshot=z.targetSnapshot,n.urlAfterRedirects=z.urlAfterRedirects,this.currentNavigation=h1(k({},this.currentNavigation),{finalUrl:z.urlAfterRedirects});let y=new as(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){let{id:z,extractedUrl:y,source:A,restoredState:R,extras:B}=v,O=new _5(z,this.urlSerializer.serialize(y),A,R);this.events.next(O);let Z=ya(this.rootComponentType).snapshot;return this.currentTransition=n=h1(k({},v),{targetSnapshot:Z,urlAfterRedirects:y,extras:h1(k({},B),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,$(n)}else{let z="";return this.events.next(new H0(v.id,this.urlSerializer.serialize(v.extractedUrl),z,ls.IgnoredByUrlHandlingStrategy)),v.resolve(null),p0}}),O1(v=>{let d=new Qo(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(d)}),v1(v=>(this.currentTransition=n=h1(k({},v),{guards:Xg(v.targetSnapshot,v.currentSnapshot,this.rootContexts)}),n)),id(this.environmentInjector,v=>this.events.next(v)),O1(v=>{if(n.guardsResult=v.guardsResult,B5(v.guardsResult))throw Sa(this.urlSerializer,v.guardsResult);let d=new Yo(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(d)}),m0(v=>v.guardsResult?!0:(this.cancelNavigationTransition(v,"",u2.GuardRejected),!1)),Uo(v=>{if(v.guards.canActivateChecks.length)return $(v).pipe(O1(d=>{let u=new Jo(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),z2(d=>{let u=!1;return $(d).pipe(Id(this.paramsInheritanceStrategy,this.environmentInjector),O1({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",u2.NoDataFromResolver)}}))}),O1(d=>{let u=new Xo(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),Uo(v=>{let d=u=>{let z=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&z.push(this.configLoader.loadComponent(u.routeConfig).pipe(O1(y=>{u.component=y}),v1(()=>{})));for(let y of u.children)z.push(...d(y));return z};return u5(d(v.targetSnapshot.root)).pipe(po(null),f0(1))}),Uo(()=>this.afterPreactivation()),z2(()=>{let{currentSnapshot:v,targetSnapshot:d}=n,u=this.createViewTransition?.(this.environmentInjector,v.root,d.root);return u?X1(u).pipe(v1(()=>n)):$(n)}),v1(v=>{let d=qg(o.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=n=h1(k({},v),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,n}),O1(()=>{this.events.next(new s4)}),Jg(this.rootContexts,o.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),f0(1),O1({next:v=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new e0(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),this.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{a=!0}}),Ee(this.transitionAbortSubject.pipe(O1(v=>{throw v}))),Tt(()=>{!a&&!h&&this.cancelNavigationTransition(n,"",u2.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),p5(v=>{if(h=!0,ba(v))this.events.next(new V0(n.id,this.urlSerializer.serialize(n.extractedUrl),v.message,v.cancellationCode)),Wg(v)?this.events.next(new o4(v.url)):n.resolve(!1);else{this.events.next(new e4(n.id,this.urlSerializer.serialize(n.extractedUrl),v,n.targetSnapshot??void 0));try{n.resolve(o.errorHandler(v))}catch(d){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(d)}}return p0}))}))}cancelNavigationTransition(o,c,r){let n=new V0(o.id,this.urlSerializer.serialize(o.extractedUrl),c,r);this.events.next(n),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function $d(s){return s!==Yt}var Gd=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:()=>I(Wd),providedIn:"root"});let s=t;return s})(),pc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Wd=(()=>{let t=class t extends pc{};t.\u0275fac=(()=>{let o;return function(r){return(o||(o=Ie(t)))(r||t)}})(),t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Fa=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:()=>I(Kd),providedIn:"root"});let s=t;return s})(),Kd=(()=>{let t=class t extends Fa{constructor(){super(...arguments),this.location=I(jt),this.urlSerializer=I(i4),this.options=I(w4,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(Cc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new C0,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ya(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(c=>{c.type==="popstate"&&o(c.url,c.state)})}handleRouterEvent(o,c){if(o instanceof _5)this.stateMemento=this.createStateMemento();else if(o instanceof H0)this.rawUrlTree=c.initialUrl;else if(o instanceof as){if(this.urlUpdateStrategy==="eager"&&!c.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(c.finalUrl,c.initialUrl);this.setBrowserUrl(r,c)}}else o instanceof s4?(this.currentUrlTree=c.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(c.finalUrl,c.initialUrl),this.routerState=c.targetRouterState,this.urlUpdateStrategy==="deferred"&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c))):o instanceof V0&&(o.code===u2.GuardRejected||o.code===u2.NoDataFromResolver)?this.restoreHistory(c):o instanceof e4?this.restoreHistory(c,!0):o instanceof e0&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,c){let r=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(r)||c.extras.replaceUrl){let n=this.browserPageId,a=k(k({},c.extras.state),this.generateNgRouterState(c.id,n));this.location.replaceState(r,"",a)}else{let n=k(k({},c.extras.state),this.generateNgRouterState(c.id,this.browserPageId+1));this.location.go(r,"",n)}}restoreHistory(o,c=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,n=this.currentPageId-r;n!==0?this.location.historyGo(n):this.currentUrlTree===o.finalUrl&&n===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(c&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,c){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:c}:{navigationId:o}}};t.\u0275fac=(()=>{let o;return function(r){return(o||(o=Ie(t)))(r||t)}})(),t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Kt=function(s){return s[s.COMPLETE=0]="COMPLETE",s[s.FAILED=1]="FAILED",s[s.REDIRECTING=2]="REDIRECTING",s}(Kt||{});function ja(s,t){s.events.pipe(m0(e=>e instanceof e0||e instanceof V0||e instanceof e4||e instanceof H0),v1(e=>e instanceof e0||e instanceof H0?Kt.COMPLETE:(e instanceof V0?e.code===u2.Redirect||e.code===u2.SupersededByNewNavigation:!1)?Kt.REDIRECTING:Kt.FAILED),m0(e=>e!==Kt.REDIRECTING),f0(1)).subscribe(()=>{t()})}function Qd(s){throw s}var Yd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},i2=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(Ue),this.stateManager=I(Fa),this.options=I(w4,{optional:!0})||{},this.pendingTasks=I(Ho),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(Vc),this.urlSerializer=I(i4),this.location=I(jt),this.urlHandlingStrategy=I(Cc),this._events=new _2,this.errorHandler=this.options.errorHandler||Qd,this.navigated=!1,this.routeReuseStrategy=I(Gd),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(l4,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(fs,{optional:!0}),this.eventsSubscription=new r9,this.isNgZoneEnabled=I(I1)instanceof I1&&I1.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(c=>{try{let r=this.navigationTransitions.currentTransition,n=this.navigationTransitions.currentNavigation;if(r!==null&&n!==null){if(this.stateManager.handleRouterEvent(c,n),c instanceof V0&&c.code!==u2.Redirect&&c.code!==u2.SupersededByNewNavigation)this.navigated=!0;else if(c instanceof e0)this.navigated=!0;else if(c instanceof o4){let a=this.urlHandlingStrategy.merge(c.url,r.currentRawUrl),h={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||$d(r.source)};this.scheduleNavigation(a,Yt,null,h,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}tw(c)&&this._events.next(c)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,c)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",c)},0)})}navigateToSyncWithBrowser(o,c,r){let n={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let v=k({},r);delete v.navigationId,delete v.\u0275routerPageId,Object.keys(v).length!==0&&(n.state=v)}let h=this.parseUrl(o);this.scheduleNavigation(h,c,a,n)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(zc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,c={}){let{relativeTo:r,queryParams:n,fragment:a,queryParamsHandling:h,preserveFragment:v}=c,d=v?this.currentUrlTree.fragment:a,u=null;switch(h){case"merge":u=k(k({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}u!==null&&(u=this.removeEmptyProps(u));let z;try{let y=r?r.snapshot:this.routerState.snapshot.root;z=Ca(y)}catch{(typeof o[0]!="string"||!o[0].startsWith("/"))&&(o=[]),z=this.currentUrlTree.root}return Va(z,o,u,d??null)}navigateByUrl(o,c={skipLocationChange:!1}){let r=B5(o)?o:this.parseUrl(o),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,Yt,null,c)}navigate(o,c={skipLocationChange:!1}){return Xd(o),this.navigateByUrl(this.createUrlTree(o,c),c)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,c){let r;if(c===!0?r=k({},Yd):c===!1?r=k({},Jd):r=c,B5(o))return sa(this.currentUrlTree,o,r);let n=this.parseUrl(o);return sa(this.currentUrlTree,n,r)}removeEmptyProps(o){return Object.entries(o).reduce((c,[r,n])=>(n!=null&&(c[r]=n),c),{})}scheduleNavigation(o,c,r,n,a){if(this.disposed)return Promise.resolve(!1);let h,v,d;a?(h=a.resolve,v=a.reject,d=a.promise):d=new Promise((z,y)=>{h=z,v=y});let u=this.pendingTasks.add();return ja(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:c,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:n,resolve:h,reject:v,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(z=>Promise.reject(z))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Xd(s){for(let t=0;t<s.length;t++)if(s[t]==null)throw new C1(4008,!1)}function tw(s){return!(s instanceof s4)&&!(s instanceof o4)}var us=class{};var ew=(()=>{let t=class t{constructor(o,c,r,n,a){this.router=o,this.injector=r,this.preloadingStrategy=n,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(m0(o=>o instanceof e0),j0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,c){let r=[];for(let n of c){n.providers&&!n._injector&&(n._injector=Vo(n.providers,o,`Route: ${n.path}`));let a=n._injector??o,h=n._loadedInjector??a;(n.loadChildren&&!n._loadedRoutes&&n.canLoad===void 0||n.loadComponent&&!n._loadedComponent)&&r.push(this.preloadConfig(a,n)),(n.children||n._loadedRoutes)&&r.push(this.processRoutes(h,n.children??n._loadedRoutes))}return X1(r).pipe(wo())}preloadConfig(o,c){return this.preloadingStrategy.preload(c,()=>{let r;c.loadChildren&&c.canLoad===void 0?r=this.loader.loadChildren(o,c):r=$(null);let n=r.pipe(v2(a=>a===null?$(void 0):(c._loadedRoutes=a.routes,c._loadedInjector=a.injector,this.processRoutes(a.injector??o,a.routes))));if(c.loadComponent&&!c._loadedComponent){let a=this.loader.loadComponent(c);return X1([n,a]).pipe(wo())}else return n})}};t.\u0275fac=function(c){return new(c||t)(Y(i2),Y($e),Y(m5),Y(us),Y(Mc))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Za=new c1(""),sw=(()=>{let t=class t{constructor(o,c,r,n,a={}){this.urlSerializer=o,this.transitions=c,this.viewportScroller=r,this.zone=n,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=I(m5),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof _5?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof e0?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof H0&&o.code===ls.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof is&&(o.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(o.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,c){this.zone.runOutsideAngular(()=>S(this,null,function*(){yield new Promise(r=>{setTimeout(()=>{r()}),Mo(()=>{r()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new is(o,this.lastSource==="popstate"?this.store[this.restoredId]:null,c))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(c){Oe()},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})();function Ua(s,...t){return x0([{provide:l4,multi:!0,useValue:s},[],{provide:s0,useFactory:qa,deps:[i2]},{provide:Nt,multi:!0,useFactory:$a},t.map(e=>e.\u0275providers)])}function qa(s){return s.routerState.root}function u4(s,t){return{\u0275kind:s,\u0275providers:t}}function $a(){let s=I(z5);return t=>{let e=s.get(Ft);if(t!==e.components[0])return;let o=s.get(i2),c=s.get(Ga);s.get(Hc)===1&&o.initialNavigation(),s.get(Wa,null,fo.Optional)?.setUpPreloading(),s.get(Za,null,fo.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),c.closed||(c.next(),c.complete(),c.unsubscribe())}}var Ga=new c1("",{factory:()=>new _2}),Hc=new c1("",{providedIn:"root",factory:()=>1});function ow(){return u4(2,[{provide:Hc,useValue:0},{provide:Bo,multi:!0,deps:[z5],useFactory:t=>{let e=t.get(_9,Promise.resolve());return()=>e.then(()=>new Promise(o=>{let c=t.get(i2),r=t.get(Ga);ja(c,()=>{o(!0)}),t.get(Vc).afterPreactivation=()=>(o(!0),r.closed?$(void 0):r),c.initialNavigation()}))}}])}function cw(){return u4(3,[{provide:Bo,multi:!0,useFactory:()=>{let t=I(i2);return()=>{t.setUpLocationChangeListener()}}},{provide:Hc,useValue:2}])}var Wa=new c1("");function rw(s){return u4(0,[{provide:Wa,useExisting:ew},{provide:us,useExisting:s}])}function nw(){return u4(8,[na,{provide:fs,useExisting:na}])}function lw(s){let t=[{provide:Oa,useValue:Ud},{provide:Na,useValue:k({skipNextTransition:!!s?.skipInitialTransition},s)}];return u4(9,t)}var aa=new c1("ROUTER_FORROOT_GUARD"),aw=[jt,{provide:i4,useClass:Xt},i2,h4,{provide:s0,useFactory:qa,deps:[i2]},Mc,[]],R5=(()=>{let t=class t{constructor(o){}static forRoot(o,c){return{ngModule:t,providers:[aw,[],{provide:l4,multi:!0,useValue:o},{provide:aa,useFactory:gw,deps:[[i2,new It,new Te]]},{provide:w4,useValue:c||{}},c?.useHash?hw():vw(),iw(),c?.preloadingStrategy?rw(c.preloadingStrategy).\u0275providers:[],c?.initialNavigation?dw(c):[],c?.bindToComponentInputs?nw().\u0275providers:[],c?.enableViewTransitions?lw().\u0275providers:[],ww()]}}static forChild(o){return{ngModule:t,providers:[{provide:l4,multi:!0,useValue:o}]}}};t.\u0275fac=function(c){return new(c||t)(Y(aa,8))},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({});let s=t;return s})();function iw(){return{provide:Za,useFactory:()=>{let s=I(T9),t=I(I1),e=I(w4),o=I(Vc),c=I(i4);return e.scrollOffset&&s.setOffset(e.scrollOffset),new sw(c,o,s,t,e)}}}function hw(){return{provide:Ao,useClass:S9}}function vw(){return{provide:Ao,useClass:A9}}function gw(s){return"guarded"}function dw(s){return[s.initialNavigation==="disabled"?cw().\u0275providers:[],s.initialNavigation==="enabledBlocking"?ow().\u0275providers:[]]}var ia=new c1("");function ww(){return[{provide:ia,useFactory:$a},{provide:Nt,multi:!0,useExisting:ia}]}var UM=new c1("Ng Glyph Config");var qM=new c1("NgGlyphsToken");function mw(s){return s==null?"":/^\d+$/.test(s)?`${s}px`:s}var fw=new c1("Ng Icon Pre Processor"),zw=new c1("Ng Icon Post Processor");function xw(){return I(fw,{optional:!0})??(s=>s)}function Mw(){return I(zw,{optional:!0})??(()=>{})}var Cw=new c1("Ng Icon Config"),Vw={size:"1em"};function Hw(){return I(Cw,{optional:!0})??Vw}var Lw=new c1("Ng Icon Loader Token");var yw=new c1("Ng Icon Cache Token");function Bw(){return I(Lw,{optional:!0})}function _w(){return I(yw,{optional:!0})}function y0(s){return[{provide:Lc,useFactory:t=>k(k({},t?.reduce((e,o)=>k(k({},e),o),{})),s),deps:[[Lc,new It,new Te]],multi:!0}]}var Lc=new c1("Icons Token");function Aw(){return I(Lc,{optional:!0})??[]}function Sw(s){return typeof s=="string"?Promise.resolve(s):Se(s)?a9(s):s}function Rw(s){return s.replace(/([^a-zA-Z0-9])+(.)?/g,(t,e,o)=>o?o.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,t=>t.toLowerCase())}var bw=new c1("Ng Icon Logger"),yc=class{log(t){console.log(t)}warn(t){console.warn(t)}error(t){console.error(t)}};function kw(){return I(bw,{optional:!0})??new yc}var B0=(()=>{let t=class t{constructor(){this.config=Hw(),this.icons=Aw(),this.loader=Bw(),this.cache=_w(),this.preProcessor=xw(),this.postProcessor=Mw(),this.injector=I(z5),this.elementRef=I(x2),this.logger=kw(),this.size=this.config.size,this.color=this.config.color}set name(o){this.setIcon(o)}set svg(o){this.setSvg(o)}ngOnChanges(o){o.size&&this.setIconSize(),o.color&&this.setIconColor(),o.strokeWidth&&this.setIconStrokeWidth()}ngOnInit(){this.setIconStyles()}setIconColor(){this.elementRef.nativeElement.style.removeProperty("color"),this.color!==void 0&&this.elementRef.nativeElement.style.setProperty("color",this.color)}setIconSize(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__size"),this.size!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__size",this.size.toString())}setIconStrokeWidth(){this.elementRef.nativeElement.style.removeProperty("--ng-icon__stroke-width"),this.strokeWidth!==void 0&&this.elementRef.nativeElement.style.setProperty("--ng-icon__stroke-width",this.strokeWidth.toString())}setIconStyles(){this.setIconColor(),this.setIconSize(),this.setIconStrokeWidth()}setSvg(o){this.elementRef.nativeElement.innerHTML=this.preProcessor(o),this.postProcessor(this.elementRef.nativeElement)}setIcon(o){return S(this,null,function*(){let c=Rw(o);for(let r of[...this.icons].reverse())if(r[c]){this.setSvg(r[c]);return}if(this.loader){let r=yield this.requestIconFromLoader(o);if(r!==null){this.setSvg(r);return}}this.logger.warn(`No icon named ${o} was found. You may need to import it using the withIcons function.`)})}requestIconFromLoader(o){return new Promise(c=>{S2(this.injector,()=>S(this,null,function*(){if(this.cache){let a=this.cache.get(o);if(typeof a=="string"){c(a);return}if(a instanceof Promise){let h=yield a;c(h);return}}let r=Sw(this.loader(o));this.cache?.set(o,r);let n=yield r;this.cache?.set(o,n),c(n)}))})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=w1({type:t,selectors:[["ng-icon"]],inputs:{name:"name",svg:"svg",size:[T2.HasDecoratorInputTransform,"size","size",mw],strokeWidth:"strokeWidth",color:"color"},standalone:!0,features:[M5,f5,u1],decls:0,vars:0,template:function(c,r){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}"],changeDetection:0});let s=t;return s})();var Ms='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3a9 9 0 0 0 0 18c.83 0 1.5-.67 1.5-1.5c0-.39-.15-.74-.39-1.01c-.23-.26-.38-.61-.38-.99c0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5c0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9S8 9.67 8 10.5S7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"></path></svg>';var Ka='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>';var Qa='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></svg>';var Ya='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path></svg>';var Ja='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.41 8.41l-4.83-4.83c-.37-.37-.88-.58-1.41-.58H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.42zM7 7h7v2H7V7zm10 10H7v-2h10v2zm0-4H7v-2h10v2z"></path></svg>';var Xa='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"></path></svg>';var ti='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 20H5V7c0-.55-.45-1-1-1s-1 .45-1 1v13c0 1.1.9 2 2 2h10c.55 0 1-.45 1-1s-.45-1-1-1zm5-4V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2zm-2 0H9V4h9v12z"></path></svg>';var Cs="remove",Vs="update",Hs="copy",b5="color",Bc="color";var ei="img",o0="",p4="txt",si="txt",oi="todo";function Ew(s,t){if(s&1){let e=B1();N(0,"ng-icon",1),e1("click",function(c){let r=m1(e).$implicit,n=G();return f1(n.handleNoteAction(c,r.type))}),F()}if(s&2){let e=t.$implicit;g1("name",e.svg)("title",e.type)}}var ci=(()=>{class s{noteId=null;noteAction=new T1;icons=[{type:Cs,svg:"matDeleteForever"},{type:Hs,svg:"matContentCopyRound"},{type:b5,svg:"matColorLens"}];handleNoteAction(e,o){e.preventDefault(),e.stopPropagation(),this.noteId&&this.noteAction.emit({noteId:this.noteId,type:o})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=w1({type:s,selectors:[["note-bottom-actions"]],inputs:{noteId:"noteId"},outputs:{noteAction:"noteAction"},standalone:!0,features:[C2([],[y0({matDeleteForever:Qa,matContentCopy:Ka,matColorLens:Ms,matContentCopyRound:ti})]),u1],decls:2,vars:0,consts:[[1,"note-icon",3,"name","title"],[1,"note-icon",3,"click","name","title"]],template:function(o,c){o&1&&$1(0,Ew,1,2,"ng-icon",0,R2),o&2&&G1(c.icons)},dependencies:[B0],styles:[".note-icon[_ngcontent-%COMP%]{font-size:23px;transition:scale .2s;bottom:0}.note-icon[_ngcontent-%COMP%]:hover{opacity:.5}"]})}return s})();var ni=function(s){let t=[],e=0;for(let o=0;o<s.length;o++){let c=s.charCodeAt(o);c<128?t[e++]=c:c<2048?(t[e++]=c>>6|192,t[e++]=c&63|128):(c&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(c=65536+((c&1023)<<10)+(s.charCodeAt(++o)&1023),t[e++]=c>>18|240,t[e++]=c>>12&63|128,t[e++]=c>>6&63|128,t[e++]=c&63|128):(t[e++]=c>>12|224,t[e++]=c>>6&63|128,t[e++]=c&63|128)}return t},Tw=function(s){let t=[],e=0,o=0;for(;e<s.length;){let c=s[e++];if(c<128)t[o++]=String.fromCharCode(c);else if(c>191&&c<224){let r=s[e++];t[o++]=String.fromCharCode((c&31)<<6|r&63)}else if(c>239&&c<365){let r=s[e++],n=s[e++],a=s[e++],h=((c&7)<<18|(r&63)<<12|(n&63)<<6|a&63)-65536;t[o++]=String.fromCharCode(55296+(h>>10)),t[o++]=String.fromCharCode(56320+(h&1023))}else{let r=s[e++],n=s[e++];t[o++]=String.fromCharCode((c&15)<<12|(r&63)<<6|n&63)}}return t.join("")},li={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let c=0;c<s.length;c+=3){let r=s[c],n=c+1<s.length,a=n?s[c+1]:0,h=c+2<s.length,v=h?s[c+2]:0,d=r>>2,u=(r&3)<<4|a>>4,z=(a&15)<<2|v>>6,y=v&63;h||(y=64,n||(z=64)),o.push(e[d],e[u],e[z],e[y])}return o.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(ni(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):Tw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let c=0;c<s.length;){let r=e[s.charAt(c++)],a=c<s.length?e[s.charAt(c)]:0;++c;let v=c<s.length?e[s.charAt(c)]:64;++c;let u=c<s.length?e[s.charAt(c)]:64;if(++c,r==null||a==null||v==null||u==null)throw new _c;let z=r<<2|a>>4;if(o.push(z),v!==64){let y=a<<4&240|v>>2;if(o.push(y),u!==64){let A=v<<6&192|u;o.push(A)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}},_c=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Iw=function(s){let t=ni(s);return li.encodeByteArray(t,!0)},m4=function(s){return Iw(s).replace(/\./g,"")},Pw=function(s){try{return li.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ow=()=>Dw().__FIREBASE_DEFAULTS__,Nw=()=>{if(typeof process>"u"||typeof process.env>"u")return;let s=process.env.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Fw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=s&&Pw(s[1]);return t&&JSON.parse(t)},Ac=()=>{try{return Ow()||Nw()||Fw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},jw=s=>{var t,e;return(e=(t=Ac())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},ai=s=>{let t=jw(s);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let o=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),o]:[t.substring(0,e),o]},Sc=()=>{var s;return(s=Ac())===null||s===void 0?void 0:s.config};var Ls=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,o)=>{e?this.reject(e):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,o))}}};function ii(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},o=t||"demo-project",c=s.iat||0,r=s.sub||s.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let n=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:c,exp:c+3600,auth_time:c,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},s);return[m4(JSON.stringify(e)),m4(JSON.stringify(n)),""].join(".")}function hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zw(){var s;let t=(s=Ac())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vi(){return!Zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rc(){try{return typeof indexedDB=="object"}catch{return!1}}function gi(){return new Promise((s,t)=>{try{let e=!0,o="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(o);c.onsuccess=()=>{c.result.close(),e||self.indexedDB.deleteDatabase(o),s(!0)},c.onupgradeneeded=()=>{e=!1},c.onerror=()=>{var r;t(((r=c.error)===null||r===void 0?void 0:r.message)||"")}}catch(e){t(e)}})}var Uw="FirebaseError",c0=class s extends Error{constructor(t,e,o){super(e),this.code=t,this.customData=o,this.name=Uw,Object.setPrototypeOf(this,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f4.prototype.create)}},f4=class{constructor(t,e,o){this.service=t,this.serviceName=e,this.errors=o}create(t,...e){let o=e[0]||{},c=`${this.service}/${t}`,r=this.errors[t],n=r?qw(r,o):"Error",a=`${this.serviceName}: ${n} (${c}).`;return new c0(c,a,o)}};function qw(s,t){return s.replace($w,(e,o)=>{let c=t[o];return c!=null?String(c):`<${o}?>`})}var $w=/\{\$([^}]+)}/g;function z4(s,t){if(s===t)return!0;let e=Object.keys(s),o=Object.keys(t);for(let c of e){if(!o.includes(c))return!1;let r=s[c],n=t[c];if(ri(r)&&ri(n)){if(!z4(r,n))return!1}else if(r!==n)return!1}for(let c of o)if(!e.includes(c))return!1;return!0}function ri(s){return s!==null&&typeof s=="object"}var nC=4*60*60*1e3;function r0(s){return s&&s._delegate?s._delegate:s}var n0=class{constructor(t,e,o){this.name=t,this.instanceFactory=e,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var W0="[DEFAULT]";var bc=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let o=new Ls;if(this.instancesDeferred.set(e,o),this.isInitialized(e)||this.shouldAutoInitialize())try{let c=this.getOrInitializeService({instanceIdentifier:e});c&&o.resolve(c)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let o=this.normalizeInstanceIdentifier(t?.identifier),c=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(r){if(c)return null;throw r}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ww(t))try{this.getOrInitializeService({instanceIdentifier:W0})}catch{}for(let[e,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(e);try{let r=this.getOrInitializeService({instanceIdentifier:c});o.resolve(r)}catch{}}}}clearInstance(t=W0){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return S(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=W0){return this.instances.has(t)}getOptions(t=W0){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let c=this.getOrInitializeService({instanceIdentifier:o,options:e});for(let[r,n]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(r);o===a&&n.resolve(c)}return c}onInit(t,e){var o;let c=this.normalizeInstanceIdentifier(e),r=(o=this.onInitCallbacks.get(c))!==null&&o!==void 0?o:new Set;r.add(t),this.onInitCallbacks.set(c,r);let n=this.instances.get(c);return n&&t(n,c),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){let o=this.onInitCallbacks.get(e);if(o)for(let c of o)try{c(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Gw(t),options:e}),this.instances.set(t,o),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=W0){return this.component?this.component.multipleInstances?t:W0:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gw(s){return s===W0?void 0:s}function Ww(s){return s.instantiationMode==="EAGER"}var ys=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new bc(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var Kw=[],l1=function(s){return s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT",s}(l1||{}),Qw={debug:l1.DEBUG,verbose:l1.VERBOSE,info:l1.INFO,warn:l1.WARN,error:l1.ERROR,silent:l1.SILENT},Yw=l1.INFO,Jw={[l1.DEBUG]:"log",[l1.VERBOSE]:"log",[l1.INFO]:"info",[l1.WARN]:"warn",[l1.ERROR]:"error"},Xw=(s,t,...e)=>{if(t<s.logLevel)return;let o=new Date().toISOString(),c=Jw[t];if(c)console[c](`[${o}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},k5=class{constructor(t){this.name=t,this._logLevel=Yw,this._logHandler=Xw,this._userLogHandler=null,Kw.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in l1))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Qw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,l1.DEBUG,...t),this._logHandler(this,l1.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,l1.VERBOSE,...t),this._logHandler(this,l1.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,l1.INFO,...t),this._logHandler(this,l1.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,l1.WARN,...t),this._logHandler(this,l1.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,l1.ERROR,...t),this._logHandler(this,l1.ERROR,...t)}};var tu=(s,t)=>t.some(e=>s instanceof e),di,wi;function eu(){return di||(di=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function su(){return wi||(wi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ui=new WeakMap,Ec=new WeakMap,pi=new WeakMap,kc=new WeakMap,Ic=new WeakMap;function ou(s){let t=new Promise((e,o)=>{let c=()=>{s.removeEventListener("success",r),s.removeEventListener("error",n)},r=()=>{e(D2(s.result)),c()},n=()=>{o(s.error),c()};s.addEventListener("success",r),s.addEventListener("error",n)});return t.then(e=>{e instanceof IDBCursor&&ui.set(e,s)}).catch(()=>{}),Ic.set(t,s),t}function cu(s){if(Ec.has(s))return;let t=new Promise((e,o)=>{let c=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",n),s.removeEventListener("abort",n)},r=()=>{e(),c()},n=()=>{o(s.error||new DOMException("AbortError","AbortError")),c()};s.addEventListener("complete",r),s.addEventListener("error",n),s.addEventListener("abort",n)});Ec.set(s,t)}var Tc={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Ec.get(s);if(t==="objectStoreNames")return s.objectStoreNames||pi.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return D2(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function mi(s){Tc=s(Tc)}function ru(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let o=s.call(Bs(this),t,...e);return pi.set(o,t.sort?t.sort():[t]),D2(o)}:su().includes(s)?function(...t){return s.apply(Bs(this),t),D2(ui.get(this))}:function(...t){return D2(s.apply(Bs(this),t))}}function nu(s){return typeof s=="function"?ru(s):(s instanceof IDBTransaction&&cu(s),tu(s,eu())?new Proxy(s,Tc):s)}function D2(s){if(s instanceof IDBRequest)return ou(s);if(kc.has(s))return kc.get(s);let t=nu(s);return t!==s&&(kc.set(s,t),Ic.set(t,s)),t}var Bs=s=>Ic.get(s);function zi(s,t,{blocked:e,upgrade:o,blocking:c,terminated:r}={}){let n=indexedDB.open(s,t),a=D2(n);return o&&n.addEventListener("upgradeneeded",h=>{o(D2(n.result),h.oldVersion,h.newVersion,D2(n.transaction),h)}),e&&n.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),a.then(h=>{r&&h.addEventListener("close",()=>r()),c&&h.addEventListener("versionchange",v=>c(v.oldVersion,v.newVersion,v))}).catch(()=>{}),a}var lu=["get","getKey","getAll","getAllKeys","count"],au=["put","add","delete","clear"],Pc=new Map;function fi(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Pc.get(t))return Pc.get(t);let e=t.replace(/FromIndex$/,""),o=t!==e,c=au.includes(e);if(!(e in(o?IDBIndex:IDBObjectStore).prototype)||!(c||lu.includes(e)))return;let r=function(n,...a){return S(this,null,function*(){let h=this.transaction(n,c?"readwrite":"readonly"),v=h.store;return o&&(v=v.index(a.shift())),(yield Promise.all([v[e](...a),c&&h.done]))[0]})};return Pc.set(t,r),r}mi(s=>h1(k({},s),{get:(t,e,o)=>fi(t,e)||s.get(t,e,o),has:(t,e)=>!!fi(t,e)||s.has(t,e)}));var Oc=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(iu(e)){let o=e.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(e=>e).join(" ")}};function iu(s){let t=s.getComponent();return t?.type==="VERSION"}var Nc="@firebase/app",xi="0.10.8";var K0=new k5("@firebase/app"),hu="@firebase/app-compat",vu="@firebase/analytics-compat",gu="@firebase/analytics",du="@firebase/app-check-compat",wu="@firebase/app-check",uu="@firebase/auth",pu="@firebase/auth-compat",mu="@firebase/database",fu="@firebase/database-compat",zu="@firebase/functions",xu="@firebase/functions-compat",Mu="@firebase/installations",Cu="@firebase/installations-compat",Vu="@firebase/messaging",Hu="@firebase/messaging-compat",Lu="@firebase/performance",yu="@firebase/performance-compat",Bu="@firebase/remote-config",_u="@firebase/remote-config-compat",Au="@firebase/storage",Su="@firebase/storage-compat",Ru="@firebase/firestore",bu="@firebase/vertexai-preview",ku="@firebase/firestore-compat",Eu="firebase",Tu="10.12.5";var Fc="[DEFAULT]",Iu={[Nc]:"fire-core",[hu]:"fire-core-compat",[gu]:"fire-analytics",[vu]:"fire-analytics-compat",[wu]:"fire-app-check",[du]:"fire-app-check-compat",[uu]:"fire-auth",[pu]:"fire-auth-compat",[mu]:"fire-rtdb",[fu]:"fire-rtdb-compat",[zu]:"fire-fn",[xu]:"fire-fn-compat",[Mu]:"fire-iid",[Cu]:"fire-iid-compat",[Vu]:"fire-fcm",[Hu]:"fire-fcm-compat",[Lu]:"fire-perf",[yu]:"fire-perf-compat",[Bu]:"fire-rc",[_u]:"fire-rc-compat",[Au]:"fire-gcs",[Su]:"fire-gcs-compat",[Ru]:"fire-fst",[ku]:"fire-fst-compat",[bu]:"fire-vertex","fire-js":"fire-js",[Eu]:"fire-js-all"};var _s=new Map,Pu=new Map,jc=new Map;function Mi(s,t){try{s.container.addComponent(t)}catch(e){K0.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function x4(s){let t=s.name;if(jc.has(t))return K0.debug(`There were multiple attempts to register component ${t}.`),!1;jc.set(t,s);for(let e of _s.values())Mi(e,s);for(let e of Pu.values())Mi(e,s);return!0}function Li(s,t){let e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}var Du={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_0=new f4("app","Firebase",Du);var Zc=class{constructor(t,e,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new n0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw _0.create("app-deleted",{appName:this._name})}};var yi=Tu;function $c(s,t={}){let e=s;typeof t!="object"&&(t={name:t});let o=Object.assign({name:Fc,automaticDataCollectionEnabled:!1},t),c=o.name;if(typeof c!="string"||!c)throw _0.create("bad-app-name",{appName:String(c)});if(e||(e=Sc()),!e)throw _0.create("no-options");let r=_s.get(c);if(r){if(z4(e,r.options)&&z4(o,r.config))return r;throw _0.create("duplicate-app",{appName:c})}let n=new ys(c);for(let h of jc.values())n.addComponent(h);let a=new Zc(e,o,n);return _s.set(c,a),a}function Bi(s=Fc){let t=_s.get(s);if(!t&&s===Fc&&Sc())return $c();if(!t)throw _0.create("no-app",{appName:s});return t}function A0(s,t,e){var o;let c=(o=Iu[s])!==null&&o!==void 0?o:s;e&&(c+=`-${e}`);let r=c.match(/\s|\//),n=t.match(/\s|\//);if(r||n){let a=[`Unable to register library "${c}" with version "${t}":`];r&&a.push(`library name "${c}" contains illegal characters (whitespace or "/")`),r&&n&&a.push("and"),n&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),K0.warn(a.join(" "));return}x4(new n0(`${c}-version`,()=>({library:c,version:t}),"VERSION"))}var Ou="firebase-heartbeat-database",Nu=1,M4="firebase-heartbeat-store",Dc=null;function _i(){return Dc||(Dc=zi(Ou,Nu,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(M4)}catch(e){console.warn(e)}}}}).catch(s=>{throw _0.create("idb-open",{originalErrorMessage:s.message})})),Dc}function Fu(s){return S(this,null,function*(){try{let e=(yield _i()).transaction(M4),o=yield e.objectStore(M4).get(Ai(s));return yield e.done,o}catch(t){if(t instanceof c0)K0.warn(t.message);else{let e=_0.create("idb-get",{originalErrorMessage:t?.message});K0.warn(e.message)}}})}function Ci(s,t){return S(this,null,function*(){try{let o=(yield _i()).transaction(M4,"readwrite");yield o.objectStore(M4).put(t,Ai(s)),yield o.done}catch(e){if(e instanceof c0)K0.warn(e.message);else{let o=_0.create("idb-set",{originalErrorMessage:e?.message});K0.warn(o.message)}}})}function Ai(s){return`${s.name}!${s.options.appId}`}var ju=1024,Zu=30*24*60*60*1e3,Uc=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new qc(e),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}triggerHeartbeat(){return S(this,null,function*(){var t,e;let c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vi();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(n=>n.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(n=>{let a=new Date(n.date).valueOf();return Date.now()-a<=Zu}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return S(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Vi(),{heartbeatsToSend:o,unsentEntries:c}=Uu(this._heartbeatsCache.heartbeats),r=m4(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=e,c.length>0?(this._heartbeatsCache.heartbeats=c,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r})}};function Vi(){return new Date().toISOString().substring(0,10)}function Uu(s,t=ju){let e=[],o=s.slice();for(let c of s){let r=e.find(n=>n.agent===c.agent);if(r){if(r.dates.push(c.date),Hi(e)>t){r.dates.pop();break}}else if(e.push({agent:c.agent,dates:[c.date]}),Hi(e)>t){e.pop();break}o=o.slice(1)}return{heartbeatsToSend:e,unsentEntries:o}}var qc=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Rc()?gi().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield Fu(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let c=yield this.read();return Ci(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:c.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let c=yield this.read();return Ci(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...t.heartbeats]})}else return})}};function Hi(s){return m4(JSON.stringify({version:2,heartbeats:s})).length}function qu(s){x4(new n0("platform-logger",t=>new Oc(t),"PRIVATE")),x4(new n0("heartbeat",t=>new Uc(t),"PRIVATE")),A0(Nc,xi,s),A0(Nc,xi,"esm2017"),A0("fire-js","")}qu("");var Si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ri={};var S0,Gc;(function(){var s;function t(M,p){function m(){}m.prototype=p.prototype,M.D=p.prototype,M.prototype=new m,M.prototype.constructor=M,M.C=function(x,C,H){for(var f=Array(arguments.length-2),K2=2;K2<arguments.length;K2++)f[K2-2]=arguments[K2];return p.prototype[C].apply(x,f)}}function e(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,e),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(M,p,m){m||(m=0);var x=Array(16);if(typeof p=="string")for(var C=0;16>C;++C)x[C]=p.charCodeAt(m++)|p.charCodeAt(m++)<<8|p.charCodeAt(m++)<<16|p.charCodeAt(m++)<<24;else for(C=0;16>C;++C)x[C]=p[m++]|p[m++]<<8|p[m++]<<16|p[m++]<<24;p=M.g[0],m=M.g[1],C=M.g[2];var H=M.g[3],f=p+(H^m&(C^H))+x[0]+3614090360&4294967295;p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[1]+3905402710&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[2]+606105819&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[3]+3250441966&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[4]+4118548399&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[5]+1200080426&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[6]+2821735955&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[7]+4249261313&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[8]+1770035416&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[9]+2336552879&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[10]+4294925233&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[11]+2304563134&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(H^m&(C^H))+x[12]+1804603682&4294967295,p=m+(f<<7&4294967295|f>>>25),f=H+(C^p&(m^C))+x[13]+4254626195&4294967295,H=p+(f<<12&4294967295|f>>>20),f=C+(m^H&(p^m))+x[14]+2792965006&4294967295,C=H+(f<<17&4294967295|f>>>15),f=m+(p^C&(H^p))+x[15]+1236535329&4294967295,m=C+(f<<22&4294967295|f>>>10),f=p+(C^H&(m^C))+x[1]+4129170786&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[6]+3225465664&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[11]+643717713&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[0]+3921069994&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[5]+3593408605&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[10]+38016083&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[15]+3634488961&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[4]+3889429448&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[9]+568446438&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[14]+3275163606&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[3]+4107603335&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[8]+1163531501&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(C^H&(m^C))+x[13]+2850285829&4294967295,p=m+(f<<5&4294967295|f>>>27),f=H+(m^C&(p^m))+x[2]+4243563512&4294967295,H=p+(f<<9&4294967295|f>>>23),f=C+(p^m&(H^p))+x[7]+1735328473&4294967295,C=H+(f<<14&4294967295|f>>>18),f=m+(H^p&(C^H))+x[12]+2368359562&4294967295,m=C+(f<<20&4294967295|f>>>12),f=p+(m^C^H)+x[5]+4294588738&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[8]+2272392833&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[11]+1839030562&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[14]+4259657740&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[1]+2763975236&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[4]+1272893353&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[7]+4139469664&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[10]+3200236656&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[13]+681279174&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[0]+3936430074&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[3]+3572445317&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[6]+76029189&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(m^C^H)+x[9]+3654602809&4294967295,p=m+(f<<4&4294967295|f>>>28),f=H+(p^m^C)+x[12]+3873151461&4294967295,H=p+(f<<11&4294967295|f>>>21),f=C+(H^p^m)+x[15]+530742520&4294967295,C=H+(f<<16&4294967295|f>>>16),f=m+(C^H^p)+x[2]+3299628645&4294967295,m=C+(f<<23&4294967295|f>>>9),f=p+(C^(m|~H))+x[0]+4096336452&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[7]+1126891415&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[14]+2878612391&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[5]+4237533241&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[12]+1700485571&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[3]+2399980690&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[10]+4293915773&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[1]+2240044497&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[8]+1873313359&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[15]+4264355552&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[6]+2734768916&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[13]+1309151649&4294967295,m=C+(f<<21&4294967295|f>>>11),f=p+(C^(m|~H))+x[4]+4149444226&4294967295,p=m+(f<<6&4294967295|f>>>26),f=H+(m^(p|~C))+x[11]+3174756917&4294967295,H=p+(f<<10&4294967295|f>>>22),f=C+(p^(H|~m))+x[2]+718787259&4294967295,C=H+(f<<15&4294967295|f>>>17),f=m+(H^(C|~p))+x[9]+3951481745&4294967295,M.g[0]=M.g[0]+p&4294967295,M.g[1]=M.g[1]+(C+(f<<21&4294967295|f>>>11))&4294967295,M.g[2]=M.g[2]+C&4294967295,M.g[3]=M.g[3]+H&4294967295}o.prototype.u=function(M,p){p===void 0&&(p=M.length);for(var m=p-this.blockSize,x=this.B,C=this.h,H=0;H<p;){if(C==0)for(;H<=m;)c(this,M,H),H+=this.blockSize;if(typeof M=="string"){for(;H<p;)if(x[C++]=M.charCodeAt(H++),C==this.blockSize){c(this,x),C=0;break}}else for(;H<p;)if(x[C++]=M[H++],C==this.blockSize){c(this,x),C=0;break}}this.h=C,this.o+=p},o.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var p=1;p<M.length-8;++p)M[p]=0;var m=8*this.o;for(p=M.length-8;p<M.length;++p)M[p]=m&255,m/=256;for(this.u(M),M=Array(16),p=m=0;4>p;++p)for(var x=0;32>x;x+=8)M[m++]=this.g[p]>>>x&255;return M};function r(M,p){var m=a;return Object.prototype.hasOwnProperty.call(m,M)?m[M]:m[M]=p(M)}function n(M,p){this.h=p;for(var m=[],x=!0,C=M.length-1;0<=C;C--){var H=M[C]|0;x&&H==p||(m[C]=H,x=!1)}this.g=m}var a={};function h(M){return-128<=M&&128>M?r(M,function(p){return new n([p|0],0>p?-1:0)}):new n([M|0],0>M?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return u;if(0>M)return B(v(-M));for(var p=[],m=1,x=0;M>=m;x++)p[x]=M/m|0,m*=4294967296;return new n(p,0)}function d(M,p){if(M.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(M.charAt(0)=="-")return B(d(M.substring(1),p));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=v(Math.pow(p,8)),x=u,C=0;C<M.length;C+=8){var H=Math.min(8,M.length-C),f=parseInt(M.substring(C,C+H),p);8>H?(H=v(Math.pow(p,H)),x=x.j(H).add(v(f))):(x=x.j(m),x=x.add(v(f)))}return x}var u=h(0),z=h(1),y=h(16777216);s=n.prototype,s.m=function(){if(R(this))return-B(this).m();for(var M=0,p=1,m=0;m<this.g.length;m++){var x=this.i(m);M+=(0<=x?x:4294967296+x)*p,p*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(A(this))return"0";if(R(this))return"-"+B(this).toString(M);for(var p=v(Math.pow(M,6)),m=this,x="";;){var C=r1(m,p).g;m=O(m,C.j(p));var H=((0<m.g.length?m.g[0]:m.h)>>>0).toString(M);if(m=C,A(m))return H+x;for(;6>H.length;)H="0"+H;x=H+x}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function A(M){if(M.h!=0)return!1;for(var p=0;p<M.g.length;p++)if(M.g[p]!=0)return!1;return!0}function R(M){return M.h==-1}s.l=function(M){return M=O(this,M),R(M)?-1:A(M)?0:1};function B(M){for(var p=M.g.length,m=[],x=0;x<p;x++)m[x]=~M.g[x];return new n(m,~M.h).add(z)}s.abs=function(){return R(this)?B(this):this},s.add=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0,C=0;C<=p;C++){var H=x+(this.i(C)&65535)+(M.i(C)&65535),f=(H>>>16)+(this.i(C)>>>16)+(M.i(C)>>>16);x=f>>>16,H&=65535,f&=65535,m[C]=f<<16|H}return new n(m,m[m.length-1]&-2147483648?-1:0)};function O(M,p){return M.add(B(p))}s.j=function(M){if(A(this)||A(M))return u;if(R(this))return R(M)?B(this).j(B(M)):B(B(this).j(M));if(R(M))return B(this.j(B(M)));if(0>this.l(y)&&0>M.l(y))return v(this.m()*M.m());for(var p=this.g.length+M.g.length,m=[],x=0;x<2*p;x++)m[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<M.g.length;C++){var H=this.i(x)>>>16,f=this.i(x)&65535,K2=M.i(C)>>>16,ut=M.i(C)&65535;m[2*x+2*C]+=f*ut,Z(m,2*x+2*C),m[2*x+2*C+1]+=H*ut,Z(m,2*x+2*C+1),m[2*x+2*C+1]+=f*K2,Z(m,2*x+2*C+1),m[2*x+2*C+2]+=H*K2,Z(m,2*x+2*C+2)}for(x=0;x<p;x++)m[x]=m[2*x+1]<<16|m[2*x];for(x=p;x<2*p;x++)m[x]=0;return new n(m,0)};function Z(M,p){for(;(M[p]&65535)!=M[p];)M[p+1]+=M[p]>>>16,M[p]&=65535,p++}function P(M,p){this.g=M,this.h=p}function r1(M,p){if(A(p))throw Error("division by zero");if(A(M))return new P(u,u);if(R(M))return p=r1(B(M),p),new P(B(p.g),B(p.h));if(R(p))return p=r1(M,B(p)),new P(B(p.g),p.h);if(30<M.g.length){if(R(M)||R(p))throw Error("slowDivide_ only works with positive integers.");for(var m=z,x=p;0>=x.l(M);)m=R1(m),x=R1(x);var C=s1(m,1),H=s1(x,1);for(x=s1(x,2),m=s1(m,2);!A(x);){var f=H.add(x);0>=f.l(M)&&(C=C.add(m),H=f),x=s1(x,1),m=s1(m,1)}return p=O(M,C.j(p)),new P(C,p)}for(C=u;0<=M.l(p);){for(m=Math.max(1,Math.floor(M.m()/p.m())),x=Math.ceil(Math.log(m)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),H=v(m),f=H.j(p);R(f)||0<f.l(M);)m-=x,H=v(m),f=H.j(p);A(H)&&(H=z),C=C.add(H),M=O(M,f)}return new P(C,M)}s.A=function(M){return r1(this,M).h},s.and=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)&M.i(x);return new n(m,this.h&M.h)},s.or=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)|M.i(x);return new n(m,this.h|M.h)},s.xor=function(M){for(var p=Math.max(this.g.length,M.g.length),m=[],x=0;x<p;x++)m[x]=this.i(x)^M.i(x);return new n(m,this.h^M.h)};function R1(M){for(var p=M.g.length+1,m=[],x=0;x<p;x++)m[x]=M.i(x)<<1|M.i(x-1)>>>31;return new n(m,M.h)}function s1(M,p){var m=p>>5;p%=32;for(var x=M.g.length-m,C=[],H=0;H<x;H++)C[H]=0<p?M.i(H+m)>>>p|M.i(H+m+1)<<32-p:M.i(H+m);return new n(C,M.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Gc=Ri.Md5=o,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=v,n.fromString=d,S0=Ri.Integer=n}).apply(typeof Si<"u"?Si:typeof self<"u"?self:typeof window<"u"?window:{});var As=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l0={};var Wc,Kc,E5,Qc,C4,Ss,Yc,Jc,Xc;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,i,g){return l==Array.prototype||l==Object.prototype||(l[i]=g.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof As=="object"&&As];for(var i=0;i<l.length;++i){var g=l[i];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var o=e(this);function c(l,i){if(i)t:{var g=o;l=l.split(".");for(var w=0;w<l.length-1;w++){var V=l[w];if(!(V in g))break t;g=g[V]}l=l[l.length-1],w=g[l],i=i(w),i!=w&&i!=null&&t(g,l,{configurable:!0,writable:!0,value:i})}}function r(l,i){l instanceof String&&(l+="");var g=0,w=!1,V={next:function(){if(!w&&g<l.length){var _=g++;return{value:i(_,l[_]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}c("Array.prototype.values",function(l){return l||function(){return r(this,function(i,g){return g})}});var n=n||{},a=this||self;function h(l){var i=typeof l;return i=i!="object"?i:l?Array.isArray(l)?"array":i:"null",i=="array"||i=="object"&&typeof l.length=="number"}function v(l){var i=typeof l;return i=="object"&&l!=null||i=="function"}function d(l,i,g){return l.call.apply(l.bind,arguments)}function u(l,i,g){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),l.apply(i,V)}}return function(){return l.apply(i,arguments)}}function z(l,i,g){return z=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:u,z.apply(null,arguments)}function y(l,i){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function A(l,i){function g(){}g.prototype=i.prototype,l.aa=i.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(w,V,_){for(var T=Array(arguments.length-2),z1=2;z1<arguments.length;z1++)T[z1-2]=arguments[z1];return i.prototype[V].apply(w,T)}}function R(l){let i=l.length;if(0<i){let g=Array(i);for(let w=0;w<i;w++)g[w]=l[w];return g}return[]}function B(l,i){for(let g=1;g<arguments.length;g++){let w=arguments[g];if(h(w)){let V=l.length||0,_=w.length||0;l.length=V+_;for(let T=0;T<_;T++)l[V+T]=w[T]}else l.push(w)}}class O{constructor(i,g){this.i=i,this.j=g,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}function Z(l){return/^[\s\xa0]*$/.test(l)}function P(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function r1(l){return r1[" "](l),l}r1[" "]=function(){};var R1=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function s1(l,i,g){for(let w in l)i.call(g,l[w],w,l)}function M(l,i){for(let g in l)i.call(void 0,l[g],g,l)}function p(l){let i={};for(let g in l)i[g]=l[g];return i}let m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,i){let g,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(g in w)l[g]=w[g];for(let _=0;_<m.length;_++)g=m[_],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function C(l){var i=1;l=l.split(":");let g=[];for(;0<i&&l.length;)g.push(l.shift()),i--;return l.length&&g.push(l.join(":")),g}function H(l){a.setTimeout(()=>{throw l},0)}function f(){var l=O3;let i=null;return l.g&&(i=l.g,l.g=l.g.next,l.g||(l.h=null),i.next=null),i}class K2{constructor(){this.h=this.g=null}add(i,g){let w=ut.get();w.set(i,g),this.h?this.h.next=w:this.g=w,this.h=w}}var ut=new O(()=>new av,l=>l.reset());class av{constructor(){this.next=this.g=this.h=null}set(i,g){this.h=i,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,mt=!1,O3=new K2,t7=()=>{let l=a.Promise.resolve(void 0);pt=()=>{l.then(iv)}};var iv=()=>{for(var l;l=f();){try{l.h.call(l.g)}catch(g){H(g)}var i=ut;i.j(l),100>i.h&&(i.h++,l.next=i.g,i.g=l)}mt=!1};function g0(){this.s=this.s,this.C=this.C}g0.prototype.s=!1,g0.prototype.ma=function(){this.s||(this.s=!0,this.N())},g0.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K1(l,i){this.type=l,this.g=this.target=i,this.defaultPrevented=!1}K1.prototype.h=function(){this.defaultPrevented=!0};var hv=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,i=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,i),a.removeEventListener("test",g,i)}catch{}return l}();function ft(l,i){if(K1.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=i,i=l.relatedTarget){if(R1){t:{try{r1(i.nodeName);var V=!0;break t}catch{}V=!1}V||(i=null)}}else g=="mouseover"?i=l.fromElement:g=="mouseout"&&(i=l.toElement);this.relatedTarget=i,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:vv[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ft.aa.h.call(this)}}A(ft,K1);var vv={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),gv=0;function dv(l,i,g,w,V){this.listener=l,this.proxy=null,this.src=i,this.type=g,this.capture=!!w,this.ha=V,this.key=++gv,this.da=this.fa=!1}function ge(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function de(l){this.src=l,this.g={},this.h=0}de.prototype.add=function(l,i,g,w,V){var _=l.toString();l=this.g[_],l||(l=this.g[_]=[],this.h++);var T=F3(l,i,w,V);return-1<T?(i=l[T],g||(i.fa=!1)):(i=new dv(i,this.src,_,!!w,V),i.fa=g,l.push(i)),i};function N3(l,i){var g=i.type;if(g in l.g){var w=l.g[g],V=Array.prototype.indexOf.call(w,i,void 0),_;(_=0<=V)&&Array.prototype.splice.call(w,V,1),_&&(ge(i),l.g[g].length==0&&(delete l.g[g],l.h--))}}function F3(l,i,g,w){for(var V=0;V<l.length;++V){var _=l[V];if(!_.da&&_.listener==i&&_.capture==!!g&&_.ha==w)return V}return-1}var j3="closure_lm_"+(1e6*Math.random()|0),Z3={};function e7(l,i,g,w,V){if(w&&w.once)return o7(l,i,g,w,V);if(Array.isArray(i)){for(var _=0;_<i.length;_++)e7(l,i[_],g,w,V);return null}return g=G3(g),l&&l[zt]?l.K(i,g,v(w)?!!w.capture:!!w,V):s7(l,i,g,!1,w,V)}function s7(l,i,g,w,V,_){if(!i)throw Error("Invalid event type");var T=v(V)?!!V.capture:!!V,z1=q3(l);if(z1||(l[j3]=z1=new de(l)),g=z1.add(i,g,w,T,_),g.proxy)return g;if(w=wv(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)hv||(V=T),V===void 0&&(V=!1),l.addEventListener(i.toString(),w,V);else if(l.attachEvent)l.attachEvent(r7(i.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function wv(){function l(g){return i.call(l.src,l.listener,g)}let i=uv;return l}function o7(l,i,g,w,V){if(Array.isArray(i)){for(var _=0;_<i.length;_++)o7(l,i[_],g,w,V);return null}return g=G3(g),l&&l[zt]?l.L(i,g,v(w)?!!w.capture:!!w,V):s7(l,i,g,!0,w,V)}function c7(l,i,g,w,V){if(Array.isArray(i))for(var _=0;_<i.length;_++)c7(l,i[_],g,w,V);else w=v(w)?!!w.capture:!!w,g=G3(g),l&&l[zt]?(l=l.i,i=String(i).toString(),i in l.g&&(_=l.g[i],g=F3(_,g,w,V),-1<g&&(ge(_[g]),Array.prototype.splice.call(_,g,1),_.length==0&&(delete l.g[i],l.h--)))):l&&(l=q3(l))&&(i=l.g[i.toString()],l=-1,i&&(l=F3(i,g,w,V)),(g=-1<l?i[l]:null)&&U3(g))}function U3(l){if(typeof l!="number"&&l&&!l.da){var i=l.src;if(i&&i[zt])N3(i.i,l);else{var g=l.type,w=l.proxy;i.removeEventListener?i.removeEventListener(g,w,l.capture):i.detachEvent?i.detachEvent(r7(g),w):i.addListener&&i.removeListener&&i.removeListener(w),(g=q3(i))?(N3(g,l),g.h==0&&(g.src=null,i[j3]=null)):ge(l)}}}function r7(l){return l in Z3?Z3[l]:Z3[l]="on"+l}function uv(l,i){if(l.da)l=!0;else{i=new ft(i,this);var g=l.listener,w=l.ha||l.src;l.fa&&U3(l),l=g.call(w,i)}return l}function q3(l){return l=l[j3],l instanceof de?l:null}var $3="__closure_events_fn_"+(1e9*Math.random()>>>0);function G3(l){return typeof l=="function"?l:(l[$3]||(l[$3]=function(i){return l.handleEvent(i)}),l[$3])}function Q1(){g0.call(this),this.i=new de(this),this.M=this,this.F=null}A(Q1,g0),Q1.prototype[zt]=!0,Q1.prototype.removeEventListener=function(l,i,g,w){c7(this,l,i,g,w)};function r2(l,i){var g,w=l.F;if(w)for(g=[];w;w=w.F)g.push(w);if(l=l.M,w=i.type||i,typeof i=="string")i=new K1(i,l);else if(i instanceof K1)i.target=i.target||l;else{var V=i;i=new K1(w,l),x(i,V)}if(V=!0,g)for(var _=g.length-1;0<=_;_--){var T=i.g=g[_];V=we(T,w,!0,i)&&V}if(T=i.g=l,V=we(T,w,!0,i)&&V,V=we(T,w,!1,i)&&V,g)for(_=0;_<g.length;_++)T=i.g=g[_],V=we(T,w,!1,i)&&V}Q1.prototype.N=function(){if(Q1.aa.N.call(this),this.i){var l=this.i,i;for(i in l.g){for(var g=l.g[i],w=0;w<g.length;w++)ge(g[w]);delete l.g[i],l.h--}}this.F=null},Q1.prototype.K=function(l,i,g,w){return this.i.add(String(l),i,!1,g,w)},Q1.prototype.L=function(l,i,g,w){return this.i.add(String(l),i,!0,g,w)};function we(l,i,g,w){if(i=l.i.g[String(i)],!i)return!0;i=i.concat();for(var V=!0,_=0;_<i.length;++_){var T=i[_];if(T&&!T.da&&T.capture==g){var z1=T.listener,U1=T.ha||T.src;T.fa&&N3(l.i,T),V=z1.call(U1,w)!==!1&&V}}return V&&!w.defaultPrevented}function n7(l,i,g){if(typeof l=="function")g&&(l=z(l,g));else if(l&&typeof l.handleEvent=="function")l=z(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:a.setTimeout(l,i||0)}function l7(l){l.g=n7(()=>{l.g=null,l.i&&(l.i=!1,l7(l))},l.l);let i=l.h;l.h=null,l.m.apply(null,i)}class pv extends g0{constructor(i,g){super(),this.m=i,this.l=g,this.h=null,this.i=!1,this.g=null}j(i){this.h=arguments,this.g?this.i=!0:l7(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xt(l){g0.call(this),this.h=l,this.g={}}A(xt,g0);var a7=[];function i7(l){s1(l.g,function(i,g){this.g.hasOwnProperty(g)&&U3(i)},l),l.g={}}xt.prototype.N=function(){xt.aa.N.call(this),i7(this)},xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var W3=a.JSON.stringify,mv=a.JSON.parse,fv=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function K3(){}K3.prototype.h=null;function h7(l){return l.h||(l.h=l.i())}function v7(){}var Mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Q3(){K1.call(this,"d")}A(Q3,K1);function Y3(){K1.call(this,"c")}A(Y3,K1);var D0={},g7=null;function ue(){return g7=g7||new Q1}D0.La="serverreachability";function d7(l){K1.call(this,D0.La,l)}A(d7,K1);function Ct(l){let i=ue();r2(i,new d7(i))}D0.STAT_EVENT="statevent";function w7(l,i){K1.call(this,D0.STAT_EVENT,l),this.stat=i}A(w7,K1);function n2(l){let i=ue();r2(i,new w7(i,l))}D0.Ma="timingevent";function u7(l,i){K1.call(this,D0.Ma,l),this.size=i}A(u7,K1);function Vt(l,i){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},i)}function Ht(){this.g=!0}Ht.prototype.xa=function(){this.g=!1};function zv(l,i,g,w,V,_){l.info(function(){if(l.g)if(_)for(var T="",z1=_.split("&"),U1=0;U1<z1.length;U1++){var a1=z1[U1].split("=");if(1<a1.length){var Y1=a1[0];a1=a1[1];var J1=Y1.split("_");T=2<=J1.length&&J1[1]=="type"?T+(Y1+"="+a1+"&"):T+(Y1+"=redacted&")}}else T=null;else T=_;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+i+`
`+g+`
`+T})}function xv(l,i,g,w,V,_,T){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+i+`
`+g+`
`+_+" "+T})}function v5(l,i,g,w){l.info(function(){return"XMLHTTP TEXT ("+i+"): "+Cv(l,g)+(w?" "+w:"")})}function Mv(l,i){l.info(function(){return"TIMEOUT: "+i})}Ht.prototype.info=function(){};function Cv(l,i){if(!l.g)return i;if(!i)return null;try{var g=JSON.parse(i);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var w=g[l];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var _=V[0];if(_!="noop"&&_!="stop"&&_!="close")for(var T=1;T<V.length;T++)V[T]=""}}}}return W3(g)}catch{return i}}var pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},p7={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},J3;function me(){}A(me,K3),me.prototype.g=function(){return new XMLHttpRequest},me.prototype.i=function(){return{}},J3=new me;function d0(l,i,g,w){this.j=l,this.i=i,this.l=g,this.R=w||1,this.U=new xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new m7}function m7(){this.i=null,this.g="",this.h=!1}var f7={},X3={};function to(l,i,g){l.L=1,l.v=Me(Q2(i)),l.m=g,l.P=!0,z7(l,null)}function z7(l,i){l.F=Date.now(),fe(l),l.A=Q2(l.v);var g=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),k7(g.i,"t",w),l.C=0,g=l.j.J,l.h=new m7,l.g=Y7(l.j,g?i:null,!l.m),0<l.O&&(l.M=new pv(z(l.Y,l,l.g),l.O)),i=l.U,g=l.g,w=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(a7[0]=V.toString()),V=a7);for(var _=0;_<V.length;_++){var T=e7(g,V[_],w||i.handleEvent,!1,i.h||i);if(!T)break;i.g[T.key]=T}i=l.H?p(l.H):{},l.m?(l.u||(l.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,i)):(l.u="GET",l.g.ea(l.A,l.u,null,i)),Ct(),zv(l.i,l.u,l.A,l.l,l.R,l.m)}d0.prototype.ca=function(l){l=l.target;let i=this.M;i&&Y2(l)==3?i.j():this.Y(l)},d0.prototype.Y=function(l){try{if(l==this.g)t:{let J1=Y2(this.g);var i=this.g.Ba();let w5=this.g.Z();if(!(3>J1)&&(J1!=3||this.g&&(this.h.h||this.g.oa()||N7(this.g)))){this.J||J1!=4||i==7||(i==8||0>=w5?Ct(3):Ct(2)),eo(this);var g=this.g.Z();this.X=g;e:if(x7(this)){var w=N7(this.g);l="";var V=w.length,_=Y2(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){O0(this),Lt(this);var T="";break e}this.h.i=new a.TextDecoder}for(i=0;i<V;i++)this.h.h=!0,l+=this.h.i.decode(w[i],{stream:!(_&&i==V-1)});w.length=0,this.h.g+=l,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=g==200,xv(this.i,this.u,this.A,this.l,this.R,J1,g),this.o){if(this.T&&!this.K){e:{if(this.g){var z1,U1=this.g;if((z1=U1.g?U1.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(z1)){var a1=z1;break e}}a1=null}if(g=a1)v5(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,n2(12),O0(this),Lt(this);break t}}if(this.P){g=!0;let B2;for(;!this.J&&this.C<T.length;)if(B2=Vv(this,T),B2==X3){J1==4&&(this.s=4,n2(14),g=!1),v5(this.i,this.l,null,"[Incomplete Response]");break}else if(B2==f7){this.s=4,n2(15),v5(this.i,this.l,T,"[Invalid Chunk]"),g=!1;break}else v5(this.i,this.l,B2,null),so(this,B2);if(x7(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),J1!=4||T.length!=0||this.h.h||(this.s=1,n2(16),g=!1),this.o=this.o&&g,!g)v5(this.i,this.l,T,"[Invalid Chunked Response]"),O0(this),Lt(this);else if(0<T.length&&!this.W){this.W=!0;var Y1=this.j;Y1.g==this&&Y1.ba&&!Y1.M&&(Y1.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),ao(Y1),Y1.M=!0,n2(11))}}else v5(this.i,this.l,T,null),so(this,T);J1==4&&O0(this),this.o&&!this.J&&(J1==4?G7(this.j,this):(this.o=!1,fe(this)))}else Nv(this.g),g==400&&0<T.indexOf("Unknown SID")?(this.s=3,n2(12)):(this.s=0,n2(13)),O0(this),Lt(this)}}}catch{}finally{}};function x7(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Vv(l,i){var g=l.C,w=i.indexOf(`
`,g);return w==-1?X3:(g=Number(i.substring(g,w)),isNaN(g)?f7:(w+=1,w+g>i.length?X3:(i=i.slice(w,w+g),l.C=w+g,i)))}d0.prototype.cancel=function(){this.J=!0,O0(this)};function fe(l){l.S=Date.now()+l.I,M7(l,l.I)}function M7(l,i){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Vt(z(l.ba,l),i)}function eo(l){l.B&&(a.clearTimeout(l.B),l.B=null)}d0.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Mv(this.i,this.A),this.L!=2&&(Ct(),n2(17)),O0(this),this.s=2,Lt(this)):M7(this,this.S-l)};function Lt(l){l.j.G==0||l.J||G7(l.j,l)}function O0(l){eo(l);var i=l.M;i&&typeof i.ma=="function"&&i.ma(),l.M=null,i7(l.U),l.g&&(i=l.g,l.g=null,i.abort(),i.ma())}function so(l,i){try{var g=l.j;if(g.G!=0&&(g.g==l||oo(g.h,l))){if(!l.K&&oo(g.h,l)&&g.G==3){try{var w=g.Da.g.parse(i)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){t:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ye(g),He(g);else break t;lo(g),n2(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=Vt(z(g.Za,g),6e3));if(1>=H7(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else F0(g,11)}else if((l.K||g.g==l)&&ye(g),!Z(i))for(V=g.Da.g.parse(i),i=0;i<V.length;i++){let a1=V[i];if(g.T=a1[0],a1=a1[1],g.G==2)if(a1[0]=="c"){g.K=a1[1],g.ia=a1[2];let Y1=a1[3];Y1!=null&&(g.la=Y1,g.j.info("VER="+g.la));let J1=a1[4];J1!=null&&(g.Aa=J1,g.j.info("SVER="+g.Aa));let w5=a1[5];w5!=null&&typeof w5=="number"&&0<w5&&(w=1.5*w5,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;let B2=l.g;if(B2){let _e=B2.g?B2.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_e){var _=w.h;_.g||_e.indexOf("spdy")==-1&&_e.indexOf("quic")==-1&&_e.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(co(_,_.h),_.h=null))}if(w.D){let io=B2.g?B2.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(w.ya=io,M1(w.I,w.D,io))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var T=l;if(w.qa=Q7(w,w.J?w.ia:null,w.W),T.K){L7(w.h,T);var z1=T,U1=w.L;U1&&(z1.I=U1),z1.B&&(eo(z1),fe(z1)),w.g=T}else q7(w);0<g.i.length&&Le(g)}else a1[0]!="stop"&&a1[0]!="close"||F0(g,7);else g.G==3&&(a1[0]=="stop"||a1[0]=="close"?a1[0]=="stop"?F0(g,7):no(g):a1[0]!="noop"&&g.l&&g.l.ta(a1),g.v=0)}}Ct(4)}catch{}}var Hv=class{constructor(l,i){this.g=l,this.map=i}};function C7(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function V7(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function H7(l){return l.h?1:l.g?l.g.size:0}function oo(l,i){return l.h?l.h==i:l.g?l.g.has(i):!1}function co(l,i){l.g?l.g.add(i):l.h=i}function L7(l,i){l.h&&l.h==i?l.h=null:l.g&&l.g.has(i)&&l.g.delete(i)}C7.prototype.cancel=function(){if(this.i=y7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function y7(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let i=l.i;for(let g of l.g.values())i=i.concat(g.D);return i}return R(l.i)}function Lv(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(h(l)){for(var i=[],g=l.length,w=0;w<g;w++)i.push(l[w]);return i}i=[],g=0;for(w in l)i[g++]=l[w];return i}function yv(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(h(l)||typeof l=="string"){var i=[];l=l.length;for(var g=0;g<l;g++)i.push(g);return i}i=[],g=0;for(let w in l)i[g++]=w;return i}}}function B7(l,i){if(l.forEach&&typeof l.forEach=="function")l.forEach(i,void 0);else if(h(l)||typeof l=="string")Array.prototype.forEach.call(l,i,void 0);else for(var g=yv(l),w=Lv(l),V=w.length,_=0;_<V;_++)i.call(void 0,w[_],g&&g[_],l)}var _7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bv(l,i){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var w=l[g].indexOf("="),V=null;if(0<=w){var _=l[g].substring(0,w);V=l[g].substring(w+1)}else _=l[g];i(_,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function N0(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof N0){this.h=l.h,ze(this,l.j),this.o=l.o,this.g=l.g,xe(this,l.s),this.l=l.l;var i=l.i,g=new _t;g.i=i.i,i.g&&(g.g=new Map(i.g),g.h=i.h),A7(this,g),this.m=l.m}else l&&(i=String(l).match(_7))?(this.h=!1,ze(this,i[1]||"",!0),this.o=yt(i[2]||""),this.g=yt(i[3]||"",!0),xe(this,i[4]),this.l=yt(i[5]||"",!0),A7(this,i[6]||"",!0),this.m=yt(i[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}N0.prototype.toString=function(){var l=[],i=this.j;i&&l.push(Bt(i,S7,!0),":");var g=this.g;return(g||i=="file")&&(l.push("//"),(i=this.o)&&l.push(Bt(i,S7,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Bt(g,g.charAt(0)=="/"?Sv:Av,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Bt(g,bv)),l.join("")};function Q2(l){return new N0(l)}function ze(l,i,g){l.j=g?yt(i,!0):i,l.j&&(l.j=l.j.replace(/:$/,""))}function xe(l,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);l.s=i}else l.s=null}function A7(l,i,g){i instanceof _t?(l.i=i,kv(l.i,l.h)):(g||(i=Bt(i,Rv)),l.i=new _t(i,l.h))}function M1(l,i,g){l.i.set(i,g)}function Me(l){return M1(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function yt(l,i){return l?i?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Bt(l,i,g){return typeof l=="string"?(l=encodeURI(l).replace(i,_v),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function _v(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var S7=/[#\/\?@]/g,Av=/[#\?:]/g,Sv=/[#\?]/g,Rv=/[#\?@]/g,bv=/#/g;function _t(l,i){this.h=this.g=null,this.i=l||null,this.j=!!i}function w0(l){l.g||(l.g=new Map,l.h=0,l.i&&Bv(l.i,function(i,g){l.add(decodeURIComponent(i.replace(/\+/g," ")),g)}))}s=_t.prototype,s.add=function(l,i){w0(this),this.i=null,l=g5(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(i),this.h+=1,this};function R7(l,i){w0(l),i=g5(l,i),l.g.has(i)&&(l.i=null,l.h-=l.g.get(i).length,l.g.delete(i))}function b7(l,i){return w0(l),i=g5(l,i),l.g.has(i)}s.forEach=function(l,i){w0(this),this.g.forEach(function(g,w){g.forEach(function(V){l.call(i,V,w,this)},this)},this)},s.na=function(){w0(this);let l=Array.from(this.g.values()),i=Array.from(this.g.keys()),g=[];for(let w=0;w<i.length;w++){let V=l[w];for(let _=0;_<V.length;_++)g.push(i[w])}return g},s.V=function(l){w0(this);let i=[];if(typeof l=="string")b7(this,l)&&(i=i.concat(this.g.get(g5(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)i=i.concat(l[g])}return i},s.set=function(l,i){return w0(this),this.i=null,l=g5(this,l),b7(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[i]),this.h+=1,this},s.get=function(l,i){return l?(l=this.V(l),0<l.length?String(l[0]):i):i};function k7(l,i,g){R7(l,i),0<g.length&&(l.i=null,l.g.set(g5(l,i),R(g)),l.h+=g.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],i=Array.from(this.g.keys());for(var g=0;g<i.length;g++){var w=i[g];let _=encodeURIComponent(String(w)),T=this.V(w);for(w=0;w<T.length;w++){var V=_;T[w]!==""&&(V+="="+encodeURIComponent(String(T[w]))),l.push(V)}}return this.i=l.join("&")};function g5(l,i){return i=String(i),l.j&&(i=i.toLowerCase()),i}function kv(l,i){i&&!l.j&&(w0(l),l.i=null,l.g.forEach(function(g,w){var V=w.toLowerCase();w!=V&&(R7(this,w),k7(this,V,g))},l)),l.j=i}function Ev(l,i){let g=new Ht;if(a.Image){let w=new Image;w.onload=y(u0,g,"TestLoadImage: loaded",!0,i,w),w.onerror=y(u0,g,"TestLoadImage: error",!1,i,w),w.onabort=y(u0,g,"TestLoadImage: abort",!1,i,w),w.ontimeout=y(u0,g,"TestLoadImage: timeout",!1,i,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else i(!1)}function Tv(l,i){let g=new Ht,w=new AbortController,V=setTimeout(()=>{w.abort(),u0(g,"TestPingServer: timeout",!1,i)},1e4);fetch(l,{signal:w.signal}).then(_=>{clearTimeout(V),_.ok?u0(g,"TestPingServer: ok",!0,i):u0(g,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(V),u0(g,"TestPingServer: error",!1,i)})}function u0(l,i,g,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(g)}catch{}}function Iv(){this.g=new fv}function Pv(l,i,g){let w=g||"";try{B7(l,function(V,_){let T=V;v(V)&&(T=W3(V)),i.push(w+_+"="+encodeURIComponent(T))})}catch(V){throw i.push(w+"type="+encodeURIComponent("_badmap")),V}}function At(l){this.l=l.Ub||null,this.j=l.eb||!1}A(At,K3),At.prototype.g=function(){return new Ce(this.l,this.j)},At.prototype.i=function(l){return function(){return l}}({});function Ce(l,i){Q1.call(this),this.D=l,this.o=i,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ce,Q1),s=Ce.prototype,s.open=function(l,i){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=i,this.readyState=1,Rt(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let i={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(i.body=l),(this.D||a).fetch(new Request(this.A,i)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,St(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;E7(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function E7(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var i=l.value?l.value:new Uint8Array(0);(i=this.v.decode(i,{stream:!l.done}))&&(this.response=this.responseText+=i)}l.done?St(this):Rt(this),this.readyState==3&&E7(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,St(this))},s.Qa=function(l){this.g&&(this.response=l,St(this))},s.ga=function(){this.g&&St(this)};function St(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rt(l)}s.setRequestHeader=function(l,i){this.u.append(l,i)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],i=this.h.entries();for(var g=i.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=i.next();return l.join(`\r
`)};function Rt(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ce.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function T7(l){let i="";return s1(l,function(g,w){i+=w,i+=":",i+=g,i+=`\r
`}),i}function ro(l,i,g){t:{for(w in g){var w=!1;break t}w=!0}w||(g=T7(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):M1(l,i,g))}function y1(l){Q1.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(y1,Q1);var Dv=/^https?$/i,Ov=["POST","PUT"];s=y1.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,i,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);i=i?i.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():J3.g(),this.v=this.o?h7(this.o):h7(J3),this.g.onreadystatechange=z(this.Ea,this);try{this.B=!0,this.g.open(i,String(l),!0),this.B=!1}catch(_){I7(this,_);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)g.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let _ of w.keys())g.set(_,w.get(_));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(_=>_.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ov,i,void 0))||w||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[_,T]of g)this.g.setRequestHeader(_,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O7(this),this.u=!0,this.g.send(l),this.u=!1}catch(_){I7(this,_)}};function I7(l,i){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=i,l.m=5,P7(l),Ve(l)}function P7(l){l.A||(l.A=!0,r2(l,"complete"),r2(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,r2(this,"complete"),r2(this,"abort"),Ve(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ve(this,!0)),y1.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?D7(this):this.bb())},s.bb=function(){D7(this)};function D7(l){if(l.h&&typeof n<"u"&&(!l.v[1]||Y2(l)!=4||l.Z()!=2)){if(l.u&&Y2(l)==4)n7(l.Ea,0,l);else if(r2(l,"readystatechange"),Y2(l)==4){l.h=!1;try{let T=l.Z();t:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}var g;if(!(g=i)){var w;if(w=T===0){var V=String(l.D).match(_7)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),w=!Dv.test(V?V.toLowerCase():"")}g=w}if(g)r2(l,"complete"),r2(l,"success");else{l.m=6;try{var _=2<Y2(l)?l.g.statusText:""}catch{_=""}l.l=_+" ["+l.Z()+"]",P7(l)}}finally{Ve(l)}}}}function Ve(l,i){if(l.g){O7(l);let g=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,i||r2(l,"ready");try{g.onreadystatechange=w}catch{}}}function O7(l){l.I&&(a.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function Y2(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<Y2(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var i=this.g.responseText;return l&&i.indexOf(l)==0&&(i=i.substring(l.length)),mv(i)}};function N7(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Nv(l){let i={};l=(l.g&&2<=Y2(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(Z(l[w]))continue;var g=C(l[w]);let V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let _=i[V]||[];i[V]=_,_.push(g)}M(i,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bt(l,i,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||i}function F7(l){this.Aa=0,this.i=[],this.j=new Ht,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bt("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bt("baseRetryDelayMs",5e3,l),this.cb=bt("retryDelaySeedMs",1e4,l),this.Wa=bt("forwardChannelMaxRetries",2,l),this.wa=bt("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new C7(l&&l.concurrentRequestLimit),this.Da=new Iv,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=F7.prototype,s.la=8,s.G=1,s.connect=function(l,i,g,w){n2(0),this.W=l,this.H=i||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Q7(this,null,this.W),Le(this)};function no(l){if(j7(l),l.G==3){var i=l.U++,g=Q2(l.I);if(M1(g,"SID",l.K),M1(g,"RID",i),M1(g,"TYPE","terminate"),kt(l,g),i=new d0(l,l.j,i),i.L=2,i.v=Me(Q2(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(i.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=i.v,g=!0),g||(i.g=Y7(i.j,null),i.g.ea(i.v)),i.F=Date.now(),fe(i)}K7(l)}function He(l){l.g&&(ao(l),l.g.cancel(),l.g=null)}function j7(l){He(l),l.u&&(a.clearTimeout(l.u),l.u=null),ye(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Le(l){if(!V7(l.h)&&!l.s){l.s=!0;var i=l.Ga;pt||t7(),mt||(pt(),mt=!0),O3.add(i,l),l.B=0}}function Fv(l,i){return H7(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=i.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Vt(z(l.Ga,l,i),W7(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new d0(this,this.j,l),_=this.o;if(this.S&&(_?(_=p(_),x(_,this.S)):_=this.S),this.m!==null||this.O||(V.H=_,_=null),this.P)t:{for(var i=0,g=0;g<this.i.length;g++){e:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(i+=w,4096<i){i=g;break t}if(i===4096||g===this.i.length-1){i=g+1;break t}}i=1e3}else i=1e3;i=U7(this,V,i),g=Q2(this.I),M1(g,"RID",l),M1(g,"CVER",22),this.D&&M1(g,"X-HTTP-Session-Id",this.D),kt(this,g),_&&(this.O?i="headers="+encodeURIComponent(String(T7(_)))+"&"+i:this.m&&ro(g,this.m,_)),co(this.h,V),this.Ua&&M1(g,"TYPE","init"),this.P?(M1(g,"$req",i),M1(g,"SID","null"),V.T=!0,to(V,g,null)):to(V,g,i),this.G=2}}else this.G==3&&(l?Z7(this,l):this.i.length==0||V7(this.h)||Z7(this))};function Z7(l,i){var g;i?g=i.l:g=l.U++;let w=Q2(l.I);M1(w,"SID",l.K),M1(w,"RID",g),M1(w,"AID",l.T),kt(l,w),l.m&&l.o&&ro(w,l.m,l.o),g=new d0(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),i&&(l.i=i.D.concat(l.i)),i=U7(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),co(l.h,g),to(g,w,i)}function kt(l,i){l.H&&s1(l.H,function(g,w){M1(i,w,g)}),l.l&&B7({},function(g,w){M1(i,w,g)})}function U7(l,i,g){g=Math.min(l.i.length,g);var w=l.l?z(l.l.Na,l.l,l):null;t:{var V=l.i;let _=-1;for(;;){let T=["count="+g];_==-1?0<g?(_=V[0].g,T.push("ofs="+_)):_=0:T.push("ofs="+_);let z1=!0;for(let U1=0;U1<g;U1++){let a1=V[U1].g,Y1=V[U1].map;if(a1-=_,0>a1)_=Math.max(0,V[U1].g-100),z1=!1;else try{Pv(Y1,T,"req"+a1+"_")}catch{w&&w(Y1)}}if(z1){w=T.join("&");break t}}}return l=l.i.splice(0,g),i.D=l,w}function q7(l){if(!l.g&&!l.u){l.Y=1;var i=l.Fa;pt||t7(),mt||(pt(),mt=!0),O3.add(i,l),l.v=0}}function lo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Vt(z(l.Fa,l),W7(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,$7(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Vt(z(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,n2(10),He(this),$7(this))};function ao(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function $7(l){l.g=new d0(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var i=Q2(l.qa);M1(i,"RID","rpc"),M1(i,"SID",l.K),M1(i,"AID",l.T),M1(i,"CI",l.F?"0":"1"),!l.F&&l.ja&&M1(i,"TO",l.ja),M1(i,"TYPE","xmlhttp"),kt(l,i),l.m&&l.o&&ro(i,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Me(Q2(i)),g.m=null,g.P=!0,z7(g,l)}s.Za=function(){this.C!=null&&(this.C=null,He(this),lo(this),n2(19))};function ye(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function G7(l,i){var g=null;if(l.g==i){ye(l),ao(l),l.g=null;var w=2}else if(oo(l.h,i))g=i.D,L7(l.h,i),w=1;else return;if(l.G!=0){if(i.o)if(w==1){g=i.m?i.m.length:0,i=Date.now()-i.F;var V=l.B;w=ue(),r2(w,new u7(w,g)),Le(l)}else q7(l);else if(V=i.s,V==3||V==0&&0<i.X||!(w==1&&Fv(l,i)||w==2&&lo(l)))switch(g&&0<g.length&&(i=l.h,i.i=i.i.concat(g)),V){case 1:F0(l,5);break;case 4:F0(l,10);break;case 3:F0(l,6);break;default:F0(l,2)}}}function W7(l,i){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*i}function F0(l,i){if(l.j.info("Error code "+i),i==2){var g=z(l.fb,l),w=l.Xa;let V=!w;w=new N0(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ze(w,"https"),Me(w),V?Ev(w.toString(),g):Tv(w.toString(),g)}else n2(2);l.G=0,l.l&&l.l.sa(i),K7(l),j7(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),n2(2)):(this.j.info("Failed to ping google.com"),n2(1))};function K7(l){if(l.G=0,l.ka=[],l.l){let i=y7(l.h);(i.length!=0||l.i.length!=0)&&(B(l.ka,i),B(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Q7(l,i,g){var w=g instanceof N0?Q2(g):new N0(g);if(w.g!="")i&&(w.g=i+"."+w.g),xe(w,w.s);else{var V=a.location;w=V.protocol,i=i?i+"."+V.hostname:V.hostname,V=+V.port;var _=new N0(null);w&&ze(_,w),i&&(_.g=i),V&&xe(_,V),g&&(_.l=g),w=_}return g=l.D,i=l.ya,g&&i&&M1(w,g,i),M1(w,"VER",l.la),kt(l,w),w}function Y7(l,i,g){if(i&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return i=l.Ca&&!l.pa?new y1(new At({eb:g})):new y1(l.pa),i.Ha(l.J),i}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function J7(){}s=J7.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Be(){}Be.prototype.g=function(l,i){return new h2(l,i)};function h2(l,i){Q1.call(this),this.g=new F7(i),this.l=l,this.h=i&&i.messageUrlParams||null,l=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(l?l["X-WebChannel-Content-Type"]=i.messageContentType:l={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.va&&(l?l["X-WebChannel-Client-Profile"]=i.va:l={"X-WebChannel-Client-Profile":i.va}),this.g.S=l,(l=i&&i.Sb)&&!Z(l)&&(this.g.m=l),this.v=i&&i.supportsCrossDomainXhr||!1,this.u=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!Z(i)&&(this.g.D=i,l=this.h,l!==null&&i in l&&(l=this.h,i in l&&delete l[i])),this.j=new d5(this)}A(h2,Q1),h2.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},h2.prototype.close=function(){no(this.g)},h2.prototype.o=function(l){var i=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=W3(l),l=g);i.i.push(new Hv(i.Ya++,l)),i.G==3&&Le(i)},h2.prototype.N=function(){this.g.l=null,delete this.j,no(this.g),delete this.g,h2.aa.N.call(this)};function X7(l){Q3.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var i=l.__sm__;if(i){t:{for(let g in i){l=g;break t}l=void 0}(this.i=l)&&(l=this.i,i=i!==null&&l in i?i[l]:void 0),this.data=i}else this.data=l}A(X7,Q3);function t9(){Y3.call(this),this.status=1}A(t9,Y3);function d5(l){this.g=l}A(d5,J7),d5.prototype.ua=function(){r2(this.g,"a")},d5.prototype.ta=function(l){r2(this.g,new X7(l))},d5.prototype.sa=function(l){r2(this.g,new t9)},d5.prototype.ra=function(){r2(this.g,"b")},Be.prototype.createWebChannel=Be.prototype.g,h2.prototype.send=h2.prototype.o,h2.prototype.open=h2.prototype.m,h2.prototype.close=h2.prototype.close,Xc=l0.createWebChannelTransport=function(){return new Be},Jc=l0.getStatEventTarget=function(){return ue()},Yc=l0.Event=D0,Ss=l0.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pe.NO_ERROR=0,pe.TIMEOUT=8,pe.HTTP_ERROR=6,C4=l0.ErrorCode=pe,p7.COMPLETE="complete",Qc=l0.EventType=p7,v7.EventType=Mt,Mt.OPEN="a",Mt.CLOSE="b",Mt.ERROR="c",Mt.MESSAGE="d",Q1.prototype.listen=Q1.prototype.K,E5=l0.WebChannel=v7,Kc=l0.FetchXmlHttpFactory=At,y1.prototype.listenOnce=y1.prototype.L,y1.prototype.getLastError=y1.prototype.Ka,y1.prototype.getLastErrorCode=y1.prototype.Ba,y1.prototype.getStatus=y1.prototype.Z,y1.prototype.getResponseJson=y1.prototype.Oa,y1.prototype.getResponseText=y1.prototype.oa,y1.prototype.send=y1.prototype.ea,y1.prototype.setWithCredentials=y1.prototype.Ha,Wc=l0.XhrIo=y1}).apply(typeof As<"u"?As:typeof self<"u"?self:typeof window<"u"?window:{});var bi="@firebase/firestore";var j1=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};j1.UNAUTHENTICATED=new j1(null),j1.GOOGLE_CREDENTIALS=new j1("google-credentials-uid"),j1.FIRST_PARTY=new j1("first-party-uid"),j1.MOCK_USER=new j1("mock-user");var st="10.12.5";var J0=new k5("@firebase/firestore");function V4(){return J0.logLevel}function D(s,...t){if(J0.logLevel<=l1.DEBUG){let e=t.map(Nn);J0.debug(`Firestore (${st}): ${s}`,...e)}}function i0(s,...t){if(J0.logLevel<=l1.ERROR){let e=t.map(Nn);J0.error(`Firestore (${st}): ${s}`,...e)}}function j5(s,...t){if(J0.logLevel<=l1.WARN){let e=t.map(Nn);J0.warn(`Firestore (${st}): ${s}`,...e)}}function Nn(s){if(typeof s=="string")return s;try{return function(e){return JSON.stringify(e)}(s)}catch{return s}}function W(s="Unexpected state"){let t=`FIRESTORE (${st}) INTERNAL ASSERTION FAILED: `+s;throw i0(t),new Error(t)}function x1(s,t){s||W()}function Q(s,t){return s}var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends c0{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var N2=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Ts=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},cr=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(j1.UNAUTHENTICATED))}shutdown(){}},rr=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},nr=class{constructor(t){this.t=t,this.currentUser=j1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let o=this.i,c=h=>this.i!==o?(o=this.i,e(h)):Promise.resolve(),r=new N2;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new N2,t.enqueueRetryable(()=>c(this.currentUser))};let n=()=>{let h=r;t.enqueueRetryable(()=>S(this,null,function*(){yield h.promise,yield c(this.currentUser)}))},a=h=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),n()};this.t.onInit(h=>a(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?a(h):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new N2)}},0),n()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(o=>this.i!==t?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(x1(typeof o.accessToken=="string"),new Ts(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return x1(t===null||typeof t=="string"),new j1(t)}},lr=class{constructor(t,e,o){this.l=t,this.h=e,this.P=o,this.type="FirstParty",this.user=j1.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ar=class{constructor(t,e,o){this.l=t,this.h=e,this.P=o}getToken(){return Promise.resolve(new lr(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(j1.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ir=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hr=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let o=r=>{r.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let n=r.token!==this.R;return this.R=r.token,D("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>o(r))};let c=r=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>c(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?c(r):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(x1(typeof e.token=="string"),this.R=e.token,new ir(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function $u(s){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let o=0;o<s;o++)e[o]=Math.floor(256*Math.random());return e}var Is=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,o="";for(;o.length<20;){let c=$u(40);for(let r=0;r<c.length;++r)o.length<20&&c[r]<e&&(o+=t.charAt(c[r]%t.length))}return o}};function d1(s,t){return s<t?-1:s>t?1:0}function Z5(s,t,e){return s.length===t.length&&s.every((o,c)=>e(o,t[c]))}var W1=class s{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new j(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new j(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new j(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return s.fromMillis(Date.now())}static fromDate(t){return s.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*e));return new s(e,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?d1(this.nanoseconds,t.nanoseconds):d1(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class s{constructor(t){this.timestamp=t}static fromTimestamp(t){return new s(t)}static min(){return new s(new W1(0,0))}static max(){return new s(new W1(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ps=class s{constructor(t,e,o){e===void 0?e=0:e>t.length&&W(),o===void 0?o=t.length-e:o>t.length-e&&W(),this.segments=t,this.offset=e,this.len=o}get length(){return this.len}isEqual(t){return s.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof s?t.forEach(o=>{e.push(o)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let o=Math.min(t.length,e.length);for(let c=0;c<o;c++){let r=t.get(c),n=e.get(c);if(r<n)return-1;if(r>n)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},A1=class s extends Ps{construct(t,e,o){return new s(t,e,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let o of t){if(o.indexOf("//")>=0)throw new j(b.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);e.push(...o.split("/").filter(c=>c.length>0))}return new s(e)}static emptyPath(){return new s([])}},Gu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,m2=class s extends Ps{construct(t,e,o){return new s(t,e,o)}static isValidIdentifier(t){return Gu.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),s.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new s(["__name__"])}static fromServerFormat(t){let e=[],o="",c=0,r=()=>{if(o.length===0)throw new j(b.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(o),o=""},n=!1;for(;c<t.length;){let a=t[c];if(a==="\\"){if(c+1===t.length)throw new j(b.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let h=t[c+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new j(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=h,c+=2}else a==="`"?(n=!n,c++):a!=="."||n?(o+=a,c++):(r(),c++)}if(r(),n)throw new j(b.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new s(e)}static emptyPath(){return new s([])}};var U=class s{constructor(t){this.path=t}static fromPath(t){return new s(A1.fromString(t))}static fromName(t){return new s(A1.fromString(t).popFirst(5))}static empty(){return new s(A1.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&A1.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return A1.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new s(new A1(t.slice()))}};var vr=class{constructor(t,e,o,c){this.indexId=t,this.collectionGroup=e,this.fields=o,this.indexState=c}};vr.UNKNOWN_ID=-1;function Wu(s,t){let e=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,c=J.fromTimestamp(o===1e9?new W1(e+1,0):new W1(e,o));return new X0(c,U.empty(),t)}function Ku(s){return new X0(s.readTime,s.key,-1)}var X0=class s{constructor(t,e,o){this.readTime=t,this.documentKey=e,this.largestBatchId=o}static min(){return new s(J.min(),U.empty(),-1)}static max(){return new s(J.max(),U.empty(),-1)}};function Qu(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=U.comparator(s.documentKey,t.documentKey),e!==0?e:d1(s.largestBatchId,t.largestBatchId))}var Yu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gr=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function N4(s){return S(this,null,function*(){if(s.code!==b.FAILED_PRECONDITION||s.message!==Yu)throw s;D("LocalStore","Unexpectedly lost primary lease")})}var E=class s{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new s((o,c)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(o,c)},this.catchCallback=r=>{this.wrapFailure(e,r).next(o,c)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof s?e:s.resolve(e)}catch(e){return s.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):s.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):s.reject(e)}static resolve(t){return new s((e,o)=>{e(t)})}static reject(t){return new s((e,o)=>{o(t)})}static waitFor(t){return new s((e,o)=>{let c=0,r=0,n=!1;t.forEach(a=>{++c,a.next(()=>{++r,n&&r===c&&e()},h=>o(h))}),n=!0,r===c&&e()})}static or(t){let e=s.resolve(!1);for(let o of t)e=e.next(c=>c?s.resolve(c):o());return e}static forEach(t,e){let o=[];return t.forEach((c,r)=>{o.push(e.call(this,c,r))}),this.waitFor(o)}static mapArray(t,e){return new s((o,c)=>{let r=t.length,n=new Array(r),a=0;for(let h=0;h<r;h++){let v=h;e(t[v]).next(d=>{n[v]=d,++a,a===r&&o(n)},d=>c(d))}})}static doWhile(t,e){return new s((o,c)=>{let r=()=>{t()===!0?e().next(()=>{r()},c):o()};r()})}};function Ju(s){let t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function F4(s){return s.name==="IndexedDbTransactionError"}var lh=(()=>{class s{constructor(e,o){this.previousValue=e,o&&(o.sequenceNumberHandler=c=>this.ie(c),this.se=c=>o.writeSequenceNumber(c))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return s.oe=-1,s})();function h3(s){return s==null}function A4(s){return s===0&&1/s==-1/0}function Xu(s){return typeof s=="number"&&Number.isInteger(s)&&!A4(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}var tp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NC=[...tp,"documentOverlays"],ep=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sp=ep,op=[...sp,"indexConfiguration","indexState","indexEntries"];var FC=[...op,"globals"];function ki(s){let t=0;for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function n5(s,t){for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function ah(s){for(let t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}var S1=class s{constructor(t,e){this.comparator=t,this.root=e||F2.EMPTY}insert(t,e){return new s(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,F2.BLACK,null,null))}remove(t){return new s(this.comparator,this.root.remove(t,this.comparator).copy(null,null,F2.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let o=this.comparator(t,e.key);if(o===0)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null}indexOf(t){let e=0,o=this.root;for(;!o.isEmpty();){let c=this.comparator(t,o.key);if(c===0)return e+o.left.size;c<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,o)=>(t(e,o),!1))}toString(){let t=[];return this.inorderTraversal((e,o)=>(t.push(`${e}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new D5(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new D5(this.root,t,this.comparator,!1)}getReverseIterator(){return new D5(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new D5(this.root,t,this.comparator,!0)}},D5=class{constructor(t,e,o,c){this.isReverse=c,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?o(t.key,e):1,e&&c&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},F2=class s{constructor(t,e,o,c,r){this.key=t,this.value=e,this.color=o??s.RED,this.left=c??s.EMPTY,this.right=r??s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,o,c,r){return new s(t??this.key,e??this.value,o??this.color,c??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,o){let c=this,r=o(t,c.key);return c=r<0?c.copy(null,null,null,c.left.insert(t,e,o),null):r===0?c.copy(null,e,null,null,null):c.copy(null,null,null,null,c.right.insert(t,e,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let o,c=this;if(e(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,e),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),e(t,c.key)===0){if(c.right.isEmpty())return s.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,e))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let t=this.left.check();if(t!==this.right.check())throw W();return t+(this.isRed()?0:1)}};F2.EMPTY=null,F2.RED=!0,F2.BLACK=!1;F2.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(t,e,o,c,r){return this}insert(t,e,o){return new F2(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var o2=class s{constructor(t){this.comparator=t,this.data=new S1(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,o)=>(t(e),!1))}forEachInRange(t,e){let o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){let c=o.getNext();if(this.comparator(c.key,t[1])>=0)return;e(c.key)}}forEachWhile(t,e){let o;for(o=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ds(this.data.getIterator())}getIteratorFrom(t){return new Ds(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(o=>{e=e.add(o)}),e}isEqual(t){if(!(t instanceof s)||this.size!==t.size)return!1;let e=this.data.getIterator(),o=t.data.getIterator();for(;e.hasNext();){let c=e.getNext().key,r=o.getNext().key;if(this.comparator(c,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new s(this.comparator);return e.data=t,e}},Ds=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var H2=class s{constructor(t){this.fields=t,t.sort(m2.comparator)}static empty(){return new s([])}unionWith(t){let e=new o2(m2.comparator);for(let o of this.fields)e=e.add(o);for(let o of t)e=e.add(o);return new s(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Z5(this.fields,t.fields,(e,o)=>e.isEqual(o))}};var Os=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var c2=class s{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(c){try{return atob(c)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Os("Invalid base64 string: "+r):r}}(t);return new s(e)}static fromUint8Array(t){let e=function(c){let r="";for(let n=0;n<c.length;++n)r+=String.fromCharCode(c[n]);return r}(t);return new s(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let o=new Uint8Array(e.length);for(let c=0;c<e.length;c++)o[c]=e.charCodeAt(c);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return d1(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};c2.EMPTY_BYTE_STRING=new c2("");var cp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function h0(s){if(x1(!!s),typeof s=="string"){let t=0,e=cp.exec(s);if(x1(!!e),e[1]){let c=e[1];c=(c+"000000000").substr(0,9),t=Number(c)}let o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:_1(s.seconds),nanos:_1(s.nanos)}}function _1(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function b0(s){return typeof s=="string"?c2.fromBase64String(s):c2.fromUint8Array(s)}function Fn(s){var t,e;return((e=(((t=s?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function jn(s){let t=s.mapValue.fields.__previous_value__;return Fn(t)?jn(t):t}function S4(s){let t=h0(s.mapValue.fields.__local_write_time__.timestampValue);return new W1(t.seconds,t.nanos)}var dr=class{constructor(t,e,o,c,r,n,a,h,v){this.databaseId=t,this.appId=e,this.persistenceKey=o,this.host=c,this.ssl=r,this.forceLongPolling=n,this.autoDetectLongPolling=a,this.longPollingOptions=h,this.useFetchStreams=v}},Ns=class s{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof s&&t.projectId===this.projectId&&t.database===this.database}};var Rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function t5(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Fn(s)?4:ih(s)?9007199254740991:10:W()}function U2(s,t){if(s===t)return!0;let e=t5(s);if(e!==t5(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return S4(s).isEqual(S4(t));case 3:return function(c,r){if(typeof c.timestampValue=="string"&&typeof r.timestampValue=="string"&&c.timestampValue.length===r.timestampValue.length)return c.timestampValue===r.timestampValue;let n=h0(c.timestampValue),a=h0(r.timestampValue);return n.seconds===a.seconds&&n.nanos===a.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(c,r){return b0(c.bytesValue).isEqual(b0(r.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(c,r){return _1(c.geoPointValue.latitude)===_1(r.geoPointValue.latitude)&&_1(c.geoPointValue.longitude)===_1(r.geoPointValue.longitude)}(s,t);case 2:return function(c,r){if("integerValue"in c&&"integerValue"in r)return _1(c.integerValue)===_1(r.integerValue);if("doubleValue"in c&&"doubleValue"in r){let n=_1(c.doubleValue),a=_1(r.doubleValue);return n===a?A4(n)===A4(a):isNaN(n)&&isNaN(a)}return!1}(s,t);case 9:return Z5(s.arrayValue.values||[],t.arrayValue.values||[],U2);case 10:return function(c,r){let n=c.mapValue.fields||{},a=r.mapValue.fields||{};if(ki(n)!==ki(a))return!1;for(let h in n)if(n.hasOwnProperty(h)&&(a[h]===void 0||!U2(n[h],a[h])))return!1;return!0}(s,t);default:return W()}}function R4(s,t){return(s.values||[]).find(e=>U2(e,t))!==void 0}function U5(s,t){if(s===t)return 0;let e=t5(s),o=t5(t);if(e!==o)return d1(e,o);switch(e){case 0:case 9007199254740991:return 0;case 1:return d1(s.booleanValue,t.booleanValue);case 2:return function(r,n){let a=_1(r.integerValue||r.doubleValue),h=_1(n.integerValue||n.doubleValue);return a<h?-1:a>h?1:a===h?0:isNaN(a)?isNaN(h)?0:-1:1}(s,t);case 3:return Ei(s.timestampValue,t.timestampValue);case 4:return Ei(S4(s),S4(t));case 5:return d1(s.stringValue,t.stringValue);case 6:return function(r,n){let a=b0(r),h=b0(n);return a.compareTo(h)}(s.bytesValue,t.bytesValue);case 7:return function(r,n){let a=r.split("/"),h=n.split("/");for(let v=0;v<a.length&&v<h.length;v++){let d=d1(a[v],h[v]);if(d!==0)return d}return d1(a.length,h.length)}(s.referenceValue,t.referenceValue);case 8:return function(r,n){let a=d1(_1(r.latitude),_1(n.latitude));return a!==0?a:d1(_1(r.longitude),_1(n.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return function(r,n){let a=r.values||[],h=n.values||[];for(let v=0;v<a.length&&v<h.length;++v){let d=U5(a[v],h[v]);if(d)return d}return d1(a.length,h.length)}(s.arrayValue,t.arrayValue);case 10:return function(r,n){if(r===Rs.mapValue&&n===Rs.mapValue)return 0;if(r===Rs.mapValue)return 1;if(n===Rs.mapValue)return-1;let a=r.fields||{},h=Object.keys(a),v=n.fields||{},d=Object.keys(v);h.sort(),d.sort();for(let u=0;u<h.length&&u<d.length;++u){let z=d1(h[u],d[u]);if(z!==0)return z;let y=U5(a[h[u]],v[d[u]]);if(y!==0)return y}return d1(h.length,d.length)}(s.mapValue,t.mapValue);default:throw W()}}function Ei(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return d1(s,t);let e=h0(s),o=h0(t),c=d1(e.seconds,o.seconds);return c!==0?c:d1(e.nanos,o.nanos)}function q5(s){return wr(s)}function wr(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){let o=h0(e);return`time(${o.seconds},${o.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return b0(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return U.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let o="[",c=!0;for(let r of e.values||[])c?c=!1:o+=",",o+=wr(r);return o+"]"}(s.arrayValue):"mapValue"in s?function(e){let o=Object.keys(e.fields||{}).sort(),c="{",r=!0;for(let n of o)r?r=!1:c+=",",c+=`${n}:${wr(e.fields[n])}`;return c+"}"}(s.mapValue):W()}function ur(s){return!!s&&"integerValue"in s}function Zn(s){return!!s&&"arrayValue"in s}function Ti(s){return!!s&&"nullValue"in s}function Ii(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ks(s){return!!s&&"mapValue"in s}function L4(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){let t={mapValue:{fields:{}}};return n5(s.mapValue.fields,(e,o)=>t.mapValue.fields[e]=L4(o)),t}if(s.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=L4(s.arrayValue.values[e]);return t}return Object.assign({},s)}function ih(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var p2=class s{constructor(t){this.value=t}static empty(){return new s({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let o=0;o<t.length-1;++o)if(e=(e.mapValue.fields||{})[t.get(o)],!ks(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=L4(e)}setAll(t){let e=m2.emptyPath(),o={},c=[];t.forEach((n,a)=>{if(!e.isImmediateParentOf(a)){let h=this.getFieldsMap(e);this.applyChanges(h,o,c),o={},c=[],e=a.popLast()}n?o[a.lastSegment()]=L4(n):c.push(a.lastSegment())});let r=this.getFieldsMap(e);this.applyChanges(r,o,c)}delete(t){let e=this.field(t.popLast());ks(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return U2(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let o=0;o<t.length;++o){let c=e.mapValue.fields[t.get(o)];ks(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=c),e=c}return e.mapValue.fields}applyChanges(t,e,o){n5(e,(c,r)=>t[c]=r);for(let c of o)delete t[c]}clone(){return new s(L4(this.value))}};function hh(s){let t=[];return n5(s.fields,(e,o)=>{let c=new m2([e]);if(ks(o)){let r=hh(o.mapValue).fields;if(r.length===0)t.push(c);else for(let n of r)t.push(c.child(n))}else t.push(c)}),new H2(t)}var b2=class s{constructor(t,e,o,c,r,n,a){this.key=t,this.documentType=e,this.version=o,this.readTime=c,this.createTime=r,this.data=n,this.documentState=a}static newInvalidDocument(t){return new s(t,0,J.min(),J.min(),J.min(),p2.empty(),0)}static newFoundDocument(t,e,o,c){return new s(t,1,e,J.min(),o,c,0)}static newNoDocument(t,e){return new s(t,2,e,J.min(),J.min(),p2.empty(),0)}static newUnknownDocument(t,e){return new s(t,3,e,J.min(),J.min(),p2.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=p2.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=p2.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof s&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $5=class{constructor(t,e){this.position=t,this.inclusive=e}};function Pi(s,t,e){let o=0;for(let c=0;c<s.position.length;c++){let r=t[c],n=s.position[c];if(r.field.isKeyField()?o=U.comparator(U.fromName(n.referenceValue),e.key):o=U5(n,e.data.field(r.field)),r.dir==="desc"&&(o*=-1),o!==0)break}return o}function Di(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!U2(s.position[e],t.position[e]))return!1;return!0}var G5=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function rp(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}var Fs=class{},P1=class s extends Fs{constructor(t,e,o){super(),this.field=t,this.op=e,this.value=o}static create(t,e,o){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,o):new mr(t,e,o):e==="array-contains"?new xr(t,o):e==="in"?new Mr(t,o):e==="not-in"?new Cr(t,o):e==="array-contains-any"?new Vr(t,o):new s(t,e,o)}static createKeyFieldInFilter(t,e,o){return e==="in"?new fr(t,o):new zr(t,o)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(U5(e,this.value)):e!==null&&t5(this.value)===t5(e)&&this.matchesComparison(U5(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},q2=class s extends Fs{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new s(t,e)}matches(t){return vh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function vh(s){return s.op==="and"}function gh(s){return np(s)&&vh(s)}function np(s){for(let t of s.filters)if(t instanceof q2)return!1;return!0}function pr(s){if(s instanceof P1)return s.field.canonicalString()+s.op.toString()+q5(s.value);if(gh(s))return s.filters.map(t=>pr(t)).join(",");{let t=s.filters.map(e=>pr(e)).join(",");return`${s.op}(${t})`}}function dh(s,t){return s instanceof P1?function(o,c){return c instanceof P1&&o.op===c.op&&o.field.isEqual(c.field)&&U2(o.value,c.value)}(s,t):s instanceof q2?function(o,c){return c instanceof q2&&o.op===c.op&&o.filters.length===c.filters.length?o.filters.reduce((r,n,a)=>r&&dh(n,c.filters[a]),!0):!1}(s,t):void W()}function wh(s){return s instanceof P1?function(e){return`${e.field.canonicalString()} ${e.op} ${q5(e.value)}`}(s):s instanceof q2?function(e){return e.op.toString()+" {"+e.getFilters().map(wh).join(" ,")+"}"}(s):"Filter"}var mr=class extends P1{constructor(t,e,o){super(t,e,o),this.key=U.fromName(o.referenceValue)}matches(t){let e=U.comparator(t.key,this.key);return this.matchesComparison(e)}},fr=class extends P1{constructor(t,e){super(t,"in",e),this.keys=uh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},zr=class extends P1{constructor(t,e){super(t,"not-in",e),this.keys=uh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function uh(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(o=>U.fromName(o.referenceValue))}var xr=class extends P1{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Zn(e)&&R4(e.arrayValue,this.value)}},Mr=class extends P1{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&R4(this.value.arrayValue,e)}},Cr=class extends P1{constructor(t,e){super(t,"not-in",e)}matches(t){if(R4(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!R4(this.value.arrayValue,e)}},Vr=class extends P1{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Zn(e)||!e.arrayValue.values)&&e.arrayValue.values.some(o=>R4(this.value.arrayValue,o))}};var Hr=class{constructor(t,e=null,o=[],c=[],r=null,n=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=o,this.filters=c,this.limit=r,this.startAt=n,this.endAt=a,this.ue=null}};function Oi(s,t=null,e=[],o=[],c=null,r=null,n=null){return new Hr(s,t,e,o,c,r,n)}function Un(s){let t=Q(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(o=>pr(o)).join(","),e+="|ob:",e+=t.orderBy.map(o=>function(r){return r.field.canonicalString()+r.dir}(o)).join(","),h3(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(o=>q5(o)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(o=>q5(o)).join(",")),t.ue=e}return t.ue}function qn(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!rp(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!dh(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Di(s.startAt,t.startAt)&&Di(s.endAt,t.endAt)}function Lr(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}var W5=class{constructor(t,e=null,o=[],c=[],r=null,n="F",a=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=o,this.filters=c,this.limit=r,this.limitType=n,this.startAt=a,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function lp(s,t,e,o,c,r,n,a){return new W5(s,t,e,o,c,r,n,a)}function ph(s){return new W5(s)}function Ni(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function ap(s){return s.collectionGroup!==null}function y4(s){let t=Q(s);if(t.ce===null){t.ce=[];let e=new Set;for(let r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());let o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(n){let a=new o2(m2.comparator);return n.filters.forEach(h=>{h.getFlattenedFilters().forEach(v=>{v.isInequality()&&(a=a.add(v.field))})}),a})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new G5(r,o))}),e.has(m2.keyField().canonicalString())||t.ce.push(new G5(m2.keyField(),o))}return t.ce}function j2(s){let t=Q(s);return t.le||(t.le=ip(t,y4(s))),t.le}function ip(s,t){if(s.limitType==="F")return Oi(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(c=>{let r=c.dir==="desc"?"asc":"desc";return new G5(c.field,r)});let e=s.endAt?new $5(s.endAt.position,s.endAt.inclusive):null,o=s.startAt?new $5(s.startAt.position,s.startAt.inclusive):null;return Oi(s.path,s.collectionGroup,t,s.filters,s.limit,e,o)}}function yr(s,t,e){return new W5(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function v3(s,t){return qn(j2(s),j2(t))&&s.limitType===t.limitType}function mh(s){return`${Un(j2(s))}|lt:${s.limitType}`}function T5(s){return`Query(target=${function(e){let o=e.path.canonicalString();return e.collectionGroup!==null&&(o+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(o+=`, filters: [${e.filters.map(c=>wh(c)).join(", ")}]`),h3(e.limit)||(o+=", limit: "+e.limit),e.orderBy.length>0&&(o+=`, orderBy: [${e.orderBy.map(c=>function(n){return`${n.field.canonicalString()} (${n.dir})`}(c)).join(", ")}]`),e.startAt&&(o+=", startAt: ",o+=e.startAt.inclusive?"b:":"a:",o+=e.startAt.position.map(c=>q5(c)).join(",")),e.endAt&&(o+=", endAt: ",o+=e.endAt.inclusive?"a:":"b:",o+=e.endAt.position.map(c=>q5(c)).join(",")),`Target(${o})`}(j2(s))}; limitType=${s.limitType})`}function g3(s,t){return t.isFoundDocument()&&function(o,c){let r=c.key.path;return o.collectionGroup!==null?c.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(r):U.isDocumentKey(o.path)?o.path.isEqual(r):o.path.isImmediateParentOf(r)}(s,t)&&function(o,c){for(let r of y4(o))if(!r.field.isKeyField()&&c.data.field(r.field)===null)return!1;return!0}(s,t)&&function(o,c){for(let r of o.filters)if(!r.matches(c))return!1;return!0}(s,t)&&function(o,c){return!(o.startAt&&!function(n,a,h){let v=Pi(n,a,h);return n.inclusive?v<=0:v<0}(o.startAt,y4(o),c)||o.endAt&&!function(n,a,h){let v=Pi(n,a,h);return n.inclusive?v>=0:v>0}(o.endAt,y4(o),c))}(s,t)}function hp(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function fh(s){return(t,e)=>{let o=!1;for(let c of y4(s)){let r=vp(c,t,e);if(r!==0)return r;o=o||c.field.isKeyField()}return 0}}function vp(s,t,e){let o=s.field.isKeyField()?U.comparator(t.key,e.key):function(r,n,a){let h=n.data.field(r),v=a.data.field(r);return h!==null&&v!==null?U5(h,v):W()}(s.field,t,e);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return W()}}var k0=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),o=this.inner[e];if(o!==void 0){for(let[c,r]of o)if(this.equalsFn(c,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){let o=this.mapKeyFn(t),c=this.inner[o];if(c===void 0)return this.inner[o]=[[t,e]],void this.innerSize++;for(let r=0;r<c.length;r++)if(this.equalsFn(c[r][0],t))return void(c[r]=[t,e]);c.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),o=this.inner[e];if(o===void 0)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return o.length===1?delete this.inner[e]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(t){n5(this.inner,(e,o)=>{for(let[c,r]of o)t(c,r)})}isEmpty(){return ah(this.inner)}size(){return this.innerSize}};var gp=new S1(U.comparator);function v0(){return gp}var zh=new S1(U.comparator);function H4(...s){let t=zh;for(let e of s)t=t.insert(e.key,e);return t}function xh(s){let t=zh;return s.forEach((e,o)=>t=t.insert(e,o.overlayedDocument)),t}function Q0(){return B4()}function Mh(){return B4()}function B4(){return new k0(s=>s.toString(),(s,t)=>s.isEqual(t))}var dp=new S1(U.comparator),wp=new o2(U.comparator);function o1(...s){let t=wp;for(let e of s)t=t.add(e);return t}var up=new o2(d1);function pp(){return up}function Ch(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:A4(t)?"-0":t}}function Vh(s){return{integerValue:""+s}}function mp(s,t){return Xu(t)?Vh(t):Ch(s,t)}var K5=class{constructor(){this._=void 0}};function fp(s,t,e){return s instanceof Q5?function(c,r){let n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return r&&Fn(r)&&(r=jn(r)),r&&(n.fields.__previous_value__=r),{mapValue:n}}(e,t):s instanceof e5?Lh(s,t):s instanceof s5?yh(s,t):function(c,r){let n=Hh(c,r),a=Fi(n)+Fi(c.Pe);return ur(n)&&ur(c.Pe)?Vh(a):Ch(c.serializer,a)}(s,t)}function zp(s,t,e){return s instanceof e5?Lh(s,t):s instanceof s5?yh(s,t):e}function Hh(s,t){return s instanceof Y5?function(o){return ur(o)||function(r){return!!r&&"doubleValue"in r}(o)}(t)?t:{integerValue:0}:null}var Q5=class extends K5{},e5=class extends K5{constructor(t){super(),this.elements=t}};function Lh(s,t){let e=Bh(t);for(let o of s.elements)e.some(c=>U2(c,o))||e.push(o);return{arrayValue:{values:e}}}var s5=class extends K5{constructor(t){super(),this.elements=t}};function yh(s,t){let e=Bh(t);for(let o of s.elements)e=e.filter(c=>!U2(c,o));return{arrayValue:{values:e}}}var Y5=class extends K5{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function Fi(s){return _1(s.integerValue||s.doubleValue)}function Bh(s){return Zn(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function xp(s,t){return s.field.isEqual(t.field)&&function(o,c){return o instanceof e5&&c instanceof e5||o instanceof s5&&c instanceof s5?Z5(o.elements,c.elements,U2):o instanceof Y5&&c instanceof Y5?U2(o.Pe,c.Pe):o instanceof Q5&&c instanceof Q5}(s.transform,t.transform)}var Br=class{constructor(t,e){this.version=t,this.transformResults=e}},a0=class s{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new s}static exists(t){return new s(void 0,t)}static updateTime(t){return new s(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Es(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}var J5=class{};function _h(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new b4(s.key,a0.none()):new o5(s.key,s.data,a0.none());{let e=s.data,o=p2.empty(),c=new o2(m2.comparator);for(let r of t.fields)if(!c.has(r)){let n=e.field(r);n===null&&r.length>1&&(r=r.popLast(),n=e.field(r)),n===null?o.delete(r):o.set(r,n),c=c.add(r)}return new $2(s.key,o,new H2(c.toArray()),a0.none())}}function Mp(s,t,e){s instanceof o5?function(c,r,n){let a=c.value.clone(),h=Zi(c.fieldTransforms,r,n.transformResults);a.setAll(h),r.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(s,t,e):s instanceof $2?function(c,r,n){if(!Es(c.precondition,r))return void r.convertToUnknownDocument(n.version);let a=Zi(c.fieldTransforms,r,n.transformResults),h=r.data;h.setAll(Ah(c)),h.setAll(a),r.convertToFoundDocument(n.version,h).setHasCommittedMutations()}(s,t,e):function(c,r,n){r.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,e)}function _4(s,t,e,o){return s instanceof o5?function(r,n,a,h){if(!Es(r.precondition,n))return a;let v=r.value.clone(),d=Ui(r.fieldTransforms,h,n);return v.setAll(d),n.convertToFoundDocument(n.version,v).setHasLocalMutations(),null}(s,t,e,o):s instanceof $2?function(r,n,a,h){if(!Es(r.precondition,n))return a;let v=Ui(r.fieldTransforms,h,n),d=n.data;return d.setAll(Ah(r)),d.setAll(v),n.convertToFoundDocument(n.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(s,t,e,o):function(r,n,a){return Es(r.precondition,n)?(n.convertToNoDocument(n.version).setHasLocalMutations(),null):a}(s,t,e)}function Cp(s,t){let e=null;for(let o of s.fieldTransforms){let c=t.data.field(o.field),r=Hh(o.transform,c||null);r!=null&&(e===null&&(e=p2.empty()),e.set(o.field,r))}return e||null}function ji(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(o,c){return o===void 0&&c===void 0||!(!o||!c)&&Z5(o,c,(r,n)=>xp(r,n))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}var o5=class extends J5{constructor(t,e,o,c=[]){super(),this.key=t,this.value=e,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}},$2=class extends J5{constructor(t,e,o,c,r=[]){super(),this.key=t,this.data=e,this.fieldMask=o,this.precondition=c,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function Ah(s){let t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let o=s.data.field(e);t.set(e,o)}}),t}function Zi(s,t,e){let o=new Map;x1(s.length===e.length);for(let c=0;c<e.length;c++){let r=s[c],n=r.transform,a=t.data.field(r.field);o.set(r.field,zp(n,a,e[c]))}return o}function Ui(s,t,e){let o=new Map;for(let c of s){let r=c.transform,n=e.data.field(c.field);o.set(c.field,fp(r,n,t))}return o}var b4=class extends J5{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_r=class extends J5{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ar=class{constructor(t,e,o,c){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(t,e){let o=e.mutationResults;for(let c=0;c<this.mutations.length;c++){let r=this.mutations[c];r.key.isEqual(t.key)&&Mp(r,t,o[c])}}applyToLocalView(t,e){for(let o of this.baseMutations)o.key.isEqual(t.key)&&(e=_4(o,t,e,this.localWriteTime));for(let o of this.mutations)o.key.isEqual(t.key)&&(e=_4(o,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let o=Mh();return this.mutations.forEach(c=>{let r=t.get(c.key),n=r.overlayedDocument,a=this.applyToLocalView(n,r.mutatedFields);a=e.has(c.key)?null:a;let h=_h(n,a);h!==null&&o.set(c.key,h),n.isValidDocument()||n.convertToNoDocument(J.min())}),o}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),o1())}isEqual(t){return this.batchId===t.batchId&&Z5(this.mutations,t.mutations,(e,o)=>ji(e,o))&&Z5(this.baseMutations,t.baseMutations,(e,o)=>ji(e,o))}},Sr=class s{constructor(t,e,o,c){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=c}static from(t,e,o){x1(t.mutations.length===o.length);let c=function(){return dp}(),r=t.mutations;for(let n=0;n<r.length;n++)c=c.insert(r[n].key,o[n].version);return new s(t,e,o,c)}};var Rr=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var br=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var b1,n1;function Vp(s){switch(s){default:return W();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function Sh(s){if(s===void 0)return i0("GRPC error has no .code"),b.UNKNOWN;switch(s){case b1.OK:return b.OK;case b1.CANCELLED:return b.CANCELLED;case b1.UNKNOWN:return b.UNKNOWN;case b1.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case b1.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case b1.INTERNAL:return b.INTERNAL;case b1.UNAVAILABLE:return b.UNAVAILABLE;case b1.UNAUTHENTICATED:return b.UNAUTHENTICATED;case b1.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case b1.NOT_FOUND:return b.NOT_FOUND;case b1.ALREADY_EXISTS:return b.ALREADY_EXISTS;case b1.PERMISSION_DENIED:return b.PERMISSION_DENIED;case b1.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case b1.ABORTED:return b.ABORTED;case b1.OUT_OF_RANGE:return b.OUT_OF_RANGE;case b1.UNIMPLEMENTED:return b.UNIMPLEMENTED;case b1.DATA_LOSS:return b.DATA_LOSS;default:return W()}}(n1=b1||(b1={}))[n1.OK=0]="OK",n1[n1.CANCELLED=1]="CANCELLED",n1[n1.UNKNOWN=2]="UNKNOWN",n1[n1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",n1[n1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",n1[n1.NOT_FOUND=5]="NOT_FOUND",n1[n1.ALREADY_EXISTS=6]="ALREADY_EXISTS",n1[n1.PERMISSION_DENIED=7]="PERMISSION_DENIED",n1[n1.UNAUTHENTICATED=16]="UNAUTHENTICATED",n1[n1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",n1[n1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",n1[n1.ABORTED=10]="ABORTED",n1[n1.OUT_OF_RANGE=11]="OUT_OF_RANGE",n1[n1.UNIMPLEMENTED=12]="UNIMPLEMENTED",n1[n1.INTERNAL=13]="INTERNAL",n1[n1.UNAVAILABLE=14]="UNAVAILABLE",n1[n1.DATA_LOSS=15]="DATA_LOSS";var qi=null;function Hp(){return new TextEncoder}var Lp=new S0([4294967295,4294967295],0);function $i(s){let t=Hp().encode(s),e=new Gc;return e.update(t),new Uint8Array(e.digest())}function Gi(s){let t=new DataView(s.buffer),e=t.getUint32(0,!0),o=t.getUint32(4,!0),c=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new S0([e,o],0),new S0([c,r],0)]}var kr=class s{constructor(t,e,o){if(this.bitmap=t,this.padding=e,this.hashCount=o,e<0||e>=8)throw new Y0(`Invalid padding: ${e}`);if(o<0)throw new Y0(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new Y0(`Invalid hash count: ${o}`);if(t.length===0&&e!==0)throw new Y0(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=S0.fromNumber(this.Ie)}Ee(t,e,o){let c=t.add(e.multiply(S0.fromNumber(o)));return c.compare(Lp)===1&&(c=new S0([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=$i(t),[o,c]=Gi(e);for(let r=0;r<this.hashCount;r++){let n=this.Ee(o,c,r);if(!this.de(n))return!1}return!0}static create(t,e,o){let c=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),n=new s(r,c,e);return o.forEach(a=>n.insert(a)),n}insert(t){if(this.Ie===0)return;let e=$i(t),[o,c]=Gi(e);for(let r=0;r<this.hashCount;r++){let n=this.Ee(o,c,r);this.Ae(n)}}Ae(t){let e=Math.floor(t/8),o=t%8;this.bitmap[e]|=1<<o}},Y0=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var js=class s{constructor(t,e,o,c,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,o){let c=new Map;return c.set(t,k4.createSynthesizedTargetChangeForCurrentChange(t,e,o)),new s(J.min(),c,new S1(d1),v0(),o1())}},k4=class s{constructor(t,e,o,c,r){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,o){return new s(o,e,o1(),o1(),o1())}};var N5=class{constructor(t,e,o,c){this.Re=t,this.removedTargetIds=e,this.key=o,this.Ve=c}},Zs=class{constructor(t,e){this.targetId=t,this.me=e}},Us=class{constructor(t,e,o=c2.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=e,this.resumeToken=o,this.cause=c}},qs=class{constructor(){this.fe=0,this.ge=Ki(),this.pe=c2.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=o1(),e=o1(),o=o1();return this.ge.forEach((c,r)=>{switch(r){case 0:t=t.add(c);break;case 2:e=e.add(c);break;case 1:o=o.add(c);break;default:W()}}),new k4(this.pe,this.ye,t,e,o)}ve(){this.we=!1,this.ge=Ki()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,x1(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Er=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=v0(),this.qe=Wi(),this.Qe=new S1(d1)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let o=this.Ge(e);switch(t.state){case 0:this.ze(e)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.ve(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),o.De(t.resumeToken));break;default:W()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((o,c)=>{this.ze(c)&&e(c)})}He(t){let e=t.targetId,o=t.me.count,c=this.Je(e);if(c){let r=c.target;if(Lr(r))if(o===0){let n=new U(r.path);this.Ue(e,n,b2.newNoDocument(n,J.min()))}else x1(o===1);else{let n=this.Ye(e);if(n!==o){let a=this.Ze(t),h=a?this.Xe(a,t,n):1;if(h!==0){this.je(e);let v=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,v)}qi?.et(function(d,u,z,y,A){var R,B,O,Z,P,r1;let R1={localCacheCount:d,existenceFilterCount:u.count,databaseId:z.database,projectId:z.projectId},s1=u.unchangedNames;return s1&&(R1.bloomFilter={applied:A===0,hashCount:(R=s1?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(Z=(O=(B=s1?.bits)===null||B===void 0?void 0:B.bitmap)===null||O===void 0?void 0:O.length)!==null&&Z!==void 0?Z:0,padding:(r1=(P=s1?.bits)===null||P===void 0?void 0:P.padding)!==null&&r1!==void 0?r1:0,mightContain:M=>{var p;return(p=y?.mightContain(M))!==null&&p!==void 0&&p}}),R1}(n,t.me,this.Le.tt(),a,h))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:o="",padding:c=0},hashCount:r=0}=e,n,a;try{n=b0(o).toUint8Array()}catch(h){if(h instanceof Os)return j5("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{a=new kr(n,c,r)}catch(h){return j5(h instanceof Y0?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return a.Ie===0?null:a}Xe(t,e,o){return e.me.count===o-this.nt(t,e.targetId)?0:2}nt(t,e){let o=this.Le.getRemoteKeysForTarget(e),c=0;return o.forEach(r=>{let n=this.Le.tt(),a=`projects/${n.projectId}/databases/${n.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,r,null),c++)}),c}rt(t){let e=new Map;this.Be.forEach((r,n)=>{let a=this.Je(n);if(a){if(r.current&&Lr(a.target)){let h=new U(a.target.path);this.ke.get(h)!==null||this.it(n,h)||this.Ue(n,h,b2.newNoDocument(h,t))}r.be&&(e.set(n,r.Ce()),r.ve())}});let o=o1();this.qe.forEach((r,n)=>{let a=!0;n.forEachWhile(h=>{let v=this.Je(h);return!v||v.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(o=o.add(r))}),this.ke.forEach((r,n)=>n.setReadTime(t));let c=new js(t,e,this.Qe,this.ke,o);return this.ke=v0(),this.qe=Wi(),this.Qe=new S1(d1),c}$e(t,e){if(!this.ze(t))return;let o=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,o),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,o){if(!this.ze(t))return;let c=this.Ge(t);this.it(t,e)?c.Fe(e,1):c.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),o&&(this.ke=this.ke.insert(e,o))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new qs,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new o2(d1),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||D("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new qs),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function Wi(){return new S1(U.comparator)}function Ki(){return new S1(U.comparator)}var yp={asc:"ASCENDING",desc:"DESCENDING"},Bp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_p={and:"AND",or:"OR"},Tr=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Ir(s,t){return s.useProto3Json||h3(t)?t:{value:t}}function $s(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rh(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Ap(s,t){return $s(s,t.toTimestamp())}function Z2(s){return x1(!!s),J.fromTimestamp(function(e){let o=h0(e);return new W1(o.seconds,o.nanos)}(s))}function $n(s,t){return Pr(s,t).canonicalString()}function Pr(s,t){let e=function(c){return new A1(["projects",c.projectId,"databases",c.database])}(s).child("documents");return t===void 0?e:e.child(t)}function bh(s){let t=A1.fromString(s);return x1(Ph(t)),t}function Dr(s,t){return $n(s.databaseId,t.path)}function tr(s,t){let e=bh(t);if(e.get(1)!==s.databaseId.projectId)throw new j(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new j(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new U(Eh(e))}function kh(s,t){return $n(s.databaseId,t)}function Sp(s){let t=bh(s);return t.length===4?A1.emptyPath():Eh(t)}function Or(s){return new A1(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Eh(s){return x1(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Qi(s,t,e){return{name:Dr(s,t),fields:e.value.mapValue.fields}}function Rp(s,t){let e;if("targetChange"in t){t.targetChange;let o=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:W()}(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],r=function(v,d){return v.useProto3Json?(x1(d===void 0||typeof d=="string"),c2.fromBase64String(d||"")):(x1(d===void 0||d instanceof Buffer||d instanceof Uint8Array),c2.fromUint8Array(d||new Uint8Array))}(s,t.targetChange.resumeToken),n=t.targetChange.cause,a=n&&function(v){let d=v.code===void 0?b.UNKNOWN:Sh(v.code);return new j(d,v.message||"")}(n);e=new Us(o,c,r,a||null)}else if("documentChange"in t){t.documentChange;let o=t.documentChange;o.document,o.document.name,o.document.updateTime;let c=tr(s,o.document.name),r=Z2(o.document.updateTime),n=o.document.createTime?Z2(o.document.createTime):J.min(),a=new p2({mapValue:{fields:o.document.fields}}),h=b2.newFoundDocument(c,r,n,a),v=o.targetIds||[],d=o.removedTargetIds||[];e=new N5(v,d,h.key,h)}else if("documentDelete"in t){t.documentDelete;let o=t.documentDelete;o.document;let c=tr(s,o.document),r=o.readTime?Z2(o.readTime):J.min(),n=b2.newNoDocument(c,r),a=o.removedTargetIds||[];e=new N5([],a,n.key,n)}else if("documentRemove"in t){t.documentRemove;let o=t.documentRemove;o.document;let c=tr(s,o.document),r=o.removedTargetIds||[];e=new N5([],r,c,null)}else{if(!("filter"in t))return W();{t.filter;let o=t.filter;o.targetId;let{count:c=0,unchangedNames:r}=o,n=new br(c,r),a=o.targetId;e=new Zs(a,n)}}return e}function bp(s,t){let e;if(t instanceof o5)e={update:Qi(s,t.key,t.value)};else if(t instanceof b4)e={delete:Dr(s,t.key)};else if(t instanceof $2)e={update:Qi(s,t.key,t.data),updateMask:Fp(t.fieldMask)};else{if(!(t instanceof _r))return W();e={verify:Dr(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(o=>function(r,n){let a=n.transform;if(a instanceof Q5)return{fieldPath:n.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof e5)return{fieldPath:n.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof s5)return{fieldPath:n.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Y5)return{fieldPath:n.field.canonicalString(),increment:a.Pe};throw W()}(0,o))),t.precondition.isNone||(e.currentDocument=function(c,r){return r.updateTime!==void 0?{updateTime:Ap(c,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:W()}(s,t.precondition)),e}function kp(s,t){return s&&s.length>0?(x1(t!==void 0),s.map(e=>function(c,r){let n=c.updateTime?Z2(c.updateTime):Z2(r);return n.isEqual(J.min())&&(n=Z2(r)),new Br(n,c.transformResults||[])}(e,t))):[]}function Ep(s,t){return{documents:[kh(s,t.path)]}}function Tp(s,t){let e={structuredQuery:{}},o=t.path,c;t.collectionGroup!==null?(c=o,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=o.popLast(),e.structuredQuery.from=[{collectionId:o.lastSegment()}]),e.parent=kh(s,c);let r=function(v){if(v.length!==0)return Ih(q2.create(v,"and"))}(t.filters);r&&(e.structuredQuery.where=r);let n=function(v){if(v.length!==0)return v.map(d=>function(z){return{field:I5(z.field),direction:Dp(z.dir)}}(d))}(t.orderBy);n&&(e.structuredQuery.orderBy=n);let a=Ir(s,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{_t:e,parent:c}}function Ip(s){let t=Sp(s.parent),e=s.structuredQuery,o=e.from?e.from.length:0,c=null;if(o>0){x1(o===1);let d=e.from[0];d.allDescendants?c=d.collectionId:t=t.child(d.collectionId)}let r=[];e.where&&(r=function(u){let z=Th(u);return z instanceof q2&&gh(z)?z.getFilters():[z]}(e.where));let n=[];e.orderBy&&(n=function(u){return u.map(z=>function(A){return new G5(P5(A.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(z))}(e.orderBy));let a=null;e.limit&&(a=function(u){let z;return z=typeof u=="object"?u.value:u,h3(z)?null:z}(e.limit));let h=null;e.startAt&&(h=function(u){let z=!!u.before,y=u.values||[];return new $5(y,z)}(e.startAt));let v=null;return e.endAt&&(v=function(u){let z=!u.before,y=u.values||[];return new $5(y,z)}(e.endAt)),lp(t,c,n,r,a,"F",h,v)}function Pp(s,t){let e=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Th(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let o=P5(e.unaryFilter.field);return P1.create(o,"==",{doubleValue:NaN});case"IS_NULL":let c=P5(e.unaryFilter.field);return P1.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=P5(e.unaryFilter.field);return P1.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=P5(e.unaryFilter.field);return P1.create(n,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(s):s.fieldFilter!==void 0?function(e){return P1.create(P5(e.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return q2.create(e.compositeFilter.filters.map(o=>Th(o)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return W()}}(e.compositeFilter.op))}(s):W()}function Dp(s){return yp[s]}function Op(s){return Bp[s]}function Np(s){return _p[s]}function I5(s){return{fieldPath:s.canonicalString()}}function P5(s){return m2.fromServerFormat(s.fieldPath)}function Ih(s){return s instanceof P1?function(e){if(e.op==="=="){if(Ii(e.value))return{unaryFilter:{field:I5(e.field),op:"IS_NAN"}};if(Ti(e.value))return{unaryFilter:{field:I5(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ii(e.value))return{unaryFilter:{field:I5(e.field),op:"IS_NOT_NAN"}};if(Ti(e.value))return{unaryFilter:{field:I5(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:I5(e.field),op:Op(e.op),value:e.value}}}(s):s instanceof q2?function(e){let o=e.getFilters().map(c=>Ih(c));return o.length===1?o[0]:{compositeFilter:{op:Np(e.op),filters:o}}}(s):W()}function Fp(s){let t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ph(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}var E4=class s{constructor(t,e,o,c,r=J.min(),n=J.min(),a=c2.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=n,this.resumeToken=a,this.expectedCount=h}withSequenceNumber(t){return new s(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Nr=class{constructor(t){this.ct=t}};function jp(s){let t=Ip({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?yr(t,t.limit,"L"):t}var Gs=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(_1(t.integerValue));else if("doubleValue"in t){let o=_1(t.doubleValue);isNaN(o)?this.dt(e,13):(this.dt(e,15),A4(o)?e.At(0):e.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(e,20),typeof o=="string"&&(o=h0(o)),e.Rt(`${o.seconds||""}`),e.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(b0(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let o=t.geoPointValue;this.dt(e,45),e.At(o.latitude||0),e.At(o.longitude||0)}else"mapValue"in t?ih(t)?this.dt(e,Number.MAX_SAFE_INTEGER):(this.wt(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.St(t.arrayValue,e),this.ft(e)):W()}Vt(t,e){this.dt(e,25),this.bt(t,e)}bt(t,e){e.Rt(t)}wt(t,e){let o=t.fields||{};this.dt(e,55);for(let c of Object.keys(o))this.Vt(c,e),this.Tt(o[c],e)}St(t,e){let o=t.values||[];this.dt(e,50);for(let c of o)this.Tt(c,e)}yt(t,e){this.dt(e,37),U.fromName(t).path.forEach(o=>{this.dt(e,60),this.bt(o,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};Gs.Dt=new Gs;var Fr=class{constructor(){this.an=new jr}addToCollectionParentIndex(t,e){return this.an.add(e),E.resolve()}getCollectionParents(t,e){return E.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return E.resolve()}deleteFieldIndex(t,e){return E.resolve()}deleteAllFieldIndexes(t){return E.resolve()}createTargetIndexes(t,e){return E.resolve()}getDocumentsMatchingTarget(t,e){return E.resolve(null)}getIndexType(t,e){return E.resolve(0)}getFieldIndexes(t,e){return E.resolve([])}getNextCollectionGroupToUpdate(t){return E.resolve(null)}getMinOffset(t,e){return E.resolve(X0.min())}getMinOffsetFromCollectionGroup(t,e){return E.resolve(X0.min())}updateCollectionGroup(t,e,o){return E.resolve()}updateIndexEntries(t,e){return E.resolve()}},jr=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),o=t.popLast(),c=this.index[e]||new o2(A1.comparator),r=!c.has(o);return this.index[e]=c.add(o),r}has(t){let e=t.lastSegment(),o=t.popLast(),c=this.index[e];return c&&c.has(o)}getEntries(t){return(this.index[t]||new o2(A1.comparator)).toArray()}};var ZC=new Uint8Array(0);var O2=class s{constructor(t,e,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new s(t,s.DEFAULT_COLLECTION_PERCENTILE,s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};O2.DEFAULT_COLLECTION_PERCENTILE=10,O2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,O2.DEFAULT=new O2(41943040,O2.DEFAULT_COLLECTION_PERCENTILE,O2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),O2.DISABLED=new O2(-1,0,0);var T4=class s{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new s(0)}static Bn(){return new s(-1)}};var Zr=class{constructor(){this.changes=new k0(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,b2.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let o=this.changes.get(e);return o!==void 0?E.resolve(o):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Ur=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var qr=class{constructor(t,e,o,c){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=o,this.indexManager=c}getDocument(t,e){let o=null;return this.documentOverlayCache.getOverlay(t,e).next(c=>(o=c,this.remoteDocumentCache.getEntry(t,e))).next(c=>(o!==null&&_4(o.mutation,c,H2.empty(),W1.now()),c))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.getLocalViewOfDocuments(t,o,o1()).next(()=>o))}getLocalViewOfDocuments(t,e,o=o1()){let c=Q0();return this.populateOverlays(t,c,e).next(()=>this.computeViews(t,e,c,o).next(r=>{let n=H4();return r.forEach((a,h)=>{n=n.insert(a,h.overlayedDocument)}),n}))}getOverlayedDocuments(t,e){let o=Q0();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,o1()))}populateOverlays(t,e,o){let c=[];return o.forEach(r=>{e.has(r)||c.push(r)}),this.documentOverlayCache.getOverlays(t,c).next(r=>{r.forEach((n,a)=>{e.set(n,a)})})}computeViews(t,e,o,c){let r=v0(),n=B4(),a=function(){return B4()}();return e.forEach((h,v)=>{let d=o.get(v.key);c.has(v.key)&&(d===void 0||d.mutation instanceof $2)?r=r.insert(v.key,v):d!==void 0?(n.set(v.key,d.mutation.getFieldMask()),_4(d.mutation,v,d.mutation.getFieldMask(),W1.now())):n.set(v.key,H2.empty())}),this.recalculateAndSaveOverlays(t,r).next(h=>(h.forEach((v,d)=>n.set(v,d)),e.forEach((v,d)=>{var u;return a.set(v,new Ur(d,(u=n.get(v))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(t,e){let o=B4(),c=new S1((n,a)=>n-a),r=o1();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(n=>{for(let a of n)a.keys().forEach(h=>{let v=e.get(h);if(v===null)return;let d=o.get(h)||H2.empty();d=a.applyToLocalView(v,d),o.set(h,d);let u=(c.get(a.batchId)||o1()).add(h);c=c.insert(a.batchId,u)})}).next(()=>{let n=[],a=c.getReverseIterator();for(;a.hasNext();){let h=a.getNext(),v=h.key,d=h.value,u=Mh();d.forEach(z=>{if(!r.has(z)){let y=_h(e.get(z),o.get(z));y!==null&&u.set(z,y),r=r.add(z)}}),n.push(this.documentOverlayCache.saveOverlays(t,v,u))}return E.waitFor(n)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,e,o,c){return function(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):ap(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,o,c):this.getDocumentsMatchingCollectionQuery(t,e,o,c)}getNextDocuments(t,e,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,o,c).next(r=>{let n=c-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,o.largestBatchId,c-r.size):E.resolve(Q0()),a=-1,h=r;return n.next(v=>E.forEach(v,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),r.get(d)?E.resolve():this.remoteDocumentCache.getEntry(t,d).next(z=>{h=h.insert(d,z)}))).next(()=>this.populateOverlays(t,v,r)).next(()=>this.computeViews(t,h,v,o1())).next(d=>({batchId:a,changes:xh(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new U(e)).next(o=>{let c=H4();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(t,e,o,c){let r=e.collectionGroup,n=H4();return this.indexManager.getCollectionParents(t,r).next(a=>E.forEach(a,h=>{let v=function(u,z){return new W5(z,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e,h.child(r));return this.getDocumentsMatchingCollectionQuery(t,v,o,c).next(d=>{d.forEach((u,z)=>{n=n.insert(u,z)})})}).next(()=>n))}getDocumentsMatchingCollectionQuery(t,e,o,c){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,o.largestBatchId).next(n=>(r=n,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,o,r,c))).next(n=>{r.forEach((h,v)=>{let d=v.getKey();n.get(d)===null&&(n=n.insert(d,b2.newInvalidDocument(d)))});let a=H4();return n.forEach((h,v)=>{let d=r.get(h);d!==void 0&&_4(d.mutation,v,H2.empty(),W1.now()),g3(e,v)&&(a=a.insert(h,v))}),a})}};var $r=class{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return E.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(c){return{id:c.id,version:c.version,createTime:Z2(c.createTime)}}(e)),E.resolve()}getNamedQuery(t,e){return E.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(c){return{name:c.name,query:jp(c.bundledQuery),readTime:Z2(c.readTime)}}(e)),E.resolve()}};var Gr=class{constructor(){this.overlays=new S1(U.comparator),this.Pr=new Map}getOverlay(t,e){return E.resolve(this.overlays.get(e))}getOverlays(t,e){let o=Q0();return E.forEach(e,c=>this.getOverlay(t,c).next(r=>{r!==null&&o.set(c,r)})).next(()=>o)}saveOverlays(t,e,o){return o.forEach((c,r)=>{this.ht(t,e,r)}),E.resolve()}removeOverlaysForBatchId(t,e,o){let c=this.Pr.get(o);return c!==void 0&&(c.forEach(r=>this.overlays=this.overlays.remove(r)),this.Pr.delete(o)),E.resolve()}getOverlaysForCollection(t,e,o){let c=Q0(),r=e.length+1,n=new U(e.child("")),a=this.overlays.getIteratorFrom(n);for(;a.hasNext();){let h=a.getNext().value,v=h.getKey();if(!e.isPrefixOf(v.path))break;v.path.length===r&&h.largestBatchId>o&&c.set(h.getKey(),h)}return E.resolve(c)}getOverlaysForCollectionGroup(t,e,o,c){let r=new S1((v,d)=>v-d),n=this.overlays.getIterator();for(;n.hasNext();){let v=n.getNext().value;if(v.getKey().getCollectionGroup()===e&&v.largestBatchId>o){let d=r.get(v.largestBatchId);d===null&&(d=Q0(),r=r.insert(v.largestBatchId,d)),d.set(v.getKey(),v)}}let a=Q0(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((v,d)=>a.set(v,d)),!(a.size()>=c)););return E.resolve(a)}ht(t,e,o){let c=this.overlays.get(o.key);if(c!==null){let n=this.Pr.get(c.largestBatchId).delete(o.key);this.Pr.set(c.largestBatchId,n)}this.overlays=this.overlays.insert(o.key,new Rr(e,o));let r=this.Pr.get(e);r===void 0&&(r=o1(),this.Pr.set(e,r)),this.Pr.set(e,r.add(o.key))}};var Wr=class{constructor(){this.sessionToken=c2.EMPTY_BYTE_STRING}getSessionToken(t){return E.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,E.resolve()}};var I4=class{constructor(){this.Ir=new o2(k1.Tr),this.Er=new o2(k1.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){let o=new k1(t,e);this.Ir=this.Ir.add(o),this.Er=this.Er.add(o)}Ar(t,e){t.forEach(o=>this.addReference(o,e))}removeReference(t,e){this.Rr(new k1(t,e))}Vr(t,e){t.forEach(o=>this.removeReference(o,e))}mr(t){let e=new U(new A1([])),o=new k1(e,t),c=new k1(e,t+1),r=[];return this.Er.forEachInRange([o,c],n=>{this.Rr(n),r.push(n.key)}),r}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){let e=new U(new A1([])),o=new k1(e,t),c=new k1(e,t+1),r=o1();return this.Er.forEachInRange([o,c],n=>{r=r.add(n.key)}),r}containsKey(t){let e=new k1(t,0),o=this.Ir.firstAfterOrEqual(e);return o!==null&&t.isEqual(o.key)}},k1=class{constructor(t,e){this.key=t,this.yr=e}static Tr(t,e){return U.comparator(t.key,e.key)||d1(t.yr,e.yr)}static dr(t,e){return d1(t.yr,e.yr)||U.comparator(t.key,e.key)}};var Kr=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new o2(k1.Tr)}checkEmpty(t){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,o,c){let r=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let n=new Ar(r,e,o,c);this.mutationQueue.push(n);for(let a of c)this.Sr=this.Sr.add(new k1(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return E.resolve(n)}lookupMutationBatch(t,e){return E.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){let o=e+1,c=this.Dr(o),r=c<0?0:c;return E.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let o=new k1(e,0),c=new k1(e,Number.POSITIVE_INFINITY),r=[];return this.Sr.forEachInRange([o,c],n=>{let a=this.br(n.yr);r.push(a)}),E.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new o2(d1);return e.forEach(c=>{let r=new k1(c,0),n=new k1(c,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([r,n],a=>{o=o.add(a.yr)})}),E.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,e){let o=e.path,c=o.length+1,r=o;U.isDocumentKey(r)||(r=r.child(""));let n=new k1(new U(r),0),a=new o2(d1);return this.Sr.forEachWhile(h=>{let v=h.key.path;return!!o.isPrefixOf(v)&&(v.length===c&&(a=a.add(h.yr)),!0)},n),E.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(o=>{let c=this.br(o);c!==null&&e.push(c)}),e}removeMutationBatch(t,e){x1(this.vr(e.batchId,"removed")===0),this.mutationQueue.shift();let o=this.Sr;return E.forEach(e.mutations,c=>{let r=new k1(c.key,e.batchId);return o=o.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)}).next(()=>{this.Sr=o})}xn(t){}containsKey(t,e){let o=new k1(e,0),c=this.Sr.firstAfterOrEqual(o);return E.resolve(e.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,E.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){let e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Qr=class{constructor(t){this.Fr=t,this.docs=function(){return new S1(U.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let o=e.key,c=this.docs.get(o),r=c?c.size:0,n=this.Fr(e);return this.docs=this.docs.insert(o,{document:e.mutableCopy(),size:n}),this.size+=n-r,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let o=this.docs.get(e);return E.resolve(o?o.document.mutableCopy():b2.newInvalidDocument(e))}getEntries(t,e){let o=v0();return e.forEach(c=>{let r=this.docs.get(c);o=o.insert(c,r?r.document.mutableCopy():b2.newInvalidDocument(c))}),E.resolve(o)}getDocumentsMatchingQuery(t,e,o,c){let r=v0(),n=e.path,a=new U(n.child("")),h=this.docs.getIteratorFrom(a);for(;h.hasNext();){let{key:v,value:{document:d}}=h.getNext();if(!n.isPrefixOf(v.path))break;v.path.length>n.length+1||Qu(Ku(d),o)<=0||(c.has(d.key)||g3(e,d))&&(r=r.insert(d.key,d.mutableCopy()))}return E.resolve(r)}getAllFromCollectionGroup(t,e,o,c){W()}Mr(t,e){return E.forEach(this.docs,o=>e(o))}newChangeBuffer(t){return new Yr(this)}getSize(t){return E.resolve(this.size)}},Yr=class extends Zr{constructor(t){super(),this.ur=t}applyChanges(t){let e=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?e.push(this.ur.addEntry(t,c)):this.ur.removeEntry(o)}),E.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}};var Jr=class{constructor(t){this.persistence=t,this.Or=new k0(e=>Un(e),qn),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new I4,this.targetCount=0,this.Br=T4.Ln()}forEachTarget(t,e){return this.Or.forEach((o,c)=>e(c)),E.resolve()}getLastRemoteSnapshotVersion(t){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return E.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.Nr&&(this.Nr=e),E.resolve()}Qn(t){this.Or.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Br=new T4(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,E.resolve()}updateTargetData(t,e){return this.Qn(e),E.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Lr.mr(e.targetId),this.targetCount-=1,E.resolve()}removeTargets(t,e,o){let c=0,r=[];return this.Or.forEach((n,a)=>{a.sequenceNumber<=e&&o.get(a.targetId)===null&&(this.Or.delete(n),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),c++)}),E.waitFor(r).next(()=>c)}getTargetCount(t){return E.resolve(this.targetCount)}getTargetData(t,e){let o=this.Or.get(e)||null;return E.resolve(o)}addMatchingKeys(t,e,o){return this.Lr.Ar(e,o),E.resolve()}removeMatchingKeys(t,e,o){this.Lr.Vr(e,o);let c=this.persistence.referenceDelegate,r=[];return c&&e.forEach(n=>{r.push(c.markPotentiallyOrphaned(t,n))}),E.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Lr.mr(e),E.resolve()}getMatchingKeysForTargetId(t,e){let o=this.Lr.pr(e);return E.resolve(o)}containsKey(t,e){return E.resolve(this.Lr.containsKey(e))}};var Xr=class{constructor(t,e){this.kr={},this.overlays={},this.qr=new lh(0),this.Qr=!1,this.Qr=!0,this.Kr=new Wr,this.referenceDelegate=t(this),this.$r=new Jr(this),this.indexManager=new Fr,this.remoteDocumentCache=function(c){return new Qr(c)}(o=>this.referenceDelegate.Ur(o)),this.serializer=new Nr(e),this.Wr=new $r(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Gr,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let o=this.kr[t.toKey()];return o||(o=new Kr(e,this.referenceDelegate),this.kr[t.toKey()]=o),o}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,e,o){D("MemoryPersistence","Starting transaction:",t);let c=new tn(this.qr.next());return this.referenceDelegate.Gr(),o(c).next(r=>this.referenceDelegate.zr(c).next(()=>r)).toPromise().then(r=>(c.raiseOnCommittedEvent(),r))}jr(t,e){return E.or(Object.values(this.kr).map(o=>()=>o.containsKey(t,e)))}},tn=class extends gr{constructor(t){super(),this.currentSequenceNumber=t}},en=class s{constructor(t){this.persistence=t,this.Hr=new I4,this.Jr=null}static Yr(t){return new s(t)}get Zr(){if(this.Jr)return this.Jr;throw W()}addReference(t,e,o){return this.Hr.addReference(o,e),this.Zr.delete(o.toString()),E.resolve()}removeReference(t,e,o){return this.Hr.removeReference(o,e),this.Zr.add(o.toString()),E.resolve()}markPotentiallyOrphaned(t,e){return this.Zr.add(e.toString()),E.resolve()}removeTarget(t,e){this.Hr.mr(e.targetId).forEach(c=>this.Zr.add(c.toString()));let o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next(c=>{c.forEach(r=>this.Zr.add(r.toString()))}).next(()=>o.removeTargetData(t,e))}Gr(){this.Jr=new Set}zr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Zr,o=>{let c=U.fromPath(o);return this.Xr(t,c).next(r=>{r||e.removeEntry(c,J.min())})}).next(()=>(this.Jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Xr(t,e).next(o=>{o?this.Zr.delete(e.toString()):this.Zr.add(e.toString())})}Ur(t){return 0}Xr(t,e){return E.or([()=>E.resolve(this.Hr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.jr(t,e)])}};var sn=class s{constructor(t,e,o,c){this.targetId=t,this.fromCache=e,this.Ki=o,this.$i=c}static Ui(t,e){let o=o1(),c=o1();for(let r of e.docChanges)switch(r.type){case 0:o=o.add(r.doc.key);break;case 1:c=c.add(r.doc.key)}return new s(t,e.fromCache,o,c)}};var on=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var cn=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return vi()?8:Ju(hi())>0?6:4}()}initialize(t,e){this.Hi=t,this.indexManager=e,this.Wi=!0}getDocumentsMatchingQuery(t,e,o,c){let r={result:null};return this.Ji(t,e).next(n=>{r.result=n}).next(()=>{if(!r.result)return this.Yi(t,e,c,o).next(n=>{r.result=n})}).next(()=>{if(r.result)return;let n=new on;return this.Zi(t,e,n).next(a=>{if(r.result=a,this.Gi)return this.Xi(t,e,n,a.size)})}).next(()=>r.result)}Xi(t,e,o,c){return o.documentReadCount<this.zi?(V4()<=l1.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",T5(e),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),E.resolve()):(V4()<=l1.DEBUG&&D("QueryEngine","Query:",T5(e),"scans",o.documentReadCount,"local documents and returns",c,"documents as results."),o.documentReadCount>this.ji*c?(V4()<=l1.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",T5(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,j2(e))):E.resolve())}Ji(t,e){if(Ni(e))return E.resolve(null);let o=j2(e);return this.indexManager.getIndexType(t,o).next(c=>c===0?null:(e.limit!==null&&c===1&&(e=yr(e,null,"F"),o=j2(e)),this.indexManager.getDocumentsMatchingTarget(t,o).next(r=>{let n=o1(...r);return this.Hi.getDocuments(t,n).next(a=>this.indexManager.getMinOffset(t,o).next(h=>{let v=this.es(e,a);return this.ts(e,v,n,h.readTime)?this.Ji(t,yr(e,null,"F")):this.ns(t,v,e,h)}))})))}Yi(t,e,o,c){return Ni(e)||c.isEqual(J.min())?E.resolve(null):this.Hi.getDocuments(t,o).next(r=>{let n=this.es(e,r);return this.ts(e,n,o,c)?E.resolve(null):(V4()<=l1.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),T5(e)),this.ns(t,n,e,Wu(c,-1)).next(a=>a))})}es(t,e){let o=new o2(fh(t));return e.forEach((c,r)=>{g3(t,r)&&(o=o.add(r))}),o}ts(t,e,o,c){if(t.limit===null)return!1;if(o.size!==e.size)return!0;let r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(c)>0)}Zi(t,e,o){return V4()<=l1.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",T5(e)),this.Hi.getDocumentsMatchingQuery(t,e,X0.min(),o)}ns(t,e,o,c){return this.Hi.getDocumentsMatchingQuery(t,o,c).next(r=>(e.forEach(n=>{r=r.insert(n.key,n)}),r))}};var rn=class{constructor(t,e,o,c){this.persistence=t,this.rs=e,this.serializer=c,this.ss=new S1(d1),this.os=new k0(r=>Un(r),qn),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(o)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new qr(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ss))}};function Zp(s,t,e,o){return new rn(s,t,e,o)}function Dh(s,t){return S(this,null,function*(){let e=Q(s);return yield e.persistence.runTransaction("Handle user change","readonly",o=>{let c;return e.mutationQueue.getAllMutationBatches(o).next(r=>(c=r,e.cs(t),e.mutationQueue.getAllMutationBatches(o))).next(r=>{let n=[],a=[],h=o1();for(let v of c){n.push(v.batchId);for(let d of v.mutations)h=h.add(d.key)}for(let v of r){a.push(v.batchId);for(let d of v.mutations)h=h.add(d.key)}return e.localDocuments.getDocuments(o,h).next(v=>({ls:v,removedBatchIds:n,addedBatchIds:a}))})})})}function Up(s,t){let e=Q(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{let c=t.batch.keys(),r=e.us.newChangeBuffer({trackRemovals:!0});return function(a,h,v,d){let u=v.batch,z=u.keys(),y=E.resolve();return z.forEach(A=>{y=y.next(()=>d.getEntry(h,A)).next(R=>{let B=v.docVersions.get(A);x1(B!==null),R.version.compareTo(B)<0&&(u.applyToRemoteDocument(R,v),R.isValidDocument()&&(R.setReadTime(v.commitVersion),d.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(h,u))}(e,o,t,r).next(()=>r.apply(o)).next(()=>e.mutationQueue.performConsistencyCheck(o)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(o,c,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(a){let h=o1();for(let v=0;v<a.mutationResults.length;++v)a.mutationResults[v].transformResults.length>0&&(h=h.add(a.batch.mutations[v].key));return h}(t))).next(()=>e.localDocuments.getDocuments(o,c))})}function Oh(s){let t=Q(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.$r.getLastRemoteSnapshotVersion(e))}function qp(s,t){let e=Q(s),o=t.snapshotVersion,c=e.ss;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let n=e.us.newChangeBuffer({trackRemovals:!0});c=e.ss;let a=[];t.targetChanges.forEach((d,u)=>{let z=c.get(u);if(!z)return;a.push(e.$r.removeMatchingKeys(r,d.removedDocuments,u).next(()=>e.$r.addMatchingKeys(r,d.addedDocuments,u)));let y=z.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(u)!==null?y=y.withResumeToken(c2.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,o)),c=c.insert(u,y),function(R,B,O){return R.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(z,y,d)&&a.push(e.$r.updateTargetData(r,y))});let h=v0(),v=o1();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,d))}),a.push($p(r,n,t.documentUpdates).next(d=>{h=d.hs,v=d.Ps})),!o.isEqual(J.min())){let d=e.$r.getLastRemoteSnapshotVersion(r).next(u=>e.$r.setTargetsMetadata(r,r.currentSequenceNumber,o));a.push(d)}return E.waitFor(a).next(()=>n.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,h,v)).next(()=>h)}).then(r=>(e.ss=c,r))}function $p(s,t,e){let o=o1(),c=o1();return e.forEach(r=>o=o.add(r)),t.getEntries(s,o).next(r=>{let n=v0();return e.forEach((a,h)=>{let v=r.get(a);h.isFoundDocument()!==v.isFoundDocument()&&(c=c.add(a)),h.isNoDocument()&&h.version.isEqual(J.min())?(t.removeEntry(a,h.readTime),n=n.insert(a,h)):!v.isValidDocument()||h.version.compareTo(v.version)>0||h.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(h),n=n.insert(a,h)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",v.version," Watch version:",h.version)}),{hs:n,Ps:c}})}function Gp(s,t){let e=Q(s);return e.persistence.runTransaction("Get next mutation batch","readonly",o=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function Wp(s,t){let e=Q(s);return e.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return e.$r.getTargetData(o,t).next(r=>r?(c=r,E.resolve(c)):e.$r.allocateTargetId(o).next(n=>(c=new E4(t,n,"TargetPurposeListen",o.currentSequenceNumber),e.$r.addTargetData(o,c).next(()=>c))))}).then(o=>{let c=e.ss.get(o.targetId);return(c===null||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(e.ss=e.ss.insert(o.targetId,o),e.os.set(t,o.targetId)),o})}function nn(s,t,e){return S(this,null,function*(){let o=Q(s),c=o.ss.get(t),r=e?"readwrite":"readwrite-primary";try{e||(yield o.persistence.runTransaction("Release target",r,n=>o.persistence.referenceDelegate.removeTarget(n,c)))}catch(n){if(!F4(n))throw n;D("LocalStore",`Failed to update sequence numbers for target ${t}: ${n}`)}o.ss=o.ss.remove(t),o.os.delete(c.target)})}function Yi(s,t,e){let o=Q(s),c=J.min(),r=o1();return o.persistence.runTransaction("Execute query","readwrite",n=>function(h,v,d){let u=Q(h),z=u.os.get(d);return z!==void 0?E.resolve(u.ss.get(z)):u.$r.getTargetData(v,d)}(o,n,j2(t)).next(a=>{if(a)return c=a.lastLimboFreeSnapshotVersion,o.$r.getMatchingKeysForTargetId(n,a.targetId).next(h=>{r=h})}).next(()=>o.rs.getDocumentsMatchingQuery(n,t,e?c:J.min(),e?r:o1())).next(a=>(Kp(o,hp(t),a),{documents:a,Is:r})))}function Kp(s,t,e){let o=s._s.get(t)||J.min();e.forEach((c,r)=>{r.readTime.compareTo(o)>0&&(o=r.readTime)}),s._s.set(t,o)}var Ws=class{constructor(){this.activeTargetIds=pp()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var ln=class{constructor(){this.io=new Ws,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,o){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,e,o){this.so[t]=e}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new Ws,Promise.resolve()}handleUserChange(t,e,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var an=class{oo(t){}shutdown(){}};var Ks=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.lo)t(0)}co(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.lo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bs=null;function er(){return bs===null?bs=function(){return 268435456+Math.round(2147483648*Math.random())}():bs++,"0x"+bs.toString(16)}var Qp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var hn=class{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}};var s2="WebChannelConnection",vn=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let o=e.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=o+"://"+e.host,this.Do=`projects/${c}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${c}`:`project_id=${c}&database_id=${r}`}get vo(){return!1}Fo(e,o,c,r,n){let a=er(),h=this.Mo(e,o.toUriEncodedString());D("RestConnection",`Sending RPC '${e}' ${a}:`,h,c);let v={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(v,r,n),this.Oo(e,h,v,c).then(d=>(D("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw j5("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",h,"request:",c),d})}No(e,o,c,r,n,a){return this.Fo(e,o,c,r,n)}xo(e,o,c){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+st}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((r,n)=>e[n]=r),c&&c.headers.forEach((r,n)=>e[n]=r)}Mo(e,o){let c=Qp[e];return`${this.bo}/v1/${o}:${c}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,e,o,c){let r=er();return new Promise((n,a)=>{let h=new Wc;h.setWithCredentials(!0),h.listenOnce(Qc.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case C4.NO_ERROR:let d=h.getResponseJson();D(s2,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(d)),n(d);break;case C4.TIMEOUT:D(s2,`RPC '${t}' ${r} timed out`),a(new j(b.DEADLINE_EXCEEDED,"Request time out"));break;case C4.HTTP_ERROR:let u=h.getStatus();if(D(s2,`RPC '${t}' ${r} failed with status:`,u,"response text:",h.getResponseText()),u>0){let z=h.getResponseJson();Array.isArray(z)&&(z=z[0]);let y=z?.error;if(y&&y.status&&y.message){let A=function(B){let O=B.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(O)>=0?O:b.UNKNOWN}(y.status);a(new j(A,y.message))}else a(new j(b.UNKNOWN,"Server responded with status "+h.getStatus()))}else a(new j(b.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{D(s2,`RPC '${t}' ${r} completed.`)}});let v=JSON.stringify(c);D(s2,`RPC '${t}' ${r} sending request:`,c),h.send(e,"POST",v,o,15)})}Lo(t,e,o){let c=er(),r=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=Xc(),a=Jc(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(h.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(h.xmlHttpFactory=new Kc({})),this.xo(h.initMessageHeaders,e,o),h.encodeInitMessageHeaders=!0;let d=r.join("");D(s2,`Creating RPC '${t}' stream ${c}: ${d}`,h);let u=n.createWebChannel(d,h),z=!1,y=!1,A=new hn({Po:B=>{y?D(s2,`Not sending because RPC '${t}' stream ${c} is closed:`,B):(z||(D(s2,`Opening RPC '${t}' stream ${c} transport.`),u.open(),z=!0),D(s2,`RPC '${t}' stream ${c} sending:`,B),u.send(B))},Io:()=>u.close()}),R=(B,O,Z)=>{B.listen(O,P=>{try{Z(P)}catch(r1){setTimeout(()=>{throw r1},0)}})};return R(u,E5.EventType.OPEN,()=>{y||(D(s2,`RPC '${t}' stream ${c} transport opened.`),A.po())}),R(u,E5.EventType.CLOSE,()=>{y||(y=!0,D(s2,`RPC '${t}' stream ${c} transport closed`),A.wo())}),R(u,E5.EventType.ERROR,B=>{y||(y=!0,j5(s2,`RPC '${t}' stream ${c} transport errored:`,B),A.wo(new j(b.UNAVAILABLE,"The operation could not be completed")))}),R(u,E5.EventType.MESSAGE,B=>{var O;if(!y){let Z=B.data[0];x1(!!Z);let P=Z,r1=P.error||((O=P[0])===null||O===void 0?void 0:O.error);if(r1){D(s2,`RPC '${t}' stream ${c} received error:`,r1);let R1=r1.status,s1=function(m){let x=b1[m];if(x!==void 0)return Sh(x)}(R1),M=r1.message;s1===void 0&&(s1=b.INTERNAL,M="Unknown error status: "+R1+" with message "+r1.message),y=!0,A.wo(new j(s1,M)),u.close()}else D(s2,`RPC '${t}' stream ${c} received:`,Z),A.So(Z)}}),R(a,Yc.STAT_EVENT,B=>{B.stat===Ss.PROXY?D(s2,`RPC '${t}' stream ${c} detected buffering proxy`):B.stat===Ss.NOPROXY&&D(s2,`RPC '${t}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{A.yo()},0),A}};function sr(){return typeof document<"u"?document:null}function d3(s){return new Tr(s,!0)}var Qs=class{constructor(t,e,o=1e3,c=1.5,r=6e4){this.ai=t,this.timerId=e,this.Bo=o,this.ko=c,this.qo=r,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();let e=Math.floor(this.Qo+this.Go()),o=Math.max(0,Date.now()-this.$o),c=Math.max(0,e-o);c>0&&D("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Qo} ms, delay with jitter: ${e} ms, last attempt: ${o} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,c,()=>(this.$o=Date.now(),t())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var Ys=class{constructor(t,e,o,c,r,n,a,h){this.ai=t,this.jo=o,this.Ho=c,this.connection=r,this.authCredentialsProvider=n,this.appCheckCredentialsProvider=a,this.listener=h,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Qs(t,e)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return S(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(t){this.a_(),this.stream.send(t)}o_(){return S(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(t,e){return S(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,t!==4?this.e_.reset():e&&e.code===b.RESOURCE_EXHAUSTED?(i0(e.toString()),i0("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):e&&e.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Vo(e)})}c_(){}auth(){this.state=1;let t=this.l_(this.Jo),e=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Jo===e&&this.h_(o,c)},o=>{t(()=>{let c=new j(b.UNKNOWN,"Fetching auth token failed: "+o.message);return this.P_(c)})})}h_(t,e){let o=this.l_(this.Jo);this.stream=this.I_(t,e),this.stream.To(()=>{o(()=>this.listener.To())}),this.stream.Ao(()=>{o(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(c=>{o(()=>this.P_(c))}),this.stream.onMessage(c=>{o(()=>++this.Xo==1?this.T_(c):this.onNext(c))})}r_(){this.state=5,this.e_.Wo(()=>S(this,null,function*(){this.state=0,this.start()}))}P_(t){return D("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return e=>{this.ai.enqueueAndForget(()=>this.Jo===t?e():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gn=class extends Ys{constructor(t,e,o,c,r,n){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,o,c,n),this.serializer=r}I_(t,e){return this.connection.Lo("Listen",t,e)}T_(t){return this.onNext(t)}onNext(t){this.e_.reset();let e=Rp(this.serializer,t),o=function(r){if(!("targetChange"in r))return J.min();let n=r.targetChange;return n.targetIds&&n.targetIds.length?J.min():n.readTime?Z2(n.readTime):J.min()}(t);return this.listener.E_(e,o)}d_(t){let e={};e.database=Or(this.serializer),e.addTarget=function(r,n){let a,h=n.target;if(a=Lr(h)?{documents:Ep(r,h)}:{query:Tp(r,h)._t},a.targetId=n.targetId,n.resumeToken.approximateByteSize()>0){a.resumeToken=Rh(r,n.resumeToken);let v=Ir(r,n.expectedCount);v!==null&&(a.expectedCount=v)}else if(n.snapshotVersion.compareTo(J.min())>0){a.readTime=$s(r,n.snapshotVersion.toTimestamp());let v=Ir(r,n.expectedCount);v!==null&&(a.expectedCount=v)}return a}(this.serializer,t);let o=Pp(this.serializer,t);o&&(e.labels=o),this.__(e)}A_(t){let e={};e.database=Or(this.serializer),e.removeTarget=t,this.__(e)}},dn=class extends Ys{constructor(t,e,o,c,r,n){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,o,c,n),this.serializer=r}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(t,e){return this.connection.Lo("Write",t,e)}T_(t){return x1(!!t.streamToken),this.lastStreamToken=t.streamToken,x1(!t.writeResults||t.writeResults.length===0),this.listener.m_()}onNext(t){x1(!!t.streamToken),this.lastStreamToken=t.streamToken,this.e_.reset();let e=kp(t.writeResults,t.commitTime),o=Z2(t.commitTime);return this.listener.f_(o,e)}g_(){let t={};t.database=Or(this.serializer),this.__(t)}V_(t){let e={streamToken:this.lastStreamToken,writes:t.map(o=>bp(this.serializer,o))};this.__(e)}};var wn=class extends class{}{constructor(t,e,o,c){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=o,this.serializer=c,this.p_=!1}y_(){if(this.p_)throw new j(b.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,e,o,c){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,n])=>this.connection.Fo(t,Pr(e,o),c,r,n)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new j(b.UNKNOWN,r.toString())})}No(t,e,o,c,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,a])=>this.connection.No(t,Pr(e,o),c,n,a,r)).catch(n=>{throw n.name==="FirebaseError"?(n.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new j(b.UNKNOWN,n.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},un=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(t){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,t==="Online"&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(i0(e),this.b_=!1):D("OnlineStateTracker",e)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var pn=class{constructor(t,e,o,c,r){this.localStore=t,this.datastore=e,this.asyncQueue=o,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=r,this.B_.oo(n=>{o.enqueueAndForget(()=>S(this,null,function*(){l5(this)&&(D("RemoteStore","Restarting streams for network reachability change."),yield function(h){return S(this,null,function*(){let v=Q(h);v.N_.add(4),yield j4(v),v.k_.set("Unknown"),v.N_.delete(4),yield w3(v)})}(this))}))}),this.k_=new un(o,c)}};function w3(s){return S(this,null,function*(){if(l5(s))for(let t of s.L_)yield t(!0)})}function j4(s){return S(this,null,function*(){for(let t of s.L_)yield t(!1)})}function Nh(s,t){let e=Q(s);e.O_.has(t.targetId)||(e.O_.set(t.targetId,t),Qn(e)?Kn(e):ot(e).n_()&&Wn(e,t))}function Gn(s,t){let e=Q(s),o=ot(e);e.O_.delete(t),o.n_()&&Fh(e,t),e.O_.size===0&&(o.n_()?o.s_():l5(e)&&e.k_.set("Unknown"))}function Wn(s,t){if(s.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(J.min())>0){let e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ot(s).d_(t)}function Fh(s,t){s.q_.xe(t),ot(s).A_(t)}function Kn(s){s.q_=new Er({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.O_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),ot(s).start(),s.k_.D_()}function Qn(s){return l5(s)&&!ot(s).t_()&&s.O_.size>0}function l5(s){return Q(s).N_.size===0}function jh(s){s.q_=void 0}function Yp(s){return S(this,null,function*(){s.k_.set("Online")})}function Jp(s){return S(this,null,function*(){s.O_.forEach((t,e)=>{Wn(s,t)})})}function Xp(s,t){return S(this,null,function*(){jh(s),Qn(s)?(s.k_.F_(t),Kn(s)):s.k_.set("Unknown")})}function tm(s,t,e){return S(this,null,function*(){if(s.k_.set("Online"),t instanceof Us&&t.state===2&&t.cause)try{yield function(c,r){return S(this,null,function*(){let n=r.cause;for(let a of r.targetIds)c.O_.has(a)&&(yield c.remoteSyncer.rejectListen(a,n),c.O_.delete(a),c.q_.removeTarget(a))})}(s,t)}catch(o){D("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield Js(s,o)}else if(t instanceof N5?s.q_.Ke(t):t instanceof Zs?s.q_.He(t):s.q_.We(t),!e.isEqual(J.min()))try{let o=yield Oh(s.localStore);e.compareTo(o)>=0&&(yield function(r,n){let a=r.q_.rt(n);return a.targetChanges.forEach((h,v)=>{if(h.resumeToken.approximateByteSize()>0){let d=r.O_.get(v);d&&r.O_.set(v,d.withResumeToken(h.resumeToken,n))}}),a.targetMismatches.forEach((h,v)=>{let d=r.O_.get(h);if(!d)return;r.O_.set(h,d.withResumeToken(c2.EMPTY_BYTE_STRING,d.snapshotVersion)),Fh(r,h);let u=new E4(d.target,h,v,d.sequenceNumber);Wn(r,u)}),r.remoteSyncer.applyRemoteEvent(a)}(s,e))}catch(o){D("RemoteStore","Failed to raise snapshot:",o),yield Js(s,o)}})}function Js(s,t,e){return S(this,null,function*(){if(!F4(t))throw t;s.N_.add(1),yield j4(s),s.k_.set("Offline"),e||(e=()=>Oh(s.localStore)),s.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){D("RemoteStore","Retrying IndexedDB access"),yield e(),s.N_.delete(1),yield w3(s)}))})}function Zh(s,t){return t().catch(e=>Js(s,e,t))}function u3(s){return S(this,null,function*(){let t=Q(s),e=E0(t),o=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;em(t);)try{let c=yield Gp(t.localStore,o);if(c===null){t.x_.length===0&&e.s_();break}o=c.batchId,sm(t,c)}catch(c){yield Js(t,c)}Uh(t)&&qh(t)})}function em(s){return l5(s)&&s.x_.length<10}function sm(s,t){s.x_.push(t);let e=E0(s);e.n_()&&e.R_&&e.V_(t.mutations)}function Uh(s){return l5(s)&&!E0(s).t_()&&s.x_.length>0}function qh(s){E0(s).start()}function om(s){return S(this,null,function*(){E0(s).g_()})}function cm(s){return S(this,null,function*(){let t=E0(s);for(let e of s.x_)t.V_(e.mutations)})}function rm(s,t,e){return S(this,null,function*(){let o=s.x_.shift(),c=Sr.from(o,t,e);yield Zh(s,()=>s.remoteSyncer.applySuccessfulWrite(c)),yield u3(s)})}function nm(s,t){return S(this,null,function*(){t&&E0(s).R_&&(yield function(o,c){return S(this,null,function*(){if(function(n){return Vp(n)&&n!==b.ABORTED}(c.code)){let r=o.x_.shift();E0(o).i_(),yield Zh(o,()=>o.remoteSyncer.rejectFailedWrite(r.batchId,c)),yield u3(o)}})}(s,t)),Uh(s)&&qh(s)})}function Ji(s,t){return S(this,null,function*(){let e=Q(s);e.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");let o=l5(e);e.N_.add(3),yield j4(e),o&&e.k_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.N_.delete(3),yield w3(e)})}function lm(s,t){return S(this,null,function*(){let e=Q(s);t?(e.N_.delete(2),yield w3(e)):t||(e.N_.add(2),yield j4(e),e.k_.set("Unknown"))})}function ot(s){return s.Q_||(s.Q_=function(e,o,c){let r=Q(e);return r.y_(),new gn(o,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,c)}(s.datastore,s.asyncQueue,{To:Yp.bind(null,s),Ao:Jp.bind(null,s),Vo:Xp.bind(null,s),E_:tm.bind(null,s)}),s.L_.push(t=>S(this,null,function*(){t?(s.Q_.i_(),Qn(s)?Kn(s):s.k_.set("Unknown")):(yield s.Q_.stop(),jh(s))}))),s.Q_}function E0(s){return s.K_||(s.K_=function(e,o,c){let r=Q(e);return r.y_(),new dn(o,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,c)}(s.datastore,s.asyncQueue,{To:()=>Promise.resolve(),Ao:om.bind(null,s),Vo:nm.bind(null,s),m_:cm.bind(null,s),f_:rm.bind(null,s)}),s.L_.push(t=>S(this,null,function*(){t?(s.K_.i_(),yield u3(s)):(yield s.K_.stop(),s.x_.length>0&&(D("RemoteStore",`Stopping write stream with ${s.x_.length} pending writes`),s.x_=[]))}))),s.K_}var mn=class s{constructor(t,e,o,c,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=c,this.removalCallback=r,this.deferred=new N2,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(n=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,o,c,r){let n=Date.now()+o,a=new s(t,e,n,c,r);return a.start(o),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(b.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Yn(s,t){if(i0("AsyncQueue",`${t}: ${s}`),F4(s))return new j(b.UNAVAILABLE,`${t}: ${s}`);throw s}var Xs=class s{constructor(t){this.comparator=t?(e,o)=>t(e,o)||U.comparator(e.key,o.key):(e,o)=>U.comparator(e.key,o.key),this.keyedMap=H4(),this.sortedSet=new S1(this.comparator)}static emptySet(t){return new s(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,o)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof s)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;e.hasNext();){let c=e.getNext().key,r=o.getNext().key;if(!c.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let o=new s;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o}};var t3=class{constructor(){this.U_=new S1(U.comparator)}track(t){let e=t.doc.key,o=this.U_.get(e);o?t.type!==0&&o.type===3?this.U_=this.U_.insert(e,t):t.type===3&&o.type!==1?this.U_=this.U_.insert(e,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.U_=this.U_.insert(e,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.U_=this.U_.remove(e):t.type===1&&o.type===2?this.U_=this.U_.insert(e,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):W():this.U_=this.U_.insert(e,t)}W_(){let t=[];return this.U_.inorderTraversal((e,o)=>{t.push(o)}),t}},X5=class s{constructor(t,e,o,c,r,n,a,h,v){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=r,this.fromCache=n,this.syncStateChanged=a,this.excludesMetadataChanges=h,this.hasCachedResults=v}static fromInitialDocuments(t,e,o,c,r){let n=[];return e.forEach(a=>{n.push({type:0,doc:a})}),new s(t,e,Xs.emptySet(e),n,o,c,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&v3(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(let c=0;c<e.length;c++)if(e[c].type!==o[c].type||!e[c].doc.isEqual(o[c].doc))return!1;return!0}};var fn=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(t=>t.H_())}},zn=class{constructor(){this.queries=Xi(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(e,o){let c=Q(e),r=c.queries;c.queries=Xi(),r.forEach((n,a)=>{for(let h of a.z_)h.onError(o)})})(this,new j(b.ABORTED,"Firestore shutting down"))}};function Xi(){return new k0(s=>mh(s),v3)}function am(s,t){return S(this,null,function*(){let e=Q(s),o=3,c=t.query,r=e.queries.get(c);r?!r.j_()&&t.H_()&&(o=2):(r=new fn,o=t.H_()?0:1);try{switch(o){case 0:r.G_=yield e.onListen(c,!0);break;case 1:r.G_=yield e.onListen(c,!1);break;case 2:yield e.onFirstRemoteStoreListen(c)}}catch(n){let a=Yn(n,`Initialization of query '${T5(t.query)}' failed`);return void t.onError(a)}e.queries.set(c,r),r.z_.push(t),t.Y_(e.onlineState),r.G_&&t.Z_(r.G_)&&Jn(e)})}function im(s,t){return S(this,null,function*(){let e=Q(s),o=t.query,c=3,r=e.queries.get(o);if(r){let n=r.z_.indexOf(t);n>=0&&(r.z_.splice(n,1),r.z_.length===0?c=t.H_()?0:1:!r.j_()&&t.H_()&&(c=2))}switch(c){case 0:return e.queries.delete(o),e.onUnlisten(o,!0);case 1:return e.queries.delete(o),e.onUnlisten(o,!1);case 2:return e.onLastRemoteStoreUnlisten(o);default:return}})}function hm(s,t){let e=Q(s),o=!1;for(let c of t){let r=c.query,n=e.queries.get(r);if(n){for(let a of n.z_)a.Z_(c)&&(o=!0);n.G_=c}}o&&Jn(e)}function vm(s,t,e){let o=Q(s),c=o.queries.get(t);if(c)for(let r of c.z_)r.onError(e);o.queries.delete(t)}function Jn(s){s.J_.forEach(t=>{t.next()})}var xn,th;(th=xn||(xn={})).X_="default",th.Cache="cache";var Mn=class{constructor(t,e,o){this.query=t,this.ea=e,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=o||{}}Z_(t){if(!this.options.includeMetadataChanges){let o=[];for(let c of t.docChanges)c.type!==3&&o.push(c);t=new X5(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ta?this.ra(t)&&(this.ea.next(t),e=!0):this.ia(t,this.onlineState)&&(this.sa(t),e=!0),this.na=t,e}onError(t){this.ea.error(t)}Y_(t){this.onlineState=t;let e=!1;return this.na&&!this.ta&&this.ia(this.na,t)&&(this.sa(this.na),e=!0),e}ia(t,e){if(!t.fromCache||!this.H_())return!0;let o=e!=="Offline";return(!this.options.oa||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ra(t){if(t.docChanges.length>0)return!0;let e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}sa(t){t=X5.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ta=!0,this.ea.next(t)}H_(){return this.options.source!==xn.Cache}};var e3=class{constructor(t){this.key=t}},s3=class{constructor(t){this.key=t}},Cn=class{constructor(t,e){this.query=t,this.Ia=e,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=o1(),this.mutatedKeys=o1(),this.da=fh(t),this.Aa=new Xs(this.da)}get Ra(){return this.Ia}Va(t,e){let o=e?e.ma:new t3,c=e?e.Aa:this.Aa,r=e?e.mutatedKeys:this.mutatedKeys,n=c,a=!1,h=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,v=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal((d,u)=>{let z=c.get(d),y=g3(this.query,u)?u:null,A=!!z&&this.mutatedKeys.has(z.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),B=!1;z&&y?z.data.isEqual(y.data)?A!==R&&(o.track({type:3,doc:y}),B=!0):this.fa(z,y)||(o.track({type:2,doc:y}),B=!0,(h&&this.da(y,h)>0||v&&this.da(y,v)<0)&&(a=!0)):!z&&y?(o.track({type:0,doc:y}),B=!0):z&&!y&&(o.track({type:1,doc:z}),B=!0,(h||v)&&(a=!0)),B&&(y?(n=n.add(y),r=R?r.add(d):r.delete(d)):(n=n.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;n.size>this.query.limit;){let d=this.query.limitType==="F"?n.last():n.first();n=n.delete(d.key),r=r.delete(d.key),o.track({type:1,doc:d})}return{Aa:n,ma:o,ts:a,mutatedKeys:r}}fa(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,o,c){let r=this.Aa;this.Aa=t.Aa,this.mutatedKeys=t.mutatedKeys;let n=t.ma.W_();n.sort((d,u)=>function(y,A){let R=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return R(y)-R(A)}(d.type,u.type)||this.da(d.doc,u.doc)),this.ga(o),c=c!=null&&c;let a=e&&!c?this.pa():[],h=this.Ea.size===0&&this.current&&!c?1:0,v=h!==this.Ta;return this.Ta=h,n.length!==0||v?{snapshot:new X5(this.query,t.Aa,r,n,t.mutatedKeys,h===0,v,!1,!!o&&o.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new t3,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(t){return!this.Ia.has(t)&&!!this.Aa.has(t)&&!this.Aa.get(t).hasLocalMutations}ga(t){t&&(t.addedDocuments.forEach(e=>this.Ia=this.Ia.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ia=this.Ia.delete(e)),this.current=t.current)}pa(){if(!this.current)return[];let t=this.Ea;this.Ea=o1(),this.Aa.forEach(o=>{this.wa(o.key)&&(this.Ea=this.Ea.add(o.key))});let e=[];return t.forEach(o=>{this.Ea.has(o)||e.push(new s3(o))}),this.Ea.forEach(o=>{t.has(o)||e.push(new e3(o))}),e}Sa(t){this.Ia=t.Is,this.Ea=o1();let e=this.Va(t.documents);return this.applyChanges(e,!0)}ba(){return X5.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},Vn=class{constructor(t,e,o){this.query=t,this.targetId=e,this.view=o}},Hn=class{constructor(t){this.key=t,this.Da=!1}},Ln=class{constructor(t,e,o,c,r,n){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=c,this.currentUser=r,this.maxConcurrentLimboResolutions=n,this.Ca={},this.va=new k0(a=>mh(a),v3),this.Fa=new Map,this.Ma=new Set,this.xa=new S1(U.comparator),this.Oa=new Map,this.Na=new I4,this.La={},this.Ba=new Map,this.ka=T4.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function gm(s,t,e=!0){return S(this,null,function*(){let o=Yh(s),c,r=o.va.get(t);return r?(o.sharedClientState.addLocalQueryTarget(r.targetId),c=r.view.ba()):c=yield $h(o,t,e,!0),c})}function dm(s,t){return S(this,null,function*(){let e=Yh(s);yield $h(e,t,!0,!1)})}function $h(s,t,e,o){return S(this,null,function*(){let c=yield Wp(s.localStore,j2(t)),r=c.targetId,n=e?s.sharedClientState.addLocalQueryTarget(r):"not-current",a;return o&&(a=yield wm(s,t,r,n==="current",c.resumeToken)),s.isPrimaryClient&&e&&Nh(s.remoteStore,c),a})}function wm(s,t,e,o,c){return S(this,null,function*(){s.Qa=(u,z,y)=>function(R,B,O,Z){return S(this,null,function*(){let P=B.view.Va(O);P.ts&&(P=yield Yi(R.localStore,B.query,!1).then(({documents:M})=>B.view.Va(M,P)));let r1=Z&&Z.targetChanges.get(B.targetId),R1=Z&&Z.targetMismatches.get(B.targetId)!=null,s1=B.view.applyChanges(P,R.isPrimaryClient,r1,R1);return sh(R,B.targetId,s1.ya),s1.snapshot})}(s,u,z,y);let r=yield Yi(s.localStore,t,!0),n=new Cn(t,r.Is),a=n.Va(r.documents),h=k4.createSynthesizedTargetChangeForCurrentChange(e,o&&s.onlineState!=="Offline",c),v=n.applyChanges(a,s.isPrimaryClient,h);sh(s,e,v.ya);let d=new Vn(t,e,n);return s.va.set(t,d),s.Fa.has(e)?s.Fa.get(e).push(t):s.Fa.set(e,[t]),v.snapshot})}function um(s,t,e){return S(this,null,function*(){let o=Q(s),c=o.va.get(t),r=o.Fa.get(c.targetId);if(r.length>1)return o.Fa.set(c.targetId,r.filter(n=>!v3(n,t))),void o.va.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(c.targetId),o.sharedClientState.isActiveQueryTarget(c.targetId)||(yield nn(o.localStore,c.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(c.targetId),e&&Gn(o.remoteStore,c.targetId),yn(o,c.targetId)}).catch(N4))):(yn(o,c.targetId),yield nn(o.localStore,c.targetId,!0))})}function pm(s,t){return S(this,null,function*(){let e=Q(s),o=e.va.get(t),c=e.Fa.get(o.targetId);e.isPrimaryClient&&c.length===1&&(e.sharedClientState.removeLocalQueryTarget(o.targetId),Gn(e.remoteStore,o.targetId))})}function mm(s,t,e){return S(this,null,function*(){let o=Hm(s);try{let c=yield function(n,a){let h=Q(n),v=W1.now(),d=a.reduce((y,A)=>y.add(A.key),o1()),u,z;return h.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=v0(),R=o1();return h.us.getEntries(y,d).next(B=>{A=B,A.forEach((O,Z)=>{Z.isValidDocument()||(R=R.add(O))})}).next(()=>h.localDocuments.getOverlayedDocuments(y,A)).next(B=>{u=B;let O=[];for(let Z of a){let P=Cp(Z,u.get(Z.key).overlayedDocument);P!=null&&O.push(new $2(Z.key,P,hh(P.value.mapValue),a0.exists(!0)))}return h.mutationQueue.addMutationBatch(y,v,O,a)}).next(B=>{z=B;let O=B.applyToLocalDocumentSet(u,R);return h.documentOverlayCache.saveOverlays(y,B.batchId,O)})}).then(()=>({batchId:z.batchId,changes:xh(u)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(c.batchId),function(n,a,h){let v=n.La[n.currentUser.toKey()];v||(v=new S1(d1)),v=v.insert(a,h),n.La[n.currentUser.toKey()]=v}(o,c.batchId,e),yield Z4(o,c.changes),yield u3(o.remoteStore)}catch(c){let r=Yn(c,"Failed to persist write");e.reject(r)}})}function Gh(s,t){return S(this,null,function*(){let e=Q(s);try{let o=yield qp(e.localStore,t);t.targetChanges.forEach((c,r)=>{let n=e.Oa.get(r);n&&(x1(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?n.Da=!0:c.modifiedDocuments.size>0?x1(n.Da):c.removedDocuments.size>0&&(x1(n.Da),n.Da=!1))}),yield Z4(e,o,t)}catch(o){yield N4(o)}})}function eh(s,t,e){let o=Q(s);if(o.isPrimaryClient&&e===0||!o.isPrimaryClient&&e===1){let c=[];o.va.forEach((r,n)=>{let a=n.view.Y_(t);a.snapshot&&c.push(a.snapshot)}),function(n,a){let h=Q(n);h.onlineState=a;let v=!1;h.queries.forEach((d,u)=>{for(let z of u.z_)z.Y_(a)&&(v=!0)}),v&&Jn(h)}(o.eventManager,t),c.length&&o.Ca.E_(c),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function fm(s,t,e){return S(this,null,function*(){let o=Q(s);o.sharedClientState.updateQueryState(t,"rejected",e);let c=o.Oa.get(t),r=c&&c.key;if(r){let n=new S1(U.comparator);n=n.insert(r,b2.newNoDocument(r,J.min()));let a=o1().add(r),h=new js(J.min(),new Map,new S1(d1),n,a);yield Gh(o,h),o.xa=o.xa.remove(r),o.Oa.delete(t),Xn(o)}else yield nn(o.localStore,t,!1).then(()=>yn(o,t,e)).catch(N4)})}function zm(s,t){return S(this,null,function*(){let e=Q(s),o=t.batch.batchId;try{let c=yield Up(e.localStore,t);Kh(e,o,null),Wh(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),yield Z4(e,c)}catch(c){yield N4(c)}})}function xm(s,t,e){return S(this,null,function*(){let o=Q(s);try{let c=yield function(n,a){let h=Q(n);return h.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let d;return h.mutationQueue.lookupMutationBatch(v,a).next(u=>(x1(u!==null),d=u.keys(),h.mutationQueue.removeMutationBatch(v,u))).next(()=>h.mutationQueue.performConsistencyCheck(v)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(v,d,a)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,d)).next(()=>h.localDocuments.getDocuments(v,d))})}(o.localStore,t);Kh(o,t,e),Wh(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),yield Z4(o,c)}catch(c){yield N4(c)}})}function Wh(s,t){(s.Ba.get(t)||[]).forEach(e=>{e.resolve()}),s.Ba.delete(t)}function Kh(s,t,e){let o=Q(s),c=o.La[o.currentUser.toKey()];if(c){let r=c.get(t);r&&(e?r.reject(e):r.resolve(),c=c.remove(t)),o.La[o.currentUser.toKey()]=c}}function yn(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(let o of s.Fa.get(t))s.va.delete(o),e&&s.Ca.Ka(o,e);s.Fa.delete(t),s.isPrimaryClient&&s.Na.mr(t).forEach(o=>{s.Na.containsKey(o)||Qh(s,o)})}function Qh(s,t){s.Ma.delete(t.path.canonicalString());let e=s.xa.get(t);e!==null&&(Gn(s.remoteStore,e),s.xa=s.xa.remove(t),s.Oa.delete(e),Xn(s))}function sh(s,t,e){for(let o of e)o instanceof e3?(s.Na.addReference(o.key,t),Mm(s,o)):o instanceof s3?(D("SyncEngine","Document no longer in limbo: "+o.key),s.Na.removeReference(o.key,t),s.Na.containsKey(o.key)||Qh(s,o.key)):W()}function Mm(s,t){let e=t.key,o=e.path.canonicalString();s.xa.get(e)||s.Ma.has(o)||(D("SyncEngine","New document in limbo: "+e),s.Ma.add(o),Xn(s))}function Xn(s){for(;s.Ma.size>0&&s.xa.size<s.maxConcurrentLimboResolutions;){let t=s.Ma.values().next().value;s.Ma.delete(t);let e=new U(A1.fromString(t)),o=s.ka.next();s.Oa.set(o,new Hn(e)),s.xa=s.xa.insert(e,o),Nh(s.remoteStore,new E4(j2(ph(e.path)),o,"TargetPurposeLimboResolution",lh.oe))}}function Z4(s,t,e){return S(this,null,function*(){let o=Q(s),c=[],r=[],n=[];o.va.isEmpty()||(o.va.forEach((a,h)=>{n.push(o.Qa(h,t,e).then(v=>{var d;if((v||e)&&o.isPrimaryClient){let u=v?!v.fromCache:(d=e?.targetChanges.get(h.targetId))===null||d===void 0?void 0:d.current;o.sharedClientState.updateQueryState(h.targetId,u?"current":"not-current")}if(v){c.push(v);let u=sn.Ui(h.targetId,v);r.push(u)}}))}),yield Promise.all(n),o.Ca.E_(c),yield function(h,v){return S(this,null,function*(){let d=Q(h);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>E.forEach(v,z=>E.forEach(z.Ki,y=>d.persistence.referenceDelegate.addReference(u,z.targetId,y)).next(()=>E.forEach(z.$i,y=>d.persistence.referenceDelegate.removeReference(u,z.targetId,y)))))}catch(u){if(!F4(u))throw u;D("LocalStore","Failed to update sequence numbers: "+u)}for(let u of v){let z=u.targetId;if(!u.fromCache){let y=d.ss.get(z),A=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(A);d.ss=d.ss.insert(z,R)}}})}(o.localStore,r))})}function Cm(s,t){return S(this,null,function*(){let e=Q(s);if(!e.currentUser.isEqual(t)){D("SyncEngine","User change. New user:",t.toKey());let o=yield Dh(e.localStore,t);e.currentUser=t,function(r,n){r.Ba.forEach(a=>{a.forEach(h=>{h.reject(new j(b.CANCELLED,n))})}),r.Ba.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Z4(e,o.ls)}})}function Vm(s,t){let e=Q(s),o=e.Oa.get(t);if(o&&o.Da)return o1().add(o.key);{let c=o1(),r=e.Fa.get(t);if(!r)return c;for(let n of r){let a=e.va.get(n);c=c.unionWith(a.view.Ra)}return c}}function Yh(s){let t=Q(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fm.bind(null,t),t.Ca.E_=hm.bind(null,t.eventManager),t.Ca.Ka=vm.bind(null,t.eventManager),t}function Hm(s){let t=Q(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xm.bind(null,t),t}var o3=class{constructor(){this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=d3(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Zp(this.persistence,new cn,t.initialUser,this.serializer)}createPersistence(t){return new Xr(en.Yr,this.serializer)}createSharedClientState(t){return new ln}terminate(){return S(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Bn=class{initialize(t,e){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>eh(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cm.bind(null,this.syncEngine),yield lm(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new zn}()}createDatastore(t){let e=d3(t.databaseInfo.databaseId),o=function(r){return new vn(r)}(t.databaseInfo);return function(r,n,a,h){return new wn(r,n,a,h)}(t.authCredentials,t.appCheckCredentials,o,e)}createRemoteStore(t){return function(o,c,r,n,a){return new pn(o,c,r,n,a)}(this.localStore,this.datastore,t.asyncQueue,e=>eh(this.syncEngine,e,0),function(){return Ks.D()?new Ks:new an}())}createSyncEngine(t,e){return function(c,r,n,a,h,v,d){let u=new Ln(c,r,n,a,h,v);return d&&(u.qa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return S(this,null,function*(){var t,e;yield function(c){return S(this,null,function*(){let r=Q(c);D("RemoteStore","RemoteStore shutting down."),r.N_.add(5),yield j4(r),r.B_.shutdown(),r.k_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};var _n=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Wa(this.observer.next,t)}error(t){this.observer.error?this.Wa(this.observer.error,t):i0("Uncaught Error in snapshot listener:",t.toString())}Ga(){this.muted=!0}Wa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var An=class{constructor(t,e,o,c){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=o,this.databaseInfo=c,this.user=j1.UNAUTHENTICATED,this.clientId=Is.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,r=>S(this,null,function*(){D("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(o,r=>(D("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new N2;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let o=Yn(e,"Failed to shutdown persistence");t.reject(o)}})),t.promise}};function or(s,t){return S(this,null,function*(){s.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");let e=s.configuration;yield t.initialize(e);let o=e.initialUser;s.setCredentialChangeListener(c=>S(this,null,function*(){o.isEqual(c)||(yield Dh(t.localStore,c),o=c)})),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t})}function oh(s,t){return S(this,null,function*(){s.asyncQueue.verifyOperationInProgress();let e=yield ym(s);D("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,s.configuration),s.setCredentialChangeListener(o=>Ji(t.remoteStore,o)),s.setAppCheckTokenChangeListener((o,c)=>Ji(t.remoteStore,c)),s._onlineComponents=t})}function Lm(s){return s.name==="FirebaseError"?s.code===b.FAILED_PRECONDITION||s.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}function ym(s){return S(this,null,function*(){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield or(s,s._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!Lm(e))throw e;j5("Error using user provided cache. Falling back to memory cache: "+e),yield or(s,new o3)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield or(s,new o3);return s._offlineComponents})}function Jh(s){return S(this,null,function*(){return s._onlineComponents||(s._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield oh(s,s._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield oh(s,new Bn))),s._onlineComponents})}function Bm(s){return Jh(s).then(t=>t.syncEngine)}function _m(s){return S(this,null,function*(){let t=yield Jh(s),e=t.eventManager;return e.onListen=gm.bind(null,t.syncEngine),e.onUnlisten=um.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=dm.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=pm.bind(null,t.syncEngine),e})}function Am(s,t,e={}){let o=new N2;return s.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(r,n,a,h,v){let d=new _n({next:z=>{n.enqueueAndForget(()=>im(r,u)),z.fromCache&&h.source==="server"?v.reject(new j(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(z)},error:z=>v.reject(z)}),u=new Mn(a,d,{includeMetadataChanges:!0,oa:!0});return am(r,u)}(yield _m(s),s.asyncQueue,t,e,o)})),o.promise}function Xh(s){let t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}var ch=new Map;function t6(s,t,e){if(!e)throw new j(b.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Sm(s,t,e,o){if(t===!0&&o===!0)throw new j(b.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function rh(s){if(!U.isDocumentKey(s))throw new j(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function nh(s){if(U.isDocumentKey(s))throw new j(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function tl(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{let t=function(o){return o.constructor?o.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":W()}function c5(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new j(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=tl(s);throw new j(b.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}var c3=class{constructor(t){var e,o;if(t.host===void 0){if(t.ssl!==void 0)throw new j(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new j(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Sm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xh((o=t.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new j(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new j(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new j(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(o,c){return o.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},tt=class{constructor(t,e,o,c){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new j(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c3(t),t.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new cr;switch(o.type){case"firstParty":return new ar(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new j(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let o=ch.get(e);o&&(D("ComponentProvider","Removing Datastore"),ch.delete(e),o.terminate())}(this),Promise.resolve()}};function Rm(s,t,e,o={}){var c;let r=(s=c5(s,tt))._getSettings(),n=`${t}:${e}`;if(r.host!=="firestore.googleapis.com"&&r.host!==n&&j5("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},r),{host:n,ssl:!1})),o.mockUserToken){let a,h;if(typeof o.mockUserToken=="string")a=o.mockUserToken,h=j1.MOCK_USER;else{a=ii(o.mockUserToken,(c=s._app)===null||c===void 0?void 0:c.options.projectId);let v=o.mockUserToken.sub||o.mockUserToken.user_id;if(!v)throw new j(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new j1(v)}s._authCredentials=new rr(new Ts(a,h))}}var r3=class s{constructor(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new s(this.firestore,t,this._query)}},L2=class s{constructor(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new R0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new s(this.firestore,t,this._key)}},R0=class s extends r3{constructor(t,e,o){super(t,e,ph(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new L2(this.firestore,null,new U(t))}withConverter(t){return new s(this.firestore,t,this._path)}};function el(s,t,...e){if(s=r0(s),t6("collection","path",t),s instanceof tt){let o=A1.fromString(t,...e);return nh(o),new R0(s,null,o)}{if(!(s instanceof L2||s instanceof R0))throw new j(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=s._path.child(A1.fromString(t,...e));return nh(o),new R0(s.firestore,null,o)}}function U4(s,t,...e){if(s=r0(s),arguments.length===1&&(t=Is.newId()),t6("doc","path",t),s instanceof tt){let o=A1.fromString(t,...e);return rh(o),new L2(s,null,new U(o))}{if(!(s instanceof L2||s instanceof R0))throw new j(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let o=s._path.child(A1.fromString(t,...e));return rh(o),new L2(s.firestore,s instanceof R0?s.converter:null,new U(o))}}var Sn=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Qs(this,"async_queue_retry"),this.Tu=()=>{let e=sr();e&&D("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};let t=sr();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;let e=sr();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise(()=>{});let e=new N2;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.au.push(t),this.Au()))}Au(){return S(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!F4(t))throw t;D("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(t){let e=this._u.then(()=>(this.hu=!0,t().catch(o=>{this.lu=o,this.hu=!1;let c=function(n){let a=n.message||"";return n.stack&&(a=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),a}(o);throw i0("INTERNAL UNHANDLED ERROR: ",c),o}).then(o=>(this.hu=!1,o))));return this._u=e,e}enqueueAfterDelay(t,e,o){this.Eu(),this.Iu.indexOf(t)>-1&&(e=0);let c=mn.createAndSchedule(this,t,e,o,r=>this.Ru(r));return this.cu.push(c),c}Eu(){this.lu&&W()}verifyOperationInProgress(){}Vu(){return S(this,null,function*(){let t;do t=this._u,yield t;while(t!==this._u)})}mu(t){for(let e of this.cu)if(e.timerId===t)return!0;return!1}fu(t){return this.Vu().then(()=>{this.cu.sort((e,o)=>e.targetTimeMs-o.targetTimeMs);for(let e of this.cu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Vu()})}gu(t){this.Iu.push(t)}Ru(t){let e=this.cu.indexOf(t);this.cu.splice(e,1)}};var r5=class extends tt{constructor(t,e,o,c){super(t,e,o,c),this.type="firestore",this._queue=function(){return new Sn}(),this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||o6(this),this._firestoreClient.terminate()}};function e6(s,t){let e=typeof s=="object"?s:Bi(),o=typeof s=="string"?s:t||"(default)",c=Li(e,"firestore").getImmediate({identifier:o});if(!c._initialized){let r=ai("firestore");r&&Rm(c,...r)}return c}function s6(s){return s._firestoreClient||o6(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function o6(s){var t,e,o;let c=s._freezeSettings(),r=function(a,h,v,d){return new dr(a,h,v,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Xh(d.experimentalLongPollingOptions),d.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,c);s._firestoreClient=new An(s._authCredentials,s._appCheckCredentials,s._queue,r),!((e=c.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((o=c.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}var P4=class s{constructor(t){this._byteString=t}static fromBase64String(t){try{return new s(c2.fromBase64String(t))}catch(e){throw new j(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new s(c2.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var et=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new j(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new m2(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var D4=class{constructor(t){this._methodName=t}};var O4=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new j(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new j(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return d1(this._lat,t._lat)||d1(this._long,t._long)}};var bm=/^__.*__$/,Rn=class{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return this.fieldMask!==null?new $2(t,this.data,this.fieldMask,e,this.fieldTransforms):new o5(t,this.data,e,this.fieldTransforms)}},n3=class{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return new $2(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function c6(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var bn=class s{constructor(t,e,o,c,r,n){this.settings=t,this.databaseId=e,this.serializer=o,this.ignoreUndefinedProperties=c,r===void 0&&this.pu(),this.fieldTransforms=r||[],this.fieldMask=n||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(t){return new s(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(t){var e;let o=(e=this.path)===null||e===void 0?void 0:e.child(t),c=this.wu({path:o,bu:!1});return c.Du(t),c}Cu(t){var e;let o=(e=this.path)===null||e===void 0?void 0:e.child(t),c=this.wu({path:o,bu:!1});return c.pu(),c}vu(t){return this.wu({path:void 0,bu:!0})}Fu(t){return a3(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Du(this.path.get(t))}Du(t){if(t.length===0)throw this.Fu("Document fields must not be empty");if(c6(this.yu)&&bm.test(t))throw this.Fu('Document fields cannot begin and end with "__"')}},kn=class{constructor(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=o||d3(t)}Ou(t,e,o,c=!1){return new bn({yu:t,methodName:e,xu:o,path:m2.emptyPath(),bu:!1,Mu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function r6(s){let t=s._freezeSettings(),e=d3(s._databaseId);return new kn(s._databaseId,!!t.ignoreUndefinedProperties,e)}function km(s,t,e,o,c,r={}){let n=s.Ou(r.merge||r.mergeFields?2:0,t,e,c);sl("Data must be an object, but it was:",n,o);let a=n6(o,n),h,v;if(r.merge)h=new H2(n.fieldMask),v=n.fieldTransforms;else if(r.mergeFields){let d=[];for(let u of r.mergeFields){let z=En(t,u,e);if(!n.contains(z))throw new j(b.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);a6(d,z)||d.push(z)}h=new H2(d),v=n.fieldTransforms.filter(u=>h.covers(u.field))}else h=null,v=n.fieldTransforms;return new Rn(new p2(a),h,v)}var l3=class s extends D4{_toFieldTransform(t){if(t.yu!==2)throw t.yu===1?t.Fu(`${this._methodName}() can only appear at the top level of your update data`):t.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof s}};function Em(s,t,e,o){let c=s.Ou(1,t,e);sl("Data must be an object, but it was:",c,o);let r=[],n=p2.empty();n5(o,(h,v)=>{let d=ol(t,h,e);v=r0(v);let u=c.Cu(d);if(v instanceof l3)r.push(d);else{let z=p3(v,u);z!=null&&(r.push(d),n.set(d,z))}});let a=new H2(r);return new n3(n,a,c.fieldTransforms)}function Tm(s,t,e,o,c,r){let n=s.Ou(1,t,e),a=[En(t,o,e)],h=[c];if(r.length%2!=0)throw new j(b.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<r.length;z+=2)a.push(En(t,r[z])),h.push(r[z+1]);let v=[],d=p2.empty();for(let z=a.length-1;z>=0;--z)if(!a6(v,a[z])){let y=a[z],A=h[z];A=r0(A);let R=n.Cu(y);if(A instanceof l3)v.push(y);else{let B=p3(A,R);B!=null&&(v.push(y),d.set(y,B))}}let u=new H2(v);return new n3(d,u,n.fieldTransforms)}function p3(s,t){if(l6(s=r0(s)))return sl("Unsupported field value:",t,s),n6(s,t);if(s instanceof D4)return function(o,c){if(!c6(c.yu))throw c.Fu(`${o._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Fu(`${o._methodName}() is not currently supported inside arrays`);let r=o._toFieldTransform(c);r&&c.fieldTransforms.push(r)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.bu&&t.yu!==4)throw t.Fu("Nested arrays are not supported");return function(o,c){let r=[],n=0;for(let a of o){let h=p3(a,c.vu(n));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),n++}return{arrayValue:{values:r}}}(s,t)}return function(o,c){if((o=r0(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return mp(c.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){let r=W1.fromDate(o);return{timestampValue:$s(c.serializer,r)}}if(o instanceof W1){let r=new W1(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:$s(c.serializer,r)}}if(o instanceof O4)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof P4)return{bytesValue:Rh(c.serializer,o._byteString)};if(o instanceof L2){let r=c.databaseId,n=o.firestore._databaseId;if(!n.isEqual(r))throw c.Fu(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:$n(o.firestore._databaseId||c.databaseId,o._key.path)}}throw c.Fu(`Unsupported field value: ${tl(o)}`)}(s,t)}function n6(s,t){let e={};return ah(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):n5(s,(o,c)=>{let r=p3(c,t.Su(o));r!=null&&(e[o]=r)}),{mapValue:{fields:e}}}function l6(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof W1||s instanceof O4||s instanceof P4||s instanceof L2||s instanceof D4)}function sl(s,t,e){if(!l6(e)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(e)){let o=tl(e);throw o==="an object"?t.Fu(s+" a custom object"):t.Fu(s+" "+o)}}function En(s,t,e){if((t=r0(t))instanceof et)return t._internalPath;if(typeof t=="string")return ol(s,t);throw a3("Field path arguments must be of type string or ",s,!1,void 0,e)}var Im=new RegExp("[~\\*/\\[\\]]");function ol(s,t,e){if(t.search(Im)>=0)throw a3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new et(...t.split("."))._internalPath}catch{throw a3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function a3(s,t,e,o,c){let r=o&&!o.isEmpty(),n=c!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let h="";return(r||n)&&(h+=" (found",r&&(h+=` in field ${o}`),n&&(h+=` in document ${c}`),h+=")"),new j(b.INVALID_ARGUMENT,a+s+h)}function a6(s,t){return s.some(e=>e.isEqual(t))}var i3=class{constructor(t,e,o,c,r){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=c,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new L2(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Tn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(i6("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Tn=class extends i3{data(){return super.data()}};function i6(s,t){return typeof t=="string"?ol(s,t):t instanceof et?t._internalPath:t._delegate._internalPath}function Pm(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new j(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var In=class{convertValue(t,e="none"){switch(t5(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _1(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(b0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw W()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let o={};return n5(t,(c,r)=>{o[c]=this.convertValue(r,e)}),o}convertGeoPoint(t){return new O4(_1(t.latitude),_1(t.longitude))}convertArray(t,e){return(t.values||[]).map(o=>this.convertValue(o,e))}convertServerTimestamp(t,e){switch(e){case"previous":let o=jn(t);return o==null?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(S4(t));default:return null}}convertTimestamp(t){let e=h0(t);return new W1(e.seconds,e.nanos)}convertDocumentKey(t,e){let o=A1.fromString(t);x1(Ph(o));let c=new Ns(o.get(1),o.get(3)),r=new U(o.popFirst(5));return c.isEqual(e)||i0(`Document ${r} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}};function Dm(s,t,e){let o;return o=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,o}var O5=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Pn=class extends i3{constructor(t,e,o,c,r,n){super(t,e,o,c,n),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new F5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let o=this._document.data.field(i6("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,e.serverTimestamps)}}},F5=class extends Pn{data(t={}){return super.data(t)}},Dn=class{constructor(t,e,o,c){this._firestore=t,this._userDataWriter=e,this._snapshot=c,this.metadata=new O5(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(o=>{t.call(e,new F5(this._firestore,this._userDataWriter,o.key,o,new O5(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new j(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(c,r){if(c._snapshot.oldDocs.isEmpty()){let n=0;return c._snapshot.docChanges.map(a=>{let h=new F5(c._firestore,c._userDataWriter,a.doc.key,a.doc,new O5(c._snapshot.mutatedKeys.has(a.doc.key),c._snapshot.fromCache),c.query.converter);return a.doc,{type:"added",doc:h,oldIndex:-1,newIndex:n++}})}{let n=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{let h=new F5(c._firestore,c._userDataWriter,a.doc.key,a.doc,new O5(c._snapshot.mutatedKeys.has(a.doc.key),c._snapshot.fromCache),c.query.converter),v=-1,d=-1;return a.type!==0&&(v=n.indexOf(a.doc.key),n=n.delete(a.doc.key)),a.type!==1&&(n=n.add(a.doc),d=n.indexOf(a.doc.key)),{type:Om(a.type),doc:h,oldIndex:v,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Om(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}var On=class extends In{constructor(t){super(),this.firestore=t}convertBytes(t){return new P4(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new L2(this.firestore,null,e)}};function h6(s){s=c5(s,r3);let t=c5(s.firestore,r5),e=s6(t),o=new On(t);return Pm(s._query),Am(e,s._query).then(c=>new Dn(t,o,s,c))}function cl(s,t,e,...o){s=c5(s,L2);let c=c5(s.firestore,r5),r=r6(c),n;return n=typeof(t=r0(t))=="string"||t instanceof et?Tm(r,"updateDoc",s._key,t,e,o):Em(r,"updateDoc",s._key,t),nl(c,[n.toMutation(s._key,a0.exists(!0))])}function v6(s){return nl(c5(s.firestore,r5),[new b4(s._key,a0.none())])}function rl(s,t){let e=c5(s.firestore,r5),o=U4(s),c=Dm(s.converter,t);return nl(e,[km(r6(s.firestore),"addDoc",o._key,c,s.converter!==null,{}).toMutation(o._key,a0.exists(!1))]).then(()=>o)}function nl(s,t){return function(o,c){let r=new N2;return o.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return mm(yield Bm(o),c,r)})),r.promise}(s6(s),t)}(function(t,e=!0){(function(c){st=c})(yi),x4(new n0("firestore",(o,{instanceIdentifier:c,options:r})=>{let n=o.getProvider("app").getImmediate(),a=new r5(new nr(o.getProvider("auth-internal")),new hr(o.getProvider("app-check-internal")),function(v,d){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new j(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ns(v.options.projectId,d)}(n,c),n);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),A0(bi,"4.6.5",t),A0(bi,"4.6.5","esm2017")})();var Nm="firebase",Fm="10.12.5";A0(Nm,Fm,"app");var g6={production:!0,firebaseConfig:{apiKey:"AIzaSyBZrN9H_D5R4cjpxckizldO0t9sJtB47DA",authDomain:"keepynotes-1d3e0.firebaseapp.com",projectId:"keepynotes-1d3e0",storageBucket:"keepynotes-1d3e0",messagingSenderId:"keepynotes-1d3e0.appspot.com",appId:"1:349075250932:web:158e05b11c8c46a63048a1",measurementId:"G-SC61C50XES"}};var jm=$c(g6.firebaseConfig),q4=e6(jm),T0={addNote:Zm,loadNotes:Um,removeNote:qm,updateNote:$m,addNoteWithAutoId:Gm,updateNoteId:Wm},ll="notes";var d6=el(q4,ll);function Zm(s){return S(this,null,function*(){try{return(yield rl(d6,s)).id}catch(t){console.error("Error adding note: ",t)}})}function Um(){return S(this,null,function*(){try{let t=(yield h6(d6)).docs.map(e=>h1(k({},e.data()),{_id:e.id}));return console.log("adjustedNotes",t),t.sort((e,o)=>o.timestamp-e.timestamp)}catch(s){return console.error("Error loading notes: ",s),[]}})}function qm(s){return S(this,null,function*(){try{let t=U4(q4,ll,s);yield v6(t)}catch(t){console.error("Error removing note: ",t)}})}function $m(s,t){return S(this,null,function*(){try{let e=U4(q4,ll,s);yield cl(e,t)}catch(e){console.error("Error updating note: ",e)}})}function Gm(s){let t=el(q4,"notes");return rl(t,s)}function Wm(s,t){let e=U4(q4,"notes",s);return cl(e,{_id:e.id})}function $4(s,t){return function(){return s.apply(t,arguments)}}var{toString:Km}=Object.prototype,{getPrototypeOf:hl}=Object,f3=(s=>t=>{let e=Km.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),k2=s=>(s=s.toLowerCase(),t=>f3(t)===s),z3=s=>t=>typeof t===s,{isArray:ct}=Array,G4=z3("undefined");function Qm(s){return s!==null&&!G4(s)&&s.constructor!==null&&!G4(s.constructor)&&f2(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}var p6=k2("ArrayBuffer");function Ym(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&p6(s.buffer),t}var Jm=z3("string"),f2=z3("function"),m6=z3("number"),x3=s=>s!==null&&typeof s=="object",Xm=s=>s===!0||s===!1,m3=s=>{if(f3(s)!=="object")return!1;let t=hl(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},tf=k2("Date"),ef=k2("File"),sf=k2("Blob"),of=k2("FileList"),cf=s=>x3(s)&&f2(s.pipe),rf=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||f2(s.append)&&((t=f3(s))==="formdata"||t==="object"&&f2(s.toString)&&s.toString()==="[object FormData]"))},nf=k2("URLSearchParams"),[lf,af,hf,vf]=["ReadableStream","Request","Response","Headers"].map(k2),gf=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function W4(s,t,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let o,c;if(typeof s!="object"&&(s=[s]),ct(s))for(o=0,c=s.length;o<c;o++)t.call(null,s[o],o,s);else{let r=e?Object.getOwnPropertyNames(s):Object.keys(s),n=r.length,a;for(o=0;o<n;o++)a=r[o],t.call(null,s[a],a,s)}}function f6(s,t){t=t.toLowerCase();let e=Object.keys(s),o=e.length,c;for(;o-- >0;)if(c=e[o],t===c.toLowerCase())return c;return null}var a5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z6=s=>!G4(s)&&s!==a5;function il(){let{caseless:s}=z6(this)&&this||{},t={},e=(o,c)=>{let r=s&&f6(t,c)||c;m3(t[r])&&m3(o)?t[r]=il(t[r],o):m3(o)?t[r]=il({},o):ct(o)?t[r]=o.slice():t[r]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&W4(arguments[o],e);return t}var df=(s,t,e,{allOwnKeys:o}={})=>(W4(t,(c,r)=>{e&&f2(c)?s[r]=$4(c,e):s[r]=c},{allOwnKeys:o}),s),wf=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),uf=(s,t,e,o)=>{s.prototype=Object.create(t.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),e&&Object.assign(s.prototype,e)},pf=(s,t,e,o)=>{let c,r,n,a={};if(t=t||{},s==null)return t;do{for(c=Object.getOwnPropertyNames(s),r=c.length;r-- >0;)n=c[r],(!o||o(n,s,t))&&!a[n]&&(t[n]=s[n],a[n]=!0);s=e!==!1&&hl(s)}while(s&&(!e||e(s,t))&&s!==Object.prototype);return t},mf=(s,t,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=t.length;let o=s.indexOf(t,e);return o!==-1&&o===e},ff=s=>{if(!s)return null;if(ct(s))return s;let t=s.length;if(!m6(t))return null;let e=new Array(t);for(;t-- >0;)e[t]=s[t];return e},zf=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&hl(Uint8Array)),xf=(s,t)=>{let o=(s&&s[Symbol.iterator]).call(s),c;for(;(c=o.next())&&!c.done;){let r=c.value;t.call(s,r[0],r[1])}},Mf=(s,t)=>{let e,o=[];for(;(e=s.exec(t))!==null;)o.push(e);return o},Cf=k2("HTMLFormElement"),Vf=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,o,c){return o.toUpperCase()+c}),w6=(({hasOwnProperty:s})=>(t,e)=>s.call(t,e))(Object.prototype),Hf=k2("RegExp"),x6=(s,t)=>{let e=Object.getOwnPropertyDescriptors(s),o={};W4(e,(c,r)=>{let n;(n=t(c,r,s))!==!1&&(o[r]=n||c)}),Object.defineProperties(s,o)},Lf=s=>{x6(s,(t,e)=>{if(f2(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;let o=s[e];if(f2(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},yf=(s,t)=>{let e={},o=c=>{c.forEach(r=>{e[r]=!0})};return ct(s)?o(s):o(String(s).split(t)),e},Bf=()=>{},_f=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t,al="abcdefghijklmnopqrstuvwxyz",u6="0123456789",M6={DIGIT:u6,ALPHA:al,ALPHA_DIGIT:al+al.toUpperCase()+u6},Af=(s=16,t=M6.ALPHA_DIGIT)=>{let e="",{length:o}=t;for(;s--;)e+=t[Math.random()*o|0];return e};function Sf(s){return!!(s&&f2(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}var Rf=s=>{let t=new Array(10),e=(o,c)=>{if(x3(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[c]=o;let r=ct(o)?[]:{};return W4(o,(n,a)=>{let h=e(n,c+1);!G4(h)&&(r[a]=h)}),t[c]=void 0,r}}return o};return e(s,0)},bf=k2("AsyncFunction"),kf=s=>s&&(x3(s)||f2(s))&&f2(s.then)&&f2(s.catch),C6=((s,t)=>s?setImmediate:t?((e,o)=>(a5.addEventListener("message",({source:c,data:r})=>{c===a5&&r===e&&o.length&&o.shift()()},!1),c=>{o.push(c),a5.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",f2(a5.postMessage)),Ef=typeof queueMicrotask<"u"?queueMicrotask.bind(a5):typeof process<"u"&&process.nextTick||C6,L={isArray:ct,isArrayBuffer:p6,isBuffer:Qm,isFormData:rf,isArrayBufferView:Ym,isString:Jm,isNumber:m6,isBoolean:Xm,isObject:x3,isPlainObject:m3,isReadableStream:lf,isRequest:af,isResponse:hf,isHeaders:vf,isUndefined:G4,isDate:tf,isFile:ef,isBlob:sf,isRegExp:Hf,isFunction:f2,isStream:cf,isURLSearchParams:nf,isTypedArray:zf,isFileList:of,forEach:W4,merge:il,extend:df,trim:gf,stripBOM:wf,inherits:uf,toFlatObject:pf,kindOf:f3,kindOfTest:k2,endsWith:mf,toArray:ff,forEachEntry:xf,matchAll:Mf,isHTMLForm:Cf,hasOwnProperty:w6,hasOwnProp:w6,reduceDescriptors:x6,freezeMethods:Lf,toObjectSet:yf,toCamelCase:Vf,noop:Bf,toFiniteNumber:_f,findKey:f6,global:a5,isContextDefined:z6,ALPHABET:M6,generateString:Af,isSpecCompliantForm:Sf,toJSONObject:Rf,isAsyncFn:bf,isThenable:kf,setImmediate:C6,asap:Ef};function rt(s,t,e,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),o&&(this.request=o),c&&(this.response=c)}L.inherits(rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var V6=rt.prototype,H6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{H6[s]={value:s}});Object.defineProperties(rt,H6);Object.defineProperty(V6,"isAxiosError",{value:!0});rt.from=(s,t,e,o,c,r)=>{let n=Object.create(V6);return L.toFlatObject(s,n,function(h){return h!==Error.prototype},a=>a!=="isAxiosError"),rt.call(n,s.message,t,e,o,c),n.cause=s,n.name=s.name,r&&Object.assign(n,r),n};var K=rt;var M3=null;function vl(s){return L.isPlainObject(s)||L.isArray(s)}function y6(s){return L.endsWith(s,"[]")?s.slice(0,-2):s}function L6(s,t,e){return s?s.concat(t).map(function(c,r){return c=y6(c),!e&&r?"["+c+"]":c}).join(e?".":""):t}function Tf(s){return L.isArray(s)&&!s.some(vl)}var If=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function Pf(s,t,e){if(!L.isObject(s))throw new TypeError("target must be an object");t=t||new(M3||FormData),e=L.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,B){return!L.isUndefined(B[R])});let o=e.metaTokens,c=e.visitor||d,r=e.dots,n=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(c))throw new TypeError("visitor must be a function");function v(A){if(A===null)return"";if(L.isDate(A))return A.toISOString();if(!h&&L.isBlob(A))throw new K("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(A)||L.isTypedArray(A)?h&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function d(A,R,B){let O=A;if(A&&!B&&typeof A=="object"){if(L.endsWith(R,"{}"))R=o?R:R.slice(0,-2),A=JSON.stringify(A);else if(L.isArray(A)&&Tf(A)||(L.isFileList(A)||L.endsWith(R,"[]"))&&(O=L.toArray(A)))return R=y6(R),O.forEach(function(P,r1){!(L.isUndefined(P)||P===null)&&t.append(n===!0?L6([R],r1,r):n===null?R:R+"[]",v(P))}),!1}return vl(A)?!0:(t.append(L6(B,R,r),v(A)),!1)}let u=[],z=Object.assign(If,{defaultVisitor:d,convertValue:v,isVisitable:vl});function y(A,R){if(!L.isUndefined(A)){if(u.indexOf(A)!==-1)throw Error("Circular reference detected in "+R.join("."));u.push(A),L.forEach(A,function(O,Z){(!(L.isUndefined(O)||O===null)&&c.call(t,O,L.isString(Z)?Z.trim():Z,R,z))===!0&&y(O,R?R.concat(Z):[Z])}),u.pop()}}if(!L.isObject(s))throw new TypeError("data must be an object");return y(s),t}var I0=Pf;function B6(s){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function _6(s,t){this._pairs=[],s&&I0(s,this,t)}var A6=_6.prototype;A6.append=function(t,e){this._pairs.push([t,e])};A6.toString=function(t){let e=t?function(o){return t.call(this,o,B6)}:B6;return this._pairs.map(function(c){return e(c[0])+"="+e(c[1])},"").join("&")};var C3=_6;function Df(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K4(s,t,e){if(!t)return s;let o=e&&e.encode||Df,c=e&&e.serialize,r;if(c?r=c(t,e):r=L.isURLSearchParams(t)?t.toString():new C3(t,e).toString(o),r){let n=s.indexOf("#");n!==-1&&(s=s.slice(0,n)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}var gl=class{constructor(){this.handlers=[]}use(t,e,o){return this.handlers.push({fulfilled:t,rejected:e,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(o){o!==null&&t(o)})}},dl=gl;var V3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var S6=typeof URLSearchParams<"u"?URLSearchParams:C3;var R6=typeof FormData<"u"?FormData:null;var b6=typeof Blob<"u"?Blob:null;var k6={isBrowser:!0,classes:{URLSearchParams:S6,FormData:R6,Blob:b6},protocols:["http","https","file","blob","url","data"]};var ul={};jv(ul,{hasBrowserEnv:()=>wl,hasStandardBrowserEnv:()=>Of,hasStandardBrowserWebWorkerEnv:()=>Nf,origin:()=>Ff});var wl=typeof window<"u"&&typeof document<"u",Of=(s=>wl&&["ReactNative","NativeScript","NS"].indexOf(s)<0)(typeof navigator<"u"&&navigator.product),Nf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ff=wl&&window.location.href||"http://localhost";var Z1=k(k({},ul),k6);function pl(s,t){return I0(s,new Z1.classes.URLSearchParams,Object.assign({visitor:function(e,o,c,r){return Z1.isNode&&L.isBuffer(e)?(this.append(o,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function jf(s){return L.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Zf(s){let t={},e=Object.keys(s),o,c=e.length,r;for(o=0;o<c;o++)r=e[o],t[r]=s[r];return t}function Uf(s){function t(e,o,c,r){let n=e[r++];if(n==="__proto__")return!0;let a=Number.isFinite(+n),h=r>=e.length;return n=!n&&L.isArray(c)?c.length:n,h?(L.hasOwnProp(c,n)?c[n]=[c[n],o]:c[n]=o,!a):((!c[n]||!L.isObject(c[n]))&&(c[n]=[]),t(e,o,c[n],r)&&L.isArray(c[n])&&(c[n]=Zf(c[n])),!a)}if(L.isFormData(s)&&L.isFunction(s.entries)){let e={};return L.forEachEntry(s,(o,c)=>{t(jf(o),c,e,0)}),e}return null}var H3=Uf;function qf(s,t,e){if(L.isString(s))try{return(t||JSON.parse)(s),L.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(e||JSON.stringify)(s)}var ml={transitional:V3,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){let o=e.getContentType()||"",c=o.indexOf("application/json")>-1,r=L.isObject(t);if(r&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return c?JSON.stringify(H3(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t)||L.isReadableStream(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return pl(t,this.formSerializer).toString();if((a=L.isFileList(t))||o.indexOf("multipart/form-data")>-1){let h=this.env&&this.env.FormData;return I0(a?{"files[]":t}:t,h&&new h,this.formSerializer)}}return r||c?(e.setContentType("application/json",!1),qf(t)):t}],transformResponse:[function(t){let e=this.transitional||ml.transitional,o=e&&e.forcedJSONParsing,c=this.responseType==="json";if(L.isResponse(t)||L.isReadableStream(t))return t;if(t&&L.isString(t)&&(o&&!this.responseType||c)){let n=!(e&&e.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(a){if(n)throw a.name==="SyntaxError"?K.from(a,K.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Z1.classes.FormData,Blob:Z1.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],s=>{ml.headers[s]={}});var nt=ml;var $f=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E6=s=>{let t={},e,o,c;return s&&s.split(`
`).forEach(function(n){c=n.indexOf(":"),e=n.substring(0,c).trim().toLowerCase(),o=n.substring(c+1).trim(),!(!e||t[e]&&$f[e])&&(e==="set-cookie"?t[e]?t[e].push(o):t[e]=[o]:t[e]=t[e]?t[e]+", "+o:o)}),t};var T6=Symbol("internals");function Q4(s){return s&&String(s).trim().toLowerCase()}function L3(s){return s===!1||s==null?s:L.isArray(s)?s.map(L3):String(s)}function Gf(s){let t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,o;for(;o=e.exec(s);)t[o[1]]=o[2];return t}var Wf=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function fl(s,t,e,o,c){if(L.isFunction(o))return o.call(this,t,e);if(c&&(t=e),!!L.isString(t)){if(L.isString(o))return t.indexOf(o)!==-1;if(L.isRegExp(o))return o.test(t)}}function Kf(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,o)=>e.toUpperCase()+o)}function Qf(s,t){let e=L.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+e,{value:function(c,r,n){return this[o].call(this,t,c,r,n)},configurable:!0})})}var lt=class{constructor(t){t&&this.set(t)}set(t,e,o){let c=this;function r(a,h,v){let d=Q4(h);if(!d)throw new Error("header name must be a non-empty string");let u=L.findKey(c,d);(!u||c[u]===void 0||v===!0||v===void 0&&c[u]!==!1)&&(c[u||h]=L3(a))}let n=(a,h)=>L.forEach(a,(v,d)=>r(v,d,h));if(L.isPlainObject(t)||t instanceof this.constructor)n(t,e);else if(L.isString(t)&&(t=t.trim())&&!Wf(t))n(E6(t),e);else if(L.isHeaders(t))for(let[a,h]of t.entries())r(h,a,o);else t!=null&&r(e,t,o);return this}get(t,e){if(t=Q4(t),t){let o=L.findKey(this,t);if(o){let c=this[o];if(!e)return c;if(e===!0)return Gf(c);if(L.isFunction(e))return e.call(this,c,o);if(L.isRegExp(e))return e.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Q4(t),t){let o=L.findKey(this,t);return!!(o&&this[o]!==void 0&&(!e||fl(this,this[o],o,e)))}return!1}delete(t,e){let o=this,c=!1;function r(n){if(n=Q4(n),n){let a=L.findKey(o,n);a&&(!e||fl(o,o[a],a,e))&&(delete o[a],c=!0)}}return L.isArray(t)?t.forEach(r):r(t),c}clear(t){let e=Object.keys(this),o=e.length,c=!1;for(;o--;){let r=e[o];(!t||fl(this,this[r],r,t,!0))&&(delete this[r],c=!0)}return c}normalize(t){let e=this,o={};return L.forEach(this,(c,r)=>{let n=L.findKey(o,r);if(n){e[n]=L3(c),delete e[r];return}let a=t?Kf(r):String(r).trim();a!==r&&delete e[r],e[a]=L3(c),o[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let e=Object.create(null);return L.forEach(this,(o,c)=>{o!=null&&o!==!1&&(e[c]=t&&L.isArray(o)?o.join(", "):o)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){let o=new this(t);return e.forEach(c=>o.set(c)),o}static accessor(t){let o=(this[T6]=this[T6]={accessors:{}}).accessors,c=this.prototype;function r(n){let a=Q4(n);o[a]||(Qf(c,n),o[a]=!0)}return L.isArray(t)?t.forEach(r):r(t),this}};lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(lt.prototype,({value:s},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(o){this[e]=o}}});L.freezeMethods(lt);var D1=lt;function Y4(s,t){let e=this||nt,o=t||e,c=D1.from(o.headers),r=o.data;return L.forEach(s,function(a){r=a.call(e,r,c.normalize(),t?t.status:void 0)}),c.normalize(),r}function J4(s){return!!(s&&s.__CANCEL__)}function I6(s,t,e){K.call(this,s??"canceled",K.ERR_CANCELED,t,e),this.name="CanceledError"}L.inherits(I6,K,{__CANCEL__:!0});var G2=I6;function X4(s,t,e){let o=e.config.validateStatus;!e.status||!o||o(e.status)?s(e):t(new K("Request failed with status code "+e.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function zl(s){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function Yf(s,t){s=s||10;let e=new Array(s),o=new Array(s),c=0,r=0,n;return t=t!==void 0?t:1e3,function(h){let v=Date.now(),d=o[r];n||(n=v),e[c]=h,o[c]=v;let u=r,z=0;for(;u!==c;)z+=e[u++],u=u%s;if(c=(c+1)%s,c===r&&(r=(r+1)%s),v-n<t)return;let y=d&&v-d;return y?Math.round(z*1e3/y):void 0}}var P6=Yf;function Jf(s,t){let e=0,o=1e3/t,c,r,n=(v,d=Date.now())=>{e=d,c=null,r&&(clearTimeout(r),r=null),s.apply(null,v)};return[(...v)=>{let d=Date.now(),u=d-e;u>=o?n(v,d):(c=v,r||(r=setTimeout(()=>{r=null,n(c)},o-u)))},()=>c&&n(c)]}var D6=Jf;var at=(s,t,e=3)=>{let o=0,c=P6(50,250);return D6(r=>{let n=r.loaded,a=r.lengthComputable?r.total:void 0,h=n-o,v=c(h),d=n<=a;o=n;let u={loaded:n,total:a,progress:a?n/a:void 0,bytes:h,rate:v||void 0,estimated:v&&a&&d?(a-n)/v:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};s(u)},e)},xl=(s,t)=>{let e=s!=null;return[o=>t[0]({lengthComputable:e,total:s,loaded:o}),t[1]]},Ml=s=>(...t)=>L.asap(()=>s(...t));var O6=Z1.hasStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),o;function c(r){let n=r;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return o=c(window.location.href),function(n){let a=L.isString(n)?c(n):n;return a.protocol===o.protocol&&a.host===o.host}}():function(){return function(){return!0}}();var N6=Z1.hasStandardBrowserEnv?{write(s,t,e,o,c,r){let n=[s+"="+encodeURIComponent(t)];L.isNumber(e)&&n.push("expires="+new Date(e).toGMTString()),L.isString(o)&&n.push("path="+o),L.isString(c)&&n.push("domain="+c),r===!0&&n.push("secure"),document.cookie=n.join("; ")},read(s){let t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cl(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Vl(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function te(s,t){return s&&!Cl(t)?Vl(s,t):t}var F6=s=>s instanceof D1?k({},s):s;function E2(s,t){t=t||{};let e={};function o(v,d,u){return L.isPlainObject(v)&&L.isPlainObject(d)?L.merge.call({caseless:u},v,d):L.isPlainObject(d)?L.merge({},d):L.isArray(d)?d.slice():d}function c(v,d,u){if(L.isUndefined(d)){if(!L.isUndefined(v))return o(void 0,v,u)}else return o(v,d,u)}function r(v,d){if(!L.isUndefined(d))return o(void 0,d)}function n(v,d){if(L.isUndefined(d)){if(!L.isUndefined(v))return o(void 0,v)}else return o(void 0,d)}function a(v,d,u){if(u in t)return o(v,d);if(u in s)return o(void 0,v)}let h={url:r,method:r,data:r,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:a,headers:(v,d)=>c(F6(v),F6(d),!0)};return L.forEach(Object.keys(Object.assign({},s,t)),function(d){let u=h[d]||c,z=u(s[d],t[d],d);L.isUndefined(z)&&u!==a||(e[d]=z)}),e}var y3=s=>{let t=E2({},s),{data:e,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:r,headers:n,auth:a}=t;t.headers=n=D1.from(n),t.url=K4(te(t.baseURL,t.url),s.params,s.paramsSerializer),a&&n.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let h;if(L.isFormData(e)){if(Z1.hasStandardBrowserEnv||Z1.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((h=n.getContentType())!==!1){let[v,...d]=h?h.split(";").map(u=>u.trim()).filter(Boolean):[];n.setContentType([v||"multipart/form-data",...d].join("; "))}}if(Z1.hasStandardBrowserEnv&&(o&&L.isFunction(o)&&(o=o(t)),o||o!==!1&&O6(t.url))){let v=c&&r&&N6.read(r);v&&n.set(c,v)}return t};var Xf=typeof XMLHttpRequest<"u",j6=Xf&&function(s){return new Promise(function(e,o){let c=y3(s),r=c.data,n=D1.from(c.headers).normalize(),{responseType:a,onUploadProgress:h,onDownloadProgress:v}=c,d,u,z,y,A;function R(){y&&y(),A&&A(),c.cancelToken&&c.cancelToken.unsubscribe(d),c.signal&&c.signal.removeEventListener("abort",d)}let B=new XMLHttpRequest;B.open(c.method.toUpperCase(),c.url,!0),B.timeout=c.timeout;function O(){if(!B)return;let P=D1.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),R1={data:!a||a==="text"||a==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:P,config:s,request:B};X4(function(M){e(M),R()},function(M){o(M),R()},R1),B=null}"onloadend"in B?B.onloadend=O:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(O)},B.onabort=function(){B&&(o(new K("Request aborted",K.ECONNABORTED,s,B)),B=null)},B.onerror=function(){o(new K("Network Error",K.ERR_NETWORK,s,B)),B=null},B.ontimeout=function(){let r1=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",R1=c.transitional||V3;c.timeoutErrorMessage&&(r1=c.timeoutErrorMessage),o(new K(r1,R1.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,s,B)),B=null},r===void 0&&n.setContentType(null),"setRequestHeader"in B&&L.forEach(n.toJSON(),function(r1,R1){B.setRequestHeader(R1,r1)}),L.isUndefined(c.withCredentials)||(B.withCredentials=!!c.withCredentials),a&&a!=="json"&&(B.responseType=c.responseType),v&&([z,A]=at(v,!0),B.addEventListener("progress",z)),h&&B.upload&&([u,y]=at(h),B.upload.addEventListener("progress",u),B.upload.addEventListener("loadend",y)),(c.cancelToken||c.signal)&&(d=P=>{B&&(o(!P||P.type?new G2(null,s,B):P),B.abort(),B=null)},c.cancelToken&&c.cancelToken.subscribe(d),c.signal&&(c.signal.aborted?d():c.signal.addEventListener("abort",d)));let Z=zl(c.url);if(Z&&Z1.protocols.indexOf(Z)===-1){o(new K("Unsupported protocol "+Z+":",K.ERR_BAD_REQUEST,s));return}B.send(r||null)})};var tz=(s,t)=>{let e=new AbortController,o,c=function(h){if(!o){o=!0,n();let v=h instanceof Error?h:this.reason;e.abort(v instanceof K?v:new G2(v instanceof Error?v.message:v))}},r=t&&setTimeout(()=>{c(new K(`timeout ${t} of ms exceeded`,K.ETIMEDOUT))},t),n=()=>{s&&(r&&clearTimeout(r),r=null,s.forEach(h=>{h&&(h.removeEventListener?h.removeEventListener("abort",c):h.unsubscribe(c))}),s=null)};s.forEach(h=>h&&h.addEventListener&&h.addEventListener("abort",c));let{signal:a}=e;return a.unsubscribe=n,[a,()=>{r&&clearTimeout(r),r=null}]},Z6=tz;var ez=function*(s,t){let e=s.byteLength;if(!t||e<t){yield s;return}let o=0,c;for(;o<e;)c=o+t,yield s.slice(o,c),o=c},sz=function(s,t,e){return s9(this,null,function*(){try{for(var o=c9(s),c,r,n;c=!(r=yield new Ae(o.next())).done;c=!1){let a=r.value;yield*o9(ez(ArrayBuffer.isView(a)?a:yield new Ae(e(String(a))),t))}}catch{n=[r]}finally{try{c&&(r=o.return)&&(yield new Ae(r.call(o)))}finally{if(n)throw n[0]}}})},Hl=(s,t,e,o,c)=>{let r=sz(s,t,c),n=0,a,h=d=>{a||(a=!0,o&&o(d))};return new ReadableStream({pull(d){return S(this,null,function*(){try{let{done:u,value:z}=yield r.next();if(u){h(),d.close();return}let y=z.byteLength;if(e){let A=n+=y;e(A)}d.enqueue(new Uint8Array(z))}catch(u){throw h(u),u}})},cancel(d){return h(d),r.return()}},{highWaterMark:2})};var _3=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",q6=_3&&typeof ReadableStream=="function",Ll=_3&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):s=>S(void 0,null,function*(){return new Uint8Array(yield new Response(s).arrayBuffer())})),$6=(s,...t)=>{try{return!!s(...t)}catch{return!1}},oz=q6&&$6(()=>{let s=!1,t=new Request(Z1.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),U6=64*1024,yl=q6&&$6(()=>L.isReadableStream(new Response("").body)),B3={stream:yl&&(s=>s.body)};_3&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!B3[t]&&(B3[t]=L.isFunction(s[t])?e=>e[t]():(e,o)=>{throw new K(`Response type '${t}' is not supported`,K.ERR_NOT_SUPPORT,o)})})})(new Response);var cz=s=>S(void 0,null,function*(){if(s==null)return 0;if(L.isBlob(s))return s.size;if(L.isSpecCompliantForm(s))return(yield new Request(s).arrayBuffer()).byteLength;if(L.isArrayBufferView(s)||L.isArrayBuffer(s))return s.byteLength;if(L.isURLSearchParams(s)&&(s=s+""),L.isString(s))return(yield Ll(s)).byteLength}),rz=(s,t)=>S(void 0,null,function*(){let e=L.toFiniteNumber(s.getContentLength());return e??cz(t)}),G6=_3&&(s=>S(void 0,null,function*(){let{url:t,method:e,data:o,signal:c,cancelToken:r,timeout:n,onDownloadProgress:a,onUploadProgress:h,responseType:v,headers:d,withCredentials:u="same-origin",fetchOptions:z}=y3(s);v=v?(v+"").toLowerCase():"text";let[y,A]=c||r||n?Z6([c,r],n):[],R,B,O=()=>{!R&&setTimeout(()=>{y&&y.unsubscribe()}),R=!0},Z;try{if(h&&oz&&e!=="get"&&e!=="head"&&(Z=yield rz(d,o))!==0){let s1=new Request(t,{method:"POST",body:o,duplex:"half"}),M;if(L.isFormData(o)&&(M=s1.headers.get("content-type"))&&d.setContentType(M),s1.body){let[p,m]=xl(Z,at(Ml(h)));o=Hl(s1.body,U6,p,m,Ll)}}L.isString(u)||(u=u?"include":"omit"),B=new Request(t,h1(k({},z),{signal:y,method:e.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:u}));let P=yield fetch(B),r1=yl&&(v==="stream"||v==="response");if(yl&&(a||r1)){let s1={};["status","statusText","headers"].forEach(x=>{s1[x]=P[x]});let M=L.toFiniteNumber(P.headers.get("content-length")),[p,m]=a&&xl(M,at(Ml(a),!0))||[];P=new Response(Hl(P.body,U6,p,()=>{m&&m(),r1&&O()},Ll),s1)}v=v||"text";let R1=yield B3[L.findKey(B3,v)||"text"](P,s);return!r1&&O(),A&&A(),yield new Promise((s1,M)=>{X4(s1,M,{data:R1,headers:D1.from(P.headers),status:P.status,statusText:P.statusText,config:s,request:B})})}catch(P){throw O(),P&&P.name==="TypeError"&&/fetch/i.test(P.message)?Object.assign(new K("Network Error",K.ERR_NETWORK,s,B),{cause:P.cause||P}):K.from(P,P&&P.code,s,B)}}));var Bl={http:M3,xhr:j6,fetch:G6};L.forEach(Bl,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});var W6=s=>`- ${s}`,nz=s=>L.isFunction(s)||s===null||s===!1,A3={getAdapter:s=>{s=L.isArray(s)?s:[s];let{length:t}=s,e,o,c={};for(let r=0;r<t;r++){e=s[r];let n;if(o=e,!nz(e)&&(o=Bl[(n=String(e)).toLowerCase()],o===void 0))throw new K(`Unknown adapter '${n}'`);if(o)break;c[n||"#"+r]=o}if(!o){let r=Object.entries(c).map(([a,h])=>`adapter ${a} `+(h===!1?"is not supported by the environment":"is not available in the build")),n=t?r.length>1?`since :
`+r.map(W6).join(`
`):" "+W6(r[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o},adapters:Bl};function _l(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new G2(null,s)}function S3(s){return _l(s),s.headers=D1.from(s.headers),s.data=Y4.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),A3.getAdapter(s.adapter||nt.adapter)(s).then(function(o){return _l(s),o.data=Y4.call(s,s.transformResponse,o),o.headers=D1.from(o.headers),o},function(o){return J4(o)||(_l(s),o&&o.response&&(o.response.data=Y4.call(s,s.transformResponse,o.response),o.response.headers=D1.from(o.response.headers))),Promise.reject(o)})}var R3="1.7.3";var Al={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Al[s]=function(o){return typeof o===s||"a"+(t<1?"n ":" ")+s}});var K6={};Al.transitional=function(t,e,o){function c(r,n){return"[Axios v"+R3+"] Transitional option '"+r+"'"+n+(o?". "+o:"")}return(r,n,a)=>{if(t===!1)throw new K(c(n," has been removed"+(e?" in "+e:"")),K.ERR_DEPRECATED);return e&&!K6[n]&&(K6[n]=!0,console.warn(c(n," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,n,a):!0}};function lz(s,t,e){if(typeof s!="object")throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);let o=Object.keys(s),c=o.length;for(;c-- >0;){let r=o[c],n=t[r];if(n){let a=s[r],h=a===void 0||n(a,r,s);if(h!==!0)throw new K("option "+r+" must be "+h,K.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new K("Unknown option "+r,K.ERR_BAD_OPTION)}}var b3={assertOptions:lz,validators:Al};var P0=b3.validators,it=class{constructor(t){this.defaults=t,this.interceptors={request:new dl,response:new dl}}request(t,e){return S(this,null,function*(){try{return yield this._request(t,e)}catch(o){if(o instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;let r=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}})}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=E2(this.defaults,e);let{transitional:o,paramsSerializer:c,headers:r}=e;o!==void 0&&b3.assertOptions(o,{silentJSONParsing:P0.transitional(P0.boolean),forcedJSONParsing:P0.transitional(P0.boolean),clarifyTimeoutError:P0.transitional(P0.boolean)},!1),c!=null&&(L.isFunction(c)?e.paramsSerializer={serialize:c}:b3.assertOptions(c,{encode:P0.function,serialize:P0.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let n=r&&L.merge(r.common,r[e.method]);r&&L.forEach(["delete","get","head","post","put","patch","common"],A=>{delete r[A]}),e.headers=D1.concat(n,r);let a=[],h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(e)===!1||(h=h&&R.synchronous,a.unshift(R.fulfilled,R.rejected))});let v=[];this.interceptors.response.forEach(function(R){v.push(R.fulfilled,R.rejected)});let d,u=0,z;if(!h){let A=[S3.bind(this),void 0];for(A.unshift.apply(A,a),A.push.apply(A,v),z=A.length,d=Promise.resolve(e);u<z;)d=d.then(A[u++],A[u++]);return d}z=a.length;let y=e;for(u=0;u<z;){let A=a[u++],R=a[u++];try{y=A(y)}catch(B){R.call(this,B);break}}try{d=S3.call(this,y)}catch(A){return Promise.reject(A)}for(u=0,z=v.length;u<z;)d=d.then(v[u++],v[u++]);return d}getUri(t){t=E2(this.defaults,t);let e=te(t.baseURL,t.url);return K4(e,t.params,t.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(t){it.prototype[t]=function(e,o){return this.request(E2(o||{},{method:t,url:e,data:(o||{}).data}))}});L.forEach(["post","put","patch"],function(t){function e(o){return function(r,n,a){return this.request(E2(a||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}it.prototype[t]=e(),it.prototype[t+"Form"]=e(!0)});var ee=it;var Sl=class s{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});let o=this;this.promise.then(c=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](c);o._listeners=null}),this.promise.then=c=>{let r,n=new Promise(a=>{o.subscribe(a),r=a}).then(c);return n.cancel=function(){o.unsubscribe(r)},n},t(function(r,n,a){o.reason||(o.reason=new G2(r,n,a),e(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new s(function(c){t=c}),cancel:t}}},Q6=Sl;function Rl(s){return function(e){return s.apply(null,e)}}function bl(s){return L.isObject(s)&&s.isAxiosError===!0}var kl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kl).forEach(([s,t])=>{kl[t]=s});var Y6=kl;function J6(s){let t=new ee(s),e=$4(ee.prototype.request,t);return L.extend(e,ee.prototype,t,{allOwnKeys:!0}),L.extend(e,t,null,{allOwnKeys:!0}),e.create=function(c){return J6(E2(s,c))},e}var E1=J6(nt);E1.Axios=ee;E1.CanceledError=G2;E1.CancelToken=Q6;E1.isCancel=J4;E1.VERSION=R3;E1.toFormData=I0;E1.AxiosError=K;E1.Cancel=E1.CanceledError;E1.all=function(t){return Promise.all(t)};E1.spread=Rl;E1.isAxiosError=bl;E1.mergeConfig=E2;E1.AxiosHeaders=D1;E1.formToJSON=s=>H3(L.isHTMLForm(s)?new FormData(s):s);E1.getAdapter=A3.getAdapter;E1.HttpStatusCode=Y6;E1.default=E1;var ht=E1;var{Axios:wy,AxiosError:uy,CanceledError:py,isCancel:my,CancelToken:fy,VERSION:zy,all:xy,Cancel:My,isAxiosError:Cy,spread:Vy,toFormData:Hy,AxiosHeaders:Ly,HttpStatusCode:yy,formToJSON:By,getAdapter:_y,mergeConfig:Ay}=ht;var X6={fetchPhotoFromUnsplash:iz},az="3yF4Mw1jz_x9aL142pO5a4nXm_a3xc6Nu_BYEEIxQNA";function iz(s=1,t){return S(this,null,function*(){try{return(yield ht.get("https://api.unsplash.com/photos/random",{params:{query:t,per_page:s},headers:{Authorization:`Client-ID ${az}`}})).data.urls.regular}catch(e){return console.error("Error fetching photos:",e),[]}})}function vt(s,t){return s=Math.ceil(s),t=Math.floor(t),Math.floor(Math.random()*(t-s+1))+s}function gt(s="n-"){let t=vt(1e4,1e8);return`${s}${t}`}function t8(s){let t=["The cat","A dog","My friend","An artist","The teacher"],e=["jumps","runs","paints","writes","reads"],o=["a book","a picture","a letter","an email","a song"],c=["quickly","slowly","happily","sadly","eagerly"],r=[];for(let n=0;n<s;n++){let a=t[Math.floor(Math.random()*t.length)],h=e[Math.floor(Math.random()*e.length)],v=o[Math.floor(Math.random()*o.length)],d=c[Math.floor(Math.random()*c.length)];r.push(`${a} ${h} ${v} ${d}.`)}return r.join(" ")}var e8={getDemoNotes:hz,getDemoNote:s8},se=["white","pink","lightcoral","lightskyblue","lightsteelblue","lightseagreen"];var El=["linear-gradient(0deg, #D9AFD9 0%, #97D9E1 100%)","linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%)","linear-gradient(62deg, #FBAB7E 0%, #F7CE68 100%)","linear-gradient(45deg, #FBDA61 0%, #FF5ACD 100%)","linear-gradient(180deg, #A9C9FF 0%, #FFBBEC 100%)","linear-gradient(0deg, #08AEEA 0%, #2AF598 100%)"];function hz(s=17){return S(this,null,function*(){let t=[];for(let e=0;e<s;e++)t.push(yield s8());return t})}function s8(){return S(this,null,function*(){let s=vt(0,5),t=["Meeting","Shopping","Project","Workout Plan","Recipe"],e=["txt","todo","img"],o=t[Math.floor(Math.random()*t.length)],c=Date.now()-vt(1e5,1e8),r=e[Math.floor(Math.random()*e.length)],n=c8(new Date(c)),a=s%2===0?se[s]:El[s],h={_id:"",title:o,type:r,createdAt:n,color:a,timestamp:Date.now()};h=yield vz(h);let v=yield T0.addNoteWithAutoId(h);return h._id=v.id,yield T0.updateNoteId(v.id,h._id),h})}function vz(s){return S(this,null,function*(){switch(s.type){case"todo":s.todos=gz(vt(3,5));break;case"img":s.imgUrl=yield dz(s.title);break;case"txt":default:s.txt=t8(5);break}return s})}function gz(s){let t=["Buy groceries","Finish report","Call the bank","Schedule appointment","Clean the house","Prepare presentation","Read a book","Exercise","Plan the trip","Pay bills"],e=[];for(let o=0;o<s;o++){let c=t[Math.floor(Math.random()*t.length)],r={_id:gt("t-"),createdAt:new Date(Date.now()),content:c,isDone:!!vt(0,1)};e.push(r)}return e}function dz(s){return X6.fetchPhotoFromUnsplash(1,s)}function o8(s="Title...",t="Description...",e="txt"){return{_id:"",title:s,txt:t,type:e,createdAt:c8(new Date),color:"#FFF",timestamp:Date.now()}}function c8(s){let t=s.getHours().toString().padStart(2,"0"),e=s.getMinutes().toString().padStart(2,"0"),o=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0");return`${t}:${e} ${o}/${c}`}var wz=s=>({show:s}),r8=s=>({background:s}),n8=s=>({selected:s});function uz(s,t){if(s&1){let e=B1();N(0,"div",2),e1("click",function(c){let r=m1(e).$implicit,n=G();return f1(n.handleSelectColor(c,r))}),F()}if(s&2){let e=t.$implicit,o=G();Z0(a2(4,r8,e)),M2(a2(6,n8,e===o.activeColor))}}function pz(s,t){if(s&1){let e=B1();N(0,"div",2),e1("click",function(c){let r=m1(e).$implicit,n=G();return f1(n.handleSelectColor(c,r))}),F()}if(s&2){let e=t.$implicit,o=G();Z0(a2(4,r8,e)),M2(a2(6,n8,e===o.activeColor))}}var l8=(()=>{class s{noteId;noteColor;selectedNote;isColorPickerOpen;selectedColor=new T1;activeColor=o0;colors=se;gradients=El;ngOnInit(){this.activeColor=this.noteColor}handleSelectColor(e,o){e.stopPropagation(),e.preventDefault(),this.activeColor=o,this.selectedColor.emit({noteId:this.noteId,type:b5,data:o})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=w1({type:s,selectors:[["color-picker"]],inputs:{noteId:"noteId",noteColor:"noteColor",selectedNote:"selectedNote",isColorPickerOpen:"isColorPickerOpen"},outputs:{selectedColor:"selectedColor"},standalone:!0,features:[u1],decls:5,vars:4,consts:[[1,"color-picker-container"],[1,"color-item",3,"style","class"],[1,"color-item",3,"click"]],template:function(o,c){o&1&&(N(0,"article",0),$1(1,uz,1,8,"div",1,R2),$1(3,pz,1,8,"div",1,R2),F()),o&2&&(M2(a2(2,wz,c.isColorPickerOpen&&c.selectedNote._id===c.noteId)),q(),G1(c.colors),q(2),G1(c.gradients))},styles:[".color-picker-container[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:39px;display:grid;gap:4px;padding:5px 15px;border-radius:30px;grid-template-columns:repeat(6,1fr);pointer-events:none;opacity:0;box-shadow:#0000000d 0 0 0 1px}.color-picker-container.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1;background:#ffffff73}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px;border-radius:50%;width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{cursor:pointer}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(85%)}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%], .color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{outline:2px solid rgba(0,0,0,.452)}"]})}return s})();var a8=(()=>{class s{el;renderer;noteId;constructor(e,o){this.el=e,this.renderer=o}onMouseOver(){this.renderer.addClass(this.el.nativeElement,"hovered")}onMouseOut(){this.renderer.removeClass(this.el.nativeElement,"hovered")}static \u0275fac=function(o){return new(o||s)(i1(x2),i1(Fe))};static \u0275dir=A2({type:s,selectors:[["","noteHover",""]],hostBindings:function(o,c){o&1&&e1("mouseover",function(){return c.onMouseOver()})("mouseout",function(){return c.onMouseOut()})},inputs:{noteId:[T2.None,"noteHover","noteId"]},standalone:!0})}return s})();var mz=new c1(""),fz=new c1("");function d8(s){return s!=null}function w8(s){return qe(s)?X1(s):s}function u8(s){let t={};return s.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function p8(s,t){return t.map(e=>e(s))}function zz(s){return!s.validate}function m8(s){return s.map(t=>zz(t)?t:e=>t.validate(e))}function xz(s){if(!s)return null;let t=s.filter(d8);return t.length==0?null:function(e){return u8(p8(e,t))}}function Ol(s){return s!=null?xz(m8(s)):null}function Mz(s){if(!s)return null;let t=s.filter(d8);return t.length==0?null:function(e){let o=p8(e,t).map(w8);return i9(o).pipe(v1(u8))}}function Nl(s){return s!=null?Mz(m8(s)):null}function i8(s,t){return s===null?[t]:Array.isArray(s)?[...s,t]:[s,t]}function Cz(s){return s._rawValidators}function Vz(s){return s._rawAsyncValidators}function Tl(s){return s?Array.isArray(s)?s:[s]:[]}function E3(s,t){return Array.isArray(s)?s.includes(t):s===t}function h8(s,t){let e=Tl(t);return Tl(s).forEach(c=>{E3(e,c)||e.push(c)}),e}function v8(s,t){return Tl(t).filter(e=>!E3(s,e))}var Il=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Ol(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Nl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ne=class extends Il{get formDirective(){return null}get path(){return null}};var Pl=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Hz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aB=h1(k({},Hz),{"[class.ng-submitted]":"isSubmitted"});var I3=(()=>{let t=class t extends Pl{constructor(o){super(o)}};t.\u0275fac=function(c){return new(c||t)(i1(ne,10))},t.\u0275dir=A2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(c,r){c&2&&M0("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Co]});let s=t;return s})();var oe="VALID",k3="INVALID",dt="PENDING",ce="DISABLED";function Lz(s){return(Fl(s)?s.validators:s)||null}function yz(s){return Array.isArray(s)?Ol(s):s||null}function Bz(s,t){return(Fl(t)?t.asyncValidators:s)||null}function _z(s){return Array.isArray(s)?Nl(s):s||null}function Fl(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}function Az(s,t,e){let o=s.controls;if(!(t?Object.keys(o):o).length)throw new C1(1e3,"");if(!o[e])throw new C1(1001,"")}function Sz(s,t,e){s._forEachChild((o,c)=>{if(e[c]===void 0)throw new C1(1002,"")})}var Dl=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===oe}get invalid(){return this.status===k3}get pending(){return this.status==dt}get disabled(){return this.status===ce}get enabled(){return this.status!==ce}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(h8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(h8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(v8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(v8(t,this._rawAsyncValidators))}hasValidator(t){return E3(this._rawValidators,t)}hasAsyncValidator(t){return E3(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=dt,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ce,this.errors=null,this._forEachChild(o=>{o.disable(h1(k({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(h1(k({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=oe,this._forEachChild(o=>{o.enable(h1(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(h1(k({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oe||this.status===dt)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ce:oe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=dt,this._hasOwnPendingAsyncValidator=!0;let e=w8(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((o,c)=>o&&o._find(c),this)}getError(t,e){let o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new T1,this.statusChanges=new T1}_calculateStatus(){return this._allControlsDisabled()?ce:this.errors?k3:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dt)?dt:this._anyControlsHaveStatus(k3)?k3:oe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=yz(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=_z(this._rawAsyncValidators)}},T3=class extends Dl{constructor(t,e,o){super(Lz(e),Bz(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Sz(this,!0,t),Object.keys(t).forEach(o=>{Az(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(o=>{let c=this.controls[o];c&&c.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,c)=>{o.reset(t?t[c]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>o._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,o,c)=>((o.enabled||this.disabled)&&(e[c]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((c,r)=>{o=e(o,c,r)}),o}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var f8=new c1("CallSetDisabledState",{providedIn:"root",factory:()=>jl}),jl="always";function Rz(s,t,e=jl){z8(s,t),t.valueAccessor.writeValue(s.value),(s.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(s.disabled),kz(s,t),Tz(s,t),Ez(s,t),bz(s,t)}function g8(s,t){s.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function bz(s,t){if(t.valueAccessor.setDisabledState){let e=o=>{t.valueAccessor.setDisabledState(o)};s.registerOnDisabledChange(e),t._registerOnDestroy(()=>{s._unregisterOnDisabledChange(e)})}}function z8(s,t){let e=Cz(s);t.validator!==null?s.setValidators(i8(e,t.validator)):typeof e=="function"&&s.setValidators([e]);let o=Vz(s);t.asyncValidator!==null?s.setAsyncValidators(i8(o,t.asyncValidator)):typeof o=="function"&&s.setAsyncValidators([o]);let c=()=>s.updateValueAndValidity();g8(t._rawValidators,c),g8(t._rawAsyncValidators,c)}function kz(s,t){t.valueAccessor.registerOnChange(e=>{s._pendingValue=e,s._pendingChange=!0,s._pendingDirty=!0,s.updateOn==="change"&&x8(s,t)})}function Ez(s,t){t.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,s.updateOn==="blur"&&s._pendingChange&&x8(s,t),s.updateOn!=="submit"&&s.markAsTouched()})}function x8(s,t){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function Tz(s,t){let e=(o,c)=>{t.valueAccessor.writeValue(o),c&&t.viewToModelUpdate(o)};s.registerOnChange(e),t._registerOnDestroy(()=>{s._unregisterOnChange(e)})}function Iz(s,t){s==null,z8(s,t)}function Pz(s,t){s._syncPendingControls(),t.forEach(e=>{let o=e.control;o.updateOn==="submit"&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}var Dz={provide:ne,useExisting:w9(()=>le)},re=Promise.resolve(),le=(()=>{let t=class t extends ne{constructor(o,c,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new T1,this.form=new T3({},Ol(o),Nl(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(o){re.then(()=>{let c=this._findContainer(o.path);o.control=c.registerControl(o.name,o.control),Rz(o.control,o,this.callSetDisabledState),o.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(o)})}getControl(o){return this.form.get(o.path)}removeControl(o){re.then(()=>{let c=this._findContainer(o.path);c&&c.removeControl(o.name),this._directives.delete(o)})}addFormGroup(o){re.then(()=>{let c=this._findContainer(o.path),r=new T3({});Iz(r,o),c.registerControl(o.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(o){re.then(()=>{let c=this._findContainer(o.path);c&&c.removeControl(o.name)})}getFormGroup(o){return this.form.get(o.path)}updateModel(o,c){re.then(()=>{this.form.get(o.path).setValue(c)})}setValue(o){this.control.setValue(o)}onSubmit(o){return this.submitted=!0,Pz(this.form,this._directives),this.ngSubmit.emit(o),o?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(o=void 0){this.form.reset(o),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(o){return o.pop(),o.length?this.form.get(o):this.form}};t.\u0275fac=function(c){return new(c||t)(i1(mz,10),i1(fz,10),i1(f8,8))},t.\u0275dir=A2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(c,r){c&1&&e1("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[T2.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[C2([Dz]),Co]});let s=t;return s})();var P3=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=A2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let s=t;return s})();var Oz=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({});let s=t;return s})();var D3=(()=>{let t=class t{static withConfig(o){return{ngModule:t,providers:[{provide:f8,useValue:o.callSetDisabledState??jl}]}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({imports:[Oz]});let s=t;return s})();var C8={uploadPhotoToCloud:Nz};function Nz(s){return S(this,null,function*(){let t=new FormData;return t.append("file",s),t.append("upload_preset","keepy-notes"),t.append("cloud_name","dcg0ivasg"),yield ht.post("https://api.cloudinary.com/v1_1/dcg0ivasg/image/upload",t)})}var Zl={updateTodo:Fz,getEmptyTodo:jz};function Fz(){return S(this,null,function*(){try{}catch(s){console.error(s)}})}function jz(){return{_id:gt("t-"),createdAt:new Date,content:"",isDone:!1}}var Zz=s=>({background:s});function Uz(s,t){if(s&1){let e=B1();N(0,"textarea",6),e1("input",function(c){m1(e);let r=G();return f1(r.setDescription(c))}),F()}if(s&2){let e=G();g1("value",e.description||null)}}function qz(s,t){if(s&1&&H1(0,"img",10),s&2){let e=G(2);g1("src",e.imgUrl,x5)}}function $z(s,t){if(s&1){let e=B1();N(0,"div",7)(1,"input",8,0),e1("change",function(c){m1(e);let r=G();return f1(r.handleFileInput(c))}),F(),N(3,"button",9),e1("click",function(){m1(e);let c=yo(2);return f1(c.click())}),L1(4,"Upload Image"),F(),g2(5,qz,1,1,"img",10),F()}if(s&2){let e=G();q(5),l2(5,e.imgUrl?5:-1)}}function Gz(s,t){if(s&1){let e=B1();N(0,"li",12)(1,"input",14),e1("change",function(c){let r=m1(e).$implicit,n=G(2);return f1(n.setTodoContent(c,r._id))}),F(),N(2,"p",15),e1("click",function(){let c=m1(e).$implicit,r=G(2);return f1(r.removeTodo(c._id))}),L1(3,"\xD7"),F()()}if(s&2){let e=t.$implicit,o=t.$index;q(),M2(e.isDone?"done":"active"),g1("placeholder","This is task number #00"+(o+1))}}function Wz(s,t){if(s&1){let e=B1();N(0,"ul",11),$1(1,Gz,4,3,"li",12,Lo),N(3,"button",13),e1("click",function(){m1(e);let c=G();return f1(c.addTodo())}),L1(4,"+"),F()()}if(s&2){let e=G();q(),G1(e.todos)}}function Kz(s,t){if(s&1){let e=B1();N(0,"ng-icon",16),e1("click",function(){let c=m1(e).$implicit,r=G();return f1(r.setType(c.type))}),F()}if(s&2){let e=t.$implicit;g1("name",e.svg)("title",e.type)}}function Qz(s,t){if(s&1){let e=B1();N(0,"li",18),e1("click",function(){let c=m1(e).$implicit,r=G(2);return f1(r.setSelectedColor(c))}),F()}if(s&2){let e=t.$implicit,o=G(2);Z0(a2(4,Zz,e)),M0("selected",e===o.selectedColor)}}function Yz(s,t){if(s&1&&(N(0,"ul",5),$1(1,Qz,1,6,"li",17,Lo),F()),s&2){let e=G();q(),G1(e.colors)}}var V8=(()=>{class s{title;description;type;imgUrl;todos;noteToAdd;isEditorActive;isImgLoading;isColorPickerOpen=!1;colors=se;selectedColor="#fff";editorIcons=[{type:Bc,svg:"matColorLens"},{type:si,svg:"matTextSnippet"},{type:ei,svg:"matImage"},{type:oi,svg:"matViewList"}];addNote=new T1;ngOnInit(){this.resetEditor(),this.isEditorActive=!1,this.type="todo"}setTodoContent(e,o){let c=this.todos.findIndex(r=>r._id===o);this.todos[c].content=e.target.value}setTitle(e){this.title=e.target.value}setSelectedColor(e){this.selectedColor=e}setType(e){if(e===Bc){this.isColorPickerOpen=!this.isColorPickerOpen;return}this.resetEditor(),this.type=e}setDescription(e){this.description=e.target.value}addTodo(){let e=Zl.getEmptyTodo();this.todos.push(e)}handleFileInput(e){let o=e.target.files[0];if(o){let c=new FileReader;c.onload=r=>{this.imgUrl=r.target.result},c.readAsDataURL(o)}}removeTodo(e){console.log("todoId",e),this.todos=this.todos.filter(o=>o._id!==e),console.log("this.todos AFTER REMOVE ",e,this.todos)}resetEditor(){this.isColorPickerOpen=!1,this.title=o0,this.description=o0,this.imgUrl=o0,this.type=p4,this.selectedColor="#fff",this.todos=[Zl.getEmptyTodo()],this.noteToAdd=o8()}handleImgUpload(){return S(this,null,function*(){if(this.imgUrl)try{let e=yield C8.uploadPhotoToCloud(this.imgUrl);this.noteToAdd.imgUrl=e.data.secure_url}catch(e){console.error("Image upload failed:",e)}})}handleTodos(){this.todos&&(this.noteToAdd.todos=[...this.todos],this.noteToAdd.todos.forEach((e,o)=>e.content?null:e.content=`Task number #00${o+1}`))}setNoteDetails(){this.noteToAdd.title=this.title,this.noteToAdd.type=this.type,this.noteToAdd.txt=this.description,this.noteToAdd.color=this.selectedColor}handleAddNote(e){return S(this,null,function*(){try{e.preventDefault(),this.setNoteDetails(),this.handleTodos(),yield this.handleImgUpload(),this.addNote.emit({noteId:o0,type:Vs,data:this.noteToAdd}),this.resetEditor()}catch(o){console.error(o)}})}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=w1({type:s,selectors:[["add-note"]],outputs:{addNote:"addNote"},standalone:!0,features:[C2(y0({matImage:Ya,matColorLens:Ms,matViewList:Xa,matTextSnippet:Ja})),u1],decls:11,vars:3,consts:[["fileInput",""],[1,"add-note-container",3,"submit"],["type","text","placeholder","Title...",3,"input","value"],[1,"icons-container"],[1,"note-icon",3,"name","title"],[1,"colors-container"],["placeholder","How are you today...",3,"input","value"],[1,"img-container"],["type","file",2,"display","none",3,"change"],["type","button",3,"click"],["alt","Uploaded Image Preview",3,"src"],[1,"todos-container"],[1,"todo-item"],["type","button",1,"add-todo-btn",2,"margin-block-end","40px","margin-block-start","20px","border-radius","50%",3,"click"],["type","text",1,"todo-input",3,"change","placeholder"],["type","button",1,"delete-todo-btn",3,"click"],[1,"note-icon",3,"click","name","title"],[1,"color-item",3,"style","selected"],[1,"color-item",3,"click"]],template:function(o,c){if(o&1&&(N(0,"form",1),e1("submit",function(n){return c.handleAddNote(n)}),N(1,"input",2),e1("input",function(n){return c.setTitle(n)}),F(),g2(2,Uz,1,1)(3,$z,6,1)(4,Wz,5,0),N(5,"div",3),$1(6,Kz,1,2,"ng-icon",4,R2),F(),N(8,"button"),L1(9,"Keep"),F(),g2(10,Yz,3,0,"ul",5),F()),o&2){let r;q(),g1("value",c.title||null),q(),l2(2,(r=c.type)==="txt"?2:r==="img"?3:r==="todo"?4:-1),q(4),G1(c.editorIcons),q(4),l2(10,c.isColorPickerOpen?10:-1)}},dependencies:[D3,P3,I3,le,B0],styles:[".add-note-container[_ngcontent-%COMP%]{outline:1px solid #585858;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:relative;border-radius:5px;color:#fff;display:grid;margin:auto;min-width:20%;max-width:600px;height:fit-content;margin-block-end:20px;margin-block-start:10px}.add-note-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-size:24px;font-weight:500}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#3b3e41;padding:15px 0 10px 10px;border-radius:5px 5px 0 0;transition:.2s background-color ease-in;font-weight:600;font-size:1.2em;color:#fff}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#000;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0 0 5px 5px;background-color:#3b3e41;color:#fff;transition:.2s background-color ease-in;padding-inline-start:10px;padding-block-start:10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;resize:none;height:calc(100px + 5vh);border:none;font-size:1em}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:16px;font-weight:400}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{color:#000;outline:none;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;outline:1px solid rgba(255,255,255,.123);padding:5px 30px;background:#33333369;justify-self:start;cursor:pointer;border:none;font-size:1rem;width:50px;height:auto;display:flex;align-items:center;justify-content:center;border-radius:5px;color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;opacity:.7;background-color:#fff}.icons-container[_ngcontent-%COMP%]{display:flex;padding:2px 5px 5px;outline:1px solid rgba(255,255,255,.123);border-radius:5px;position:absolute;bottom:10px;left:10px;gap:5px}.icons-container[_ngcontent-%COMP%]   .note-icon[_ngcontent-%COMP%]{font-size:1.5rem}.img-container[_ngcontent-%COMP%]{position:relative;width:100%;height:calc(100px + 5vh);background:#3b3e41;display:flex;align-items:center;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:80%;height:100%}.img-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;width:fit-content;top:10px;left:10px;padding:5px;height:30px}.todos-container[_ngcontent-%COMP%]{padding-inline-start:10px;padding-block-start:5px;background:#3b3e41;padding:inline;min-height:calc(100px + 5vh);display:flex;flex-direction:column}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{padding-inline-end:10px;display:flex;align-items:center}.todos-container[_ngcontent-%COMP%]   .add-todo-btn[_ngcontent-%COMP%]{position:relative;margin-inline-start:10px;margin-block-start:90%;padding:0;width:20px;height:20px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]{background-color:transparent;padding:0;font-weight:100;font-size:14px;border-bottom:1px solid rgba(255,255,255,.123);line-height:5px;color:#ffffffa6;width:100%;padding-block:10px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]::placeholder{font-size:1rem;font-weight:100;font-size:14px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]:focus{background-color:transparent;color:#fff}.delete-todo-btn[_ngcontent-%COMP%]{position:absolute;right:10px;font-family:cursive;outline:1px solid rgba(255,255,255,.123);background-color:#33333369;color:#fff;height:20px;width:20px;display:flex;align-items:end;justify-content:center;border-radius:50%}.delete-todo-btn[_ngcontent-%COMP%]:hover{color:#f08080;color:#000;opacity:.7;background-color:#fff;cursor:pointer}.colors-container[_ngcontent-%COMP%]{padding:5px;position:absolute;display:flex;gap:5px;left:135px;border-radius:5px;bottom:10px}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{transition:scale .1s;cursor:pointer;width:22px;height:22px;border-radius:50%}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.colors-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(110%);scale:1.2}",".color-picker-container[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:39px;display:grid;gap:4px;padding:5px 15px;border-radius:30px;grid-template-columns:repeat(6,1fr);pointer-events:none;opacity:0;box-shadow:#0000000d 0 0 0 1px}.color-picker-container.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1;background:#ffffff73}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px;border-radius:50%;width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{cursor:pointer}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(85%)}.color-picker-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%], .color-picker-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{outline:2px solid rgba(0,0,0,.452)}"]})}return s})();var Ul;try{Ul=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ul=!1}var ie=(()=>{let t=class t{constructor(o){this._platformId=o,this.isBrowser=this._platformId?E9(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ul)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(c){return new(c||t)(Y(J2))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var ae;function Jz(){if(ae==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ae=!0}))}finally{ae=ae||!1}return ae}function ql(s){return Jz()?s:!!s.capture}function H8(s){return s.composedPath?s.composedPath()[0]:s.target}function L8(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function $l(s){return Array.isArray(s)?s:[s]}function Gl(s){return s instanceof x2?s.nativeElement:s}var B8=new Set,i5,Xz=(()=>{let t=class t{constructor(o,c){this._platform=o,this._nonce=c,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ex}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&tx(o,this._nonce),this._matchMedia(o)}};t.\u0275fac=function(c){return new(c||t)(Y(ie),Y(Dt,8))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function tx(s,t){if(!B8.has(s))try{i5||(i5=document.createElement("style"),t&&i5.setAttribute("nonce",t),i5.setAttribute("type","text/css"),document.head.appendChild(i5)),i5.sheet&&(i5.sheet.insertRule(`@media ${s} {body{ }}`,0),B8.add(s))}catch(e){console.error(e)}}function ex(s){return{matches:s==="all"||s==="",media:s,addListener:()=>{},removeListener:()=>{}}}var A8=(()=>{let t=class t{constructor(o,c){this._mediaMatcher=o,this._zone=c,this._queries=new Map,this._destroySubject=new _2}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return _8($l(o)).some(r=>this._registerQuery(r).mql.matches)}observe(o){let r=_8($l(o)).map(a=>this._registerQuery(a).observable),n=u5(r);return n=Re(n.pipe(f0(1)),n.pipe(d9(1),be(0))),n.pipe(v1(a=>{let h={matches:!1,breakpoints:{}};return a.forEach(({matches:v,query:d})=>{h.matches=h.matches||v,h.breakpoints[d]=v}),h}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let c=this._mediaMatcher.matchMedia(o),n={observable:new ho(a=>{let h=v=>this._zone.run(()=>a.next(v));return c.addListener(h),()=>{c.removeListener(h)}}).pipe(ke(c),v1(({matches:a})=>({query:o,matches:a})),Ee(this._destroySubject)),mql:c};return this._queries.set(o,n),n}};t.\u0275fac=function(c){return new(c||t)(Y(Xz),Y(I1))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function _8(s){return s.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function b8(s){return s.buttons===0||s.detail===0}function k8(s){let t=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var h5=function(s){return s[s.NONE=0]="NONE",s[s.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",s[s.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",s}(h5||{}),S8="cdk-high-contrast-black-on-white",R8="cdk-high-contrast-white-on-black",Wl="cdk-high-contrast-active",E8=(()=>{let t=class t{constructor(o,c){this._platform=o,this._document=c,this._breakpointSubscription=I(A8).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return h5.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let c=this._document.defaultView||window,r=c&&c.getComputedStyle?c.getComputedStyle(o):null,n=(r&&r.backgroundColor||"").replace(/ /g,"");switch(o.remove(),n){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return h5.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return h5.BLACK_ON_WHITE}return h5.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(Wl,S8,R8),this._hasCheckedHighContrastMode=!0;let c=this.getHighContrastMode();c===h5.BLACK_ON_WHITE?o.add(Wl,S8):c===h5.WHITE_ON_BLACK&&o.add(Wl,R8)}}};t.\u0275fac=function(c){return new(c||t)(Y(ie),Y(N1))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var Kl=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({});let s=t;return s})();function cx(){return!0}var rx=new c1("mat-sanity-checks",{providedIn:"root",factory:cx}),F8=(()=>{let t=class t{constructor(o,c,r){this._sanityChecks=c,this._document=r,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return L8()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};t.\u0275fac=function(c){return new(c||t)(Y(E8),Y(rx,8),Y(N1))},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({imports:[Kl,Kl]});let s=t;return s})();var y2=function(s){return s[s.FADING_IN=0]="FADING_IN",s[s.VISIBLE=1]="VISIBLE",s[s.FADING_OUT=2]="FADING_OUT",s[s.HIDDEN=3]="HIDDEN",s}(y2||{}),Ql=class{constructor(t,e,o,c=!1){this._renderer=t,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=c,this.state=y2.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},T8=ql({passive:!0,capture:!0}),Yl=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=H8(t);e&&this._events.get(t.type)?.forEach((o,c)=>{(c===e||c.contains(e))&&o.forEach(r=>r.handleEvent(t))})}}addHandler(t,e,o,c){let r=this._events.get(e);if(r){let n=r.get(o);n?n.add(c):r.set(o,new Set([c]))}else this._events.set(e,new Map([[o,new Set([c])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,T8)})}removeHandler(t,e,o){let c=this._events.get(t);if(!c)return;let r=c.get(e);r&&(r.delete(o),r.size===0&&c.delete(e),c.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,T8)))}},I8={enterDuration:225,exitDuration:150},nx=800,P8=ql({passive:!0,capture:!0}),D8=["mousedown","touchstart"],O8=["mouseup","mouseleave","touchend","touchcancel"],he=class he{constructor(t,e,o,c){this._target=t,this._ngZone=e,this._platform=c,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,c.isBrowser&&(this._containerElement=Gl(o))}fadeInRipple(t,e,o={}){let c=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=k(k({},I8),o.animation);o.centered&&(t=c.left+c.width/2,e=c.top+c.height/2);let n=o.radius||lx(t,e,c),a=t-c.left,h=e-c.top,v=r.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-n}px`,d.style.top=`${h-n}px`,d.style.height=`${n*2}px`,d.style.width=`${n*2}px`,o.color!=null&&(d.style.backgroundColor=o.color),d.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),z=u.transitionProperty,y=u.transitionDuration,A=z==="none"||y==="0s"||y==="0s, 0s"||c.width===0&&c.height===0,R=new Ql(this,d,o,A);d.style.transform="scale3d(1, 1, 1)",R.state=y2.FADING_IN,o.persistent||(this._mostRecentTransientRipple=R);let B=null;return!A&&(v||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let O=()=>this._finishRippleTransition(R),Z=()=>this._destroyRipple(R);d.addEventListener("transitionend",O),d.addEventListener("transitioncancel",Z),B={onTransitionEnd:O,onTransitionCancel:Z}}),this._activeRipples.set(R,B),(A||!v)&&this._finishRippleTransition(R),R}fadeOutRipple(t){if(t.state===y2.FADING_OUT||t.state===y2.HIDDEN)return;let e=t.element,o=k(k({},I8),t.config.animation);e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",t.state=y2.FADING_OUT,(t._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Gl(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,D8.forEach(o=>{he._eventManager.addHandler(this._ngZone,o,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{O8.forEach(e=>{this._triggerElement.addEventListener(e,this,P8)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===y2.FADING_IN?this._startFadeOutTransition(t):t.state===y2.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:o}=t.config;t.state=y2.VISIBLE,!o&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=y2.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=b8(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+nx;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!k8(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===y2.VISIBLE||t.config.terminateOnPointerUp&&t.state===y2.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(D8.forEach(e=>he._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(O8.forEach(e=>t.removeEventListener(e,this,P8)),this._pointerUpEventsRegistered=!1))}};he._eventManager=new Yl;var N8=he;function lx(s,t,e){let o=Math.max(Math.abs(s-e.left),Math.abs(s-e.right)),c=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+c*c)}var j8=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=e2({type:t}),t.\u0275inj=t2({imports:[d2,F8]});let s=t;return s})();var Z8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=w1({type:s,selectors:[["loader"]],standalone:!0,features:[u1],decls:4,vars:0,consts:[[1,"loader-container"],[1,"loader-item","item-1"],[1,"loader-item","item-2"],[1,"loader-item","item-3"]],template:function(o,c){o&1&&(N(0,"article",0),H1(1,"div",1)(2,"div",2)(3,"div",3),F())},dependencies:[j8],styles:[".loader-container[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;margin-top:5vw}.loader-container[_ngcontent-%COMP%]   .loader-item[_ngcontent-%COMP%]{transition:scale .2s ease-in-out;width:50px;height:50px;background-color:#5c6166;border-radius:50%}.loader-container[_ngcontent-%COMP%]   .loader-item.item-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite}.loader-container[_ngcontent-%COMP%]   .loader-item.item-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite;animation-delay:.2s}.loader-container[_ngcontent-%COMP%]   .loader-item.item-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blow 1.5s ease-in-out infinite;animation-delay:.4s}@keyframes _ngcontent-%COMP%_blow{20%{scale:1}50%{scale:1.2}80%{scale:1}}"]})}return s})();var W2=(()=>{class s{notesSubject=new q1([]);loadingSubject=new q1(!1);notes$=this.notesSubject.asObservable();loading$=this.loadingSubject.asObservable();originalNotes=[];loadNotes(){return S(this,null,function*(){this.loadingSubject.next(!0);try{let e=yield T0.loadNotes();if(!e.length){this.setNotes(yield e8.getDemoNotes(16));return}this.setNotes(e)}catch(e){console.error("Error loading notes: ",e)}finally{this.loadingSubject.next(!1)}})}getNoteById(e){return this.notesSubject.value.find(o=>e===o._id)}setNotes(e){this.notesSubject.next(e),this.originalNotes=[...e]}addNote(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{let o=yield T0.addNote(e),c=[...this.notesSubject.value];e._id=o,c.unshift(k({},e)),this.notesSubject.next(c),this.originalNotes.unshift(e)}catch(o){console.error("Error adding note: ",o)}finally{this.loadingSubject.next(!1)}})}updateNote(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{yield T0.updateNote(e._id,e);let o=[...this.notesSubject.value],c=o.findIndex(n=>n._id===e._id);o[c]=k({},e),this.notesSubject.next(o);let r=this.originalNotes.findIndex(n=>n._id===e._id);this.originalNotes[r]=k({},e)}catch(o){console.error("Error updating note: ",o)}finally{this.loadingSubject.next(!1)}})}removeNoteById(e){return S(this,null,function*(){this.loadingSubject.next(!0);try{yield T0.removeNote(e);let o=this.notesSubject.value.filter(c=>c._id!==e);this.notesSubject.next(o),this.originalNotes=this.originalNotes.filter(c=>c._id!==e)}catch(o){console.error("Error removing note: ",o)}finally{this.loadingSubject.next(!1)}})}filterNotes(e){this.loadingSubject.next(!0);let o=e.toLowerCase(),c=this.originalNotes.filter(r=>r.title.toLowerCase().includes(o));this.notesSubject.next(c),setTimeout(()=>{this.loadingSubject.next(!1)},500)}getFilteredNotes(e){return this.originalNotes.filter(o=>o.title.toLowerCase().startsWith(e.toLowerCase()))}static \u0275fac=function(o){return new(o||s)};static \u0275prov=X({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function ax(s,t){return this.note.todos}function ix(s,t){if(s&1&&(N(0,"p",1),L1(1),F()),s&2){let e=G();q(),X2(e.note.txt)}}function hx(s,t){if(s&1){let e=B1();N(0,"li",3)(1,"p"),L1(2),F(),N(3,"input",4),e1("change",function(){let c=m1(e).$implicit,r=G(2);return f1(r.toggleIsDone(c._id))}),F()()}if(s&2){let e=t.$implicit;q(),M2(e.isDone?"done":"active"),q(),X2(e.content),q(),g1("checked",e.isDone)}}function vx(s,t){if(s&1){let e=B1();N(0,"ul",2),e1("click",function(c){m1(e);let r=G();return f1(r.handleEventClick(c))}),$1(1,hx,4,4,"li",3,ax,!0),F()}if(s&2){let e=G();q(),G1(e.note.todos)}}function gx(s,t){if(s&1&&H1(0,"img",5),s&2){let e=G();g1("src",e.note.imgUrl,x5)}}var U8=(()=>{class s{noteService;note;constructor(e){this.noteService=e}toggleIsDone(e){return S(this,null,function*(){if(!this.note.todos)return;let o=this.note.todos?.findIndex(c=>c._id===e);this.note.todos[o].isDone=!this.note.todos[o].isDone,yield this.noteService.updateNote(this.note)})}handleEventClick(e){e.stopPropagation()}static \u0275fac=function(o){return new(o||s)(i1(W2))};static \u0275cmp=w1({type:s,selectors:[["dynamic-note"]],inputs:{note:"note"},standalone:!0,features:[u1],decls:7,vars:3,consts:[[2,"position","absolute","bottom","6.5px","right","5px","color","#333"],[2,"margin-top","5px"],[1,"todos-container","flex","flex-col",3,"click"],[1,"todo-item"],["type","checkbox",3,"change","checked"],["alt","img",3,"src"]],template:function(o,c){if(o&1&&(N(0,"h2"),L1(1),F(),g2(2,ix,2,1)(3,vx,3,0)(4,gx,1,1),N(5,"p",0),L1(6),F()),o&2){let r;q(),X2(c.note.title),q(),l2(2,(r=c.note.type)==="txt"?2:r==="todo"?3:r==="img"?4:-1),q(4),X2(c.note.createdAt)}},dependencies:[d2],styles:['@charset "UTF-8";img[_ngcontent-%COMP%]{margin-block-start:10px;width:100%;border-radius:5px;object-fit:cover;max-height:220px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}.todos-container[_ngcontent-%COMP%]{border-radius:5px;margin-block-start:10px;margin-block-end:10px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;padding:5px;background-color:#ffffff4b;display:grid;gap:5px}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{text-decoration:line-through}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:25px;margin-inline-end:5px}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}']})}return s})();var dx=s=>({background:s});function wx(s,t){if(s&1){let e=B1();N(0,"div",3),e1("click",function(){let c=m1(e).$implicit,r=G(2);return f1(r.displayNoteEditor(c._id))}),H1(1,"dynamic-note",4),N(2,"note-bottom-actions",5),e1("noteAction",function(c){m1(e);let r=G(2);return f1(r.onNoteAction(c))}),F(),N(3,"color-picker",6),e1("selectedColor",function(c){m1(e);let r=G(2);return f1(r.onNoteAction(c))}),F()()}if(s&2){let e=t.$implicit,o=G(2);M0("fly-animation",(o.selectedNote==null?null:o.selectedNote._id)===e._id),g1("ngStyle",a2(9,dx,e.color)),q(),g1("note",e),q(),g1("noteId",e._id),q(),g1("noteId",e._id)("noteColor",e.color)("selectedNote",o.selectedNote)("isColorPickerOpen",o.isColorPickerOpen)}}function ux(s,t){if(s&1&&(N(0,"section",1),$1(1,wx,4,11,"div",2,R2),F(),H1(3,"router-outlet")),s&2){let e=G();q(),G1(e.notes)}}function px(s,t){s&1&&H1(0,"loader")}var $8=(()=>{class s{notesService;router;cdr;notes;selectedNote;isColorPickerOpen;colorPickerTimeout;isLoadingNotes=!1;subscription;constructor(e,o,c){this.notesService=e,this.router=o,this.cdr=c}ngOnInit(){return S(this,null,function*(){this.isLoadingNotes=!0,this.subscription=this.notesService.notes$.subscribe(e=>{this.notes=e,this.isLoadingNotes=!1,this.cdr.markForCheck()}),yield this.notesService.loadNotes()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getNoteIdxById(e){return this.notes.findIndex(o=>o._id===e)}addUpdateNote(e,o){return S(this,null,function*(){e?yield this.notesService.updateNote(k({},o)):yield this.notesService.addNote(k({},o))})}removeNote(e){return S(this,null,function*(){yield this.notesService.removeNoteById(e)})}duplicateNote(e){return S(this,null,function*(){let o=this.notesService.getNoteById(e);if(!o)return;let c=h1(k({},o),{_id:gt()});yield this.notesService.addNote(c)})}paintNote(e,o){return S(this,null,function*(){let c=this.notesService.getNoteById(o);c&&(yield this.notesService.updateNote(h1(k({},c),{color:e})))})}toggleColorPicker(){this.isColorPickerOpen=!this.isColorPickerOpen,this.isColorPickerOpen&&setTimeout(()=>{this.isColorPickerOpen=!1},2500)}displayNoteEditor(e){this.router.navigate(["notes",e])}onNoteAction(e){return S(this,null,function*(){switch(this.selectedNote=e.noteId?this.notes[this.getNoteIdxById(e.noteId)]:null,e.type){case Vs:yield this.addUpdateNote(e.noteId,e.data);break;case Cs:yield this.removeNote(e.noteId);break;case Hs:yield this.duplicateNote(e.noteId);break;case b5:e.data?yield this.paintNote(e.data,e.noteId):this.toggleColorPicker();break}})}static \u0275fac=function(o){return new(o||s)(i1(W2),i1(i2),i1(t0))};static \u0275cmp=w1({type:s,selectors:[["note-index"]],standalone:!0,features:[u1],decls:3,vars:2,consts:[[3,"addNote"],[1,"notes-layout"],["noteHover","",1,"note-preview",2,"position","relative",3,"ngStyle","fly-animation"],["noteHover","",1,"note-preview",2,"position","relative",3,"click","ngStyle"],[3,"note"],[1,"icons-container",3,"noteAction","noteId"],[3,"selectedColor","noteId","noteColor","selectedNote","isColorPickerOpen"]],template:function(o,c){o&1&&(N(0,"add-note",0),e1("addNote",function(n){return c.onNoteAction(n)}),F(),g2(1,ux,4,0)(2,px,1,0,"loader")),o&2&&(q(),l2(1,c.isLoadingNotes?-1:1),q(),l2(2,c.notes.length?-1:2))},dependencies:[U8,Z8,d2,R9,ci,l8,V8,a8,R5,v4],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]{position:relative;break-inside:avoid;display:flex;flex-direction:column;padding:10px 10px 40px;border-radius:5px;scale:1;transition:filter .3s,transform .3s,scale .2s}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]:before{background-color:linear-gradient(#333,#fff)}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.1;position:absolute;right:0;top:0;width:30px;height:30px;transition:opacity .4s;border:none;background-color:transparent}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00000052;color:#fff;opacity:1;border-radius:0 5px;cursor:pointer}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{position:absolute;bottom:2px;display:flex;transition:opacity .2s ease-in;gap:10px;width:100%;left:0;padding:5px 0;align-items:center;justify-content:center;background-color:#ffffff2c;border-top:1px solid rgba(0,0,0,.267);opacity:0}[_nghost-%COMP%]   .note-preview[_ngcontent-%COMP%]   .icons-container.hovered[_ngcontent-%COMP%]{opacity:1}.note-preview.hovered[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{opacity:1}.notes-layout[_ngcontent-%COMP%]{padding-inline:5px;columns:300px auto;column-gap:10px}.notes-layout[_ngcontent-%COMP%]   .note-preview[_ngcontent-%COMP%]{margin-block-end:10px}@media (max-width: 800px){.notes-layout[_ngcontent-%COMP%]{padding:0}}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"],changeDetection:0})}return s})();var G8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=w1({type:s,selectors:[["App-labels-editor"]],standalone:!0,features:[u1],decls:2,vars:0,template:function(o,c){o&1&&(N(0,"p"),L1(1,"labels-editor works!"),F())},styles:["p[_ngcontent-%COMP%]{color:#fff}"]})}return s})();var W8=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=w1({type:s,selectors:[["app-bin"]],standalone:!0,features:[u1],decls:2,vars:0,template:function(o,c){o&1&&(N(0,"p"),L1(1,"bin works!"),F())},dependencies:[d2],styles:["p[_ngcontent-%COMP%]{color:#fff}"],changeDetection:0})}return s})();function mx(s,t){return this.noteToEdit==null?null:this.noteToEdit.todos}var fx=s=>({background:s});function zx(s,t){if(s&1&&(N(0,"textarea",3),L1(1," "),F()),s&2){let e=G(2);g1("value",e.noteToEdit.txt)}}function xx(s,t){if(s&1&&H1(0,"img",4),s&2){let e=G(2);g1("src",e.noteToEdit.imgUrl,x5)}}function Mx(s,t){if(s&1){let e=B1();N(0,"li",7)(1,"input",8),e1("change",function(c){let r=m1(e).$implicit,n=G(3);return f1(n.setTodoContent(c,r._id))}),F(),N(2,"input",9),e1("change",function(){let c=m1(e).$implicit,r=G(3);return f1(r.toggleIsDone(c._id))}),F()()}if(s&2){let e=t.$implicit;q(),M2(e.isDone?"done":"active"),g1("value",e.content),q(),g1("checked",e.isDone)}}function Cx(s,t){if(s&1&&(N(0,"div",5)(1,"ul",6),$1(2,Mx,3,4,"li",7,mx,!0),F()()),s&2){let e=G(2);q(2),G1(e.noteToEdit.todos)}}function Vx(s,t){if(s&1){let e=B1();N(0,"div",0),e1("click",function(){m1(e);let c=G();return f1(c.closeDialog())}),F(),N(1,"dialog")(2,"form",1),e1("submit",function(c){m1(e);let r=G();return f1(r.onUpdateNote(c))}),H1(3,"input",2),g2(4,zx,2,1,"textarea",3)(5,xx,1,1,"img",4)(6,Cx,4,0,"div",5),N(7,"button"),L1(8,"Keep"),F()()()}if(s&2){let e=G();q(2),Z0(a2(6,fx,e.noteToEdit.color)),q(),g1("value",e.noteToEdit.title),q(),l2(4,e.noteToEdit.type==="txt"?4:-1),q(),l2(5,e.noteToEdit.type==="img"?5:-1),q(),l2(6,e.noteToEdit.type==="todo"?6:-1)}}var K8=(()=>{class s{route;router;noteService;noteToEdit;noteId;constructor(e,o,c){this.route=e,this.router=o,this.noteService=c}ngOnInit(){return S(this,null,function*(){try{this.route.paramMap.subscribe(e=>{this.noteId=e.get("noteId"),this.noteToEdit=this.noteService.getNoteById(this.noteId),this.noteToEdit||this.router.navigate(["notes"])})}catch(e){console.log(e)}})}setTodoContent(e,o){if(!this.noteToEdit.todos)return;let c=this.noteToEdit.todos?.findIndex(r=>r._id===o);this.noteToEdit.todos[c].content=e.target.value,this.noteService.updateNote(this.noteToEdit)}toggleIsDone(e){return S(this,null,function*(){if(!this.noteToEdit.todos)return;let o=this.noteToEdit.todos?.findIndex(c=>c._id===e);this.noteToEdit.todos[o].isDone=!this.noteToEdit.todos[o].isDone,yield this.noteService.updateNote(this.noteToEdit)})}onUpdateNote(e){if(e.preventDefault(),!this.noteToEdit)return;let o=e.target,c=o.elements.namedItem("title"),r=o.elements.namedItem(p4);this.noteToEdit.title=c.value,this.noteToEdit.type===p4&&(this.noteToEdit.txt=r.value),this.noteService.updateNote(this.noteToEdit),this.router.navigate(["notes"])}closeDialog(){this.router.navigate(["notes"])}static \u0275fac=function(o){return new(o||s)(i1(s0),i1(i2),i1(W2))};static \u0275cmp=w1({type:s,selectors:[["App-note-details"]],standalone:!0,features:[u1],decls:1,vars:1,consts:[[1,"backdrop",3,"click"],[1,"add-note-container",3,"submit"],["type","text","placeholder","Title...","name","title",3,"value"],["placeholder"," How are you today...","name","txt",3,"value"],[2,"height","auto","width","100%","object-fit","cover",3,"src"],[1,"todos-layout"],[1,"todos-container","flex","flex-col"],[1,"todo-item"],["type","text","maxlength","30",1,"todo-input",3,"change","value"],["type","checkbox",3,"change","checked"]],template:function(o,c){o&1&&g2(0,Vx,9,8),o&2&&l2(0,c.noteId?0:-1)},dependencies:[D3,P3,I3,le,R5],styles:[".add-note-container[_ngcontent-%COMP%]{outline:1px solid #585858;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;position:relative;border-radius:5px;color:#fff;display:grid;margin:auto;min-width:20%;max-width:600px;height:fit-content;margin-block-end:20px;margin-block-start:10px}.add-note-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-size:24px;font-weight:500}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#3b3e41;padding:15px 0 10px 10px;border-radius:5px 5px 0 0;transition:.2s background-color ease-in;font-weight:600;font-size:1.2em;color:#fff}.add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#000;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:0 0 5px 5px;background-color:#3b3e41;color:#fff;transition:.2s background-color ease-in;padding-inline-start:10px;padding-block-start:10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;resize:none;height:calc(100px + 5vh);border:none;font-size:1em}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:16px;font-weight:400}.add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{color:#000;outline:none;background-color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;outline:1px solid rgba(255,255,255,.123);padding:5px 30px;background:#33333369;justify-self:start;cursor:pointer;border:none;font-size:1rem;width:50px;height:auto;display:flex;align-items:center;justify-content:center;border-radius:5px;color:#fff}.add-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;opacity:.7;background-color:#fff}.icons-container[_ngcontent-%COMP%]{display:flex;padding:2px 5px 5px;outline:1px solid rgba(255,255,255,.123);border-radius:5px;position:absolute;bottom:10px;left:10px;gap:5px}.icons-container[_ngcontent-%COMP%]   .note-icon[_ngcontent-%COMP%]{font-size:1.5rem}.img-container[_ngcontent-%COMP%]{position:relative;width:100%;height:calc(100px + 5vh);background:#3b3e41;display:flex;align-items:center;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:80%;height:100%}.img-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;width:fit-content;top:10px;left:10px;padding:5px;height:30px}.todos-container[_ngcontent-%COMP%]{padding-inline-start:10px;padding-block-start:5px;background:#3b3e41;padding:inline;min-height:calc(100px + 5vh);display:flex;flex-direction:column}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{padding-inline-end:10px;display:flex;align-items:center}.todos-container[_ngcontent-%COMP%]   .add-todo-btn[_ngcontent-%COMP%]{position:relative;margin-inline-start:10px;margin-block-start:90%;padding:0;width:20px;height:20px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]{background-color:transparent;padding:0;font-weight:100;font-size:14px;border-bottom:1px solid rgba(255,255,255,.123);line-height:5px;color:#ffffffa6;width:100%;padding-block:10px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]::placeholder{font-size:1rem;font-weight:100;font-size:14px}.todos-container[_ngcontent-%COMP%]   .todo-input[_ngcontent-%COMP%]:focus{background-color:transparent;color:#fff}.delete-todo-btn[_ngcontent-%COMP%]{position:absolute;right:10px;font-family:cursive;outline:1px solid rgba(255,255,255,.123);background-color:#33333369;color:#fff;height:20px;width:20px;display:flex;align-items:end;justify-content:center;border-radius:50%}.delete-todo-btn[_ngcontent-%COMP%]:hover{color:#f08080;color:#000;opacity:.7;background-color:#fff;cursor:pointer}.colors-container[_ngcontent-%COMP%]{padding:5px;position:absolute;display:flex;gap:5px;left:135px;border-radius:5px;bottom:10px}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{transition:scale .1s;cursor:pointer;width:22px;height:22px;border-radius:50%}.colors-container[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.colors-container[_ngcontent-%COMP%]   .color-item.selected[_ngcontent-%COMP%]{filter:brightness(110%);scale:1.2}",'@charset "UTF-8";img[_ngcontent-%COMP%]{margin-block-start:10px;width:100%;border-radius:5px;object-fit:cover;max-height:220px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}.todos-container[_ngcontent-%COMP%]{border-radius:5px;margin-block-start:10px;margin-block-end:10px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;padding:5px;background-color:#ffffff4b;display:grid;gap:5px}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.todos-container[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{text-decoration:line-through}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:25px;margin-inline-end:5px}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}.todos-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s}','@charset "UTF-8";dialog[_ngcontent-%COMP%]{height:fit-content;z-index:20;inset:0;margin:auto;position:fixed;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;color:#000}dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{outline:1px black solid}dialog[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:gray}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]{height:fit-content;min-width:450px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:fit-content;color:#000;padding:10px;min-height:150px;font-size:20px;font-weight:400;background-color:transparent}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:0 0 5px 5px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;font-size:28px}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000;background-color:transparent}dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder, dialog[_ngcontent-%COMP%]   .add-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#333}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]{padding-inline:10px;color:#000;position:relative;padding-block-end:50px}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:focus{outline:none;border:none}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:before{content:"";box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;grid-column:2;margin:0;transition:background-color .3s,border-color .3s;transform:translateY(-13px)}dialog[_ngcontent-%COMP%]   .todos-layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked:after{content:"\\2713";font-family:cursive;font-size:15px;display:flex;align-items:center;justify-content:center;font-weight:600;color:#20b2aa;position:absolute;width:20px;height:20px;background-color:#fff;border-radius:50%;transition:background-color .3s,border-color .3s;grid-column:2;margin:0;transform:translateY(-13px)}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   .input-todo[_ngcontent-%COMP%]{padding:0}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:90%;border-bottom:none;font-size:16px;font-weight:100;padding-inline-start:10px}dialog[_ngcontent-%COMP%]   .todo-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:transparent;color:#000}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;transition:.2s ease;background:#00000080;z-index:10}@media (max-width: 600px){dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100vw;border-radius:0}dialog[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   .add-note-container[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   textarea[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]{padding-bottom:10%;border-radius:0;overflow:unset;width:97%;height:fit-content}dialog[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]   .add-note-container[_ngcontent-ng-c2654502689][_ngcontent-%COMP%]{border-radius:0}dialog[_ngcontent-ng-c4077960885][_ngcontent-%COMP%]   .todos-layout[_ngcontent-ng-c4077960885][_ngcontent-%COMP%]{width:100vw;border-radius:0;padding-bottom:20px}dialog[_ngcontent-ng-c4077960885][_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;margin:auto}}']})}return s})();var Q8=[{path:"labels",component:G8},{path:"notes",component:$8,children:[{path:":noteId",component:K8}]},{path:"bin",component:W8},{path:o0,redirectTo:"/notes",pathMatch:"full"},{path:"**",redirectTo:"/notes"}];var Hx="@",Lx=(()=>{let t=class t{constructor(o,c,r,n,a){this.doc=o,this.delegate=c,this.zone=r,this.animationType=n,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=I(z9,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-4EX6O4RB.js")).catch(c=>{throw new C1(5300,!1)}).then(({\u0275createEngine:c,\u0275AnimationRendererFactory:r})=>{this._engine=c(this.animationType,this.doc,this.scheduler);let n=new r(this.delegate,this._engine,this.zone);return this.delegate=n,n})}createRenderer(o,c){let r=this.delegate.createRenderer(o,c);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let n=new Jl(r);return c?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let h=a.createRenderer(o,c);n.use(h)}).catch(a=>{n.use(r)}),n}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(c){Oe()},t.\u0275prov=X({token:t,factory:t.\u0275fac});let s=t;return s})(),Jl=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,o,c){this.delegate.insertBefore(t,e,o,c)}removeChild(t,e,o){this.delegate.removeChild(t,e,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,c){this.delegate.setAttribute(t,e,o,c)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,c){this.delegate.setStyle(t,e,o,c)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){this.shouldReplay(e)&&this.replay.push(c=>c.setProperty(t,e,o)),this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.shouldReplay(e)&&this.replay.push(c=>c.listen(t,e,o)),this.delegate.listen(t,e,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(Hx)}};function Y8(s="animations"){return je("NgAsyncAnimations"),x0([{provide:Ne,useFactory:(t,e,o)=>new Lx(t,e,o,s),deps:[N1,Je,I1]},{provide:xo,useValue:s==="noop"?"NoopAnimations":"BrowserAnimations"}])}var J8={providers:[Ua(Q8),ea(),Y8("noop")]};var X8='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"></path></svg>';var tv='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-slot="icon" style="stroke-width:var(--ng-icon__stroke-width, 1.5)"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>';var wt=(()=>{class s{menuOpenSubject=new q1(!0);menuOpen$=this.menuOpenSubject.asObservable();toggleMenu(){this.menuOpenSubject.next(!this.menuOpenSubject.value)}static \u0275fac=function(o){return new(o||s)};static \u0275prov=X({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var ev=(()=>{class s{menuService;noteService;searchTerm$=new _2;loggedInUser={username:""};isMenuOpen=!0;toggleMenuClick=new T1;constructor(e,o){this.menuService=e,this.noteService=o,this.searchTerm$.pipe(be(500)).subscribe(c=>this.noteService.filterNotes(c))}handleToggleMenu(){this.menuService.toggleMenu()}onSearchNotes(e){let o=e.target.value;this.searchTerm$.next(o)}static \u0275fac=function(o){return new(o||s)(i1(wt),i1(W2))};static \u0275cmp=w1({type:s,selectors:[["navbar"]],outputs:{toggleMenuClick:"toggleMenuClick"},standalone:!0,features:[C2([],[y0({heroBars4:X8,heroUserCircle:tv})]),u1],decls:6,vars:1,consts:[["name","heroBars4",1,"hamburger-svg",3,"click"],["type","text","placeholder","Search note...",1,"header-input",3,"input"],[2,"display","flex","align-items","center","gap","5px"],[2,"font-size","15px"],["name","heroUserCircle",1,"hamburger-svg"]],template:function(o,c){o&1&&(N(0,"ng-icon",0),e1("click",function(){return c.handleToggleMenu()}),F(),N(1,"input",1),e1("input",function(n){return c.onSearchNotes(n)}),F(),N(2,"div",2)(3,"p",3),L1(4),F(),H1(5,"ng-icon",4),F()),o&2&&(q(4),X2(c.loggedInUser.username))},dependencies:[B0],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}.header-input[_ngcontent-%COMP%]{color:#fff;outline:1px solid rgba(255,255,255,.2);transition:.2s ease-in;width:40%;min-width:418px;padding:15px 10px;font-size:1rem;background-color:#7788992d;border-radius:5px}.header-input[_ngcontent-%COMP%]::placeholder{color:#ffffff9a;font-weight:100}.header-input[_ngcontent-%COMP%]:focus{color:#000;background-color:#ffffffb6}.header-input[_ngcontent-%COMP%]:focus::placeholder{font-weight:100}.hamburger-svg[_ngcontent-%COMP%]{font-size:30px}","*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"]})}return s})();var sv='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z"></path><path fill-rule="evenodd" d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.133 2.845a.75.75 0 0 1 1.06 0l1.72 1.72 1.72-1.72a.75.75 0 1 1 1.06 1.06l-1.72 1.72 1.72 1.72a.75.75 0 1 1-1.06 1.06L12 15.685l-1.72 1.72a.75.75 0 1 1-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg>';var ov='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M11.097 1.515a.75.75 0 0 1 .589.882L10.666 7.5h4.47l1.079-5.397a.75.75 0 1 1 1.47.294L16.665 7.5h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.2 6h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103h-4.47l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103H3.75a.75.75 0 0 1 0-1.5h3.885l1.2-6H5.25a.75.75 0 0 1 0-1.5h3.885l1.08-5.397a.75.75 0 0 1 .882-.588ZM10.365 9l-1.2 6h4.47l1.2-6h-4.47Z" clip-rule="evenodd"></path></svg>';var cv='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon"><path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"></path></svg>';var yx=s=>({selected:s});function Bx(s,t){if(s&1){let e=B1();N(0,"div",1),e1("click",function(){let c=m1(e).$implicit,r=G();return f1(r.handleRouteSelect(c.route))}),N(1,"p"),L1(2),F(),H1(3,"ng-icon",2),F()}if(s&2){let e=t.$implicit,o=G();g1("ngClass",a2(3,yx,o.selectedRoute===e.route)),q(2),X2(e.label),q(),g1("name",e.svg)}}var rv=(()=>{class s{router;menuService;notesService;noteRef;isMenuOpen=!0;notesLength=0;selectedRoute="notes";links=[{label:"Notes",svg:"heroPencilSolid",route:"notes"},{label:"Labels",svg:"heroHashtagSolid",route:"labels"},{label:"Bin",svg:"heroArchiveBoxXMarkSolid",route:"bin"}];constructor(e,o,c,r){this.router=e,this.menuService=o,this.notesService=c,this.noteRef=r}ngOnInit(){this.notesService.notes$.subscribe(e=>{this.notesLength=e.length,this.links[0].label=`Notes (${this.notesLength})`,this.noteRef.markForCheck()})}handleRouteSelect(e){this.selectedRoute=e,this.router.navigate([e])}static \u0275fac=function(o){return new(o||s)(i1(i2),i1(wt),i1(W2),i1(t0))};static \u0275cmp=w1({type:s,selectors:[["sidebar"]],inputs:{isMenuOpen:"isMenuOpen"},standalone:!0,features:[C2([],[y0({heroPencilSolid:cv,heroHashtagSolid:ov,heroArchiveBoxXMarkSolid:sv})]),u1],decls:2,vars:0,consts:[[1,"sidebar-link",3,"ngClass"],[1,"sidebar-link",3,"click","ngClass"],[3,"name"]],template:function(o,c){o&1&&$1(0,Bx,4,5,"div",0,R2),o&2&&G1(c.links)},dependencies:[d2,Ge,B0],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"],changeDetection:0})}return s})();var nv=(s,t)=>({open:s,closed:t}),_x=(s,t)=>({"open-index":s,"closed-index":t}),lv=(()=>{class s{menuService;title="Google Keep";constructor(e){this.menuService=e}static \u0275fac=function(o){return new(o||s)(i1(wt))};static \u0275cmp=w1({type:s,selectors:[["app-root"]],standalone:!0,features:[u1],decls:12,vars:24,consts:[[1,"app-container","main-layout"],[1,"navbar",3,"ngClass"],[1,"note-index","content-container",3,"ngClass"],[1,"sidebar",3,"ngClass"]],template:function(o,c){o&1&&(N(0,"main",0)(1,"navbar",1),U0(2,"async"),U0(3,"async"),L1(4," >"),F(),N(5,"main",2),U0(6,"async"),U0(7,"async"),H1(8,"router-outlet"),F(),H1(9,"sidebar",3),U0(10,"async"),U0(11,"async"),F()),o&2&&(q(),g1("ngClass",Ze(15,nv,q0(2,3,c.menuService.menuOpen$),!q0(3,5,c.menuService.menuOpen$))),q(4),g1("ngClass",Ze(18,_x,q0(6,7,c.menuService.menuOpen$),!q0(7,9,c.menuService.menuOpen$))),q(4),g1("ngClass",Ze(21,nv,q0(10,11,c.menuService.menuOpen$),!q0(11,13,c.menuService.menuOpen$))))},dependencies:[d2,Ge,b9,ev,rv,R5,v4],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;background-color:#272727;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Arial}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;width:0px}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{border:none;padding-inline-start:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{text-decoration:none}ul[_ngcontent-%COMP%]{list-style:none}svg[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}svg[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:auto 1fr;transition:grid-template-columns .3s ease-in-out;min-height:100vh;z-index:1}.navbar[_ngcontent-%COMP%]{transition:.4s ease-in;color:#fff;z-index:10;position:sticky;top:0;background-color:#2e2e2e;padding-inline-start:10px;padding-inline-end:10px;grid-column:1/-1;display:grid;grid-template-columns:200px 1fr auto;justify-content:space-between;align-items:center;width:100%;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.navbar.closed[_ngcontent-%COMP%]{grid-template-columns:42px 1fr auto}.navbar.closed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem}.sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.068);width:200px;background-color:#2e2e2ef5;color:#fff;position:sticky;top:64px;grid-column:1;grid-row:2;max-height:calc(100vh - 64px);display:flex;flex-direction:column;transition:width .4s ease-in;will-change:width}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{align-items:center;display:grid;padding:10px;grid-template-columns:1fr .1fr}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;transition:font-size .35s ease-in-out;opacity:1;width:fit-content}.sidebar[_ngcontent-%COMP%]   .sidebar-link.selected[_ngcontent-%COMP%]{background-color:#10101065}.sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]{width:44px}.sidebar[_ngcontent-%COMP%]   .sidebar.closed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]{height:41.6px}.sidebar[_ngcontent-%COMP%]   .sidebar-link[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#10101027}.notes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.note-index[_ngcontent-%COMP%]{position:relative;max-width:100%;display:grid;grid-row:2;grid-column:2;height:fit-content;padding:10px;break-inside:avoid;padding-inline-end:15px}.closed-index[_ngcontent-%COMP%]{width:100%}@media (max-width: 800px){.navbar[_ngcontent-%COMP%], .navbar.closed[_ngcontent-%COMP%]{grid-template-columns:44px 1fr auto}.header-input[_ngcontent-%COMP%]{min-width:unset;width:97%}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;grid-template-columns:35px 1fr;will-change:grid-template-columns;transition:grid-template-columns .2s ease-in-out;min-height:100vh;z-index:1}.main-layout[_ngcontent-%COMP%]   .note-index[_ngcontent-%COMP%]{padding-inline-start:20px;padding-inline-end:10px}.closed-index[_ngcontent-%COMP%]{width:100%}.open-index[_ngcontent-%COMP%]{will-change:width}.open-index[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{will-change:width;width:150px}}"]})}return s})();X9(lv,J8).catch(s=>console.error(s));
